import{r as o,j as e,a as se}from"./index-CZpWobtf.js";import{c as ce,B as T,p as De,C as Ne,b as z,S as ie,I as B,a as Oe,X as ee,r as ve,D as oe,d as de,e as xe,f as me,g as ue,u as Me,s as ne,v as G,t as $}from"./useInfluencerData-ZdeQT_Uw.js";import{B as pe,E as V,P as Ie,A as Ee,a as Le,b as _e,M as Pe,R as be,c as Re,T as Fe}from"./MemoEditModal-CgFunm-N.js";import{M as Te,P as fe}from"./plus-DhlVh5hY.js";import{u as Ae}from"./useQuery-B2KYtFwh.js";const Be=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],Ue=ce("phone",Be);const ze=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],ge=ce("trash-2",ze);const $e=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Qe=ce("user",$e);function Z({options:s,selected:n,onChange:u,placeholder:f="선택",className:g}){const[d,l]=o.useState(!1),j=o.useRef(null);o.useEffect(()=>{function a(w){j.current&&!j.current.contains(w.target)&&l(!1)}return document.addEventListener("mousedown",a),()=>document.removeEventListener("mousedown",a)},[]);const p=a=>{n.includes(a)?u(n.filter(w=>w!==a)):u([...n,a])};return e.jsxs("div",{ref:j,className:z("relative",g),children:[e.jsxs(T,{variant:"outline",onClick:()=>l(!d),className:"w-full justify-between bg-admin-card border-admin-border text-white hover:bg-admin-card/80 hover:text-white",children:[e.jsx("span",{className:"truncate",children:n.length>0?`${n.length}개 선택됨`:f}),e.jsx(De,{className:"ml-2 h-4 w-4 shrink-0"})]}),d&&e.jsxs("div",{className:"absolute z-50 mt-2 w-full rounded-md border border-admin-border bg-admin-card shadow-lg",children:[e.jsxs("div",{className:"flex gap-2 border-b border-admin-border p-2",children:[e.jsx(T,{size:"sm",variant:"ghost",onClick:()=>u(s),className:"flex-1 text-xs text-admin-text hover:text-white hover:bg-admin-bg",children:"전체 선택"}),e.jsx(T,{size:"sm",variant:"ghost",onClick:()=>u([]),className:"flex-1 text-xs text-admin-text hover:text-white hover:bg-admin-bg",children:"전체 해제"})]}),e.jsx("div",{className:"max-h-60 overflow-y-auto p-2",children:s.map(a=>e.jsxs("button",{onClick:()=>p(a),className:"flex w-full items-center gap-2 rounded px-2 py-1.5 text-sm text-white hover:bg-admin-bg transition-colors",children:[e.jsx("div",{className:z("flex h-4 w-4 items-center justify-center rounded border",n.includes(a)?"bg-admin-accent border-admin-accent":"border-admin-border"),children:n.includes(a)&&e.jsx(Ne,{className:"h-3 w-3 text-admin-bg"})}),e.jsx("span",{className:"truncate",children:a})]},a))})]})]})}const ye=["No.","제품명","업체명","상태","제품 카테고리","공식몰","샘플피드","제안서","담당자","담당자 전화","담당자 이메일","핏한 인플루언서","소싱메모","제품메모"],ke=["_rowIndex"],te=["진행 전","진행 중","답장없음","불가","컨텍"],je={"진행 전":"bg-gray-500/20 text-gray-400 border-gray-500/40","진행 중":"bg-blue-500/20 text-blue-400 border-blue-500/40",답장없음:"bg-yellow-500/20 text-yellow-400 border-yellow-500/40",불가:"bg-red-500/20 text-red-400 border-red-500/40",컨텍:"bg-green-500/20 text-green-400 border-green-500/40"},we=["식품","올리브유","유아","식기","간식","텀블러","요리","주방","청소기","두유제조기","청소","세정제","육수","에어프라이어","살림","인테리어","정리","육아","유아식기","육아템","예쁜육아템"],K={"No.":{width:48,align:"center",type:"text",label:"No"},제품명:{width:180,align:"left",type:"editable-text",label:"제품명",editable:!0},업체명:{width:160,align:"left",type:"combobox",label:"업체명",editable:!0},상태:{width:80,align:"center",type:"status",label:"상태",editable:!0},"제품 카테고리":{width:140,align:"left",type:"tag-combobox",label:"카테고리",editable:!0},공식몰:{width:160,align:"left",type:"editable-link",label:"공식몰",editable:!0},샘플피드:{width:160,align:"left",type:"editable-link",label:"샘플",editable:!0},제안서:{width:160,align:"left",type:"editable-link",label:"제안서",editable:!0},담당자:{width:80,align:"left",type:"editable-text",label:"담당자",editable:!0},"담당자 전화":{width:120,align:"left",type:"editable-text",label:"전화",editable:!0},"담당자 이메일":{width:160,align:"left",type:"editable-text",label:"이메일",editable:!0},"핏한 인플루언서":{width:200,align:"left",type:"influencers",label:"인플루언서"},소싱메모:{width:200,align:"left",type:"editable-memo",label:"소싱메모",editable:!0},제품메모:{width:200,align:"left",type:"editable-memo",label:"제품메모",editable:!0}},W=4;function qe({searchQuery:s,onSearchChange:n,selectedStatuses:u,onStatusesChange:f,selectedCategories:g,onCategoriesChange:d,resultCount:l,totalCount:j}){const[p,a]=o.useState(s),[w,E]=o.useState(!1);o.useEffect(()=>{const S=setTimeout(()=>n(p),250);return()=>clearTimeout(S)},[p,n]);const y=u.length+g.length,D=()=>{f([]),d([])};return e.jsxs("div",{children:[e.jsxs("div",{className:"md:hidden",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(ie,{className:"absolute left-2.5 top-1/2 -translate-y-1/2 h-3.5 w-3.5 text-admin-text"}),e.jsx(B,{type:"text",placeholder:"제품명 또는 업체명 검색...",value:p,onChange:S=>a(S.target.value),className:"pl-8 h-8 text-[13px] bg-admin-card border-admin-border text-white placeholder:text-admin-text"})]}),e.jsxs("button",{onClick:()=>E(!w),className:`relative flex items-center justify-center h-8 w-8 rounded-md border shrink-0 transition-colors ${w||y>0?"bg-admin-accent/15 border-admin-accent/40 text-admin-accent":"bg-admin-card border-admin-border text-admin-text"}`,children:[e.jsx(Oe,{className:"h-3.5 w-3.5"}),y>0&&e.jsx("span",{className:"absolute -top-1.5 -right-1.5 min-w-[16px] h-4 flex items-center justify-center rounded-full bg-admin-accent text-[10px] font-bold text-admin-bg px-1",children:y})]}),e.jsxs("span",{className:"text-[11px] text-admin-text tabular-nums shrink-0",children:[e.jsx("span",{className:"text-white font-semibold",children:l}),"/",j]})]}),w&&e.jsxs("div",{className:"mt-2 flex flex-col gap-2",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(Z,{options:[...te],selected:u,onChange:f,placeholder:"상태"}),e.jsx(Z,{options:[...we],selected:g,onChange:d,placeholder:"카테고리"})]}),y>0&&e.jsxs("button",{onClick:D,className:"flex items-center gap-1 text-[11px] text-admin-text hover:text-admin-accent transition-colors self-end",children:[e.jsx(ee,{className:"h-3 w-3"}),"필터 초기화"]})]})]}),e.jsxs("div",{className:"hidden md:block space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[e.jsxs("div",{className:"relative col-span-2",children:[e.jsx(ie,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-admin-text"}),e.jsx(B,{type:"text",placeholder:"제품명 또는 업체명 검색...",value:p,onChange:S=>a(S.target.value),className:"pl-10 bg-admin-card border-admin-border text-white placeholder:text-admin-text"})]}),e.jsx(Z,{options:[...te],selected:u,onChange:f,placeholder:"상태 선택"}),e.jsx(Z,{options:[...we],selected:g,onChange:d,placeholder:"카테고리 선택"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-admin-text",children:[e.jsx("span",{className:"text-white font-semibold",children:l})," / ",j," 건"]}),y>0&&e.jsxs("button",{onClick:D,className:"flex items-center gap-1 text-xs text-admin-text hover:text-admin-accent transition-colors",children:[e.jsx(ee,{className:"h-3 w-3"})," 필터 초기화"]})]})]})]})}function He({value:s,options:n,onChange:u,onCommit:f,onCancel:g,placeholder:d}){const[l,j]=o.useState(-1),[p,a]=o.useState(null),w=o.useRef(null),E=o.useRef(null),y=o.useMemo(()=>{if(!s.trim())return n.slice(0,8);const b=s.toLowerCase();return n.filter(v=>v.toLowerCase().includes(b)).slice(0,8)},[s,n]),D=y.some(b=>b===s);o.useEffect(()=>{j(-1)},[s]),o.useEffect(()=>{l>=0&&E.current&&E.current.children[l]?.scrollIntoView({block:"nearest"})},[l]);const S=o.useCallback(()=>{if(!w.current)return;const b=w.current.getBoundingClientRect();a({top:b.bottom+2,left:b.left,width:b.width})},[]);o.useEffect(()=>(S(),window.addEventListener("scroll",S,!0),window.addEventListener("resize",S),()=>{window.removeEventListener("scroll",S,!0),window.removeEventListener("resize",S)}),[S]);const N=b=>{b.key==="ArrowDown"?(b.preventDefault(),j(v=>Math.min(v+1,y.length-1))):b.key==="ArrowUp"?(b.preventDefault(),j(v=>Math.max(v-1,-1))):b.key==="Enter"?(b.preventDefault(),l>=0&&l<y.length?f(y[l]):f(s)):b.key==="Escape"&&g()},I=y.length>0&&p;return e.jsxs(e.Fragment,{children:[e.jsx("input",{ref:w,type:"text",value:s,onChange:b=>u(b.target.value),onKeyDown:N,onBlur:()=>{setTimeout(()=>f(s),150)},autoFocus:!0,placeholder:d,className:"w-full px-1.5 py-0.5 bg-admin-bg border border-admin-accent rounded text-white text-[13px] focus:outline-none"}),I&&ve.createPortal(e.jsxs("ul",{ref:E,"data-combobox-list":!0,style:{position:"fixed",top:p.top,left:p.left,width:p.width},className:"max-h-[180px] overflow-y-auto bg-[#1a1a2e] border border-admin-border rounded shadow-lg z-[9999]",children:[y.map((b,v)=>{const P=v===l;return e.jsx("li",{children:e.jsx("button",{type:"button",tabIndex:-1,onMouseDown:R=>{R.preventDefault(),f(b)},onMouseEnter:()=>j(v),className:z("w-full text-left px-2 py-1.5 text-[13px] transition-colors",P?"bg-admin-accent/20 text-white":"text-white/80 hover:bg-white/5"),children:Ke(b,s)})},b)}),s.trim()&&!D&&e.jsx("li",{className:"border-t border-admin-border/40",children:e.jsxs("button",{type:"button",tabIndex:-1,onMouseDown:b=>{b.preventDefault(),f(s)},className:"w-full text-left px-2 py-1.5 text-[13px] text-admin-accent/70 hover:bg-white/5",children:["“",e.jsx("span",{className:"text-white",children:s}),"” 새로 추가"]})})]}),document.body)]})}function Ke(s,n){if(!n.trim())return s;const u=s.toLowerCase().indexOf(n.toLowerCase());return u===-1?s:e.jsxs(e.Fragment,{children:[s.slice(0,u),e.jsx("span",{className:"text-admin-accent font-medium",children:s.slice(u,u+n.length)}),s.slice(u+n.length)]})}function Ve({value:s,options:n,onCommit:u,onCancel:f}){const[g,d]=o.useState(()=>s?s.split(",").map(x=>x.trim()).filter(Boolean):[]),[l,j]=o.useState(""),[p,a]=o.useState(-1),[w,E]=o.useState(null),y=o.useRef(null),D=o.useRef(null),S=o.useMemo(()=>{const x=l.toLowerCase();return n.filter(C=>!g.includes(C)).filter(C=>!x||C.toLowerCase().includes(x)).slice(0,8)},[l,n,g]),N=S.some(x=>x===l);o.useEffect(()=>{a(-1)},[l]),o.useEffect(()=>{p>=0&&D.current&&D.current.children[p]?.scrollIntoView({block:"nearest"})},[p]);const I=o.useCallback(()=>{if(!y.current)return;const x=y.current.getBoundingClientRect();E({top:x.bottom+2,left:x.left,width:Math.max(x.width,180)})},[]);o.useEffect(()=>(I(),window.addEventListener("scroll",I,!0),window.addEventListener("resize",I),()=>{window.removeEventListener("scroll",I,!0),window.removeEventListener("resize",I)}),[I,g]);const b=o.useCallback(x=>{u(x.join(", "))},[u]),v=x=>{const C=x.trim();if(!C||g.includes(C))return;const _=[...g,C];d(_),j(""),y.current?.focus()},P=x=>{d(C=>C.filter(_=>_!==x))},R=x=>{x.key==="ArrowDown"?(x.preventDefault(),a(C=>Math.min(C+1,S.length-1))):x.key==="ArrowUp"?(x.preventDefault(),a(C=>Math.max(C-1,-1))):x.key==="Enter"?(x.preventDefault(),p>=0&&p<S.length?v(S[p]):l.trim()?v(l):b(g)):x.key==="Escape"?f():x.key==="Backspace"&&!l&&g.length>0?d(C=>C.slice(0,-1)):(x.key===","||x.key==="Tab")&&l.trim()&&(x.preventDefault(),v(l))},Q=S.length>0&&w;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-1 w-full px-1 py-0.5 bg-admin-bg border border-admin-accent rounded min-h-[26px] cursor-text",onClick:()=>y.current?.focus(),children:[g.map(x=>e.jsxs("span",{className:"inline-flex items-center gap-0.5 text-[11px] px-1.5 py-0 rounded bg-purple-500/15 text-purple-400 border border-purple-500/30",children:[x,e.jsx("button",{type:"button",onClick:C=>{C.stopPropagation(),P(x)},className:"hover:text-white",children:e.jsx(ee,{className:"h-2.5 w-2.5"})})]},x)),e.jsx("input",{ref:y,type:"text",value:l,onChange:x=>j(x.target.value),onKeyDown:R,onBlur:()=>{setTimeout(()=>{const x=l.trim()?[...g,l.trim()]:g;b(x)},150)},autoFocus:!0,placeholder:g.length===0?"카테고리 입력...":"",className:"flex-1 min-w-[60px] bg-transparent text-white text-[13px] focus:outline-none"})]}),Q&&ve.createPortal(e.jsxs("ul",{ref:D,style:{position:"fixed",top:w.top,left:w.left,width:w.width},className:"max-h-[180px] overflow-y-auto bg-[#1a1a2e] border border-admin-border rounded shadow-lg z-[9999]",children:[S.map((x,C)=>e.jsx("li",{children:e.jsx("button",{type:"button",tabIndex:-1,onMouseDown:_=>{_.preventDefault(),v(x)},onMouseEnter:()=>a(C),className:z("w-full text-left px-2 py-1.5 text-[13px] transition-colors",C===p?"bg-admin-accent/20 text-white":"text-white/80 hover:bg-white/5"),children:We(x,l)})},x)),l.trim()&&!N&&e.jsx("li",{className:"border-t border-admin-border/40",children:e.jsxs("button",{type:"button",tabIndex:-1,onMouseDown:x=>{x.preventDefault(),v(l)},className:"w-full text-left px-2 py-1.5 text-[13px] text-admin-accent/70 hover:bg-white/5",children:["“",e.jsx("span",{className:"text-white",children:l}),"” 새로 추가"]})})]}),document.body)]})}function We(s,n){if(!n.trim())return s;const u=s.toLowerCase().indexOf(n.toLowerCase());return u===-1?s:e.jsxs(e.Fragment,{children:[s.slice(0,u),e.jsx("span",{className:"text-admin-accent font-medium",children:s.slice(u,u+n.length)}),s.slice(u+n.length)]})}function Ge(s){const n=s.reduce((d,l)=>d+(K[l]?.width||120),0)+48,u={},f=[];let g=0;for(let d=0;d<s.length;d++){const l=K[s[d]]?.width||120,j=l/n*100;u[s[d]]=`${j}%`,d<W&&(f.push(`${g/n*100}%`),g+=l)}return u.__delete=`${48/n*100}%`,{total:n,pctWidths:u,stickyOffsets:f}}function Ye({data:s,headers:n,visibleColumns:u,onCellEdit:f,onMemoEdit:g,onInfluencerEdit:d,onDelete:l,stickyTopOffset:j=0}){const[p,a]=o.useState({column:null,direction:null}),[w,E]=o.useState(null),[y,D]=o.useState(""),S=o.useMemo(()=>ye.filter(t=>u.includes(t)&&!ke.includes(t)),[u]),N=o.useMemo(()=>Ge(S),[S]),I=o.useMemo(()=>!p.column||!p.direction?s:[...s].sort((t,c)=>{const m=String(t[p.column]||""),r=String(c[p.column]||""),k=parseFloat(m.replace(/,/g,"")),L=parseFloat(r.replace(/,/g,""));return!isNaN(k)&&!isNaN(L)?p.direction==="asc"?k-L:L-k:p.direction==="asc"?m.localeCompare(r,"ko"):r.localeCompare(m,"ko")}),[s,p]),b=t=>{a(c=>c.column!==t?{column:t,direction:"asc"}:c.direction==="asc"?{column:t,direction:"desc"}:{column:null,direction:null})},v=(t,c,m,r)=>{const k=K[c];k&&(k.type==="editable-memo"?g(t,m,r,c):k.type==="influencers"?d(t,m,r):k.type==="tags"||k.type==="tag-combobox"?(E({rowIndex:t,column:c}),D(m)):(k.type==="editable-text"||k.type==="status"||k.type==="combobox"||k.type==="editable-link")&&(E({rowIndex:t,column:c}),D(m)))},P=(t,c)=>{if(w?.rowIndex===t&&w?.column===c){const m=String(s.find(r=>r._rowIndex===t)?.[c]||"");if(y!==m){const r=n.indexOf(c);r!==-1&&f(t,r,y)}E(null),D("")}},R=(t,c,m)=>{t.key==="Enter"?P(c,m):t.key==="Escape"&&(E(null),D(""))},Q=(t,c,m)=>{const r=String(t[c]||""),k=K[c];if(!k)return r;const L=w?.rowIndex===m&&w?.column===c;if(k.type==="combobox"){if(L){const O=[...new Set(s.map(i=>String(i[c]||"")).filter(Boolean))].sort((i,h)=>i.localeCompare(h,"ko"));return e.jsx(He,{value:y,options:O,onChange:D,onCommit:i=>{const h=String(s.find(M=>M._rowIndex===m)?.[c]||"");if(i!==h){const M=n.indexOf(c);M!==-1&&f(m,M,i)}E(null),D("")},onCancel:()=>{E(null),D("")}})}return e.jsx("button",{onClick:()=>v(m,c,r,String(t.제품명||"")),className:"w-full text-left text-[13px] text-white/90 hover:text-white transition-colors cursor-text",children:r||e.jsx("span",{className:"text-admin-text/40",children:"-"})})}if(k.type==="editable-text")return L?e.jsx("input",{type:"text",value:y,onChange:O=>D(O.target.value),onBlur:()=>P(m,c),onKeyDown:O=>R(O,m,c),autoFocus:!0,className:"w-full px-1.5 py-0.5 bg-admin-bg border border-admin-accent rounded text-white text-[13px] focus:outline-none"}):e.jsx("button",{onClick:()=>v(m,c,r,String(t.제품명||"")),className:"w-full text-left text-[13px] text-white/90 hover:text-white transition-colors cursor-text",children:r||e.jsx("span",{className:"text-admin-text/40",children:"-"})});if(k.type==="status"){if(L)return e.jsxs("select",{value:y,onChange:i=>{D(i.target.value);const h=n.indexOf(c);h!==-1&&f(m,h,i.target.value),E(null),D("")},onBlur:()=>{E(null),D("")},autoFocus:!0,className:"w-full px-1 py-0.5 bg-admin-bg border border-admin-accent rounded text-white text-[13px] focus:outline-none text-center",children:[e.jsx("option",{value:"",children:"-"}),te.map(i=>e.jsx("option",{value:i,children:i},i))]});if(!r||r==="-")return e.jsx("span",{className:"text-admin-text/40",children:"-"});const O=je[r]||"bg-gray-500/20 text-gray-400 border-gray-500/40";return e.jsx("button",{onClick:()=>v(m,c,r,String(t.제품명||"")),children:e.jsx(pe,{variant:"outline",className:z("font-medium text-[11px] px-2 py-0 cursor-pointer",O),children:r})})}if(k.type==="tag-combobox"||k.type==="tags"){if(L){const i=[...new Set(s.flatMap(h=>String(h[c]||"").split(",").map(M=>M.trim()).filter(Boolean)))].sort((h,M)=>h.localeCompare(M,"ko"));return e.jsx(Ve,{value:y,options:i,onCommit:h=>{const M=String(s.find(F=>F._rowIndex===m)?.[c]||"");if(h!==M){const F=n.indexOf(c);F!==-1&&f(m,F,h)}E(null),D("")},onCancel:()=>{E(null),D("")}})}if(!r||r==="-")return e.jsx("button",{onClick:()=>v(m,c,r,String(t.제품명||"")),className:"text-[12px] text-admin-text/40 hover:text-purple-400 transition-colors",children:"+ 카테고리 추가"});const O=r.split(",").map(i=>i.trim()).filter(Boolean);return e.jsx("button",{onClick:()=>v(m,c,r,String(t.제품명||"")),className:"flex flex-wrap gap-1",children:O.map((i,h)=>e.jsx("span",{className:"text-[11px] px-1.5 py-0.5 rounded bg-purple-500/15 text-purple-400 border border-purple-500/30",children:i},h))})}if(k.type==="link")return!r||r==="-"?e.jsx("span",{className:"text-admin-text/40",children:"-"}):e.jsx("a",{href:r,target:"_blank",rel:"noopener noreferrer",className:"text-admin-accent/70 hover:text-admin-accent transition-colors",children:e.jsx(V,{className:"h-3.5 w-3.5 mx-auto"})});if(k.type==="editable-link")return L?e.jsx("input",{type:"text",value:y,onChange:O=>D(O.target.value),onBlur:()=>P(m,c),onKeyDown:O=>R(O,m,c),autoFocus:!0,placeholder:"https://...",className:"w-full px-1.5 py-0.5 bg-admin-bg border border-admin-accent rounded text-white text-[13px] focus:outline-none"}):!r||r==="-"?e.jsx("button",{onClick:()=>v(m,c,r,String(t.제품명||"")),className:"text-[12px] text-admin-text/40 hover:text-white transition-colors",children:"+ URL 추가"}):e.jsxs("div",{className:"flex items-center gap-1.5 min-w-0",children:[e.jsx("button",{onClick:()=>v(m,c,r,String(t.제품명||"")),className:"truncate text-[13px] text-white/70 hover:text-white transition-colors min-w-0",title:r,children:(()=>{try{return new URL(r).hostname.replace("www.","")}catch{return r}})()}),e.jsx("a",{href:r,target:"_blank",rel:"noopener noreferrer",onClick:O=>O.stopPropagation(),className:"shrink-0 text-admin-accent/60 hover:text-admin-accent transition-colors",children:e.jsx(V,{className:"h-3 w-3"})})]});if(k.type==="influencers"){if(!r||r==="-")return e.jsx("button",{onClick:()=>d(m,"",String(t.제품명||"")),className:"text-[12px] text-admin-text/40 hover:text-admin-accent transition-colors",children:"+ 인플루언서 추가"});const O=r.split(",").map(i=>i.trim()).filter(Boolean);return e.jsxs("button",{onClick:()=>d(m,r,String(t.제품명||"")),className:"flex flex-wrap gap-1 text-left",children:[O.slice(0,3).map((i,h)=>e.jsxs("span",{className:"text-[11px] px-1.5 py-0.5 rounded bg-teal-500/15 text-teal-400 border border-teal-500/30",children:["@",i]},h)),O.length>3&&e.jsxs("span",{className:"text-[11px] px-1.5 py-0.5 rounded bg-admin-bg text-admin-text",children:["+",O.length-3]})]})}return k.type==="editable-memo"?e.jsxs("button",{onClick:()=>g(m,r,String(t.제품명||""),c),className:"w-full text-left group/memo relative",children:[e.jsx("span",{className:"block truncate text-[13px] text-white/90 max-w-full",children:r||e.jsx("span",{className:"text-admin-text/40",children:"메모 추가..."})}),e.jsx("span",{className:"absolute top-0 right-0 opacity-0 group-hover/memo:opacity-100 transition-opacity",children:e.jsx(Ie,{className:"h-3 w-3 text-admin-accent"})})]}):e.jsx("span",{className:"text-[13px]",children:r||"-"})},x=({column:t})=>p.column===t?p.direction==="asc"?e.jsx(Le,{className:"h-3 w-3 shrink-0 text-admin-accent"}):e.jsx(_e,{className:"h-3 w-3 shrink-0 text-admin-accent"}):e.jsx(Ee,{className:"h-3 w-3 shrink-0 opacity-0 group-hover/th:opacity-40 transition-opacity"}),C=o.useRef(null),_=o.useRef(null),U=o.useRef(!1),ae=()=>{U.current||(U.current=!0,C.current&&_.current&&(_.current.scrollLeft=C.current.scrollLeft),requestAnimationFrame(()=>{U.current=!1}))},Y=()=>{U.current||(U.current=!0,C.current&&_.current&&(C.current.scrollLeft=_.current.scrollLeft),requestAnimationFrame(()=>{U.current=!1}))},q=e.jsxs("colgroup",{children:[S.map(t=>e.jsx("col",{style:{width:N.pctWidths[t]}},t)),e.jsx("col",{style:{width:N.pctWidths.__delete}})]}),re=()=>e.jsx("div",{className:"md:hidden space-y-3",children:I.map(t=>{const c=String(t.제품명||""),m=String(t.업체명||""),r=String(t.상태||""),k=String(t["제품 카테고리"]||""),L=String(t.공식몰||""),O=String(t.샘플피드||""),i=String(t.제안서||""),h=String(t.담당자||""),M=String(t["담당자 전화"]||""),F=String(t["담당자 이메일"]||""),X=String(t["핏한 인플루언서"]||""),le=String(t.소싱메모||""),Se=String(t.제품메모||""),Ce=je[r]||"bg-gray-500/20 text-gray-400 border-gray-500/40",he=k.split(",").map(A=>A.trim()).filter(Boolean),J=X.split(",").map(A=>A.trim()).filter(Boolean);return e.jsxs("div",{className:"bg-admin-card border border-admin-border rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("span",{className:"text-sm font-medium text-white truncate block",children:c||"-"}),m&&e.jsx("span",{className:"text-[12px] text-admin-text",children:m})]}),e.jsxs("div",{className:"flex items-center gap-1.5 shrink-0",children:[r&&e.jsx(pe,{variant:"outline",className:z("text-[10px] px-1.5 py-0",Ce),children:r}),e.jsx("button",{onClick:()=>l(t._rowIndex,c),className:"p-1 text-admin-text/30 hover:text-red-400 transition-colors",children:e.jsx(ge,{className:"h-3.5 w-3.5"})})]})]}),he.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1 mb-2",children:he.map((A,H)=>e.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-purple-500/15 text-purple-400 border border-purple-500/30",children:A},H))}),e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[L&&e.jsxs("a",{href:L,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-[11px] text-admin-accent/70 hover:text-admin-accent",children:[e.jsx(V,{className:"h-3 w-3"}),"공식몰"]}),O&&e.jsxs("a",{href:O,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-[11px] text-admin-accent/70 hover:text-admin-accent",children:[e.jsx(V,{className:"h-3 w-3"}),"샘플"]}),i&&e.jsxs("a",{href:i,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-[11px] text-admin-accent/70 hover:text-admin-accent",children:[e.jsx(V,{className:"h-3 w-3"}),"제안서"]}),!L&&!O&&!i&&e.jsx("span",{className:"text-[11px] text-admin-text/30",children:"링크 없음"})]}),(h||M||F)&&e.jsxs("div",{className:"flex flex-wrap items-center gap-x-3 gap-y-1 mb-2 text-[11px] text-admin-text",children:[h&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Qe,{className:"h-3 w-3"}),h]}),M&&e.jsxs("a",{href:`tel:${M}`,className:"flex items-center gap-1 hover:text-white",children:[e.jsx(Ue,{className:"h-3 w-3"}),M]}),F&&e.jsxs("a",{href:`mailto:${F}`,className:"flex items-center gap-1 hover:text-white truncate",children:[e.jsx(Te,{className:"h-3 w-3"}),F]})]}),e.jsx("button",{onClick:()=>d(t._rowIndex,X,c),className:"flex flex-wrap items-center gap-1 mb-2 w-full text-left",children:J.length>0?e.jsxs(e.Fragment,{children:[J.slice(0,3).map((A,H)=>e.jsxs("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-teal-500/15 text-teal-400 border border-teal-500/30",children:["@",A]},H)),J.length>3&&e.jsxs("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-admin-bg text-admin-text",children:["+",J.length-3]})]}):e.jsx("span",{className:"text-[11px] text-admin-text/40",children:"+ 인플루언서 추가"})}),e.jsx("div",{className:"flex gap-2",children:["소싱메모","제품메모"].map(A=>{const H=A==="소싱메모"?le:Se;return e.jsxs("button",{onClick:()=>g(t._rowIndex,H,c,A),className:"flex-1 flex items-start gap-1 bg-admin-bg/40 rounded px-2 py-1.5 text-left min-w-0",children:[e.jsx(Pe,{className:"h-3 w-3 text-admin-text/50 shrink-0 mt-0.5"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("span",{className:"text-[10px] text-admin-text/50 block",children:A==="소싱메모"?"소싱":"제품"}),e.jsx("span",{className:"text-[11px] text-white/70 line-clamp-1 block",children:H||e.jsx("span",{className:"text-admin-text/30",children:"메모 추가..."})})]})]},A)})})]},t._rowIndex)})});return e.jsxs("div",{children:[re(),e.jsxs("div",{className:"hidden md:block",children:[e.jsx("div",{className:"sticky z-40 border border-admin-border border-b-0 rounded-t-lg bg-[#14142a]",style:{top:j},children:e.jsx("div",{ref:C,className:"overflow-x-auto",style:{scrollbarWidth:"none"},onScroll:ae,children:e.jsxs("table",{className:"w-full text-sm border-collapse",style:{minWidth:N.total,tableLayout:"fixed"},children:[q,e.jsx("thead",{children:e.jsxs("tr",{className:"bg-[#14142a]",children:[S.map((t,c)=>{const m=K[t],r=c<W,k=c===W-1;return e.jsx("th",{style:r?{left:N.stickyOffsets[c]}:void 0,className:z("px-2.5 py-2.5 text-[11px] uppercase tracking-wider text-admin-text/70 font-semibold border-r border-admin-border/50 last:border-r-0 group/th",r&&"sticky z-40 bg-[#14142a]",k&&"shadow-[3px_0_8px_rgba(0,0,0,0.35)] border-r-admin-border",m?.align==="center"&&"text-center",m?.align==="right"&&"text-right"),children:e.jsxs("button",{onClick:()=>b(t),className:"flex items-center gap-1 w-full hover:text-white transition-colors",children:[e.jsx("span",{className:"whitespace-nowrap",children:m?.label||t}),e.jsx(x,{column:t})]})},t)}),e.jsx("th",{className:"px-2 py-2.5 text-[11px] text-admin-text/70 text-center w-12"})]})})]})})}),e.jsx("div",{className:"border border-admin-border border-t-0 rounded-b-lg overflow-hidden",children:e.jsx("div",{ref:_,className:"overflow-x-auto",onScroll:Y,children:e.jsxs("table",{className:"w-full text-sm border-collapse",style:{minWidth:N.total,tableLayout:"fixed"},children:[q,e.jsx("tbody",{children:I.map((t,c)=>e.jsxs("tr",{className:z("border-b border-admin-border/40 transition-colors hover:bg-white/[0.02]",c%2===0?"bg-[#11111f]":"bg-[#151528]"),children:[S.map((m,r)=>{const k=K[m],L=r<W,O=r===W-1,i=c%2===0?"#11111f":"#151528";return e.jsx("td",{style:L?{left:N.stickyOffsets[r],backgroundColor:i}:void 0,className:z("px-2.5 py-2 text-white border-r border-admin-border/30 last:border-r-0 align-top",L&&"sticky z-30",O&&"shadow-[3px_0_8px_rgba(0,0,0,0.35)] border-r-admin-border/60",k?.align==="center"&&"text-center",k?.align==="right"&&"text-right"),children:Q(t,m,t._rowIndex)},m)}),e.jsx("td",{className:"px-1 py-2 text-center align-top",children:e.jsx("button",{onClick:()=>l(t._rowIndex,String(t.제품명||"")),className:"p-1 text-admin-text/40 hover:text-red-400 transition-colors",children:e.jsx(ge,{className:"h-3.5 w-3.5"})})})]},t._rowIndex))})]})})})]})]})}function Xe({isOpen:s,onClose:n,onSubmit:u,headers:f,isPending:g}){const[d,l]=o.useState({제품명:"",업체명:"",상태:"진행 전","제품 카테고리":"",공식몰:"",샘플피드:"",담당자:"","담당자 전화":"","담당자 이메일":"","핏한 인플루언서":"",제안서:"",소싱메모:"",제품메모:""}),j=(a,w)=>{l(E=>({...E,[a]:w}))},p=()=>{if(!d.제품명.trim())return;const a=f.map(w=>w==="No."?"":d[w]||"");u(a),l({제품명:"",업체명:"",상태:"진행 전","제품 카테고리":"",공식몰:"",샘플피드:"",담당자:"","담당자 전화":"","담당자 이메일":"","핏한 인플루언서":"",제안서:"",소싱메모:"",제품메모:""}),n()};return e.jsx(oe,{open:s,onOpenChange:n,children:e.jsxs(de,{className:"bg-admin-card border-admin-border text-white max-w-lg max-h-[85vh] overflow-y-auto",children:[e.jsx(xe,{children:e.jsx(me,{className:"text-white",children:"제품 등록"})}),e.jsxs("div",{className:"space-y-3 py-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-admin-text mb-1 block",children:"제품명 *"}),e.jsx(B,{value:d.제품명,onChange:a=>j("제품명",a.target.value),placeholder:"제품명을 입력하세요",className:"bg-admin-bg border-admin-border text-white placeholder:text-admin-text"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-admin-text mb-1 block",children:"업체명"}),e.jsx(B,{value:d.업체명,onChange:a=>j("업체명",a.target.value),placeholder:"업체명",className:"bg-admin-bg border-admin-border text-white placeholder:text-admin-text"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-admin-text mb-1 block",children:"상태"}),e.jsx("select",{value:d.상태,onChange:a=>j("상태",a.target.value),className:"w-full h-9 px-3 rounded-md bg-admin-bg border border-admin-border text-white text-sm focus:outline-none focus:ring-2 focus:ring-admin-accent",children:te.map(a=>e.jsx("option",{value:a,children:a},a))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-admin-text mb-1 block",children:"제품 카테고리"}),e.jsx(B,{value:d["제품 카테고리"],onChange:a=>j("제품 카테고리",a.target.value),placeholder:"콤마로 구분 (예: 식품, 간식)",className:"bg-admin-bg border-admin-border text-white placeholder:text-admin-text"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-admin-text mb-1 block",children:"공식몰 URL"}),e.jsx(B,{value:d.공식몰,onChange:a=>j("공식몰",a.target.value),placeholder:"https://...",className:"bg-admin-bg border-admin-border text-white placeholder:text-admin-text"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-admin-text mb-1 block",children:"샘플피드 URL"}),e.jsx(B,{value:d.샘플피드,onChange:a=>j("샘플피드",a.target.value),placeholder:"https://...",className:"bg-admin-bg border-admin-border text-white placeholder:text-admin-text"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-admin-text mb-1 block",children:"제안서 URL"}),e.jsx(B,{value:d.제안서,onChange:a=>j("제안서",a.target.value),placeholder:"https://...",className:"bg-admin-bg border-admin-border text-white placeholder:text-admin-text"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-admin-text mb-1 block",children:"담당자"}),e.jsx(B,{value:d.담당자,onChange:a=>j("담당자",a.target.value),placeholder:"담당자명",className:"bg-admin-bg border-admin-border text-white placeholder:text-admin-text"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-admin-text mb-1 block",children:"담당자 전화"}),e.jsx(B,{value:d["담당자 전화"],onChange:a=>j("담당자 전화",a.target.value),placeholder:"010-0000-0000",className:"bg-admin-bg border-admin-border text-white placeholder:text-admin-text"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-admin-text mb-1 block",children:"담당자 이메일"}),e.jsx(B,{value:d["담당자 이메일"],onChange:a=>j("담당자 이메일",a.target.value),placeholder:"email@example.com",className:"bg-admin-bg border-admin-border text-white placeholder:text-admin-text"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-admin-text mb-1 block",children:"소싱메모"}),e.jsx("textarea",{value:d.소싱메모,onChange:a=>j("소싱메모",a.target.value),placeholder:"소싱 관련 메모...",className:"w-full h-20 px-3 py-2 bg-admin-bg border border-admin-border rounded-md text-white placeholder:text-admin-text focus:outline-none focus:ring-2 focus:ring-admin-accent resize-none text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-admin-text mb-1 block",children:"제품메모"}),e.jsx("textarea",{value:d.제품메모,onChange:a=>j("제품메모",a.target.value),placeholder:"제품 관련 메모...",className:"w-full h-20 px-3 py-2 bg-admin-bg border border-admin-border rounded-md text-white placeholder:text-admin-text focus:outline-none focus:ring-2 focus:ring-admin-accent resize-none text-sm"})]})]}),e.jsxs(ue,{children:[e.jsx(T,{variant:"outline",onClick:n,className:"bg-transparent border-admin-border text-white hover:bg-admin-bg",children:"취소"}),e.jsx(T,{onClick:p,disabled:!d.제품명.trim()||g,className:"bg-admin-accent text-admin-bg hover:bg-admin-accent/90",children:g?"등록 중...":"등록"})]})]})})}function Je({isOpen:s,onClose:n,currentValue:u,onSave:f}){const{data:g,isLoading:d}=Me(),[l,j]=o.useState(""),[p,a]=o.useState([]);o.useEffect(()=>{s&&(a(u?u.split(",").map(N=>N.trim()).filter(Boolean):[]),j(""))},[s,u]);const w=g?.data||[],E=o.useMemo(()=>{if(!l)return w.slice(0,50);const N=l.toLowerCase();return w.filter(I=>{const b=String(I.인스타ID||"").toLowerCase(),v=String(I["인스타 이름"]||"").toLowerCase();return b.includes(N)||v.includes(N)}).slice(0,50)},[w,l]),y=N=>{a(I=>I.includes(N)?I.filter(b=>b!==N):[...I,N])},D=N=>{a(I=>I.filter(b=>b!==N))},S=()=>{f(p.join(", ")),n()};return e.jsx(oe,{open:s,onOpenChange:n,children:e.jsxs(de,{className:"bg-admin-card border-admin-border text-white max-w-lg max-h-[85vh] flex flex-col",children:[e.jsx(xe,{children:e.jsx(me,{className:"text-white",children:"인플루언서 선택"})}),p.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1.5 pb-2 border-b border-admin-border",children:p.map(N=>e.jsxs("span",{className:"inline-flex items-center gap-1 text-[11px] px-2 py-0.5 rounded-full bg-teal-500/15 text-teal-400 border border-teal-500/30",children:["@",N,e.jsx("button",{onClick:()=>D(N),className:"hover:text-white",children:e.jsx(ee,{className:"h-3 w-3"})})]},N))}),e.jsxs("div",{className:"relative",children:[e.jsx(ie,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-admin-text"}),e.jsx(B,{type:"text",placeholder:"인스타ID 또는 이름 검색...",value:l,onChange:N=>j(N.target.value),className:"pl-10 bg-admin-bg border-admin-border text-white placeholder:text-admin-text"})]}),e.jsx("div",{className:"flex-1 overflow-y-auto min-h-0 max-h-[40vh] space-y-0.5",children:d?e.jsx("div",{className:"text-center py-8 text-admin-text",children:"로딩 중..."}):E.length===0?e.jsx("div",{className:"text-center py-8 text-admin-text",children:"검색 결과가 없습니다"}):E.map(N=>{const I=String(N.인스타ID||""),b=String(N["인스타 이름"]||""),v=String(N["인플루언서 등급"]||""),P=String(N.팔로워||""),R=p.includes(I);return e.jsxs("button",{onClick:()=>y(I),className:z("flex items-center gap-3 w-full px-3 py-2 rounded text-left transition-colors",R?"bg-teal-500/10":"hover:bg-admin-bg"),children:[e.jsx("div",{className:z("flex h-4 w-4 items-center justify-center rounded border shrink-0",R?"bg-teal-500 border-teal-500":"border-admin-border"),children:R&&e.jsx(Ne,{className:"h-3 w-3 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("span",{className:"text-sm text-admin-accent",children:["@",I]}),e.jsx("span",{className:"text-sm text-white/70 ml-2",children:b})]}),e.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[v&&e.jsx("span",{className:"text-[11px] text-admin-text",children:v}),P&&e.jsx("span",{className:"text-[11px] text-admin-text tabular-nums",children:P})]})]},N._rowIndex)})}),e.jsxs(ue,{children:[e.jsx(T,{variant:"outline",onClick:n,className:"bg-transparent border-admin-border text-white hover:bg-admin-bg",children:"취소"}),e.jsxs(T,{onClick:S,className:"bg-admin-accent text-admin-bg hover:bg-admin-accent/90",children:["선택 완료 (",p.length,"명)"]})]})]})})}function Ze(){return Ae({queryKey:["products"],queryFn:G.getProducts,staleTime:300*1e3})}function et(){const s=se();return ne({mutationFn:G.refreshProducts,onSuccess:n=>{s.setQueryData(["products"],n),$.success("데이터 새로고침 완료")},onError:n=>{$.error("새로고침 실패: "+n.message)}})}function tt(){const s=se();return ne({mutationFn:G.addProduct,onSuccess:()=>{s.invalidateQueries({queryKey:["products"]}),$.success("제품 등록 완료")},onError:n=>{$.error("제품 등록 실패: "+n.message)}})}function st(){const s=se();return ne({mutationFn:n=>G.updateProductCell(n.rowIndex,n),onMutate:async n=>{await s.cancelQueries({queryKey:["products"]});const u=s.getQueryData(["products"]);return s.setQueryData(["products"],f=>{if(!f?.data)return f;const g=[...f.data],d=g.findIndex(l=>l._rowIndex===n.rowIndex);if(d!==-1){const l=g[d],p=(f.headers||Object.keys(l))[n.columnIndex];p&&(g[d]={...l,[p]:n.value})}return{...f,data:g}}),{previous:u}},onError:(n,u,f)=>{s.setQueryData(["products"],f?.previous),$.error("저장 실패: "+n.message)},onSuccess:()=>{$.success("저장 완료")}})}function nt(){const s=se();return ne({mutationFn:n=>G.deleteProduct(n),onSuccess:()=>{s.invalidateQueries({queryKey:["products"]}),$.success("제품 삭제 완료")},onError:n=>{$.error("제품 삭제 실패: "+n.message)}})}function ot(){const{data:s,isLoading:n,error:u}=Ze(),f=et(),g=tt(),d=st(),l=nt(),j=o.useRef(null),[p,a]=o.useState(0);o.useEffect(()=>{const i=j.current;if(!i)return;const h=new ResizeObserver(()=>{a(i.offsetHeight)});return h.observe(i),()=>h.disconnect()},[]);const[w,E]=o.useState(""),[y,D]=o.useState([]),[S,N]=o.useState([]),[I,b]=o.useState(!1),[v,P]=o.useState({isOpen:!1,rowIndex:-1,value:"",name:"",column:""}),[R,Q]=o.useState({isOpen:!1,rowIndex:-1,value:"",name:""}),[x,C]=o.useState({isOpen:!1,rowIndex:-1,name:""}),_=s?.data||[],U=s?.headers||[],ae=o.useMemo(()=>ye.filter(i=>!ke.includes(i)),[]),Y=o.useMemo(()=>_.filter(i=>{if(w){const h=w.toLowerCase(),M=String(i.제품명||"").toLowerCase(),F=String(i.업체명||"").toLowerCase();if(!M.includes(h)&&!F.includes(h))return!1}if(y.length>0&&!y.includes(String(i.상태||"")))return!1;if(S.length>0){const h=String(i["제품 카테고리"]||"").split(",").map(M=>M.trim());if(!S.some(M=>h.includes(M)))return!1}return!0}),[_,w,y,S]),q=()=>f.mutate(),re=i=>{g.mutate({values:i})},t=(i,h,M)=>{d.mutate({rowIndex:i,columnIndex:h,value:M})},c=(i,h,M,F)=>{const X={소싱메모:`[소싱메모]
- `,제품메모:`[제품메모]
- `},le=h.trim()?h:X[F]||"";P({isOpen:!0,rowIndex:i,value:le,name:M,column:F})},m=i=>{const h=U.indexOf(v.column);h!==-1&&d.mutate({rowIndex:v.rowIndex,columnIndex:h,value:i}),P({isOpen:!1,rowIndex:-1,value:"",name:"",column:""})},r=(i,h,M)=>{Q({isOpen:!0,rowIndex:i,value:h,name:M})},k=i=>{const h=U.indexOf("핏한 인플루언서");h!==-1&&d.mutate({rowIndex:R.rowIndex,columnIndex:h,value:i}),Q({isOpen:!1,rowIndex:-1,value:"",name:""})},L=(i,h)=>{C({isOpen:!0,rowIndex:i,name:h})},O=()=>{l.mutate(x.rowIndex),C({isOpen:!1,rowIndex:-1,name:""})};return u?e.jsx("div",{className:"max-w-[1800px] mx-auto mt-8",children:e.jsxs("div",{className:"bg-red-500/20 border border-red-500/40 rounded-lg p-6 text-center",children:[e.jsx("p",{className:"text-red-400 font-semibold",children:"데이터를 불러오는데 실패했습니다"}),e.jsx("p",{className:"text-admin-text text-sm mt-2",children:String(u)}),e.jsx(T,{onClick:q,className:"mt-4",children:"다시 시도"})]})}):e.jsxs("div",{className:"max-w-[1800px] mx-auto mt-4 md:mt-8",children:[e.jsxs("div",{className:"hidden md:flex md:items-center md:justify-between mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"제품소싱 관리"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(T,{onClick:()=>b(!0),className:"bg-admin-accent text-admin-bg hover:bg-admin-accent/90",children:[e.jsx(fe,{className:"h-4 w-4 mr-2"}),"제품 추가"]}),e.jsxs(T,{onClick:q,disabled:f.isPending,variant:"outline",className:"bg-transparent border-admin-border text-white hover:bg-admin-bg",children:[e.jsx(be,{className:`h-4 w-4 mr-2 ${f.isPending?"animate-spin":""}`}),"새로고침"]})]})]}),e.jsxs("div",{ref:j,className:"sticky top-0 z-50 bg-admin-bg py-2 md:pt-2 md:pb-4 -mx-3 px-3 md:-mx-6 md:px-6 shadow-[0_4px_12px_rgba(0,0,0,0.3)]",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2 md:hidden",children:[e.jsx("h1",{className:"text-lg font-bold text-white",children:"제품소싱 관리"}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(T,{size:"sm",onClick:()=>b(!0),className:"bg-admin-accent text-admin-bg hover:bg-admin-accent/90 h-8 px-2",children:e.jsx(fe,{className:"h-4 w-4"})}),e.jsx(T,{size:"sm",onClick:q,disabled:f.isPending,variant:"outline",className:"bg-transparent border-admin-border text-white hover:bg-admin-bg h-8 px-2",children:e.jsx(be,{className:`h-4 w-4 ${f.isPending?"animate-spin":""}`})})]})]}),e.jsx(qe,{searchQuery:w,onSearchChange:E,selectedStatuses:y,onStatusesChange:D,selectedCategories:S,onCategoriesChange:N,resultCount:Y.length,totalCount:_.length})]}),n?e.jsx("div",{className:"flex items-center justify-center h-64 bg-admin-card rounded-lg border border-admin-border",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-admin-accent mx-auto mb-4"}),e.jsx("p",{className:"text-admin-text",children:"데이터를 불러오는 중..."})]})}):e.jsx(Ye,{data:Y,headers:U,visibleColumns:ae,onCellEdit:t,onMemoEdit:c,onInfluencerEdit:r,onDelete:L,stickyTopOffset:p}),e.jsx(Xe,{isOpen:I,onClose:()=>b(!1),onSubmit:re,headers:U,isPending:g.isPending}),e.jsx(Re,{isOpen:v.isOpen,onClose:()=>P({isOpen:!1,rowIndex:-1,value:"",name:"",column:""}),initialValue:v.value,onSave:m,influencerName:`${v.name} — ${v.column}`}),e.jsx(Je,{isOpen:R.isOpen,onClose:()=>Q({isOpen:!1,rowIndex:-1,value:"",name:""}),currentValue:R.value,onSave:k}),e.jsx(oe,{open:x.isOpen,onOpenChange:()=>C({isOpen:!1,rowIndex:-1,name:""}),children:e.jsxs(de,{className:"bg-admin-card border-admin-border text-white max-w-sm",children:[e.jsx(xe,{children:e.jsx(me,{className:"text-white",children:"제품 삭제"})}),e.jsxs("p",{className:"text-sm text-admin-text py-4",children:[e.jsx("span",{className:"text-white font-medium",children:x.name||"이 제품"}),"을(를) 삭제하시겠습니까?",e.jsx("br",{}),"이 작업은 되돌릴 수 없습니다."]}),e.jsxs(ue,{children:[e.jsx(T,{variant:"outline",onClick:()=>C({isOpen:!1,rowIndex:-1,name:""}),className:"bg-transparent border-admin-border text-white hover:bg-admin-bg",children:"취소"}),e.jsx(T,{onClick:O,disabled:l.isPending,className:"bg-red-500 text-white hover:bg-red-600",children:l.isPending?"삭제 중...":"삭제"})]})]})}),e.jsx(Fe,{position:"top-right",theme:"dark"})]})}export{ot as default};
