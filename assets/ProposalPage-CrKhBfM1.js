const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/jspdf.es.min-DgFYetzA.js","assets/index-DS07Q32S.js","assets/index-DscqcJk9.css"])))=>i.map(i=>d[i]);
import{r as d,j as e,u as be,_ as oe}from"./index-DS07Q32S.js";import{c as ge,B as P,X as Q,I as R,S as X,v as je,u as Ne,h as re,i as le,k as ne,G as ie,a as fe,d as ae,e as q,f as S,w as ve,t as F,j as pe}from"./useInfluencerData-BUSAMa2M.js";import{P as te,M as we,u as ye}from"./useProductData-BZXteIC5.js";import{M as K,U as me,C as Se}from"./MultiSelect-BffyFost.js";import"./useQuery-CRDnl9p6.js";const Ce=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]],xe=ge("file-down",Ce);function ke(){const a=()=>{const t=new Date,h=t.getFullYear(),u=String(t.getMonth()+1).padStart(2,"0");return`${h}.${u}`},[r,o]=d.useState({brandName:"",brandDescription:"",productName:"",productDescription:"",campaignGoal:"",campaignPeriod:"",budget:"",influencers:[],notes:""}),[c,v]=d.useState(a());return{formData:r,proposalDate:c,setProposalDate:v,updateField:(t,h)=>{o(u=>({...u,[t]:h}))},addInfluencer:()=>{const t={id:crypto.randomUUID(),name:"",followers:"",category:"",profileUrl:"",avgViews:"",engagementRate:"",maxComments:"",commentActivity:""};o(h=>({...h,influencers:[...h.influencers,t]}))},removeInfluencer:t=>{o(h=>({...h,influencers:h.influencers.filter(u=>u.id!==t)}))},updateInfluencer:(t,h)=>{o(u=>({...u,influencers:u.influencers.map(C=>C.id===t?{...C,...h}:C)}))},loadProposalData:t=>{o(h=>({...h,...t}))},resetForm:()=>{o({brandName:"",brandDescription:"",productName:"",productDescription:"",campaignGoal:"",campaignPeriod:"",budget:"",influencers:[],notes:""}),v(a())}}}function De({influencer:a,onUpdate:r,onRemove:o}){return e.jsxs("div",{className:"bg-admin-card border border-admin-border rounded p-4 relative",children:[e.jsx(P,{variant:"ghost",size:"sm",onClick:o,className:"absolute top-2 right-2 h-6 w-6 p-0 hover:bg-admin-error/20",children:e.jsx(Q,{className:"h-4 w-4 text-admin-error"})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-admin-text mb-1 block",children:"이름"}),e.jsx(R,{value:a.name,onChange:c=>r({name:c.target.value}),placeholder:"인플루언서 이름",className:"bg-admin-bg border-admin-border text-sm h-8"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-admin-text mb-1 block",children:"팔로워"}),e.jsx(R,{value:a.followers,onChange:c=>r({followers:c.target.value}),placeholder:"예: 50만",className:"bg-admin-bg border-admin-border text-sm h-8"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-admin-text mb-1 block",children:"카테고리"}),e.jsx(R,{value:a.category,onChange:c=>r({category:c.target.value}),placeholder:"예: 뷰티",className:"bg-admin-bg border-admin-border text-sm h-8"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-admin-text mb-1 block",children:"평균 조회수"}),e.jsx(R,{value:a.avgViews,onChange:c=>r({avgViews:c.target.value}),placeholder:"예: 10만",className:"bg-admin-bg border-admin-border text-sm h-8"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-admin-text mb-1 block",children:"참여율"}),e.jsx(R,{value:a.engagementRate,onChange:c=>r({engagementRate:c.target.value}),placeholder:"예: 8.5%",className:"bg-admin-bg border-admin-border text-sm h-8"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-admin-text mb-1 block",children:"프로필 URL"}),e.jsx(R,{value:a.profileUrl,onChange:c=>r({profileUrl:c.target.value}),placeholder:"https://...",className:"bg-admin-bg border-admin-border text-sm h-8"})]})]})]})}function Ie({formData:a,proposalDate:r,onDateChange:o,onFieldUpdate:c,onAddInfluencer:v,onRemoveInfluencer:w,onUpdateInfluencer:j,onOpenInfluencerBrowser:p,onOpenProductBrowser:N,onSavePDF:i,onGenerateEmail:l}){return e.jsx("div",{className:"w-full lg:w-[400px] bg-admin-card border-r border-admin-border lg:overflow-y-auto lg:h-screen",children:e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-white mb-2",children:"제안서 작성"}),e.jsx("p",{className:"text-xs text-admin-text",children:"제품 정보와 인플루언서를 선택하세요"})]}),e.jsxs(P,{variant:"outline",size:"sm",onClick:N,className:"w-full border-admin-border hover:bg-admin-bg text-xs",children:[e.jsx(xe,{className:"h-3 w-3 mr-1"}),"제품 불러오기"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-sm font-semibold text-white",children:"제품 정보"}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-xs text-admin-text mb-1 block",children:["제품명 ",e.jsx("span",{className:"text-admin-error",children:"*"})]}),e.jsx(R,{value:a.productName,onChange:t=>c("productName",t.target.value),placeholder:"제품명을 입력하세요",className:"bg-admin-bg border-admin-border text-sm",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-admin-text mb-1 block",children:"제품 상세"}),e.jsx("textarea",{value:a.productDescription,onChange:t=>c("productDescription",t.target.value),placeholder:"제품 설명을 입력하세요",className:"w-full bg-admin-bg border border-admin-border rounded px-3 py-2 text-sm text-white resize-none focus:outline-none focus:ring-1 focus:ring-admin-accent",rows:3})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-admin-text mb-1 block",children:"회사명"}),e.jsx(R,{value:a.brandName,onChange:t=>c("brandName",t.target.value),placeholder:"브랜드명을 입력하세요",className:"bg-admin-bg border-admin-border text-sm"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-sm font-semibold text-white",children:"인플루언서"}),e.jsxs(P,{variant:"outline",size:"sm",onClick:p,className:"border-admin-border hover:bg-admin-bg text-xs",children:[e.jsx(X,{className:"h-3 w-3 mr-1"}),"찾기"]})]}),e.jsx("div",{className:"space-y-2",children:a.influencers.map(t=>e.jsx(De,{influencer:t,onUpdate:h=>j(t.id,h),onRemove:()=>w(t.id)},t.id))}),e.jsxs(P,{variant:"outline",size:"sm",onClick:v,className:"w-full border-admin-border hover:bg-admin-bg text-xs",children:[e.jsx(te,{className:"h-3 w-3 mr-1"}),"인플루언서 추가"]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-sm font-semibold text-white",children:"기타 정보"}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-admin-text mb-1 block",children:"제안일"}),e.jsx(R,{value:r,onChange:t=>o(t.target.value),placeholder:"YYYY.MM",className:"bg-admin-bg border-admin-border text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-admin-text mb-1 block",children:"메모"}),e.jsx("textarea",{value:a.notes,onChange:t=>c("notes",t.target.value),placeholder:"추가 메모",className:"w-full bg-admin-bg border border-admin-border rounded px-3 py-2 text-sm text-white resize-none focus:outline-none focus:ring-1 focus:ring-admin-accent",rows:3})]})]}),e.jsxs("div",{className:"space-y-2 pt-4 border-t border-admin-border",children:[e.jsxs(P,{onClick:i,className:"w-full bg-admin-accent hover:bg-admin-accent/90 text-admin-bg text-sm",disabled:!a.productName,children:[e.jsx(xe,{className:"h-4 w-4 mr-2"}),"PDF 저장"]}),e.jsxs(P,{variant:"outline",size:"sm",onClick:l,className:"w-full border-admin-border hover:bg-admin-bg text-xs",disabled:!a.productName,children:[e.jsx(we,{className:"h-3 w-3 mr-1"}),"이메일"]})]})]})})}function Ee({children:a,maxSize:r=13}){const o=d.useRef(null);return d.useEffect(()=>{const c=o.current;if(c)for(c.style.fontSize=`${r}px`;c.scrollWidth>c.clientWidth&&parseFloat(c.style.fontSize)>7;)c.style.fontSize=`${parseFloat(c.style.fontSize)-.5}px`},[a,r]),e.jsx("h5",{ref:o,style:{whiteSpace:"nowrap",fontSize:`${r}px`},children:a})}function $e(a){if(!a)return"";const r=a.match(/instagram\.com\/([^/?]+)/);if(r)return r[1];if(!a.includes("/"))return a;const o=a.replace(/\/+$/,"").split("/");return o[o.length-1]||a}const Re=d.memo(function({data:r,proposalDate:o}){const c=d.useRef(null),v=d.useRef(null),[w,j]=d.useState(1),p=d.useCallback(()=>{const i=c.current,l=v.current;if(!i||!l)return;l.style.transform="none";const t=l.scrollWidth,h=l.scrollHeight,u=window.innerWidth<1024,C=u?0:40,y=i.clientWidth-C;let D;if(u)D=Math.min(y/t,1);else{const I=i.clientHeight-40,O=y/t,E=I/h;D=Math.min(O,E,1)}j(D),l.style.transform=`scale(${D})`,u?i.style.height=`${h*D}px`:i.style.height=""},[]);d.useEffect(()=>{p();const i=c.current;if(!i)return;const l=new ResizeObserver(p);return l.observe(i),()=>l.disconnect()},[p]);const N=d.useMemo(()=>`${r.influencers.length}-${!!r.productName}-${!!r.productDescription}-${!!r.brandName}`,[r.influencers.length,r.productName,r.productDescription,r.brandName]);return d.useEffect(()=>{p()},[N,p]),e.jsx("div",{className:"proposal-preview-container",ref:c,children:e.jsxs("div",{className:"proposal-document",id:"proposal-preview",ref:v,style:{transformOrigin:"top center",transform:`scale(${w})`},children:[e.jsx("div",{className:"top-bar"}),e.jsx("div",{className:"corner-bracket top-left"}),e.jsx("div",{className:"corner-bracket top-right"}),e.jsx("div",{className:"corner-bracket bottom-right"}),e.jsxs("div",{className:"proposal-content",children:[e.jsxs("div",{className:"proposal-header",children:[e.jsx("span",{children:"DEARDAYS AGENCY"}),e.jsx("span",{children:o})]}),e.jsxs("div",{className:"title-section",children:[e.jsx("div",{className:"accent-line"}),e.jsx("h1",{children:"인플루언서 공동구매"}),e.jsx("h2",{children:"협업 제안서"}),e.jsx("p",{className:"subtitle",children:"INFLUENCER COLLABORATION PROPOSAL"}),e.jsx("div",{className:"divider"})]}),r.productName&&e.jsx("div",{className:"product-card",children:e.jsxs("div",{className:"product-info",children:[e.jsx("p",{className:"label",children:"PRODUCT"}),e.jsx("h3",{children:r.productName}),r.productDescription&&e.jsx("p",{className:"detail",children:r.productDescription}),r.brandName&&e.jsx("p",{className:"company",children:r.brandName})]})}),r.influencers.length>0&&e.jsxs("div",{className:"influencer-section",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("div",{className:"line"}),e.jsx("p",{className:"eng",children:"RECOMMENDED INFLUENCERS"}),e.jsx("h4",{children:"추천 인플루언서"})]}),e.jsx("div",{className:"influencer-cards",children:r.influencers.map(i=>{const l=i.profileUrl?$e(i.profileUrl):"";return e.jsxs("div",{className:"influencer-card",children:[l&&e.jsx("img",{className:"avatar",src:`${je}/instagram-avatar/${l}`,alt:i.name||"",onError:t=>{t.target.style.display="none"}}),e.jsx(Ee,{children:i.name||"이름 없음"}),e.jsxs("p",{className:"handle",children:[l&&e.jsxs(e.Fragment,{children:["@",l]}),l&&i.followers&&" · ",i.followers&&e.jsx("span",{className:"followers",children:i.followers})]}),i.category&&e.jsx("p",{className:"category",children:i.category})]},i.id)})}),e.jsx("p",{className:"influencer-note",children:"* 비슷한 규모의 다른 인플루언서와의 협업도 가능합니다"})]}),e.jsxs("div",{className:"promise-section",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("div",{className:"line"}),e.jsx("p",{className:"eng",children:"OUR COMMITMENT"}),e.jsx("h4",{children:"디어데이즈의 약속"})]}),e.jsxs("div",{className:"promise-list",children:[e.jsxs("div",{className:"promise-item",children:[e.jsx("span",{className:"number",children:"1."}),e.jsxs("span",{className:"text",children:[e.jsx("strong",{children:"검증된 인플루언서 매칭"}),e.jsx("span",{className:"promise-desc",children:"데이터 기반으로 제품과 핏이 맞는 인플루언서를 선별하고, 캠페인 전 과정을 밀착 관리"})]})]}),e.jsxs("div",{className:"promise-item",children:[e.jsx("span",{className:"number",children:"2."}),e.jsxs("span",{className:"text",children:[e.jsx("strong",{children:"맞춤 콘텐츠 기획"}),e.jsx("span",{className:"promise-desc",children:"공구 오픈 전, 인플루언서의 일상 속 제품 사용 피드·릴스를 먼저 선보여 자연스러운 신뢰를 형성"})]})]}),e.jsxs("div",{className:"promise-item",children:[e.jsx("span",{className:"number",children:"3."}),e.jsxs("span",{className:"text",children:[e.jsx("strong",{children:"브랜드사 부담 최소화"}),e.jsx("span",{className:"promise-desc",children:"기획·섭외·일정 조율·콘텐츠 검수까지 원스톱으로 진행하여 브랜드사는 제품 준비에만 집중"})]})]})]})]}),e.jsxs("div",{className:"agency-section",children:[e.jsxs("div",{className:"agency-header",children:[e.jsx("h4",{children:"DEARDAYS"}),e.jsx("span",{children:"공동구매 전문 에이전시"})]}),e.jsxs("div",{className:"stats",children:[e.jsxs("div",{className:"stat",children:[e.jsx("p",{className:"value",children:"400+"}),e.jsx("p",{className:"label",children:"누적 공동구매 진행"})]}),e.jsxs("div",{className:"stat",children:[e.jsx("p",{className:"value",children:"200+"}),e.jsx("p",{className:"label",children:"협력 브랜드"})]}),e.jsxs("div",{className:"stat",children:[e.jsx("p",{className:"value",children:"300+"}),e.jsx("p",{className:"label",children:"검증된 인플루언서"})]}),e.jsx("div",{className:"stat website",children:e.jsx("p",{className:"value",children:"deardays.kr"})})]})]}),e.jsxs("div",{className:"contact-card",children:[e.jsxs("div",{className:"contact-info",children:[e.jsx("p",{className:"label",children:"CONTACT"}),e.jsxs("div",{className:"contact-name-row",children:[e.jsx("h5",{children:"정준기 이사"}),e.jsx("span",{className:"contact-phone",children:"010.4343.3685"}),e.jsx("span",{className:"contact-divider",children:"|"}),e.jsx("span",{className:"contact-email",children:"deardays.agency@gmail.com"})]}),e.jsx("p",{className:"company",children:"디어데이즈 공동구매 에이전시"})]}),e.jsxs("div",{className:"contact-qr",children:[e.jsx("img",{src:"https://api.qrserver.com/v1/create-qr-code/?size=100x100&data=https%3A%2F%2Fopen.kakao.com%2Fo%2Fs9XdCNdi&bgcolor=26262f&color=faf8f5",alt:"카톡 1:1 문의",className:"qr-image"}),e.jsx("span",{className:"qr-label",children:"카톡 1:1 문의"})]})]}),e.jsx("div",{className:"proposal-footer",children:e.jsx("p",{children:"© 2026 DEARDAYS AGENCY | INFLUENCER COLLABORATION PROPOSAL"})})]})]})})}),Z=[{label:"전체 팔로워",value:"all"},{label:"메가 (50만+)",value:"mega",min:5e5},{label:"매크로 (10~50만)",value:"macro",min:1e5,max:5e5},{label:"마이크로 (1~10만)",value:"micro",min:1e4,max:1e5},{label:"나노 (~1만)",value:"nano",max:1e4}],ee=[{label:"평균댓글 전체",value:"all"},{label:"10+ 댓글",value:"10",min:10},{label:"50+ 댓글",value:"50",min:50},{label:"100+ 댓글",value:"100",min:100},{label:"500+ 댓글",value:"500",min:500}],se=[{label:"멤버수 전체",value:"all"},{label:"100+",value:"100",min:100},{label:"1,000+",value:"1000",min:1e3},{label:"5,000+",value:"5000",min:5e3},{label:"1만+",value:"10000",min:1e4}],he=[{label:"등급순",value:"grade"},{label:"팔로워순",value:"followers"},{label:"평균조회순",value:"avgViews"},{label:"평균댓글순",value:"avgComments"},{label:"평균좋아요순",value:"avgLikes"}],ue={S:0,A:1,B:2,C:3,D:4,검토대상:5};function $(a){if(!a||a==="-")return 0;const r=a.replace(/,/g,"").replace(/%/g,"").replace(/만/g,""),o=parseFloat(r);return isNaN(o)?0:a.includes("만")?o*1e4:o}function Pe(a){return{id:crypto.randomUUID(),name:a["인스타 이름"]||a.인스타ID,followers:S(String(a.팔로워||"")),category:[a["카테고리(대)"],a["카테고리(중)"]].filter(Boolean).join(" · "),profileUrl:a["프로필 링크"]||"",avgViews:S(String(a["최근 10 평균 릴스 조회수"]||"")),engagementRate:"",maxComments:S(String(a["공구 최대댓글수"]||"")),commentActivity:(()=>{const r=String(a.댓글활동여부||"").trim().toUpperCase();return r==="Y"||r==="O"?"Y":"N"})()}}function Oe({open:a,onClose:r,onAddInfluencers:o,existingProfileUrls:c}){const{data:v,isLoading:w}=Ne(),j=v?.data||[],[p,N]=d.useState(""),[i,l]=d.useState(""),[t,h]=d.useState([]),[u,C]=d.useState([]),[y,D]=d.useState("all"),[I,O]=d.useState("all"),[E,g]=d.useState("all"),[A,k]=d.useState("grade"),[b,T]=d.useState(new Map),[M,_]=d.useState(!1),[U,G]=d.useState(!1);d.useEffect(()=>{const s=setTimeout(()=>l(p),250);return()=>clearTimeout(s)},[p]),d.useEffect(()=>{a||(T(new Map),N(""),l(""),h([]),C([]),D("all"),O("all"),g("all"),k("grade"),_(!1),G(!1))},[a]);const H=d.useMemo(()=>{const s=new Set;return j.forEach(m=>{const n=m["카테고리(대)"];n&&n!=="-"&&s.add(n)}),Array.from(s).sort()},[j]),L=d.useMemo(()=>{let s=0;return t.length>0&&s++,u.length>0&&s++,y!=="all"&&s++,I!=="all"&&s++,E!=="all"&&s++,s},[t,u,y,I,E]),z=d.useMemo(()=>{const s=j.filter(m=>{if(i){const n=i.toLowerCase(),x=String(m.인스타ID||"").toLowerCase(),f=String(m["인스타 이름"]||"").toLowerCase();if(!x.includes(n)&&!f.includes(n))return!1}if(t.length>0&&!t.includes(m["카테고리(대)"])||u.length>0&&!u.includes(m["인플루언서 등급"]))return!1;if(y!=="all"){const n=$(String(m.팔로워||"")),x=Z.find(f=>f.value===y);if(x&&"min"in x&&n<(x.min??0)||x&&"max"in x&&n>=(x.max??1/0))return!1}if(I!=="all"){const n=$(String(m["공구 평균댓글수"]||"")),x=ee.find(f=>f.value===I);if(x&&"min"in x&&n<(x.min??0))return!1}if(E!=="all"){const n=$(String(m["공지채널 멤버수"]||"")),x=se.find(f=>f.value===E);if(x&&"min"in x&&n<(x.min??0))return!1}return!0});return s.sort((m,n)=>{switch(A){case"grade":{const x=ue[m["인플루언서 등급"]]??99,f=ue[n["인플루언서 등급"]]??99;return x!==f?x-f:$(String(n.팔로워||""))-$(String(m.팔로워||""))}case"followers":return $(String(n.팔로워||""))-$(String(m.팔로워||""));case"avgViews":return $(String(n["최근 10 평균 릴스 조회수"]||""))-$(String(m["최근 10 평균 릴스 조회수"]||""));case"avgComments":return $(String(n["공구 평균댓글수"]||""))-$(String(m["공구 평균댓글수"]||""));case"avgLikes":return $(String(n["공구 평균좋아요수"]||""))-$(String(m["공구 평균좋아요수"]||""));default:return 0}}),s},[j,i,t,u,y,I,E,A]),V=d.useCallback(s=>{T(m=>{const n=s.인스타ID||s["인스타 이름"],x=new Map(m);return x.has(n)?x.delete(n):x.set(n,s),x})},[]),B=d.useCallback(s=>{T(m=>{const n=new Map(m);return n.delete(s),n})},[]),Y=()=>{const s=Array.from(b.values()).map(Pe);o(s),T(new Map),F.success(`${s.length}명의 인플루언서를 추가했습니다`),r()},ce=s=>!c||!s["프로필 링크"]?!1:c.has(s["프로필 링크"]),de=s=>s.인스타ID||s["인스타 이름"],W="h-8 bg-[#16162a] border border-[#333] rounded px-2 text-xs text-[#ccc] focus:outline-none focus:border-[#ffaf5f]";return e.jsx(re,{open:a,onOpenChange:r,children:e.jsxs(le,{showCloseButton:!1,className:"w-[100vw] max-w-[100vw] h-[100dvh] md:w-[95vw] md:max-w-[1300px] sm:max-w-[1300px] md:h-[90vh] md:rounded-lg bg-[#0e0e18] border-[#2a2a3a] md:border text-white p-0 gap-0 flex flex-col overflow-hidden rounded-none border-0",children:[e.jsxs("div",{className:"flex items-center gap-2 md:gap-3 px-3 md:px-5 h-12 md:h-14 border-b border-[#2a2a3a] shrink-0 bg-[#111120]",children:[e.jsx(ne,{className:"text-white text-sm md:text-[15px] font-bold whitespace-nowrap",children:"인플루언서 찾기"}),e.jsxs("span",{className:"text-[11px] text-[#777] whitespace-nowrap",children:[z.length,"/",j.length]}),e.jsxs("div",{className:"relative w-52 shrink-0 ml-2 hidden md:block",children:[e.jsx(X,{className:"absolute left-2.5 top-1/2 -translate-y-1/2 h-3.5 w-3.5 text-[#555]"}),e.jsx("input",{value:p,onChange:s=>N(s.target.value),placeholder:"ID / 이름 검색",className:"w-full h-8 pl-8 pr-3 bg-[#16162a] border border-[#333] rounded text-xs text-white placeholder:text-[#555] focus:outline-none focus:border-[#ffaf5f]"})]}),e.jsxs("div",{className:"hidden md:contents",children:[e.jsx(K,{options:H,selected:t,onChange:h,placeholder:"카테고리",className:"w-28 shrink-0"}),e.jsx(K,{options:ie,selected:u,onChange:C,placeholder:"등급",className:"w-24 shrink-0"}),e.jsx("select",{value:y,onChange:s=>D(s.target.value),className:W,children:Z.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))}),e.jsx("select",{value:I,onChange:s=>O(s.target.value),className:W,children:ee.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))}),e.jsx("select",{value:E,onChange:s=>g(s.target.value),className:W,children:se.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))})]}),e.jsxs("div",{className:"ml-auto flex items-center gap-1.5",children:[e.jsxs("button",{onClick:()=>G(!U),className:"md:hidden relative text-[#888] hover:text-white p-1.5 rounded hover:bg-white/5",children:[e.jsx(fe,{className:"h-4 w-4"}),L>0&&e.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-4 h-4 bg-amber-500 text-black text-[9px] font-bold rounded-full flex items-center justify-center",children:L})]}),e.jsx("select",{value:A,onChange:s=>k(s.target.value),className:`${W} hidden md:block`,children:he.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))}),e.jsx("button",{onClick:()=>r(),className:"text-[#555] hover:text-white transition-colors p-1.5 rounded hover:bg-white/5",children:e.jsx(Q,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 border-b border-[#2a2a3a] bg-[#0e0e18] md:hidden shrink-0",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(X,{className:"absolute left-2.5 top-1/2 -translate-y-1/2 h-3.5 w-3.5 text-[#555]"}),e.jsx("input",{value:p,onChange:s=>N(s.target.value),placeholder:"ID / 이름 검색",className:"w-full h-9 pl-8 pr-3 bg-[#16162a] border border-[#333] rounded text-sm text-white placeholder:text-[#555] focus:outline-none focus:border-[#ffaf5f]"})]}),e.jsx("select",{value:A,onChange:s=>k(s.target.value),className:"h-9 bg-[#16162a] border border-[#333] rounded px-2 text-xs text-[#ccc]",children:he.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))})]}),U&&e.jsxs("div",{className:"md:hidden px-3 py-3 border-b border-[#2a2a3a] bg-[#111120] space-y-2 shrink-0",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(K,{options:H,selected:t,onChange:h,placeholder:"카테고리",className:"flex-1"}),e.jsx(K,{options:ie,selected:u,onChange:C,placeholder:"등급",className:"flex-1"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("select",{value:y,onChange:s=>D(s.target.value),className:"flex-1 h-9 bg-[#16162a] border border-[#333] rounded px-2 text-xs text-[#ccc]",children:Z.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))}),e.jsx("select",{value:I,onChange:s=>O(s.target.value),className:"flex-1 h-9 bg-[#16162a] border border-[#333] rounded px-2 text-xs text-[#ccc]",children:ee.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))}),e.jsx("select",{value:E,onChange:s=>g(s.target.value),className:"flex-1 h-9 bg-[#16162a] border border-[#333] rounded px-2 text-xs text-[#ccc]",children:se.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))})]})]}),e.jsxs("div",{className:"flex flex-1 min-h-0",children:[e.jsx("div",{className:"flex-1 overflow-y-auto",children:w?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-7 w-7 border-b-2 border-[#ffaf5f] mx-auto mb-3"}),e.jsx("p",{className:"text-[#666] text-sm",children:"불러오는 중..."})]})}):z.length===0?e.jsx("div",{className:"flex items-center justify-center h-full text-[#555]",children:e.jsxs("div",{className:"text-center",children:[e.jsx(me,{className:"h-10 w-10 mx-auto mb-3 opacity-30"}),e.jsx("p",{className:"text-sm",children:"결과가 없습니다"}),e.jsx("p",{className:"text-xs mt-1",children:"필터 조건을 변경해 보세요"})]})}):e.jsxs(e.Fragment,{children:[e.jsxs("table",{className:"w-full text-sm hidden md:table",children:[e.jsx("thead",{className:"sticky top-0 bg-[#111120] z-10",children:e.jsxs("tr",{className:"text-[11px] text-[#666] uppercase tracking-wider border-b border-[#2a2a3a]",children:[e.jsx("th",{className:"text-left py-2.5 pl-5 pr-2 font-medium w-8"}),e.jsx("th",{className:"text-left py-2.5 px-2 font-medium w-12",children:"등급"}),e.jsx("th",{className:"text-left py-2.5 px-2 font-medium",children:"이름"}),e.jsx("th",{className:"text-right py-2.5 px-2 font-medium w-20",children:"팔로워"}),e.jsx("th",{className:"text-right py-2.5 px-2 font-medium w-20",children:"평균조회"}),e.jsx("th",{className:"text-right py-2.5 px-2 font-medium w-16",children:"평균댓글"}),e.jsx("th",{className:"text-right py-2.5 px-2 font-medium w-16",children:"최대댓글"}),e.jsx("th",{className:"text-right py-2.5 px-2 font-medium w-16",children:"평균좋아요"}),e.jsx("th",{className:"text-right py-2.5 px-2 font-medium w-16",children:"멤버수"}),e.jsx("th",{className:"text-left py-2.5 px-2 font-medium w-32",children:"카테고리"}),e.jsx("th",{className:"text-left py-2.5 px-2 font-medium",children:"메모"})]})}),e.jsx("tbody",{children:z.map(s=>{const m=de(s),n=b.has(m),x=ce(s),f=s["인플루언서 등급"],J=q[f]||"bg-gray-500/20 text-gray-400 border-gray-500/40";return e.jsxs("tr",{onClick:()=>!x&&V(s),className:`border-b border-[#1e1e2e] transition-colors ${x?"opacity-30 cursor-not-allowed":n?"bg-amber-500/[0.07] cursor-pointer":"hover:bg-[#16162a] cursor-pointer"}`,children:[e.jsx("td",{className:"py-2.5 pl-5 pr-2",children:e.jsx("div",{className:`w-5 h-5 rounded border flex items-center justify-center transition-colors ${n?"bg-amber-500 border-amber-500":"border-[#3a3a4a] bg-transparent"}`,children:n&&e.jsx(ae,{className:"h-3 w-3 text-black",strokeWidth:3})})}),e.jsx("td",{className:"py-2.5 px-2",children:f&&e.jsx("span",{className:`inline-block text-[11px] font-bold leading-none px-2 py-1 rounded border ${J}`,children:f})}),e.jsxs("td",{className:"py-2.5 px-2",children:[e.jsx("div",{className:"font-medium text-[13px] text-white leading-tight",children:s["인스타 이름"]||s.인스타ID}),s["인스타 이름"]&&s.인스타ID&&e.jsxs("div",{className:"text-[11px] text-[#666] mt-0.5",children:["@",s.인스타ID]}),x&&e.jsx("span",{className:"text-[10px] text-[#ffaf5f]/60 mt-0.5 inline-block",children:"추가됨"})]}),e.jsx("td",{className:"py-2.5 px-2 text-right text-[13px] text-[#ddd] tabular-nums",children:S(String(s.팔로워||""))||"-"}),e.jsx("td",{className:"py-2.5 px-2 text-right text-[13px] text-[#ddd] tabular-nums",children:S(String(s["최근 10 평균 릴스 조회수"]||""))||"-"}),e.jsx("td",{className:"py-2.5 px-2 text-right text-[13px] text-[#ddd] tabular-nums",children:S(String(s["공구 평균댓글수"]||""))||"-"}),e.jsx("td",{className:"py-2.5 px-2 text-right text-[13px] text-[#ddd] tabular-nums",children:S(String(s["공구 최대댓글수"]||""))||"-"}),e.jsx("td",{className:"py-2.5 px-2 text-right text-[13px] text-[#ddd] tabular-nums",children:S(String(s["공구 평균좋아요수"]||""))||"-"}),e.jsx("td",{className:"py-2.5 px-2 text-right text-[13px] text-[#ddd] tabular-nums",children:S(String(s["공지채널 멤버수"]||""))||"-"}),e.jsx("td",{className:"py-2.5 px-2",children:e.jsxs("div",{className:"flex gap-1 flex-wrap",children:[s["카테고리(대)"]&&s["카테고리(대)"]!=="-"&&e.jsx("span",{className:"text-[11px] bg-[#1e1e34] text-[#999] rounded px-2 py-0.5",children:s["카테고리(대)"]}),s["카테고리(중)"]&&s["카테고리(중)"]!=="-"&&e.jsx("span",{className:"text-[11px] bg-[#1e1e34] text-[#888] rounded px-2 py-0.5",children:s["카테고리(중)"]})]})}),e.jsx("td",{className:"py-2.5 px-2",children:s.메모&&s.메모!=="-"&&e.jsx("p",{className:"text-[12px] text-[#999] leading-tight line-clamp-2 max-w-[200px]",title:s.메모,children:s.메모})})]},m)})})]}),e.jsx("div",{className:"md:hidden divide-y divide-[#1e1e2e]",children:z.map(s=>{const m=de(s),n=b.has(m),x=ce(s),f=s["인플루언서 등급"],J=q[f]||"bg-gray-500/20 text-gray-400 border-gray-500/40";return e.jsx("button",{type:"button",disabled:x,onClick:()=>V(s),className:`w-full text-left px-4 py-3 transition-colors ${x?"opacity-30":n?"bg-amber-500/[0.07]":"active:bg-[#16162a]"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`w-5 h-5 rounded border flex items-center justify-center mt-0.5 shrink-0 ${n?"bg-amber-500 border-amber-500":"border-[#3a3a4a]"}`,children:n&&e.jsx(ae,{className:"h-3 w-3 text-black",strokeWidth:3})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[f&&e.jsx("span",{className:`text-[11px] font-bold px-1.5 py-0.5 rounded border leading-none shrink-0 ${J}`,children:f}),e.jsx("span",{className:"font-semibold text-[14px] text-white truncate",children:s["인스타 이름"]||s.인스타ID}),s["인스타 이름"]&&s.인스타ID&&e.jsxs("span",{className:"text-[12px] text-[#666] shrink-0",children:["@",s.인스타ID]})]}),e.jsxs("div",{className:"flex items-center gap-3 text-[12px]",children:[e.jsxs("span",{className:"text-[#999]",children:[e.jsx("span",{className:"text-[#666]",children:"팔 "}),e.jsx("span",{className:"text-[#ccc] font-medium",children:S(String(s.팔로워||""))||"-"})]}),e.jsxs("span",{className:"text-[#999]",children:[e.jsx("span",{className:"text-[#666]",children:"조회 "}),e.jsx("span",{className:"text-[#ccc] font-medium",children:S(String(s["최근 10 평균 릴스 조회수"]||""))||"-"})]}),e.jsxs("span",{className:"text-[#999]",children:[e.jsx("span",{className:"text-[#666]",children:"댓글 "}),e.jsx("span",{className:"text-[#ccc] font-medium",children:S(String(s["공구 평균댓글수"]||""))||"-"})]}),e.jsxs("span",{className:"text-[#999]",children:[e.jsx("span",{className:"text-[#666]",children:"최대댓글 "}),e.jsx("span",{className:"text-[#ccc] font-medium",children:S(String(s["공구 최대댓글수"]||""))||"-"})]}),e.jsxs("span",{className:"text-[#999]",children:[e.jsx("span",{className:"text-[#666]",children:"좋아요 "}),e.jsx("span",{className:"text-[#ccc] font-medium",children:S(String(s["공구 평균좋아요수"]||""))||"-"})]})]}),e.jsxs("div",{className:"flex gap-1.5 mt-1.5",children:[s["카테고리(대)"]&&s["카테고리(대)"]!=="-"&&e.jsx("span",{className:"text-[11px] bg-[#1e1e34] text-[#888] rounded px-2 py-0.5",children:s["카테고리(대)"]}),s["카테고리(중)"]&&s["카테고리(중)"]!=="-"&&e.jsx("span",{className:"text-[11px] bg-[#1e1e34] text-[#777] rounded px-2 py-0.5",children:s["카테고리(중)"]}),x&&e.jsx("span",{className:"text-[10px] text-[#ffaf5f]/60",children:"추가됨"})]}),s.메모&&s.메모!=="-"&&e.jsx("p",{className:"text-[11px] text-[#777] mt-1 line-clamp-1",children:s.메모})]})]})},m)})})]})}),e.jsxs("div",{className:"w-[260px] border-l border-[#2a2a3a] hidden md:flex flex-col shrink-0 bg-[#0d0d16]",children:[e.jsxs("div",{className:"px-4 py-3 border-b border-[#2a2a3a] flex items-center justify-between",children:[e.jsx("span",{className:"text-[13px] font-semibold text-[#ccc]",children:"선택됨"}),b.size>0&&e.jsx("span",{className:"text-xs font-bold text-amber-400 bg-amber-400/10 rounded-full px-2 py-0.5",children:b.size})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-2.5 space-y-1.5",children:b.size===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-[#444] text-center px-3",children:[e.jsx(me,{className:"h-7 w-7 mb-2 opacity-25"}),e.jsxs("p",{className:"text-xs leading-relaxed",children:["좌측 목록에서",e.jsx("br",{}),"인플루언서를 클릭하세요"]})]}):Array.from(b.entries()).map(([s,m])=>{const n=m["인플루언서 등급"],x=q[n]||"";return e.jsxs("div",{className:"bg-[#16162a] border border-[#252540] rounded-lg px-3 py-2 flex items-center gap-2 group hover:border-[#333]",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[n&&e.jsx("span",{className:`text-[10px] font-bold px-1.5 py-0.5 rounded border leading-none shrink-0 ${x}`,children:n}),e.jsx("span",{className:"text-[13px] font-medium text-white truncate",children:m["인스타 이름"]||m.인스타ID})]}),e.jsx("p",{className:"text-[11px] text-[#666] mt-0.5",children:m.팔로워?S(m.팔로워)+" 팔로워":""})]}),e.jsx("button",{onClick:f=>{f.stopPropagation(),B(s)},className:"text-[#444] hover:text-red-400 transition-colors p-0.5 rounded hover:bg-red-400/10 opacity-0 group-hover:opacity-100",children:e.jsx(Q,{className:"h-3.5 w-3.5"})})]},s)})}),e.jsx("div",{className:"p-3 border-t border-[#2a2a3a]",children:e.jsxs(P,{onClick:Y,disabled:b.size===0,className:"w-full h-9 bg-[#ffaf5f] hover:bg-[#ffaf5f]/90 text-[#0e0e18] font-bold text-sm disabled:opacity-25 disabled:cursor-not-allowed",children:[e.jsx(te,{className:"h-4 w-4 mr-1.5"}),"제안서에 추가",b.size>0?` (${b.size})`:""]})})]})]}),e.jsxs("div",{className:"md:hidden shrink-0 border-t border-[#2a2a3a] bg-[#111120]",children:[M&&b.size>0&&e.jsx("div",{className:"max-h-[200px] overflow-y-auto p-2.5 space-y-1.5 border-b border-[#2a2a3a]",children:Array.from(b.entries()).map(([s,m])=>{const n=m["인플루언서 등급"],x=q[n]||"";return e.jsxs("div",{className:"bg-[#16162a] border border-[#252540] rounded-lg px-3 py-2 flex items-center gap-2",children:[e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"flex items-center gap-1.5",children:[n&&e.jsx("span",{className:`text-[10px] font-bold px-1.5 py-0.5 rounded border leading-none shrink-0 ${x}`,children:n}),e.jsx("span",{className:"text-[13px] font-medium text-white truncate",children:m["인스타 이름"]||m.인스타ID})]})}),e.jsx("button",{onClick:()=>B(s),className:"text-[#666] hover:text-red-400 p-1",children:e.jsx(Q,{className:"h-3.5 w-3.5"})})]},s)})}),e.jsxs("div",{className:"flex items-center gap-2 px-3 py-2.5",children:[b.size>0&&e.jsxs("button",{onClick:()=>_(!M),className:"flex items-center gap-1 text-[13px] text-amber-400 font-medium",children:[e.jsxs("span",{children:[b.size,"명 선택"]}),e.jsx(ve,{className:`h-3.5 w-3.5 transition-transform ${M?"rotate-180":""}`})]}),e.jsxs(P,{onClick:Y,disabled:b.size===0,className:"ml-auto h-9 px-5 bg-[#ffaf5f] hover:bg-[#ffaf5f]/90 text-[#0e0e18] font-bold text-sm disabled:opacity-25",children:[e.jsx(te,{className:"h-4 w-4 mr-1"}),"추가",b.size>0?` (${b.size})`:""]})]})]})]})})}function Fe({open:a,onClose:r,onLoadProduct:o}){const{data:c,isLoading:v}=ye(),w=c?.data||[],[j,p]=d.useState(""),N=d.useMemo(()=>{if(!j.trim())return w;const l=j.toLowerCase();return w.filter(t=>{const h=String(t.제품명||"").toLowerCase(),u=String(t.업체명||"").toLowerCase();return h.includes(l)||u.includes(l)})},[w,j]),i=l=>{o({productName:String(l.제품명||""),brandName:String(l.업체명||"")}),F.success("제품을 불러왔습니다"),r(),p("")};return e.jsx(re,{open:a,onOpenChange:l=>{l||(r(),p(""))},children:e.jsxs(le,{className:"max-w-2xl max-h-[80vh] bg-admin-card border-admin-border text-white",children:[e.jsx(pe,{children:e.jsx(ne,{className:"text-white",children:"제품 불러오기"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(X,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-admin-text"}),e.jsx(R,{value:j,onChange:l=>p(l.target.value),placeholder:"제품명 또는 업체명으로 검색...",className:"pl-10 bg-admin-bg border-admin-border"})]}),e.jsx("div",{className:"max-h-[50vh] overflow-y-auto space-y-2",children:v?e.jsx("div",{className:"text-center text-admin-text py-8",children:"불러오는 중..."}):N.length===0?e.jsx("div",{className:"text-center text-admin-text py-8",children:"결과가 없습니다"}):N.map(l=>{const t=String(l.제품명||"이름 없음"),h=String(l.업체명||""),u=String(l.상태||"");return e.jsxs("div",{onClick:()=>i(l),className:"bg-admin-bg border border-admin-border hover:border-admin-accent rounded p-4 cursor-pointer transition-colors",children:[e.jsx("div",{className:"font-semibold mb-1",children:t}),h&&e.jsx("div",{className:"text-xs text-admin-accent mb-1",children:h}),u&&e.jsx("div",{className:"text-xs text-admin-text",children:u})]},l._rowIndex)})})]})]})})}function Ae(a){if(!a)return"";const r=a.match(/instagram\.com\/([^/?]+)/);if(r)return r[1];if(!a.includes("/"))return a;const o=a.replace(/\/+$/,"").split("/");return o[o.length-1]||a}function Me({open:a,onClose:r,data:o}){const[c,v]=d.useState(!1),w=()=>{const N=o.brandName||"[회사명]",i=o.productName||"[제품명]";return`[${N} x 디어데이즈] 공동구매 제안 ${i}`},j=()=>{const N=o.productName||"[제품명]",i=o.brandName||"[회사명]";let l="";return o.influencers.forEach((t,h)=>{if(t.name||t.profileUrl){const u=t.name||"[이름]",C=t.profileUrl?Ae(t.profileUrl):"handle",y=t.followers||"-",D=t.avgViews||"-",I=t.profileUrl?t.profileUrl:`https://www.instagram.com/${C}/`,O=t.category||"살림",E=t.maxComments&&t.maxComments!=="-"?` | 공구활성 댓글 ${t.maxComments}+`:"";l+=`${h+1}. @${C} | ${u} | 팔로워 ${y} | 평균 릴스 조회수 ${D}
   ${I}
   • ${O} 카테고리${E}

`}}),`안녕하세요, ${i} 담당자님.

공동구매 전문 에이전시 디어데이즈의 정준기 이사입니다.

${i}의 「${N}」를 살펴보니, 저희 협력 인플루언서들과 매우 좋은 핏을 가질 것 같아 연락드렸습니다.

■ 추천 인플루언서
공구 실적, 팔로워 소통도, 콘텐츠 품질 등 내부 검토를 거쳐 매칭한 인플루언서입니다.

${l}■ 최근 유사 카테고리 성과

• 키친 브랜드: N차 공구 진행, 인지도 제로 → 5차 연속 공구
• 식품 브랜드: 론칭 6시간 만에 첫 공구물량 전량소진 → N차 공구 진행
• 라이프스타일 브랜드: 신규 고객 유입 300% 증가
• 유아 브랜드: 3천만원 이상 매출

「${N}」도 좋은 결과를 기대할 수 있도록 하겠습니다.

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

■ 디어데이즈

• 누적 400건 이상의 공동구매 진행
• 300명 이상의 검증된 인플루언서와 직접 협업
• 콘텐츠 기획부터 판매 운영까지 원스톱 진행
• 데이터 기반 매칭으로 최적의 인플루언서 연계

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

해당 상품 또는 다른 상품으로 공동구매 진행이 가능하시다면, 편하신 채널(전화·이메일·카카오톡)로 회신 부탁드립니다.
또한 협업 전 궁금한 사항이 있다면 언제든지 전화주셔도 좋습니다.

감사합니다.
정준기 드림`},p=async()=>{const N=w(),i=j(),l=`제목: ${N}

${i}`;try{await navigator.clipboard.writeText(l),v(!0),F.success("이메일 내용이 복사되었습니다"),setTimeout(()=>v(!1),2e3)}catch(t){console.error("Failed to copy:",t),F.error("복사에 실패했습니다")}};return e.jsx(re,{open:a,onOpenChange:r,children:e.jsxs(le,{className:"max-w-3xl max-h-[80vh] bg-admin-card border-admin-border text-white",children:[e.jsx(pe,{children:e.jsx(ne,{className:"text-white",children:"이메일 생성"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-admin-text mb-2 block",children:"제목"}),e.jsx("div",{className:"bg-admin-bg border border-admin-border rounded px-4 py-3 text-sm",children:w()})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-admin-text mb-2 block",children:"본문"}),e.jsx("div",{className:"bg-admin-bg border border-admin-border rounded p-4 max-h-[40vh] overflow-y-auto",children:e.jsx("pre",{className:"text-sm whitespace-pre-wrap font-sans",children:j()})})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[e.jsx(P,{variant:"outline",onClick:r,className:"border-admin-border hover:bg-admin-bg",children:"닫기"}),e.jsx(P,{onClick:p,className:"bg-admin-accent hover:bg-admin-accent/90 text-admin-bg",children:c?e.jsxs(e.Fragment,{children:[e.jsx(ae,{className:"h-4 w-4 mr-2"}),"복사됨"]}):e.jsxs(e.Fragment,{children:[e.jsx(Se,{className:"h-4 w-4 mr-2"}),"클립보드에 복사"]})})]})]})]})})}function Ge(){const{formData:a,proposalDate:r,setProposalDate:o,updateField:c,addInfluencer:v,removeInfluencer:w,updateInfluencer:j,loadProposalData:p}=ke(),N=be();d.useEffect(()=>{const g=N.state;g&&(p({...g.productName&&{productName:g.productName},...g.brandName&&{brandName:g.brandName},...g.influencers&&{influencers:g.influencers}}),window.history.replaceState({},""))},[]);const i=d.useDeferredValue(a),[l,t]=d.useState(!1),[h,u]=d.useState(!1),[C,y]=d.useState(!1),D=g=>{p({productName:g.productName,brandName:g.brandName})},I=g=>{const A=new Set(a.influencers.map(b=>b.id)),k=g.filter(b=>!A.has(b.id));p({influencers:[...a.influencers,...k]})},O=async()=>{if(!a.productName){F.error("제품명을 입력해주세요");return}try{const g=(await oe(async()=>{const{default:B}=await import("./html2canvas.esm-DXEQVQnt.js");return{default:B}},[])).default,A=(await oe(async()=>{const{default:B}=await import("./jspdf.es.min-DgFYetzA.js").then(Y=>Y.j);return{default:B}},__vite__mapDeps([0,1,2]))).default,k=document.getElementById("proposal-preview");if(!k)throw new Error("Preview element not found");F.info("PDF 생성 중...");const b=k.style.transform,T=k.style.transformOrigin;k.style.transform="none",k.style.transformOrigin="";const M=await g(k,{scale:2,useCORS:!0,allowTaint:!0,backgroundColor:"#16161c"});k.style.transform=b,k.style.transformOrigin=T;const _=210,U=297,G=M.height*_/M.width,H=Math.max(G,U),L=new A("p","mm",[_,H]);L.setFillColor(22,22,28),L.rect(0,0,_,H,"F");const z=M.toDataURL("image/png");L.addImage(z,"PNG",0,0,_,G);const V=`제안서_${a.brandName||a.productName}_${r.replace(/\./g,"")}.pdf`;L.save(V),F.success("PDF가 저장되었습니다")}catch(g){console.error("Failed to save PDF:",g),F.error("PDF 저장에 실패했습니다")}},E=()=>{if(!a.productName){F.error("제품명을 입력해주세요");return}y(!0)};return e.jsxs("div",{className:"flex flex-col lg:flex-row min-h-screen lg:h-screen bg-admin-bg",children:[e.jsx(Ie,{formData:a,proposalDate:r,onDateChange:o,onFieldUpdate:c,onAddInfluencer:v,onRemoveInfluencer:w,onUpdateInfluencer:j,onOpenInfluencerBrowser:()=>t(!0),onOpenProductBrowser:()=>u(!0),onSavePDF:O,onGenerateEmail:E}),e.jsx("div",{className:"flex-1 lg:overflow-hidden",children:e.jsx(Re,{data:i,proposalDate:r})}),e.jsx(Oe,{open:l,onClose:()=>t(!1),onAddInfluencers:I,existingProfileUrls:new Set(a.influencers.map(g=>g.profileUrl).filter(Boolean))}),e.jsx(Fe,{open:h,onClose:()=>u(!1),onLoadProduct:D}),e.jsx(Me,{open:C,onClose:()=>y(!1),data:a})]})}export{Ge as default};
