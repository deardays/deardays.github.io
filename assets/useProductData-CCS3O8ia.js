import{c as pe,u as ge,h as be,i as je,k as fe,S as ce,M as E,G as de,a as Ne,X as U,U as oe,d as ie,e as R,f as i,B as xe,w as ve,t as p,A as z,E as C}from"./useInfluencerData-sXWIHYQZ.js";import{r as d,j as e,a as $}from"./index-DgTccGhv.js";import{u as ye}from"./useQuery-CcoIhEhR.js";const we=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Me=pe("mail",we);const Se=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],me=pe("plus",Se),B=[{label:"전체 팔로워",value:"all"},{label:"메가 (50만+)",value:"mega",min:5e5},{label:"매크로 (10~50만)",value:"macro",min:1e5,max:5e5},{label:"마이크로 (1~10만)",value:"micro",min:1e4,max:1e5},{label:"나노 (~1만)",value:"nano",max:1e4}],H=[{label:"평균댓글 전체",value:"all"},{label:"10+ 댓글",value:"10",min:10},{label:"50+ 댓글",value:"50",min:50},{label:"100+ 댓글",value:"100",min:100},{label:"500+ 댓글",value:"500",min:500}],V=[{label:"멤버수 전체",value:"all"},{label:"100+",value:"100",min:100},{label:"1,000+",value:"1000",min:1e3},{label:"5,000+",value:"5000",min:5e3},{label:"1만+",value:"10000",min:1e4}],ue=[{label:"등급순",value:"grade"},{label:"팔로워순",value:"followers"},{label:"평균조회순",value:"avgViews"},{label:"평균댓글순",value:"avgComments"},{label:"평균좋아요순",value:"avgLikes"}],he={S:0,A:1,B:2,C:3,D:4,검토대상:5};function x(l){if(!l||l==="-")return 0;const n=l.replace(/,/g,"").replace(/%/g,"").replace(/만/g,""),g=parseFloat(n);return isNaN(g)?0:l.includes("만")?g*1e4:g}function Ie(l){return{id:crypto.randomUUID(),name:l["인스타 이름"]||l.인스타ID,followers:i(String(l.팔로워||"")),category:[l["카테고리(대)"],l["카테고리(중)"]].filter(Boolean).join(" · "),profileUrl:l["프로필 링크"]||"",avgViews:i(String(l["최근 10 평균 릴스 조회수"]||"")),engagementRate:"",maxComments:i(String(l["공구 최대댓글수"]||"")),commentActivity:(()=>{const n=String(l.댓글활동여부||"").trim().toUpperCase();return n==="Y"||n==="O"?"Y":"N"})()}}function Ee({open:l,onClose:n,onConfirm:g,disabledIds:u,initialSelectedIds:h}){const b=!!h,{data:w,isLoading:W}=ge(),m=w?.data||[],[k,A]=d.useState(""),[O,Y]=d.useState(""),[j,P]=d.useState([]),[f,T]=d.useState([]),[N,L]=d.useState("all"),[v,_]=d.useState("all"),[y,q]=d.useState("all"),[D,F]=d.useState("grade"),[o,S]=d.useState(new Map),[Q,X]=d.useState(!1),[J,Z]=d.useState(!1);d.useEffect(()=>{const s=setTimeout(()=>Y(k),250);return()=>clearTimeout(s)},[k]);const G=d.useRef(!1);d.useEffect(()=>{l||(G.current=!1,S(new Map),A(""),Y(""),P([]),T([]),L("all"),_("all"),q("all"),F("grade"),X(!1),Z(!1))},[l]),d.useEffect(()=>{if(l&&!G.current&&h?.length&&m.length>0){G.current=!0;const s=new Set(h),a=new Map;m.forEach(t=>{const r=t.인스타ID||t["인스타 이름"];s.has(r)&&a.set(r,t)}),S(a)}},[l,m,h]);const ee=d.useMemo(()=>{const s=new Set;return m.forEach(a=>{const t=a["카테고리(대)"];t&&t!=="-"&&s.add(t)}),Array.from(s).sort()},[m]),se=d.useMemo(()=>{let s=0;return j.length>0&&s++,f.length>0&&s++,N!=="all"&&s++,v!=="all"&&s++,y!=="all"&&s++,s},[j,f,N,v,y]),M=d.useMemo(()=>{const s=m.filter(a=>{if(O){const t=O.toLowerCase(),r=String(a.인스타ID||"").toLowerCase(),c=String(a["인스타 이름"]||"").toLowerCase();if(!r.includes(t)&&!c.includes(t))return!1}if(j.length>0&&!j.includes(a["카테고리(대)"])||f.length>0&&!f.includes(a["인플루언서 등급"]))return!1;if(N!=="all"){const t=x(String(a.팔로워||"")),r=B.find(c=>c.value===N);if(r&&"min"in r&&t<(r.min??0)||r&&"max"in r&&t>=(r.max??1/0))return!1}if(v!=="all"){const t=x(String(a["공구 평균댓글수"]||"")),r=H.find(c=>c.value===v);if(r&&"min"in r&&t<(r.min??0))return!1}if(y!=="all"){const t=x(String(a["공지채널 멤버수"]||"")),r=V.find(c=>c.value===y);if(r&&"min"in r&&t<(r.min??0))return!1}return!0});return s.sort((a,t)=>{switch(D){case"grade":{const r=he[a["인플루언서 등급"]]??99,c=he[t["인플루언서 등급"]]??99;return r!==c?r-c:x(String(t.팔로워||""))-x(String(a.팔로워||""))}case"followers":return x(String(t.팔로워||""))-x(String(a.팔로워||""));case"avgViews":return x(String(t["최근 10 평균 릴스 조회수"]||""))-x(String(a["최근 10 평균 릴스 조회수"]||""));case"avgComments":return x(String(t["공구 평균댓글수"]||""))-x(String(a["공구 평균댓글수"]||""));case"avgLikes":return x(String(t["공구 평균좋아요수"]||""))-x(String(a["공구 평균좋아요수"]||""));default:return 0}}),s},[m,O,j,f,N,v,y,D]),te=d.useCallback(s=>{S(a=>{const t=s.인스타ID||s["인스타 이름"],r=new Map(a);return r.has(t)?r.delete(t):r.set(t,s),r})},[]),ae=d.useCallback(s=>{S(a=>{const t=new Map(a);return t.delete(s),t})},[]),re=()=>{const s=Array.from(o.values());g(s),S(new Map),p.success(`${s.length}명의 인플루언서를 선택했습니다`),n()},le=s=>{if(!u)return!1;const a=s.인스타ID||s["인스타 이름"];return u.has(a)},ne=s=>s.인스타ID||s["인스타 이름"],I="h-8 bg-[#16162a] border border-[#333] rounded px-2 text-xs text-[#ccc] focus:outline-none focus:border-[#ffaf5f]";return e.jsx(be,{open:l,onOpenChange:n,children:e.jsxs(je,{showCloseButton:!1,className:"w-[100vw] max-w-[100vw] h-[100dvh] md:w-[95vw] md:max-w-[1300px] sm:max-w-[1300px] md:h-[90vh] md:rounded-lg bg-[#0e0e18] border-[#2a2a3a] md:border text-white p-0 gap-0 flex flex-col overflow-hidden rounded-none border-0",children:[e.jsxs("div",{className:"flex items-center gap-2 md:gap-3 px-3 md:px-5 h-12 md:h-14 border-b border-[#2a2a3a] shrink-0 bg-[#111120]",children:[e.jsx(fe,{className:"text-white text-sm md:text-[15px] font-bold whitespace-nowrap",children:"인플루언서 찾기"}),e.jsxs("span",{className:"text-[11px] text-[#777] whitespace-nowrap",children:[M.length,"/",m.length]}),e.jsxs("div",{className:"relative w-52 shrink-0 ml-2 hidden md:block",children:[e.jsx(ce,{className:"absolute left-2.5 top-1/2 -translate-y-1/2 h-3.5 w-3.5 text-[#555]"}),e.jsx("input",{value:k,onChange:s=>A(s.target.value),placeholder:"ID / 이름 검색",className:"w-full h-8 pl-8 pr-3 bg-[#16162a] border border-[#333] rounded text-xs text-white placeholder:text-[#555] focus:outline-none focus:border-[#ffaf5f]"})]}),e.jsxs("div",{className:"hidden md:contents",children:[e.jsx(E,{options:ee,selected:j,onChange:P,placeholder:"카테고리",className:"w-28 shrink-0"}),e.jsx(E,{options:de,selected:f,onChange:T,placeholder:"등급",className:"w-24 shrink-0"}),e.jsx("select",{value:N,onChange:s=>L(s.target.value),className:I,children:B.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))}),e.jsx("select",{value:v,onChange:s=>_(s.target.value),className:I,children:H.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))}),e.jsx("select",{value:y,onChange:s=>q(s.target.value),className:I,children:V.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))})]}),e.jsxs("div",{className:"ml-auto flex items-center gap-1.5",children:[e.jsxs("button",{onClick:()=>Z(!J),className:"md:hidden relative text-[#888] hover:text-white p-1.5 rounded hover:bg-white/5",children:[e.jsx(Ne,{className:"h-4 w-4"}),se>0&&e.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-4 h-4 bg-amber-500 text-black text-[9px] font-bold rounded-full flex items-center justify-center",children:se})]}),e.jsx("select",{value:D,onChange:s=>F(s.target.value),className:`${I} hidden md:block`,children:ue.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))}),e.jsx("button",{onClick:()=>n(),className:"text-[#555] hover:text-white transition-colors p-1.5 rounded hover:bg-white/5",children:e.jsx(U,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 border-b border-[#2a2a3a] bg-[#0e0e18] md:hidden shrink-0",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(ce,{className:"absolute left-2.5 top-1/2 -translate-y-1/2 h-3.5 w-3.5 text-[#555]"}),e.jsx("input",{value:k,onChange:s=>A(s.target.value),placeholder:"ID / 이름 검색",className:"w-full h-9 pl-8 pr-3 bg-[#16162a] border border-[#333] rounded text-sm text-white placeholder:text-[#555] focus:outline-none focus:border-[#ffaf5f]"})]}),e.jsx("select",{value:D,onChange:s=>F(s.target.value),className:"h-9 bg-[#16162a] border border-[#333] rounded px-2 text-xs text-[#ccc]",children:ue.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))})]}),J&&e.jsxs("div",{className:"md:hidden px-3 py-3 border-b border-[#2a2a3a] bg-[#111120] space-y-2 shrink-0",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(E,{options:ee,selected:j,onChange:P,placeholder:"카테고리",className:"flex-1"}),e.jsx(E,{options:de,selected:f,onChange:T,placeholder:"등급",className:"flex-1"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("select",{value:N,onChange:s=>L(s.target.value),className:"flex-1 h-9 bg-[#16162a] border border-[#333] rounded px-2 text-xs text-[#ccc]",children:B.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))}),e.jsx("select",{value:v,onChange:s=>_(s.target.value),className:"flex-1 h-9 bg-[#16162a] border border-[#333] rounded px-2 text-xs text-[#ccc]",children:H.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))}),e.jsx("select",{value:y,onChange:s=>q(s.target.value),className:"flex-1 h-9 bg-[#16162a] border border-[#333] rounded px-2 text-xs text-[#ccc]",children:V.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))})]})]}),e.jsxs("div",{className:"flex flex-1 min-h-0",children:[e.jsx("div",{className:"flex-1 overflow-y-auto",children:W?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-7 w-7 border-b-2 border-[#ffaf5f] mx-auto mb-3"}),e.jsx("p",{className:"text-[#666] text-sm",children:"불러오는 중..."})]})}):M.length===0?e.jsx("div",{className:"flex items-center justify-center h-full text-[#555]",children:e.jsxs("div",{className:"text-center",children:[e.jsx(oe,{className:"h-10 w-10 mx-auto mb-3 opacity-30"}),e.jsx("p",{className:"text-sm",children:"결과가 없습니다"}),e.jsx("p",{className:"text-xs mt-1",children:"필터 조건을 변경해 보세요"})]})}):e.jsxs(e.Fragment,{children:[e.jsxs("table",{className:"w-full text-sm hidden md:table",children:[e.jsx("thead",{className:"sticky top-0 bg-[#111120] z-10",children:e.jsxs("tr",{className:"text-[11px] text-[#666] uppercase tracking-wider border-b border-[#2a2a3a]",children:[e.jsx("th",{className:"text-left py-2.5 pl-5 pr-2 font-medium w-8"}),e.jsx("th",{className:"text-left py-2.5 px-2 font-medium w-12",children:"등급"}),e.jsx("th",{className:"text-left py-2.5 px-2 font-medium",children:"이름"}),e.jsx("th",{className:"text-right py-2.5 px-2 font-medium w-20",children:"팔로워"}),e.jsx("th",{className:"text-right py-2.5 px-2 font-medium w-20",children:"평균조회"}),e.jsx("th",{className:"text-right py-2.5 px-2 font-medium w-16",children:"평균댓글"}),e.jsx("th",{className:"text-right py-2.5 px-2 font-medium w-16",children:"최대댓글"}),e.jsx("th",{className:"text-right py-2.5 px-2 font-medium w-16",children:"평균좋아요"}),e.jsx("th",{className:"text-right py-2.5 px-2 font-medium w-16",children:"멤버수"}),e.jsx("th",{className:"text-center py-2.5 px-2 font-medium w-24",children:"마지막게시물"}),e.jsx("th",{className:"text-left py-2.5 px-2 font-medium w-32",children:"카테고리"}),e.jsx("th",{className:"text-left py-2.5 px-2 font-medium",children:"메모"})]})}),e.jsx("tbody",{children:M.map(s=>{const a=ne(s),t=o.has(a),r=le(s),c=s["인플루언서 등급"],K=R[c]||"bg-gray-500/20 text-gray-400 border-gray-500/40";return e.jsxs("tr",{onClick:()=>!r&&te(s),className:`border-b border-[#1e1e2e] transition-colors ${r?"opacity-30 cursor-not-allowed":t?"bg-amber-500/[0.07] cursor-pointer":"hover:bg-[#16162a] cursor-pointer"}`,children:[e.jsx("td",{className:"py-2.5 pl-5 pr-2",children:e.jsx("div",{className:`w-5 h-5 rounded border flex items-center justify-center transition-colors ${t?"bg-amber-500 border-amber-500":"border-[#3a3a4a] bg-transparent"}`,children:t&&e.jsx(ie,{className:"h-3 w-3 text-black",strokeWidth:3})})}),e.jsx("td",{className:"py-2.5 px-2",children:c&&e.jsx("span",{className:`inline-block text-[11px] font-bold leading-none px-2 py-1 rounded border ${K}`,children:c})}),e.jsxs("td",{className:"py-2.5 px-2",children:[e.jsx("div",{className:"font-medium text-[13px] text-white leading-tight",children:s["인스타 이름"]||s.인스타ID}),s["인스타 이름"]&&s.인스타ID&&e.jsxs("div",{className:"text-[11px] text-[#666] mt-0.5",children:["@",s.인스타ID]}),r&&e.jsx("span",{className:"text-[10px] text-[#ffaf5f]/60 mt-0.5 inline-block",children:"추가됨"})]}),e.jsx("td",{className:"py-2.5 px-2 text-right text-[13px] text-[#ddd] tabular-nums",children:i(String(s.팔로워||""))||"-"}),e.jsx("td",{className:"py-2.5 px-2 text-right text-[13px] text-[#ddd] tabular-nums",children:i(String(s["최근 10 평균 릴스 조회수"]||""))||"-"}),e.jsx("td",{className:"py-2.5 px-2 text-right text-[13px] text-[#ddd] tabular-nums",children:i(String(s["공구 평균댓글수"]||""))||"-"}),e.jsx("td",{className:"py-2.5 px-2 text-right text-[13px] text-[#ddd] tabular-nums",children:i(String(s["공구 최대댓글수"]||""))||"-"}),e.jsx("td",{className:"py-2.5 px-2 text-right text-[13px] text-[#ddd] tabular-nums",children:i(String(s["공구 평균좋아요수"]||""))||"-"}),e.jsx("td",{className:"py-2.5 px-2 text-right text-[13px] text-[#ddd] tabular-nums",children:i(String(s["공지채널 멤버수"]||""))||"-"}),e.jsx("td",{className:"py-2.5 px-2 text-center text-[13px] text-[#ddd]",children:s.마지막게시물&&s.마지막게시물!=="-"?s.마지막게시물:"-"}),e.jsx("td",{className:"py-2.5 px-2",children:e.jsxs("div",{className:"flex gap-1 flex-wrap",children:[s["카테고리(대)"]&&s["카테고리(대)"]!=="-"&&e.jsx("span",{className:"text-[11px] bg-[#1e1e34] text-[#999] rounded px-2 py-0.5",children:s["카테고리(대)"]}),s["카테고리(중)"]&&s["카테고리(중)"]!=="-"&&e.jsx("span",{className:"text-[11px] bg-[#1e1e34] text-[#888] rounded px-2 py-0.5",children:s["카테고리(중)"]})]})}),e.jsx("td",{className:"py-2.5 px-2",children:s.메모&&s.메모!=="-"&&e.jsx("p",{className:"text-[12px] text-[#999] leading-tight line-clamp-2 max-w-[200px]",title:s.메모,children:s.메모})})]},a)})})]}),e.jsx("div",{className:"md:hidden divide-y divide-[#1e1e2e]",children:M.map(s=>{const a=ne(s),t=o.has(a),r=le(s),c=s["인플루언서 등급"],K=R[c]||"bg-gray-500/20 text-gray-400 border-gray-500/40";return e.jsx("button",{type:"button",disabled:r,onClick:()=>te(s),className:`w-full text-left px-4 py-3 transition-colors ${r?"opacity-30":t?"bg-amber-500/[0.07]":"active:bg-[#16162a]"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`w-5 h-5 rounded border flex items-center justify-center mt-0.5 shrink-0 ${t?"bg-amber-500 border-amber-500":"border-[#3a3a4a]"}`,children:t&&e.jsx(ie,{className:"h-3 w-3 text-black",strokeWidth:3})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[c&&e.jsx("span",{className:`text-[11px] font-bold px-1.5 py-0.5 rounded border leading-none shrink-0 ${K}`,children:c}),e.jsx("span",{className:"font-semibold text-[14px] text-white truncate",children:s["인스타 이름"]||s.인스타ID}),s["인스타 이름"]&&s.인스타ID&&e.jsxs("span",{className:"text-[12px] text-[#666] shrink-0",children:["@",s.인스타ID]})]}),e.jsxs("div",{className:"flex items-center gap-3 text-[12px]",children:[e.jsxs("span",{className:"text-[#999]",children:[e.jsx("span",{className:"text-[#666]",children:"팔 "}),e.jsx("span",{className:"text-[#ccc] font-medium",children:i(String(s.팔로워||""))||"-"})]}),e.jsxs("span",{className:"text-[#999]",children:[e.jsx("span",{className:"text-[#666]",children:"조회 "}),e.jsx("span",{className:"text-[#ccc] font-medium",children:i(String(s["최근 10 평균 릴스 조회수"]||""))||"-"})]}),e.jsxs("span",{className:"text-[#999]",children:[e.jsx("span",{className:"text-[#666]",children:"댓글 "}),e.jsx("span",{className:"text-[#ccc] font-medium",children:i(String(s["공구 평균댓글수"]||""))||"-"})]}),e.jsxs("span",{className:"text-[#999]",children:[e.jsx("span",{className:"text-[#666]",children:"최대댓글 "}),e.jsx("span",{className:"text-[#ccc] font-medium",children:i(String(s["공구 최대댓글수"]||""))||"-"})]}),e.jsxs("span",{className:"text-[#999]",children:[e.jsx("span",{className:"text-[#666]",children:"좋아요 "}),e.jsx("span",{className:"text-[#ccc] font-medium",children:i(String(s["공구 평균좋아요수"]||""))||"-"})]}),s.마지막게시물&&s.마지막게시물!=="-"&&e.jsxs("span",{className:"text-[#999]",children:[e.jsx("span",{className:"text-[#666]",children:"최근 "}),e.jsx("span",{className:"text-[#ccc] font-medium",children:s.마지막게시물})]})]}),e.jsxs("div",{className:"flex gap-1.5 mt-1.5",children:[s["카테고리(대)"]&&s["카테고리(대)"]!=="-"&&e.jsx("span",{className:"text-[11px] bg-[#1e1e34] text-[#888] rounded px-2 py-0.5",children:s["카테고리(대)"]}),s["카테고리(중)"]&&s["카테고리(중)"]!=="-"&&e.jsx("span",{className:"text-[11px] bg-[#1e1e34] text-[#777] rounded px-2 py-0.5",children:s["카테고리(중)"]}),r&&e.jsx("span",{className:"text-[10px] text-[#ffaf5f]/60",children:"추가됨"})]}),s.메모&&s.메모!=="-"&&e.jsx("p",{className:"text-[11px] text-[#777] mt-1 line-clamp-1",children:s.메모})]})]})},a)})})]})}),e.jsxs("div",{className:"w-[260px] border-l border-[#2a2a3a] hidden md:flex flex-col shrink-0 bg-[#0d0d16]",children:[e.jsxs("div",{className:"px-4 py-3 border-b border-[#2a2a3a] flex items-center justify-between",children:[e.jsx("span",{className:"text-[13px] font-semibold text-[#ccc]",children:"선택됨"}),o.size>0&&e.jsx("span",{className:"text-xs font-bold text-amber-400 bg-amber-400/10 rounded-full px-2 py-0.5",children:o.size})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-2.5 space-y-1.5",children:o.size===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-[#444] text-center px-3",children:[e.jsx(oe,{className:"h-7 w-7 mb-2 opacity-25"}),e.jsxs("p",{className:"text-xs leading-relaxed",children:["좌측 목록에서",e.jsx("br",{}),"인플루언서를 클릭하세요"]})]}):Array.from(o.entries()).map(([s,a])=>{const t=a["인플루언서 등급"],r=R[t]||"";return e.jsxs("div",{className:"bg-[#16162a] border border-[#252540] rounded-lg px-3 py-2 flex items-center gap-2 group hover:border-[#333]",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[t&&e.jsx("span",{className:`text-[10px] font-bold px-1.5 py-0.5 rounded border leading-none shrink-0 ${r}`,children:t}),e.jsx("span",{className:"text-[13px] font-medium text-white truncate",children:a["인스타 이름"]||a.인스타ID})]}),e.jsx("p",{className:"text-[11px] text-[#666] mt-0.5",children:a.팔로워?i(a.팔로워)+" 팔로워":""})]}),e.jsx("button",{onClick:c=>{c.stopPropagation(),ae(s)},className:"text-[#444] hover:text-red-400 transition-colors p-0.5 rounded hover:bg-red-400/10 opacity-0 group-hover:opacity-100",children:e.jsx(U,{className:"h-3.5 w-3.5"})})]},s)})}),e.jsx("div",{className:"p-3 border-t border-[#2a2a3a]",children:e.jsxs(xe,{onClick:re,disabled:!b&&o.size===0,className:"w-full h-9 bg-[#ffaf5f] hover:bg-[#ffaf5f]/90 text-[#0e0e18] font-bold text-sm disabled:opacity-25 disabled:cursor-not-allowed",children:[e.jsx(me,{className:"h-4 w-4 mr-1.5"}),b?`선택 완료 (${o.size})`:`제안서에 추가${o.size>0?` (${o.size})`:""}`]})})]})]}),e.jsxs("div",{className:"md:hidden shrink-0 border-t border-[#2a2a3a] bg-[#111120]",children:[Q&&o.size>0&&e.jsx("div",{className:"max-h-[200px] overflow-y-auto p-2.5 space-y-1.5 border-b border-[#2a2a3a]",children:Array.from(o.entries()).map(([s,a])=>{const t=a["인플루언서 등급"],r=R[t]||"";return e.jsxs("div",{className:"bg-[#16162a] border border-[#252540] rounded-lg px-3 py-2 flex items-center gap-2",children:[e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"flex items-center gap-1.5",children:[t&&e.jsx("span",{className:`text-[10px] font-bold px-1.5 py-0.5 rounded border leading-none shrink-0 ${r}`,children:t}),e.jsx("span",{className:"text-[13px] font-medium text-white truncate",children:a["인스타 이름"]||a.인스타ID})]})}),e.jsx("button",{onClick:()=>ae(s),className:"text-[#666] hover:text-red-400 p-1",children:e.jsx(U,{className:"h-3.5 w-3.5"})})]},s)})}),e.jsxs("div",{className:"flex items-center gap-2 px-3 py-2.5",children:[o.size>0&&e.jsxs("button",{onClick:()=>X(!Q),className:"flex items-center gap-1 text-[13px] text-amber-400 font-medium",children:[e.jsxs("span",{children:[o.size,"명 선택"]}),e.jsx(ve,{className:`h-3.5 w-3.5 transition-transform ${Q?"rotate-180":""}`})]}),e.jsxs(xe,{onClick:re,disabled:!b&&o.size===0,className:"ml-auto h-9 px-5 bg-[#ffaf5f] hover:bg-[#ffaf5f]/90 text-[#0e0e18] font-bold text-sm disabled:opacity-25",children:[e.jsx(me,{className:"h-4 w-4 mr-1"}),b?`완료 (${o.size})`:`추가${o.size>0?` (${o.size})`:""}`]})]})]})]})})}function Re(){return ye({queryKey:["products"],queryFn:C.getProducts,staleTime:300*1e3})}function ze(){const l=$();return z({mutationFn:C.refreshProducts,onSuccess:n=>{l.setQueryData(["products"],n),p.success("데이터 새로고침 완료")},onError:n=>{p.error("새로고침 실패: "+n.message)}})}function $e(){const l=$();return z({mutationFn:C.addProduct,onSuccess:()=>{l.invalidateQueries({queryKey:["products"]}),p.success("제품 등록 완료")},onError:n=>{p.error("제품 등록 실패: "+n.message)}})}function Ae(){const l=$();return z({mutationFn:n=>C.updateProductCell(n.rowIndex,n),onMutate:async n=>{await l.cancelQueries({queryKey:["products"]});const g=l.getQueryData(["products"]);return l.setQueryData(["products"],u=>{if(!u?.data)return u;const h=[...u.data],b=h.findIndex(w=>w._rowIndex===n.rowIndex);if(b!==-1){const w=h[b],m=(u.headers||Object.keys(w))[n.columnIndex];m&&(h[b]={...w,[m]:n.value})}return{...u,data:h}}),{previous:g}},onError:(n,g,u)=>{l.setQueryData(["products"],u?.previous),p.error("저장 실패: "+n.message)},onSuccess:()=>{p.success("저장 완료")}})}function Oe(){const l=$();return z({mutationFn:n=>C.deleteProduct(n),onSuccess:()=>{l.invalidateQueries({queryKey:["products"]}),p.success("제품 삭제 완료")},onError:n=>{p.error("제품 삭제 실패: "+n.message)}})}export{Ee as I,Me as M,me as P,ze as a,$e as b,Ae as c,Oe as d,Ie as m,Re as u};
