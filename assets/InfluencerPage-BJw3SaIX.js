import{r as l,j as e,a as _e}from"./index-CZpWobtf.js";import{c as X,S as Ne,I as le,a as De,X as ge,b as C,B as R,D as Ie,d as Le,e as ze,f as Pe,g as Re,t as Te,u as Fe,h as Ae,i as Ue,j as Ve,k as He,l as Ge,m as $e,n as qe}from"./useInfluencerData-ZdeQT_Uw.js";import{P as ve,E as Be,B as ye,A as Ye,a as Ke,b as We,M as we,R as Qe,c as Xe,T as Je}from"./MemoEditModal-CgFunm-N.js";import{M as K,G as ke,D as pe,H as fe,C as Q,f as H,a as oe,U as Ze,S as ie,b as et,c as tt}from"./constants-Bua1ADfm.js";import{u as st,a as at,b as nt,f as q,c as rt}from"./useAnalyzerData-C7uTmAZi.js";import"./useQuery-B2KYtFwh.js";const it=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Ce=X("chart-column",it);const lt=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],ct=X("clock",lt);const dt=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],ot=X("settings",dt);const mt=[["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M12 21v-9",key:"17s77i"}],["path",{d:"M12 8V3",key:"13r4qs"}],["path",{d:"M17 16h4",key:"h1uq16"}],["path",{d:"M19 12V3",key:"o1uvq1"}],["path",{d:"M19 21v-5",key:"qua636"}],["path",{d:"M3 14h4",key:"bcjad9"}],["path",{d:"M5 10V3",key:"cb8scm"}],["path",{d:"M5 21v-7",key:"1w1uti"}]],xt=X("sliders-vertical",mt);const ht=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],ut=X("sparkles",ht);const bt=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],he=X("star",bt);function pt({searchQuery:s,onSearchChange:c,categoryOptions:p,selectedCategories:N,onCategoriesChange:x,selectedGrades:h,onGradesChange:u,activityOptions:S,selectedActivity:f,onActivityChange:m,resultCount:g,totalCount:j,showFavoritesOnly:M,onFavoritesToggle:O}){const[E,v]=l.useState(s),[k,U]=l.useState(!1);l.useEffect(()=>{const P=setTimeout(()=>{c(E)},250);return()=>clearTimeout(P)},[E,c]);const T=N.length+h.length+f.length,I=()=>{x([]),u([]),m([])};return e.jsxs("div",{children:[e.jsxs("div",{className:"md:hidden",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Ne,{className:"absolute left-2.5 top-1/2 -translate-y-1/2 h-3.5 w-3.5 text-admin-text"}),e.jsx(le,{type:"text",placeholder:"ID ë˜ëŠ” ì´ë¦„ ê²€ìƒ‰...",value:E,onChange:P=>v(P.target.value),className:"pl-8 h-8 text-[13px] bg-admin-card border-admin-border text-white placeholder:text-admin-text"})]}),e.jsx("button",{onClick:O,className:`flex items-center justify-center h-8 w-8 rounded-md border shrink-0 transition-colors ${M?"bg-amber-500/20 border-amber-500/40 text-amber-400":"bg-admin-card border-admin-border text-admin-text/40"}`,children:e.jsx(he,{className:`h-3.5 w-3.5 ${M?"fill-amber-400":""}`})}),e.jsxs("button",{onClick:()=>U(!k),className:`relative flex items-center justify-center h-8 w-8 rounded-md border shrink-0 transition-colors ${k||T>0?"bg-admin-accent/15 border-admin-accent/40 text-admin-accent":"bg-admin-card border-admin-border text-admin-text"}`,children:[e.jsx(De,{className:"h-3.5 w-3.5"}),T>0&&e.jsx("span",{className:"absolute -top-1.5 -right-1.5 min-w-[16px] h-4 flex items-center justify-center rounded-full bg-admin-accent text-[10px] font-bold text-admin-bg px-1",children:T})]}),e.jsxs("span",{className:"text-[11px] text-admin-text tabular-nums shrink-0",children:[e.jsx("span",{className:"text-white font-semibold",children:g}),"/",j]})]}),k&&e.jsxs("div",{className:"mt-2 flex flex-col gap-2",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsx(K,{options:p,selected:N,onChange:x,placeholder:"ì¹´í…Œê³ ë¦¬"}),e.jsx(K,{options:ke,selected:h,onChange:u,placeholder:"ë“±ê¸‰"}),e.jsx(K,{options:S,selected:f,onChange:m,placeholder:"í™œë™"})]}),T>0&&e.jsxs("button",{onClick:I,className:"flex items-center gap-1 text-[11px] text-admin-text hover:text-admin-accent transition-colors self-end",children:[e.jsx(ge,{className:"h-3 w-3"}),"í•„í„° ì´ˆê¸°í™”"]})]})]}),e.jsxs("div",{className:"hidden md:block space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Ne,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-admin-text"}),e.jsx(le,{type:"text",placeholder:"ì¸ìŠ¤íƒ€ID ë˜ëŠ” ì´ë¦„ ê²€ìƒ‰...",value:E,onChange:P=>v(P.target.value),className:"pl-10 bg-admin-card border-admin-border text-white placeholder:text-admin-text"})]}),e.jsx(K,{options:p,selected:N,onChange:x,placeholder:"ì¹´í…Œê³ ë¦¬ ì„ íƒ"}),e.jsx(K,{options:ke,selected:h,onChange:u,placeholder:"ë“±ê¸‰ ì„ íƒ"}),e.jsx(K,{options:S,selected:f,onChange:m,placeholder:"í™œë™ í•„í„°"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-admin-text",children:[e.jsx("span",{className:"text-white font-semibold",children:g})," /"," ",j," ê±´"]}),e.jsxs("button",{onClick:O,className:`flex items-center gap-1.5 px-3 py-1 rounded-full text-[12px] font-medium border transition-colors ${M?"bg-amber-500/20 border-amber-500/40 text-amber-400":"bg-admin-card border-admin-border text-admin-text hover:text-white"}`,children:[e.jsx(he,{className:`h-3.5 w-3.5 ${M?"fill-amber-400":""}`}),"ì¦ê²¨ì°¾ê¸°ë§Œ"]})]})]})]})}function ft(s){const c=s.reduce((h,u)=>h+(Q[u]?.width||120),0),p={},N=[];let x=0;for(let h=0;h<s.length;h++){const u=Q[s[h]]?.width||120,S=u/c*100;p[s[h]]=`${S}%`,h<ie&&(N.push(`${x/c*100}%`),x+=u)}return{total:c,pctWidths:p,stickyOffsets:N}}function gt({data:s,headers:c,visibleColumns:p,onCellEdit:N,onMemoEdit:x,onAnalyze:h,highlightId:u,stickyTopOffset:S=0}){const[f,m]=l.useState({column:null,direction:null});l.useEffect(()=>{if(!u)return;const t=setTimeout(()=>{const r=document.querySelector(`[data-insta-id="${CSS.escape(u)}"]`);r&&r.scrollIntoView({behavior:"smooth",block:"center"})},100);return()=>clearTimeout(t)},[u]);const[g,j]=l.useState(null),[M,O]=l.useState(""),E=l.useMemo(()=>pe.filter(t=>p.includes(t)&&!fe.includes(t)),[p]),v=l.useMemo(()=>ft(E),[E]),k=l.useMemo(()=>!f.column||!f.direction?s:[...s].sort((t,r)=>{const i=String(t[f.column]||""),a=String(r[f.column]||""),d=parseFloat(i.replace(/,/g,"")),_=parseFloat(a.replace(/,/g,""));return!isNaN(d)&&!isNaN(_)?f.direction==="asc"?d-_:_-d:f.direction==="asc"?i.localeCompare(a,"ko"):a.localeCompare(i,"ko")}),[s,f]),U=t=>{m(r=>r.column!==t?{column:t,direction:"asc"}:r.direction==="asc"?{column:t,direction:"desc"}:{column:null,direction:null})},T=(t,r,i,a)=>{const d=Q[r];d&&(d.type==="editable-memo"?x(t,i,a):(d.type==="editable-number"||d.type==="editable-boolean")&&(j({rowIndex:t,column:r}),O(i)))},I=(t,r)=>{if(g?.rowIndex===t&&g?.column===r){const i=c.indexOf(r);i!==-1&&N(t,i,M),j(null),O("")}},P=(t,r,i)=>{t.key==="Enter"?I(r,i):t.key==="Escape"&&(j(null),O(""))},$=(t,r,i)=>{const a=String(t[r]||""),d=Q[r];if(!d)return a;const _=c.indexOf(r),A=g?.rowIndex===i&&g?.column===r;if(d.type==="editable-memo")return e.jsxs("button",{onClick:()=>T(i,r,a,t["ì¸ìŠ¤íƒ€ ì´ë¦„"]),className:"w-full text-left group/memo relative",children:[e.jsx("span",{className:"whitespace-pre-wrap break-words text-[13px] leading-relaxed text-white/90",children:a||"-"}),e.jsx("span",{className:"absolute top-0 right-0 opacity-0 group-hover/memo:opacity-100 transition-opacity",children:e.jsx(ve,{className:"h-3 w-3 text-admin-accent"})})]});if(d.type==="editable-number"){const b=a&&a!=="-"?a:"0";return A?e.jsx("input",{type:"text",value:M,onChange:D=>O(D.target.value),onBlur:()=>I(i,r),onKeyDown:D=>P(D,i,r),autoFocus:!0,className:"w-full px-1.5 py-0.5 bg-admin-bg border border-admin-accent rounded text-white text-right text-[13px] focus:outline-none"}):e.jsx("button",{onClick:()=>T(i,r,a,""),className:"w-full text-right tabular-nums text-[13px] text-admin-accent/80 hover:text-admin-accent border-b border-dashed border-admin-border hover:border-admin-accent/50 transition-colors",children:H(b)})}if(d.type==="editable-boolean"){const b=a.trim().toUpperCase()==="ON";return e.jsx(R,{size:"sm",variant:"outline",onClick:()=>{N(i,_,b?"OFF":"ON")},className:C("h-6 px-2 text-[11px] font-semibold rounded-full",b?"bg-admin-success/15 text-admin-success border-admin-success/30 hover:bg-admin-success/25":"bg-gray-500/15 text-gray-500 border-gray-500/30 hover:bg-gray-500/25"),children:b?"ON":"OFF"})}if(d.type==="favorite"){const b=a.trim().toUpperCase()==="TRUE";return e.jsx("button",{onClick:()=>{const D=c.indexOf(r);D!==-1&&N(i,D,b?"FALSE":"TRUE")},className:"flex items-center justify-center w-full",children:e.jsx(he,{className:C("h-4 w-4 transition-colors",b?"fill-amber-400 text-amber-400":"text-admin-text/30 hover:text-amber-400/60")})})}if(d.type==="id"){const b=t["í”„ë¡œí•„ ë§í¬"];return b&&r==="ì¸ìŠ¤íƒ€ID"?e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("a",{href:b,target:"_blank",rel:"noopener noreferrer",className:"text-admin-accent hover:underline text-[13px] font-medium",children:a}),e.jsx("button",{onClick:()=>h(b),className:"text-admin-text/40 hover:text-admin-accent transition-colors shrink-0",title:"ì¸ìŠ¤íƒ€ê·¸ëž¨ ë¶„ì„",children:e.jsx(Ce,{className:"h-3.5 w-3.5"})})]}):e.jsx("span",{className:"text-[13px] text-admin-text",children:a})}if(d.type==="name")return e.jsx("span",{className:"text-[13px] text-white whitespace-normal break-words leading-snug",children:a});if(d.type==="link")return!a||a==="-"?e.jsx("span",{className:"text-admin-text/40",children:"-"}):e.jsx("a",{href:a,target:"_blank",rel:"noopener noreferrer",className:"text-admin-accent/70 hover:text-admin-accent transition-colors",children:e.jsx(Be,{className:"h-3.5 w-3.5 mx-auto"})});if(d.type==="number")return e.jsx("span",{className:"tabular-nums text-[13px]",children:H(a)});if(d.type==="tag")return!a||a==="-"?e.jsx("span",{className:"text-admin-text/40",children:"-"}):e.jsx("span",{className:"text-[12px] text-admin-purple whitespace-normal break-words",children:a});if(d.type==="boolean"){const b=a.trim().toUpperCase()==="Y"||a.trim()==="O";return e.jsx("span",{className:C("text-[11px] font-bold",b?"text-admin-success":"text-admin-text/40"),children:b?"Y":"N"})}if(d.type==="grade"){if(!a||a==="-")return e.jsx("span",{className:"text-admin-text/40",children:"-"});const b=oe[a]||oe.C;return e.jsx(ye,{variant:"outline",className:C("font-bold text-[11px] px-2 py-0",b),children:a})}return d.type==="text-wrap"?!a||a==="-"?e.jsx("span",{className:"text-admin-text/40",children:"-"}):e.jsx("span",{className:"whitespace-normal break-words text-[13px] leading-snug text-white/80",children:a}):d.type==="desc"?e.jsx("span",{className:"text-[13px] text-admin-text",children:a||"-"}):e.jsx("span",{className:"text-[13px]",children:a})},J=({column:t})=>f.column===t?f.direction==="asc"?e.jsx(Ke,{className:"h-3 w-3 shrink-0 text-admin-accent"}):e.jsx(We,{className:"h-3 w-3 shrink-0 text-admin-accent"}):e.jsx(Ye,{className:"h-3 w-3 shrink-0 opacity-0 group-hover/th:opacity-40 transition-opacity"}),Z=(t,r,i)=>{j({rowIndex:t,column:r}),O(i&&i!=="-"?i:"0")},L=()=>e.jsx("div",{className:"md:hidden space-y-3",children:k.map(t=>{const r=String(t.ì¸ìŠ¤íƒ€ID||""),i=String(t["ì¸ìŠ¤íƒ€ ì´ë¦„"]||""),a=String(t["ì¸í”Œë£¨ì–¸ì„œ ë“±ê¸‰"]||""),d=String(t["ì¹´í…Œê³ ë¦¬(ëŒ€)"]||""),_=String(t["ì¹´í…Œê³ ë¦¬(ì¤‘)"]||""),A=String(t.íŒ”ë¡œì›Œ||""),b=String(t["ìµœê·¼ 10 í‰ê·  ë¦´ìŠ¤ ì¡°íšŒìˆ˜"]||""),D=String(t["ìµœëŒ€ ë¦´ìŠ¤ ì¡°íšŒìˆ˜"]||""),G=String(t["ìµœê·¼10ê°œ í‰ê·  ëŒ“ê¸€ìˆ˜"]||""),se=String(t["ê³µêµ¬ í‰ê· ëŒ“ê¸€ìˆ˜"]||""),ae=String(t["ê³µêµ¬ ìµœëŒ€ëŒ“ê¸€ìˆ˜"]||""),ne=String(t.ë§ˆì§€ë§‰ê²Œì‹œë¬¼||""),re=String(t.ì—…ë°ì´íŠ¸ì¼ìž||""),B=String(t["ê³µì§€ì±„ë„ ë©¤ë²„ìˆ˜"]||""),ue=String(t.ìŠ¤í† ë¦¬í™œë™||"").trim().toUpperCase(),n=String(t.ì†Œí†µì±„ë„ì—¬ë¶€||"").trim(),o=String(t.ëŒ“ê¸€í™œë™ì—¬ë¶€||"").trim(),w=String(t["ë§ˆì§€ë§‰ í”¼ë“œ ê²Œì‹œì¼"]||""),V=String(t.ë©”ëª¨||""),je=String(t.ì¦ê²¨ì°¾ê¸°||"").trim().toUpperCase()==="TRUE",de=t["í”„ë¡œí•„ ë§í¬"],Me=oe[a]||oe.C,Oe=g?.rowIndex===t._rowIndex&&g?.column==="ê³µì§€ì±„ë„ ë©¤ë²„ìˆ˜",Ee=u===r;return e.jsxs("div",{"data-insta-id":r,className:C("rounded-lg p-3 transition-colors duration-500",Ee?"bg-admin-accent/10 border-2 border-admin-accent/40":"bg-admin-card border border-admin-border"),children:[e.jsxs("div",{className:"flex items-center justify-between gap-2 mb-1",children:[e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[de?e.jsxs("a",{href:de,target:"_blank",rel:"noopener noreferrer",className:"text-admin-accent hover:underline text-sm font-medium truncate",children:["@",r]}):e.jsxs("span",{className:"text-admin-text text-sm truncate",children:["@",r]}),a&&a!=="-"&&e.jsx(ye,{variant:"outline",className:C("font-bold text-[11px] px-2 py-0 shrink-0",Me),children:a})]}),e.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[de&&e.jsx("button",{onClick:()=>h(de),className:"text-admin-text/40 hover:text-admin-accent transition-colors",title:"ì¸ìŠ¤íƒ€ê·¸ëž¨ ë¶„ì„",children:e.jsx(Ce,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>{const Y=c.indexOf("ì¦ê²¨ì°¾ê¸°");Y!==-1&&N(t._rowIndex,Y,je?"FALSE":"TRUE")},children:e.jsx(he,{className:C("h-4 w-4 transition-colors",je?"fill-amber-400 text-amber-400":"text-admin-text/30 hover:text-amber-400/60")})}),w&&w!=="-"&&e.jsxs("span",{className:"text-[11px] text-admin-text/60 flex items-center gap-1",children:[e.jsx(ct,{className:"h-3 w-3"}),w]})]})]}),e.jsxs("div",{className:"flex items-baseline gap-2 mb-2",children:[e.jsx("span",{className:"text-white text-[13px] font-medium truncate",children:i}),d&&d!=="-"&&e.jsx("span",{className:"text-[11px] text-admin-purple shrink-0",children:d}),_&&_!=="-"&&_!==d&&e.jsx("span",{className:"text-[11px] text-admin-text/50 shrink-0",children:_})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-1 mb-1",children:[e.jsxs("div",{className:"bg-admin-bg/40 rounded px-2 py-1.5 text-center",children:[e.jsx("p",{className:"text-[10px] text-admin-text/60 mb-0.5",children:"íŒ”ë¡œì›Œ"}),e.jsx("p",{className:"text-[13px] text-white tabular-nums font-medium",children:A&&A!=="-"?H(A):"-"})]}),e.jsxs("div",{className:"bg-admin-bg/40 rounded px-2 py-1.5 text-center",children:[e.jsx("p",{className:"text-[10px] text-admin-text/60 mb-0.5",children:"í‰ê· ì¡°íšŒ"}),e.jsx("p",{className:"text-[13px] text-white tabular-nums font-medium",children:b&&b!=="-"?H(b):"-"})]}),e.jsxs("div",{className:"bg-admin-bg/40 rounded px-2 py-1.5 text-center",children:[e.jsx("p",{className:"text-[10px] text-admin-text/60 mb-0.5",children:"ìµœëŒ€ì¡°íšŒ"}),e.jsx("p",{className:"text-[13px] text-white tabular-nums font-medium",children:D&&D!=="-"?H(D):"-"})]}),e.jsxs("div",{className:"bg-admin-bg/40 rounded px-2 py-1.5 text-center",children:[e.jsx("p",{className:"text-[10px] text-admin-text/60 mb-0.5",children:"í‰ê· ëŒ“ê¸€"}),e.jsx("p",{className:"text-[13px] text-white tabular-nums font-medium",children:G&&G!=="-"?H(G):"-"})]})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-1 mb-2",children:[e.jsxs("div",{className:"bg-admin-bg/40 rounded px-2 py-1.5 text-center",children:[e.jsx("p",{className:"text-[10px] text-admin-text/60 mb-0.5",children:"ê³µêµ¬í‰ê· ðŸ’¬"}),e.jsx("p",{className:"text-[13px] text-white tabular-nums font-medium",children:se&&se!=="-"?H(se):"-"})]}),e.jsxs("div",{className:"bg-admin-bg/40 rounded px-2 py-1.5 text-center",children:[e.jsx("p",{className:"text-[10px] text-admin-text/60 mb-0.5",children:"ê³µêµ¬ìµœëŒ€ðŸ’¬"}),e.jsx("p",{className:"text-[13px] text-white tabular-nums font-medium",children:ae&&ae!=="-"?H(ae):"-"})]}),ne&&ne!=="-"&&e.jsxs("div",{className:"bg-admin-bg/40 rounded px-2 py-1.5 text-center",children:[e.jsx("p",{className:"text-[10px] text-admin-text/60 mb-0.5",children:"ë§ˆì§€ë§‰ê²Œì‹œë¬¼"}),e.jsx("p",{className:"text-[11px] text-white/80",children:ne})]}),re&&re!=="-"&&e.jsxs("div",{className:"bg-admin-bg/40 rounded px-2 py-1.5 text-center",children:[e.jsx("p",{className:"text-[10px] text-admin-text/60 mb-0.5",children:"ì—…ë°ì´íŠ¸"}),e.jsx("p",{className:"text-[11px] text-white/80",children:re})]})]}),e.jsxs("div",{className:"flex items-center justify-between gap-2 mb-2",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(Ze,{className:"h-3 w-3 text-admin-text/60"}),e.jsx("span",{className:"text-[11px] text-admin-text/60",children:"ë©¤ë²„ìˆ˜"}),Oe?e.jsx("input",{type:"text",value:M,onChange:Y=>O(Y.target.value),onBlur:()=>I(t._rowIndex,"ê³µì§€ì±„ë„ ë©¤ë²„ìˆ˜"),onKeyDown:Y=>P(Y,t._rowIndex,"ê³µì§€ì±„ë„ ë©¤ë²„ìˆ˜"),autoFocus:!0,className:"w-16 px-1.5 py-0.5 bg-admin-bg border border-admin-accent rounded text-white text-right text-[12px] focus:outline-none"}):e.jsx("button",{onClick:()=>Z(t._rowIndex,"ê³µì§€ì±„ë„ ë©¤ë²„ìˆ˜",B),className:"text-[12px] text-admin-accent/80 hover:text-admin-accent tabular-nums border-b border-dashed border-admin-border hover:border-admin-accent/50 transition-colors",children:B&&B!=="-"?H(B):"0"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[ue==="ON"&&e.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded-full bg-admin-success/15 text-admin-success border border-admin-success/30",children:"ìŠ¤í† ë¦¬"}),(n==="Y"||n==="O")&&e.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded-full bg-teal-500/15 text-teal-400 border border-teal-500/30",children:"ì†Œí†µ"}),(o==="Y"||o==="O")&&e.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded-full bg-purple-500/15 text-purple-400 border border-purple-500/30",children:"ëŒ“ê¸€"})]})]}),V&&V!=="-"?e.jsx("button",{onClick:()=>x(t._rowIndex,V,i),className:"w-full text-left group/memo",children:e.jsxs("div",{className:"bg-admin-bg/50 rounded px-2.5 py-1.5 flex items-start gap-2",children:[e.jsx(we,{className:"h-3 w-3 text-admin-text mt-0.5 shrink-0"}),e.jsx("p",{className:"text-[12px] text-white/70 whitespace-pre-wrap break-words line-clamp-2 flex-1",children:V}),e.jsx(ve,{className:"h-3 w-3 text-admin-accent opacity-0 group-hover/memo:opacity-100 transition-opacity shrink-0 mt-0.5"})]})}):e.jsx("button",{onClick:()=>x(t._rowIndex,"",i),className:"w-full text-left",children:e.jsxs("div",{className:"bg-admin-bg/50 rounded px-2.5 py-1.5 flex items-center gap-2 text-admin-text/40 hover:text-admin-text/60 transition-colors",children:[e.jsx(we,{className:"h-3 w-3 shrink-0"}),e.jsx("span",{className:"text-[12px]",children:"ë©”ëª¨ ì¶”ê°€..."})]})})]},t._rowIndex)})}),F=l.useRef(null),z=l.useRef(null),y=l.useRef(!1),ee=()=>{y.current||(y.current=!0,F.current&&z.current&&(z.current.scrollLeft=F.current.scrollLeft),requestAnimationFrame(()=>{y.current=!1}))},ce=()=>{y.current||(y.current=!0,F.current&&z.current&&(F.current.scrollLeft=z.current.scrollLeft),requestAnimationFrame(()=>{y.current=!1}))},te=e.jsx("colgroup",{children:E.map(t=>e.jsx("col",{style:{width:v.pctWidths[t]}},t))});return e.jsxs(e.Fragment,{children:[L(),e.jsxs("div",{className:"hidden md:block",children:[e.jsx("div",{className:"sticky z-40 border border-admin-border border-b-0 rounded-t-lg bg-[#14142a]",style:{top:S},children:e.jsx("div",{ref:F,className:"overflow-x-auto",style:{scrollbarWidth:"none"},onScroll:ee,children:e.jsxs("table",{className:"w-full text-sm border-collapse",style:{minWidth:v.total,tableLayout:"fixed"},children:[te,e.jsx("thead",{children:e.jsx("tr",{className:"bg-[#14142a]",children:E.map((t,r)=>{const i=Q[t],a=r<ie,d=r===ie-1;return e.jsx("th",{style:a?{left:v.stickyOffsets[r]}:void 0,className:C("px-2.5 py-2.5 text-[11px] uppercase tracking-wider text-admin-text/70 font-semibold border-r border-admin-border/50 last:border-r-0 group/th",a&&"sticky z-40 bg-[#14142a]",d&&"shadow-[3px_0_8px_rgba(0,0,0,0.35)] border-r-admin-border",i?.align==="center"&&"text-center",i?.align==="right"&&"text-right"),children:e.jsxs("button",{onClick:()=>U(t),className:"flex items-center gap-1 w-full hover:text-white transition-colors",children:[e.jsx("span",{className:"whitespace-nowrap",children:i?.label||t}),e.jsx(J,{column:t})]})},t)})})})]})})}),e.jsx("div",{className:"border border-admin-border border-t-0 rounded-b-lg overflow-hidden",children:e.jsx("div",{ref:z,className:"overflow-x-auto",onScroll:ce,children:e.jsxs("table",{className:"w-full text-sm border-collapse",style:{minWidth:v.total,tableLayout:"fixed"},children:[te,e.jsx("tbody",{children:k.map((t,r)=>{const i=String(t.ì¸ìŠ¤íƒ€ID||""),a=u===i;return e.jsx("tr",{"data-insta-id":i,className:C("border-b border-admin-border/40 transition-colors duration-500","hover:bg-white/[0.02]",a?"bg-admin-accent/10 ring-1 ring-admin-accent/40":r%2===0?"bg-[#11111f]":"bg-[#151528]"),children:E.map((d,_)=>{const A=Q[d],b=_<ie,D=_===ie-1,G=r%2===0?"#11111f":"#151528";return e.jsx("td",{style:b?{left:v.stickyOffsets[_],backgroundColor:G}:void 0,className:C("px-2.5 py-2 text-white border-r border-admin-border/30 last:border-r-0 align-top",b&&"sticky z-30",D&&"shadow-[3px_0_8px_rgba(0,0,0,0.35)] border-r-admin-border/60",A?.align==="center"&&"text-center",A?.align==="right"&&"text-right",A?.highlight&&"font-semibold"),children:$(t,d,t._rowIndex)},d)})},t._rowIndex)})})]})})})]})]})}function jt({className:s,...c}){return e.jsx("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:e.jsx("table",{"data-slot":"table",className:C("w-full caption-bottom text-sm",s),...c})})}function Nt({className:s,...c}){return e.jsx("thead",{"data-slot":"table-header",className:C("[&_tr]:border-b",s),...c})}function vt({className:s,...c}){return e.jsx("tbody",{"data-slot":"table-body",className:C("[&_tr:last-child]:border-0",s),...c})}function Se({className:s,...c}){return e.jsx("tr",{"data-slot":"table-row",className:C("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",s),...c})}function me({className:s,...c}){return e.jsx("th",{"data-slot":"table-head",className:C("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",s),...c})}function xe({className:s,...c}){return e.jsx("td",{"data-slot":"table-cell",className:C("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",s),...c})}function yt({isOpen:s,onClose:c,grades:p,onSave:N,isSaving:x=!1}){const[h,u]=l.useState(p);l.useEffect(()=>{u(p)},[p]);const S=(m,g,j)=>{const M=[...h];M[m]={...M[m],[g]:j},u(M)},f=m=>{N(h,m)};return e.jsx(Ie,{open:s,onOpenChange:c,children:e.jsxs(Le,{className:"bg-admin-card border-admin-border text-white max-w-4xl max-h-[80vh] overflow-y-auto",children:[e.jsx(ze,{children:e.jsx(Pe,{className:"text-white",children:"ë“±ê¸‰ ê¸°ì¤€ ì„¤ì •"})}),e.jsxs("div",{className:"py-4",children:[e.jsxs(jt,{children:[e.jsx(Nt,{children:e.jsxs(Se,{className:"border-admin-border hover:bg-transparent",children:[e.jsx(me,{className:"text-admin-text",children:"ë“±ê¸‰"}),e.jsx(me,{className:"text-admin-text",children:"ìµœì†Œ íŒ”ë¡œì›Œ"}),e.jsx(me,{className:"text-admin-text",children:"ìµœì†Œ ì¡°íšŒìˆ˜"}),e.jsx(me,{className:"text-admin-text",children:"ìµœì†Œ ì†Œí†µë¥ "})]})}),e.jsx(vt,{children:h.map((m,g)=>e.jsxs(Se,{className:"border-admin-border hover:bg-admin-bg/50",children:[e.jsx(xe,{className:"font-medium text-white",children:m.grade}),e.jsx(xe,{children:e.jsx(le,{type:"text",value:m.minFollowers,onChange:j=>S(g,"minFollowers",j.target.value),className:"bg-admin-bg border-admin-border text-white"})}),e.jsx(xe,{children:e.jsx(le,{type:"text",value:m.minViews,onChange:j=>S(g,"minViews",j.target.value),className:"bg-admin-bg border-admin-border text-white"})}),e.jsx(xe,{children:e.jsx(le,{type:"text",value:m.minEngagement,onChange:j=>S(g,"minEngagement",j.target.value),className:"bg-admin-bg border-admin-border text-white"})})]},g))})]}),e.jsxs("div",{className:"mt-4 text-xs text-admin-text",children:[e.jsx("p",{children:"â€¢ ë“±ê¸‰ ê¸°ì¤€ì„ ì„¤ì •í•˜ê³  ì €ìž¥í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤."}),e.jsx("p",{children:'â€¢ "ì €ìž¥ + ìˆ˜ì‹ ì ìš©"ì„ í´ë¦­í•˜ë©´ ë“±ê¸‰ ì»¬ëŸ¼ì— ìžë™ ê³„ì‚° ìˆ˜ì‹ì´ ì ìš©ë©ë‹ˆë‹¤.'})]})]}),e.jsxs(Re,{className:"gap-2",children:[e.jsx(R,{variant:"outline",onClick:c,disabled:x,className:"bg-transparent border-admin-border text-white hover:bg-admin-bg",children:"ì·¨ì†Œ"}),e.jsx(R,{onClick:()=>f(!1),disabled:x,className:"bg-admin-purple text-white hover:bg-admin-purple/90",children:"ì €ìž¥ë§Œ"}),e.jsx(R,{onClick:()=>f(!0),disabled:x,className:"bg-admin-accent text-admin-bg hover:bg-admin-accent/90",children:x?"ì²˜ë¦¬ ì¤‘...":"ì €ìž¥ + ìˆ˜ì‹ ì ìš©"})]})]})})}function wt({isOpen:s,onClose:c,columns:p,onSave:N,isSaving:x=!1}){const[h,u]=l.useState(p);l.useEffect(()=>{u(p)},[p]);const S=m=>{u(g=>g.map(j=>j.name===m?{...j,visible:!j.visible}:j))},f=()=>{N(h)};return s?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-black/50 z-40",onClick:c}),e.jsxs("div",{className:"fixed right-0 top-0 h-full w-80 bg-admin-card border-l border-admin-border z-50 shadow-xl overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-admin-card border-b border-admin-border p-4 flex items-center justify-between",children:[e.jsx("h3",{className:"text-white font-semibold",children:"ì»¬ëŸ¼ í‘œì‹œ ì„¤ì •"}),e.jsx("button",{onClick:c,className:"text-admin-text hover:text-white transition-colors",children:e.jsx(ge,{className:"h-5 w-5"})})]}),e.jsx("div",{className:"p-4 space-y-2",children:h.map(m=>e.jsxs("label",{className:"flex items-center gap-3 p-2 rounded hover:bg-admin-bg cursor-pointer transition-colors",children:[e.jsx("input",{type:"checkbox",checked:m.visible,onChange:()=>S(m.name),className:"w-4 h-4 rounded border-admin-border bg-admin-bg text-admin-accent focus:ring-admin-accent focus:ring-offset-0"}),e.jsx("span",{className:C("text-sm",m.visible?"text-white":"text-admin-text"),children:m.name})]},m.name))}),e.jsx("div",{className:"sticky bottom-0 bg-admin-card border-t border-admin-border p-4",children:e.jsx(R,{onClick:f,disabled:x,className:"w-full bg-admin-accent text-admin-bg hover:bg-admin-accent/90",children:x?"ì €ìž¥ ì¤‘...":"ì €ìž¥"})})]})]}):null}function kt({payload:s,isOpen:c,onClose:p}){const N=_e(),{category:x,isClassifying:h,error:u,classify:S}=st(),{isSaving:f,saved:m,error:g,save:j}=at(),{copied:M,copy:O}=nt(),E=l.useCallback(L=>{L.key==="Escape"&&p()},[p]);if(l.useEffect(()=>{if(c)return document.addEventListener("keydown",E),()=>document.removeEventListener("keydown",E)},[c,E]),l.useEffect(()=>{if(m&&s){const L=new Date().toISOString().slice(0,10),F=x;N.setQueryData(["influencers"],z=>z&&{...z,data:z.data.map(y=>String(y.ì¸ìŠ¤íƒ€ID)!==s.username?y:{...y,"ì¸ìŠ¤íƒ€ ì´ë¦„":s.profile.displayName||y["ì¸ìŠ¤íƒ€ ì´ë¦„"],íŒ”ë¡œì›Œ:String(s.profile.followers),"ìµœê·¼ 10 í‰ê·  ë¦´ìŠ¤ ì¡°íšŒìˆ˜":String(s.stats.avgViews),"ìµœëŒ€ ë¦´ìŠ¤ ì¡°íšŒìˆ˜":String(s.stats.maxViews),"ê³µêµ¬ í‰ê· ì¢‹ì•„ìš”ìˆ˜":String(s.stats.avgLikes),"ê³µêµ¬ ìµœëŒ€ì¢‹ì•„ìš”ìˆ˜":String(s.stats.maxLikes),"ê³µêµ¬ í‰ê· ëŒ“ê¸€ìˆ˜":String(s.stats.avgComments),"ê³µêµ¬ ìµœëŒ€ëŒ“ê¸€ìˆ˜":String(s.stats.maxComments),"ë§ˆì§€ë§‰ í”¼ë“œ ê²Œì‹œì¼":s.stats.lastPostDate||y["ë§ˆì§€ë§‰ í”¼ë“œ ê²Œì‹œì¼"],ì—…ë°ì´íŠ¸ì¼ìž:L,ì„¤ëª…ëž€:s.profile.bio||y.ì„¤ëª…ëž€,ì™¸ë¶€ë§í¬:s.profile.externalLink||y.ì™¸ë¶€ë§í¬,"í”„ë¡œí•„ ë§í¬":s.profile.profileLink||y["í”„ë¡œí•„ ë§í¬"],...F?{"ì¹´í…Œê³ ë¦¬(ëŒ€)":F.ëŒ€,"ì¹´í…Œê³ ë¦¬(ì¤‘)":F.ì¤‘.join(", ")}:{}})}),Te.success("ì‹œíŠ¸ì— ì €ìž¥ë˜ì—ˆìŠµë‹ˆë‹¤")}},[m,s,x,N]),!c||!s)return null;const{profile:v,stats:k,feedPosts:U,reels:T}=s,I=U.filter(L=>!L.isPinned&&L.isDeal),P=T.filter(L=>!L.isPinned),$=()=>{S(v.bio,s.username)},J=()=>{O(rt(s,x))},Z=()=>{j(s,x)};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-[60] bg-black/50",onClick:p}),e.jsxs("div",{className:"fixed inset-y-0 right-0 z-[61] w-full sm:w-[400px] bg-admin-bg border-l border-admin-border flex flex-col",children:[e.jsxs("div",{className:"sticky top-0 z-10 flex items-center justify-between px-4 py-3 border-b border-admin-border bg-admin-bg",children:[e.jsx("h2",{className:"text-white font-semibold text-sm",children:"IG ë¶„ì„ ê²°ê³¼"}),e.jsx(R,{variant:"ghost",size:"icon-sm",onClick:p,className:"text-admin-text hover:text-white hover:bg-admin-card",children:e.jsx(ge,{className:"size-4"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[e.jsxs("div",{className:"bg-admin-card border border-admin-border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-admin-border flex items-center justify-center text-sm text-white",children:"@"}),e.jsxs("div",{className:"min-w-0",children:[e.jsxs("h3",{className:"text-white font-semibold text-sm truncate",children:["@",v.username]}),v.displayName&&e.jsx("p",{className:"text-admin-text text-xs truncate",children:v.displayName})]}),e.jsxs("span",{className:"ml-auto text-admin-accent text-xs font-semibold whitespace-nowrap",children:[q(v.followers)," íŒ”ë¡œì›Œ"]})]}),v.bio&&e.jsx("p",{className:"text-admin-text text-xs leading-relaxed line-clamp-3 whitespace-pre-wrap",children:v.bio})]}),e.jsxs("div",{className:"bg-admin-card border border-admin-border rounded-lg p-4",children:[e.jsxs("h3",{className:"text-white font-semibold text-sm mb-3",children:["ë¦´ìŠ¤ í†µê³„ (",P.length,"ê°œ)"]}),P.length>0?e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[e.jsx(W,{label:"í‰ê·  ì¡°íšŒìˆ˜",value:q(k.avgViews)}),e.jsx(W,{label:"ìµœëŒ€ ì¡°íšŒìˆ˜",value:q(k.maxViews)})]}):e.jsx("p",{className:"text-admin-text text-sm",children:"ë¦´ìŠ¤ ì—†ìŒ"})]}),e.jsxs("div",{className:"bg-admin-card border border-admin-border rounded-lg p-4",children:[e.jsxs("h3",{className:"text-white font-semibold text-sm mb-3",children:["ê³µêµ¬ í”¼ë“œ í†µê³„ (",I.length,"ê°œ)"]}),I.length>0?e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[e.jsx(W,{label:"í‰ê·  ì¢‹ì•„ìš”",value:q(k.avgLikes)}),e.jsx(W,{label:"ìµœëŒ€ ì¢‹ì•„ìš”",value:q(k.maxLikes)}),e.jsx(W,{label:"í‰ê·  ëŒ“ê¸€",value:q(k.avgComments)}),e.jsx(W,{label:"ìµœëŒ€ ëŒ“ê¸€",value:q(k.maxComments)})]}):e.jsx("p",{className:"text-admin-text text-sm",children:"ê³µêµ¬ ê²Œì‹œë¬¼ ì—†ìŒ"}),k.lastPostDate&&e.jsxs("p",{className:"text-admin-text text-xs mt-2",children:["ìµœê·¼ ê²Œì‹œë¬¼: ",k.lastPostDate]})]}),e.jsxs("div",{className:"bg-admin-card border border-admin-border rounded-lg p-4",children:[e.jsx("h3",{className:"text-white font-semibold text-sm mb-3",children:"AI ë¶„ë¥˜"}),x?e.jsxs("p",{className:"text-sm",children:[e.jsx("span",{className:"text-admin-accent font-semibold",children:x.ëŒ€}),x.ì¤‘.length>0&&e.jsx("span",{className:"text-admin-text ml-2",children:x.ì¤‘.join(", ")})]}):e.jsx("p",{className:"text-admin-text text-sm",children:"ë¶„ë¥˜ ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”"})]}),u&&e.jsx("p",{className:"text-red-400 text-xs",children:u}),g&&e.jsx("p",{className:"text-red-400 text-xs",children:g})]}),e.jsxs("div",{className:"sticky bottom-0 flex gap-2 px-4 py-3 border-t border-admin-border bg-admin-bg",children:[e.jsxs(R,{variant:"outline",size:"sm",onClick:$,disabled:h,className:"flex-1 bg-transparent border-admin-border text-white hover:bg-admin-card",children:[e.jsx(ut,{className:"size-3.5"}),h?"ë¶„ë¥˜ ì¤‘...":"ë¶„ë¥˜"]}),e.jsxs(R,{variant:"outline",size:"sm",onClick:J,className:"flex-1 bg-transparent border-admin-border text-white hover:bg-admin-card",children:[e.jsx(et,{className:"size-3.5"}),M?"ë³µì‚¬ë¨!":"ë³µì‚¬"]}),e.jsxs(R,{size:"sm",onClick:Z,disabled:f,className:"flex-1 bg-admin-accent text-admin-bg hover:bg-admin-accent/90",children:[e.jsx(tt,{className:"size-3.5"}),f?"ì €ìž¥ ì¤‘...":m?"ì €ìž¥ë¨":"ì €ìž¥"]})]})]})]})}function W({label:s,value:c}){return e.jsxs("div",{children:[e.jsx("p",{className:"text-admin-text text-xs",children:s}),e.jsx("p",{className:"text-white font-semibold",children:c})]})}function Dt(){const{data:s,isLoading:c,error:p}=Fe(),N=Ae(),x=Ue(),{data:h}=Ve(),u=He(),{data:S}=Ge(),f=$e(),{data:m}=qe(),g=l.useRef(null),[j,M]=l.useState(0);l.useEffect(()=>{const n=g.current;if(!n)return;const o=new ResizeObserver(()=>{M(n.offsetHeight)});return o.observe(n),()=>o.disconnect()},[]);const[O,E]=l.useState(""),[v,k]=l.useState([]),[U,T]=l.useState([]),[I,P]=l.useState([]),[$,J]=l.useState(!1),[Z,L]=l.useState(!1),[F,z]=l.useState(!1),[y,ee]=l.useState({isOpen:!1,rowIndex:-1,value:"",name:""}),[ce,te]=l.useState(null),[t,r]=l.useState(!1);l.useEffect(()=>{const n=o=>{o.data?.type==="ig-analyzer-result"&&o.data.payload&&(te(o.data.payload),r(!0))};return window.addEventListener("message",n),()=>window.removeEventListener("message",n)},[]),l.useEffect(()=>{const n=window.location.hash;if(n.startsWith("#analyzer="))try{const o=n.slice(10),w=JSON.parse(decodeURIComponent(o));w.username&&w.profile&&(te(w),r(!0),history.replaceState(null,"",window.location.pathname))}catch{}},[]);const i=s?.data||[],a=s?.headers||[],d=s?.fromCache??!1,_=l.useMemo(()=>h?.columns?h.columns.filter(n=>n.visible).map(n=>n.name):pe.filter(n=>!fe.includes(n)),[h]),A=l.useMemo(()=>{const n=new Set;return i.forEach(o=>{const w=o["ì¹´í…Œê³ ë¦¬(ëŒ€)"];w&&w!=="-"&&n.add(w)}),Array.from(n).sort()},[i]),b=l.useMemo(()=>["í™œë™ì„±24H O","í™œë™ì„±24H X"],[]),D=l.useMemo(()=>i.filter(n=>{if($&&String(n.ì¦ê²¨ì°¾ê¸°||"").trim().toUpperCase()!=="TRUE")return!1;if(O){const o=O.toLowerCase(),w=String(n.ì¸ìŠ¤íƒ€ID||"").toLowerCase(),V=String(n["ì¸ìŠ¤íƒ€ ì´ë¦„"]||"").toLowerCase();if(!w.includes(o)&&!V.includes(o))return!1}if(v.length>0){const o=n["ì¹´í…Œê³ ë¦¬(ëŒ€)"];if(!v.includes(o))return!1}if(U.length>0){const o=n["ì¸í”Œë£¨ì–¸ì„œ ë“±ê¸‰"];if(!U.includes(o))return!1}if(I.length>0){const o=n["ë§ˆì§€ë§‰ í”¼ë“œ ê²Œì‹œì¼"],w=o&&o.includes("ì‹œê°„")&&!o.includes("ì¼"),V=I.includes("í™œë™ì„±24H O"),be=I.includes("í™œë™ì„±24H X");if(V&&be)return!0;if(V&&!w)return!1;if(be&&w)return!1}return!0}),[i,O,v,U,I,$]),G=()=>{N.mutate()},se=(n,o,w)=>{x.mutate({rowIndex:n,columnIndex:o,value:w})},ae=(n,o,w)=>{ee({isOpen:!0,rowIndex:n,value:o,name:w})},ne=n=>{const o=a.indexOf("ë©”ëª¨");o!==-1&&x.mutate({rowIndex:y.rowIndex,columnIndex:o,value:n}),ee({isOpen:!1,rowIndex:-1,value:"",name:""})},re=l.useCallback(n=>{window.open(n,"_blank")},[]),B=n=>{u.mutate(n),z(!1)},ue=(n,o)=>{f.mutate({grades:n,applyFormula:o}),L(!1)};return p?e.jsx("div",{className:"max-w-[1800px] mx-auto mt-8",children:e.jsxs("div",{className:"bg-admin-error/20 border border-admin-error/40 rounded-lg p-6 text-center",children:[e.jsx("p",{className:"text-admin-error font-semibold",children:"ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤"}),e.jsx("p",{className:"text-admin-text text-sm mt-2",children:String(p)}),e.jsx(R,{onClick:G,className:"mt-4",children:"ë‹¤ì‹œ ì‹œë„"})]})}):e.jsxs("div",{className:"max-w-[1800px] mx-auto mt-4 md:mt-8",children:[e.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl md:text-2xl font-bold text-white mb-1 md:mb-2",children:"ì¸í”Œë£¨ì–¸ì„œ ê´€ë¦¬"}),m&&e.jsxs("div",{className:"flex items-center gap-4 text-xs text-admin-text",children:[e.jsxs("span",{children:["Cache: ",d?"KV":"API"]}),e.jsxs("span",{children:["Quota: ",m.quotaUsed," / 100"]}),e.jsxs("span",{children:["Hits: ",m.cacheHits," / Misses: ",m.cacheMisses]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(R,{onClick:()=>L(!0),variant:"outline",className:"bg-transparent border-admin-border text-white hover:bg-admin-bg",children:[e.jsx(xt,{className:"h-4 w-4 md:mr-2"}),e.jsx("span",{className:"hidden md:inline",children:"ë“±ê¸‰ ì„¤ì •"})]}),e.jsxs(R,{onClick:()=>z(!0),variant:"outline",className:"bg-transparent border-admin-border text-white hover:bg-admin-bg",children:[e.jsx(ot,{className:"h-4 w-4 md:mr-2"}),e.jsx("span",{className:"hidden md:inline",children:"ì»¬ëŸ¼ ì„¤ì •"})]})]})]}),e.jsx("div",{ref:g,className:"sticky top-0 z-50 bg-admin-bg py-2 md:pt-2 md:pb-4 -mx-3 px-3 md:-mx-6 md:px-6 shadow-[0_4px_12px_rgba(0,0,0,0.3)]",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx(pt,{searchQuery:O,onSearchChange:E,categoryOptions:A,selectedCategories:v,onCategoriesChange:k,selectedGrades:U,onGradesChange:T,activityOptions:b,selectedActivity:I,onActivityChange:P,resultCount:D.length,totalCount:i.length,showFavoritesOnly:$,onFavoritesToggle:()=>J(n=>!n)})}),e.jsx(R,{onClick:G,disabled:N.isPending,variant:"outline",size:"sm",className:"bg-transparent border-admin-border text-white hover:bg-admin-bg shrink-0",children:e.jsx(Qe,{className:`h-4 w-4 ${N.isPending?"animate-spin":""}`})})]})}),c?e.jsx("div",{className:"flex items-center justify-center h-64 bg-admin-card rounded-lg border border-admin-border",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-admin-accent mx-auto mb-4"}),e.jsx("p",{className:"text-admin-text",children:"ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘..."})]})}):e.jsx(gt,{data:D,headers:a,visibleColumns:_,onCellEdit:se,onMemoEdit:ae,onAnalyze:re,highlightId:t?ce?.username??null:null,stickyTopOffset:j}),e.jsx(yt,{isOpen:Z,onClose:()=>L(!1),grades:S?.grades||[],onSave:ue,isSaving:f.isPending}),e.jsx(wt,{isOpen:F,onClose:()=>z(!1),columns:h?.columns||pe.filter(n=>!fe.includes(n)).map(n=>({name:n,visible:!0})),onSave:B,isSaving:u.isPending}),e.jsx(Xe,{isOpen:y.isOpen,onClose:()=>ee({isOpen:!1,rowIndex:-1,value:"",name:""}),initialValue:y.value,onSave:ne,influencerName:y.name}),e.jsx(kt,{payload:ce,isOpen:t,onClose:()=>r(!1)}),e.jsx(Je,{position:"top-right",theme:"dark"})]})}export{Dt as default};
