import{r as i,j as e,b as Ce}from"./index-EaFqxTF_.js";import{c as le,B as U,w as Me,d as De,b as K,S as de,I as H,a as Oe,X as oe,x as ge,h as je,i as we,j as Ne,k as ve,l as ye,u as _e,f as ce}from"./useInfluencerData-C23T9Njw.js";import{B as xe,E as Z,P as Ie,A as Ee,a as Le,b as Pe,M as Re,R as me,c as Te,T as Ae}from"./MemoEditModal-4k_gCja-.js";import{M as Fe,u as Ue,a as Be,b as ze,c as $e,d as He,P as he,I as Ve}from"./useProductData-dI-OpdL6.js";import"./useQuery-CC7DIUQr.js";const Ke=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],ue=le("file-text",Ke);const We=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],Ye=le("phone",We);const Ge=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],pe=le("trash-2",Ge);const qe=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Qe=le("user",qe);function ae({options:r,selected:d,onChange:u,placeholder:k="선택",className:w}){const[c,x]=i.useState(!1),p=i.useRef(null);i.useEffect(()=>{function n(C){p.current&&!p.current.contains(C.target)&&x(!1)}return document.addEventListener("mousedown",n),()=>document.removeEventListener("mousedown",n)},[]);const v=n=>{d.includes(n)?u(d.filter(C=>C!==n)):u([...d,n])};return e.jsxs("div",{ref:p,className:K("relative",w),children:[e.jsxs(U,{variant:"outline",onClick:()=>x(!c),className:"w-full justify-between bg-admin-card border-admin-border text-white hover:bg-admin-card/80 hover:text-white",children:[e.jsx("span",{className:"truncate",children:d.length>0?`${d.length}개 선택됨`:k}),e.jsx(Me,{className:"ml-2 h-4 w-4 shrink-0"})]}),c&&e.jsxs("div",{className:"absolute z-50 mt-2 w-full rounded-md border border-admin-border bg-admin-card shadow-lg",children:[e.jsxs("div",{className:"flex gap-2 border-b border-admin-border p-2",children:[e.jsx(U,{size:"sm",variant:"ghost",onClick:()=>u(r),className:"flex-1 text-xs text-admin-text hover:text-white hover:bg-admin-bg",children:"전체 선택"}),e.jsx(U,{size:"sm",variant:"ghost",onClick:()=>u([]),className:"flex-1 text-xs text-admin-text hover:text-white hover:bg-admin-bg",children:"전체 해제"})]}),e.jsx("div",{className:"max-h-60 overflow-y-auto p-2",children:r.map(n=>e.jsxs("button",{onClick:()=>v(n),className:"flex w-full items-center gap-2 rounded px-2 py-1.5 text-sm text-white hover:bg-admin-bg transition-colors",children:[e.jsx("div",{className:K("flex h-4 w-4 items-center justify-center rounded border",d.includes(n)?"bg-admin-accent border-admin-accent":"border-admin-border"),children:d.includes(n)&&e.jsx(De,{className:"h-3 w-3 text-admin-bg"})}),e.jsx("span",{className:"truncate",children:n})]},n))})]})]})}const ke=["No.","제품명","업체명","상태","제품 카테고리","공식몰","샘플피드","제안서","담당자","담당자 전화","담당자 이메일","핏한 인플루언서","소싱메모","제품메모"],Se=["_rowIndex"],re=["진행 전","진행 중","답장없음","불가","컨텍"],be={"진행 전":"bg-gray-500/20 text-gray-400 border-gray-500/40","진행 중":"bg-blue-500/20 text-blue-400 border-blue-500/40",답장없음:"bg-yellow-500/20 text-yellow-400 border-yellow-500/40",불가:"bg-red-500/20 text-red-400 border-red-500/40",컨텍:"bg-green-500/20 text-green-400 border-green-500/40"},fe=["식품","올리브유","유아","식기","간식","텀블러","요리","주방","청소기","두유제조기","청소","세정제","육수","에어프라이어","살림","인테리어","정리","육아","유아식기","육아템","예쁜육아템"],q={"No.":{width:48,align:"center",type:"text",label:"No"},제품명:{width:180,align:"left",type:"editable-text",label:"제품명",editable:!0},업체명:{width:160,align:"left",type:"combobox",label:"업체명",editable:!0},상태:{width:80,align:"center",type:"status",label:"상태",editable:!0},"제품 카테고리":{width:140,align:"left",type:"tag-combobox",label:"카테고리",editable:!0},공식몰:{width:160,align:"left",type:"editable-link",label:"공식몰",editable:!0},샘플피드:{width:160,align:"left",type:"editable-link",label:"샘플",editable:!0},제안서:{width:160,align:"left",type:"editable-link",label:"제안서",editable:!0},담당자:{width:80,align:"left",type:"editable-text",label:"담당자",editable:!0},"담당자 전화":{width:120,align:"left",type:"editable-text",label:"전화",editable:!0},"담당자 이메일":{width:160,align:"left",type:"editable-text",label:"이메일",editable:!0},"핏한 인플루언서":{width:200,align:"left",type:"influencers",label:"인플루언서"},소싱메모:{width:200,align:"left",type:"editable-memo",label:"소싱메모",editable:!0},제품메모:{width:200,align:"left",type:"editable-memo",label:"제품메모",editable:!0}},ee=4;function Xe({searchQuery:r,onSearchChange:d,selectedStatuses:u,onStatusesChange:k,selectedCategories:w,onCategoriesChange:c,resultCount:x,totalCount:p}){const[v,n]=i.useState(r),[C,P]=i.useState(!1);i.useEffect(()=>{const h=setTimeout(()=>d(v),250);return()=>clearTimeout(h)},[v,d]);const b=u.length+w.length,I=()=>{k([]),c([])};return e.jsxs("div",{children:[e.jsxs("div",{className:"md:hidden",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(de,{className:"absolute left-2.5 top-1/2 -translate-y-1/2 h-3.5 w-3.5 text-admin-text"}),e.jsx(H,{type:"text",placeholder:"제품명 또는 업체명 검색...",value:v,onChange:h=>n(h.target.value),className:"pl-8 h-8 text-[13px] bg-admin-card border-admin-border text-white placeholder:text-admin-text"})]}),e.jsxs("button",{onClick:()=>P(!C),className:`relative flex items-center justify-center h-8 w-8 rounded-md border shrink-0 transition-colors ${C||b>0?"bg-admin-accent/15 border-admin-accent/40 text-admin-accent":"bg-admin-card border-admin-border text-admin-text"}`,children:[e.jsx(Oe,{className:"h-3.5 w-3.5"}),b>0&&e.jsx("span",{className:"absolute -top-1.5 -right-1.5 min-w-[16px] h-4 flex items-center justify-center rounded-full bg-admin-accent text-[10px] font-bold text-admin-bg px-1",children:b})]}),e.jsxs("span",{className:"text-[11px] text-admin-text tabular-nums shrink-0",children:[e.jsx("span",{className:"text-white font-semibold",children:x}),"/",p]})]}),C&&e.jsxs("div",{className:"mt-2 flex flex-col gap-2",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(ae,{options:[...re],selected:u,onChange:k,placeholder:"상태"}),e.jsx(ae,{options:[...fe],selected:w,onChange:c,placeholder:"카테고리"})]}),b>0&&e.jsxs("button",{onClick:I,className:"flex items-center gap-1 text-[11px] text-admin-text hover:text-admin-accent transition-colors self-end",children:[e.jsx(oe,{className:"h-3 w-3"}),"필터 초기화"]})]})]}),e.jsxs("div",{className:"hidden md:block space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[e.jsxs("div",{className:"relative col-span-2",children:[e.jsx(de,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-admin-text"}),e.jsx(H,{type:"text",placeholder:"제품명 또는 업체명 검색...",value:v,onChange:h=>n(h.target.value),className:"pl-10 bg-admin-card border-admin-border text-white placeholder:text-admin-text"})]}),e.jsx(ae,{options:[...re],selected:u,onChange:k,placeholder:"상태 선택"}),e.jsx(ae,{options:[...fe],selected:w,onChange:c,placeholder:"카테고리 선택"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-admin-text",children:[e.jsx("span",{className:"text-white font-semibold",children:x})," / ",p," 건"]}),b>0&&e.jsxs("button",{onClick:I,className:"flex items-center gap-1 text-xs text-admin-text hover:text-admin-accent transition-colors",children:[e.jsx(oe,{className:"h-3 w-3"})," 필터 초기화"]})]})]})]})}function Je({value:r,options:d,onChange:u,onCommit:k,onCancel:w,placeholder:c}){const[x,p]=i.useState(-1),[v,n]=i.useState(null),C=i.useRef(null),P=i.useRef(null),b=i.useMemo(()=>{if(!r.trim())return d.slice(0,8);const j=r.toLowerCase();return d.filter(E=>E.toLowerCase().includes(j)).slice(0,8)},[r,d]),I=b.some(j=>j===r);i.useEffect(()=>{p(-1)},[r]),i.useEffect(()=>{x>=0&&P.current&&P.current.children[x]?.scrollIntoView({block:"nearest"})},[x]);const h=i.useCallback(()=>{if(!C.current)return;const j=C.current.getBoundingClientRect();n({top:j.bottom+2,left:j.left,width:j.width})},[]);i.useEffect(()=>(h(),window.addEventListener("scroll",h,!0),window.addEventListener("resize",h),()=>{window.removeEventListener("scroll",h,!0),window.removeEventListener("resize",h)}),[h]);const B=j=>{j.key==="ArrowDown"?(j.preventDefault(),p(E=>Math.min(E+1,b.length-1))):j.key==="ArrowUp"?(j.preventDefault(),p(E=>Math.max(E-1,-1))):j.key==="Enter"?(j.preventDefault(),x>=0&&x<b.length?k(b[x]):k(r)):j.key==="Escape"&&w()},_=b.length>0&&v;return e.jsxs(e.Fragment,{children:[e.jsx("input",{ref:C,type:"text",value:r,onChange:j=>u(j.target.value),onKeyDown:B,onBlur:()=>{setTimeout(()=>k(r),150)},autoFocus:!0,placeholder:c,className:"w-full px-1.5 py-0.5 bg-admin-bg border border-admin-accent rounded text-white text-[13px] focus:outline-none"}),_&&ge.createPortal(e.jsxs("ul",{ref:P,"data-combobox-list":!0,style:{position:"fixed",top:v.top,left:v.left,width:v.width},className:"max-h-[180px] overflow-y-auto bg-[#1a1a2e] border border-admin-border rounded shadow-lg z-[9999]",children:[b.map((j,E)=>{const R=E===x;return e.jsx("li",{children:e.jsx("button",{type:"button",tabIndex:-1,onMouseDown:F=>{F.preventDefault(),k(j)},onMouseEnter:()=>p(E),className:K("w-full text-left px-2 py-1.5 text-[13px] transition-colors",R?"bg-admin-accent/20 text-white":"text-white/80 hover:bg-white/5"),children:Ze(j,r)})},j)}),r.trim()&&!I&&e.jsx("li",{className:"border-t border-admin-border/40",children:e.jsxs("button",{type:"button",tabIndex:-1,onMouseDown:j=>{j.preventDefault(),k(r)},className:"w-full text-left px-2 py-1.5 text-[13px] text-admin-accent/70 hover:bg-white/5",children:["“",e.jsx("span",{className:"text-white",children:r}),"” 새로 추가"]})})]}),document.body)]})}function Ze(r,d){if(!d.trim())return r;const u=r.toLowerCase().indexOf(d.toLowerCase());return u===-1?r:e.jsxs(e.Fragment,{children:[r.slice(0,u),e.jsx("span",{className:"text-admin-accent font-medium",children:r.slice(u,u+d.length)}),r.slice(u+d.length)]})}function et({value:r,options:d,onCommit:u,onCancel:k}){const[w,c]=i.useState(()=>r?r.split(",").map(l=>l.trim()).filter(Boolean):[]),[x,p]=i.useState(""),[v,n]=i.useState(-1),[C,P]=i.useState(null),b=i.useRef(null),I=i.useRef(null),h=i.useMemo(()=>{const l=x.toLowerCase();return d.filter(S=>!w.includes(S)).filter(S=>!l||S.toLowerCase().includes(l)).slice(0,8)},[x,d,w]),B=h.some(l=>l===x);i.useEffect(()=>{n(-1)},[x]),i.useEffect(()=>{v>=0&&I.current&&I.current.children[v]?.scrollIntoView({block:"nearest"})},[v]);const _=i.useCallback(()=>{if(!b.current)return;const l=b.current.getBoundingClientRect();P({top:l.bottom+2,left:l.left,width:Math.max(l.width,180)})},[]);i.useEffect(()=>(_(),window.addEventListener("scroll",_,!0),window.addEventListener("resize",_),()=>{window.removeEventListener("scroll",_,!0),window.removeEventListener("resize",_)}),[_,w]);const j=i.useCallback(l=>{u(l.join(", "))},[u]),E=l=>{const S=l.trim();if(!S||w.includes(S))return;const T=[...w,S];c(T),p(""),b.current?.focus()},R=l=>{c(S=>S.filter(T=>T!==l))},F=l=>{l.key==="ArrowDown"?(l.preventDefault(),n(S=>Math.min(S+1,h.length-1))):l.key==="ArrowUp"?(l.preventDefault(),n(S=>Math.max(S-1,-1))):l.key==="Enter"?(l.preventDefault(),v>=0&&v<h.length?E(h[v]):x.trim()?E(x):j(w)):l.key==="Escape"?k():l.key==="Backspace"&&!x&&w.length>0?c(S=>S.slice(0,-1)):(l.key===","||l.key==="Tab")&&x.trim()&&(l.preventDefault(),E(x))},W=h.length>0&&C;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-1 w-full px-1 py-0.5 bg-admin-bg border border-admin-accent rounded min-h-[26px] cursor-text",onClick:()=>b.current?.focus(),children:[w.map(l=>e.jsxs("span",{className:"inline-flex items-center gap-0.5 text-[11px] px-1.5 py-0 rounded bg-purple-500/15 text-purple-400 border border-purple-500/30",children:[l,e.jsx("button",{type:"button",onClick:S=>{S.stopPropagation(),R(l)},className:"hover:text-white",children:e.jsx(oe,{className:"h-2.5 w-2.5"})})]},l)),e.jsx("input",{ref:b,type:"text",value:x,onChange:l=>p(l.target.value),onKeyDown:F,onBlur:()=>{setTimeout(()=>{const l=x.trim()?[...w,x.trim()]:w;j(l)},150)},autoFocus:!0,placeholder:w.length===0?"카테고리 입력...":"",className:"flex-1 min-w-[60px] bg-transparent text-white text-[13px] focus:outline-none"})]}),W&&ge.createPortal(e.jsxs("ul",{ref:I,style:{position:"fixed",top:C.top,left:C.left,width:C.width},className:"max-h-[180px] overflow-y-auto bg-[#1a1a2e] border border-admin-border rounded shadow-lg z-[9999]",children:[h.map((l,S)=>e.jsx("li",{children:e.jsx("button",{type:"button",tabIndex:-1,onMouseDown:T=>{T.preventDefault(),E(l)},onMouseEnter:()=>n(S),className:K("w-full text-left px-2 py-1.5 text-[13px] transition-colors",S===v?"bg-admin-accent/20 text-white":"text-white/80 hover:bg-white/5"),children:tt(l,x)})},l)),x.trim()&&!B&&e.jsx("li",{className:"border-t border-admin-border/40",children:e.jsxs("button",{type:"button",tabIndex:-1,onMouseDown:l=>{l.preventDefault(),E(x)},className:"w-full text-left px-2 py-1.5 text-[13px] text-admin-accent/70 hover:bg-white/5",children:["“",e.jsx("span",{className:"text-white",children:x}),"” 새로 추가"]})})]}),document.body)]})}function tt(r,d){if(!d.trim())return r;const u=r.toLowerCase().indexOf(d.toLowerCase());return u===-1?r:e.jsxs(e.Fragment,{children:[r.slice(0,u),e.jsx("span",{className:"text-admin-accent font-medium",children:r.slice(u,u+d.length)}),r.slice(u+d.length)]})}function nt(r){const d=r.reduce((c,x)=>c+(q[x]?.width||120),0)+80,u={},k=[];let w=0;for(let c=0;c<r.length;c++){const x=q[r[c]]?.width||120,p=x/d*100;u[r[c]]=`${p}%`,c<ee&&(k.push(`${w/d*100}%`),w+=x)}return u.__actions=`${80/d*100}%`,{total:d,pctWidths:u,stickyOffsets:k}}function st({data:r,headers:d,visibleColumns:u,onCellEdit:k,onMemoEdit:w,onInfluencerEdit:c,onDelete:x,onCreateProposal:p,stickyTopOffset:v=0}){const[n,C]=i.useState({column:null,direction:null}),[P,b]=i.useState(null),[I,h]=i.useState(""),B=i.useMemo(()=>ke.filter(t=>u.includes(t)&&!Se.includes(t)),[u]),_=i.useMemo(()=>nt(B),[B]),j=i.useMemo(()=>!n.column||!n.direction?r:[...r].sort((t,a)=>{const o=String(t[n.column]||""),s=String(a[n.column]||""),f=parseFloat(o.replace(/,/g,"")),L=parseFloat(s.replace(/,/g,""));return!isNaN(f)&&!isNaN(L)?n.direction==="asc"?f-L:L-f:n.direction==="asc"?o.localeCompare(s,"ko"):s.localeCompare(o,"ko")}),[r,n]),E=t=>{C(a=>a.column!==t?{column:t,direction:"asc"}:a.direction==="asc"?{column:t,direction:"desc"}:{column:null,direction:null})},R=(t,a,o,s)=>{const f=q[a];f&&(f.type==="editable-memo"?w(t,o,s,a):f.type==="influencers"?c(t,o,s):f.type==="tags"||f.type==="tag-combobox"?(b({rowIndex:t,column:a}),h(o)):(f.type==="editable-text"||f.type==="status"||f.type==="combobox"||f.type==="editable-link")&&(b({rowIndex:t,column:a}),h(o)))},F=(t,a)=>{if(P?.rowIndex===t&&P?.column===a){const o=String(r.find(s=>s._rowIndex===t)?.[a]||"");if(I!==o){const s=d.indexOf(a);s!==-1&&k(t,s,I)}b(null),h("")}},W=(t,a,o)=>{t.key==="Enter"?F(a,o):t.key==="Escape"&&(b(null),h(""))},l=(t,a,o)=>{const s=String(t[a]||""),f=q[a];if(!f)return s;const L=P?.rowIndex===o&&P?.column===a;if(f.type==="combobox"){if(L){const y=[...new Set(r.map(N=>String(N[a]||"")).filter(Boolean))].sort((N,M)=>N.localeCompare(M,"ko"));return e.jsx(Je,{value:I,options:y,onChange:h,onCommit:N=>{const M=String(r.find(m=>m._rowIndex===o)?.[a]||"");if(N!==M){const m=d.indexOf(a);m!==-1&&k(o,m,N)}b(null),h("")},onCancel:()=>{b(null),h("")}})}return e.jsx("button",{onClick:()=>R(o,a,s,String(t.제품명||"")),className:"w-full text-left text-[13px] text-white/90 hover:text-white transition-colors cursor-text",children:s||e.jsx("span",{className:"text-admin-text/40",children:"-"})})}if(f.type==="editable-text")return L?e.jsx("input",{type:"text",value:I,onChange:y=>h(y.target.value),onBlur:()=>F(o,a),onKeyDown:y=>W(y,o,a),autoFocus:!0,className:"w-full px-1.5 py-0.5 bg-admin-bg border border-admin-accent rounded text-white text-[13px] focus:outline-none"}):e.jsx("button",{onClick:()=>R(o,a,s,String(t.제품명||"")),className:"w-full text-left text-[13px] text-white/90 hover:text-white transition-colors cursor-text",children:s||e.jsx("span",{className:"text-admin-text/40",children:"-"})});if(f.type==="status"){if(L)return e.jsxs("select",{value:I,onChange:N=>{h(N.target.value);const M=d.indexOf(a);M!==-1&&k(o,M,N.target.value),b(null),h("")},onBlur:()=>{b(null),h("")},autoFocus:!0,className:"w-full px-1 py-0.5 bg-admin-bg border border-admin-accent rounded text-white text-[13px] focus:outline-none text-center",children:[e.jsx("option",{value:"",children:"-"}),re.map(N=>e.jsx("option",{value:N,children:N},N))]});if(!s||s==="-")return e.jsx("span",{className:"text-admin-text/40",children:"-"});const y=be[s]||"bg-gray-500/20 text-gray-400 border-gray-500/40";return e.jsx("button",{onClick:()=>R(o,a,s,String(t.제품명||"")),children:e.jsx(xe,{variant:"outline",className:K("font-medium text-[11px] px-2 py-0 cursor-pointer",y),children:s})})}if(f.type==="tag-combobox"||f.type==="tags"){if(L){const N=[...new Set(r.flatMap(M=>String(M[a]||"").split(",").map(m=>m.trim()).filter(Boolean)))].sort((M,m)=>M.localeCompare(m,"ko"));return e.jsx(et,{value:I,options:N,onCommit:M=>{const m=String(r.find(g=>g._rowIndex===o)?.[a]||"");if(M!==m){const g=d.indexOf(a);g!==-1&&k(o,g,M)}b(null),h("")},onCancel:()=>{b(null),h("")}})}if(!s||s==="-")return e.jsx("button",{onClick:()=>R(o,a,s,String(t.제품명||"")),className:"text-[12px] text-admin-text/40 hover:text-purple-400 transition-colors",children:"+ 카테고리 추가"});const y=s.split(",").map(N=>N.trim()).filter(Boolean);return e.jsx("button",{onClick:()=>R(o,a,s,String(t.제품명||"")),className:"flex flex-wrap gap-1",children:y.map((N,M)=>e.jsx("span",{className:"text-[11px] px-1.5 py-0.5 rounded bg-purple-500/15 text-purple-400 border border-purple-500/30",children:N},M))})}if(f.type==="link")return!s||s==="-"?e.jsx("span",{className:"text-admin-text/40",children:"-"}):e.jsx("a",{href:s,target:"_blank",rel:"noopener noreferrer",className:"text-admin-accent/70 hover:text-admin-accent transition-colors",children:e.jsx(Z,{className:"h-3.5 w-3.5 mx-auto"})});if(f.type==="editable-link")return L?e.jsx("input",{type:"text",value:I,onChange:y=>h(y.target.value),onBlur:()=>F(o,a),onKeyDown:y=>W(y,o,a),autoFocus:!0,placeholder:"https://...",className:"w-full px-1.5 py-0.5 bg-admin-bg border border-admin-accent rounded text-white text-[13px] focus:outline-none"}):!s||s==="-"?e.jsx("button",{onClick:()=>R(o,a,s,String(t.제품명||"")),className:"text-[12px] text-admin-text/40 hover:text-white transition-colors",children:"+ URL 추가"}):e.jsxs("div",{className:"flex items-center gap-1.5 min-w-0",children:[e.jsx("button",{onClick:()=>R(o,a,s,String(t.제품명||"")),className:"truncate text-[13px] text-white/70 hover:text-white transition-colors min-w-0",title:s,children:(()=>{try{return new URL(s).hostname.replace("www.","")}catch{return s}})()}),e.jsx("a",{href:s,target:"_blank",rel:"noopener noreferrer",onClick:y=>y.stopPropagation(),className:"shrink-0 text-admin-accent/60 hover:text-admin-accent transition-colors",children:e.jsx(Z,{className:"h-3 w-3"})})]});if(f.type==="influencers"){if(!s||s==="-")return e.jsx("button",{onClick:()=>c(o,"",String(t.제품명||"")),className:"text-[12px] text-admin-text/40 hover:text-admin-accent transition-colors",children:"+ 인플루언서 추가"});const y=s.split(",").map(N=>N.trim()).filter(Boolean);return e.jsxs("button",{onClick:()=>c(o,s,String(t.제품명||"")),className:"flex flex-wrap gap-1 text-left",children:[y.slice(0,3).map((N,M)=>e.jsxs("span",{className:"text-[11px] px-1.5 py-0.5 rounded bg-teal-500/15 text-teal-400 border border-teal-500/30",children:["@",N]},M)),y.length>3&&e.jsxs("span",{className:"text-[11px] px-1.5 py-0.5 rounded bg-admin-bg text-admin-text",children:["+",y.length-3]})]})}return f.type==="editable-memo"?e.jsxs("button",{onClick:()=>w(o,s,String(t.제품명||""),a),className:"w-full text-left group/memo relative",children:[e.jsx("span",{className:"block truncate text-[13px] text-white/90 max-w-full",children:s||e.jsx("span",{className:"text-admin-text/40",children:"메모 추가..."})}),e.jsx("span",{className:"absolute top-0 right-0 opacity-0 group-hover/memo:opacity-100 transition-opacity",children:e.jsx(Ie,{className:"h-3 w-3 text-admin-accent"})})]}):e.jsx("span",{className:"text-[13px]",children:s||"-"})},S=({column:t})=>n.column===t?n.direction==="asc"?e.jsx(Le,{className:"h-3 w-3 shrink-0 text-admin-accent"}):e.jsx(Pe,{className:"h-3 w-3 shrink-0 text-admin-accent"}):e.jsx(Ee,{className:"h-3 w-3 shrink-0 opacity-0 group-hover/th:opacity-40 transition-opacity"}),T=i.useRef(null),V=i.useRef(null),z=i.useRef(!1),Y=()=>{z.current||(z.current=!0,T.current&&V.current&&(V.current.scrollLeft=T.current.scrollLeft),requestAnimationFrame(()=>{z.current=!1}))},ie=()=>{z.current||(z.current=!0,T.current&&V.current&&(T.current.scrollLeft=V.current.scrollLeft),requestAnimationFrame(()=>{z.current=!1}))},Q=e.jsxs("colgroup",{children:[B.map(t=>e.jsx("col",{style:{width:_.pctWidths[t]}},t)),e.jsx("col",{style:{width:_.pctWidths.__actions}})]}),X=()=>e.jsx("div",{className:"md:hidden space-y-3",children:j.map(t=>{const a=String(t.제품명||""),o=String(t.업체명||""),s=String(t.상태||""),f=String(t["제품 카테고리"]||""),L=String(t.공식몰||""),y=String(t.샘플피드||""),N=String(t.제안서||""),M=String(t.담당자||""),m=String(t["담당자 전화"]||""),g=String(t["담당자 이메일"]||""),O=String(t["핏한 인플루언서"]||""),$=String(t.소싱메모||""),te=String(t.제품메모||""),J=be[s]||"bg-gray-500/20 text-gray-400 border-gray-500/40",ne=f.split(",").map(D=>D.trim()).filter(Boolean),G=O.split(",").map(D=>D.trim()).filter(Boolean);return e.jsxs("div",{className:"bg-admin-card border border-admin-border rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("span",{className:"text-sm font-medium text-white truncate block",children:a||"-"}),o&&e.jsx("span",{className:"text-[12px] text-admin-text",children:o})]}),e.jsxs("div",{className:"flex items-center gap-1.5 shrink-0",children:[s&&e.jsx(xe,{variant:"outline",className:K("text-[10px] px-1.5 py-0",J),children:s}),e.jsx("button",{onClick:()=>p(t._rowIndex,a),className:"p-1 text-admin-text/40 hover:text-admin-accent transition-colors",title:"제안서 만들기",children:e.jsx(ue,{className:"h-3.5 w-3.5"})}),e.jsx("button",{onClick:()=>x(t._rowIndex,a),className:"p-1 text-admin-text/30 hover:text-red-400 transition-colors",children:e.jsx(pe,{className:"h-3.5 w-3.5"})})]})]}),ne.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1 mb-2",children:ne.map((D,A)=>e.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-purple-500/15 text-purple-400 border border-purple-500/30",children:D},A))}),e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[L&&e.jsxs("a",{href:L,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-[11px] text-admin-accent/70 hover:text-admin-accent",children:[e.jsx(Z,{className:"h-3 w-3"}),"공식몰"]}),y&&e.jsxs("a",{href:y,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-[11px] text-admin-accent/70 hover:text-admin-accent",children:[e.jsx(Z,{className:"h-3 w-3"}),"샘플"]}),N&&e.jsxs("a",{href:N,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-[11px] text-admin-accent/70 hover:text-admin-accent",children:[e.jsx(Z,{className:"h-3 w-3"}),"제안서"]}),!L&&!y&&!N&&e.jsx("span",{className:"text-[11px] text-admin-text/30",children:"링크 없음"})]}),(M||m||g)&&e.jsxs("div",{className:"flex flex-wrap items-center gap-x-3 gap-y-1 mb-2 text-[11px] text-admin-text",children:[M&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Qe,{className:"h-3 w-3"}),M]}),m&&e.jsxs("a",{href:`tel:${m}`,className:"flex items-center gap-1 hover:text-white",children:[e.jsx(Ye,{className:"h-3 w-3"}),m]}),g&&e.jsxs("a",{href:`mailto:${g}`,className:"flex items-center gap-1 hover:text-white truncate",children:[e.jsx(Fe,{className:"h-3 w-3"}),g]})]}),e.jsx("button",{onClick:()=>c(t._rowIndex,O,a),className:"flex flex-wrap items-center gap-1 mb-2 w-full text-left",children:G.length>0?e.jsxs(e.Fragment,{children:[G.slice(0,3).map((D,A)=>e.jsxs("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-teal-500/15 text-teal-400 border border-teal-500/30",children:["@",D]},A)),G.length>3&&e.jsxs("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-admin-bg text-admin-text",children:["+",G.length-3]})]}):e.jsx("span",{className:"text-[11px] text-admin-text/40",children:"+ 인플루언서 추가"})}),e.jsx("div",{className:"flex gap-2",children:["소싱메모","제품메모"].map(D=>{const A=D==="소싱메모"?$:te;return e.jsxs("button",{onClick:()=>w(t._rowIndex,A,a,D),className:"flex-1 flex items-start gap-1 bg-admin-bg/40 rounded px-2 py-1.5 text-left min-w-0",children:[e.jsx(Re,{className:"h-3 w-3 text-admin-text/50 shrink-0 mt-0.5"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("span",{className:"text-[10px] text-admin-text/50 block",children:D==="소싱메모"?"소싱":"제품"}),e.jsx("span",{className:"text-[11px] text-white/70 line-clamp-1 block",children:A||e.jsx("span",{className:"text-admin-text/30",children:"메모 추가..."})})]})]},D)})})]},t._rowIndex)})});return e.jsxs("div",{children:[X(),e.jsxs("div",{className:"hidden md:block",children:[e.jsx("div",{className:"sticky z-40 border border-admin-border border-b-0 rounded-t-lg bg-[#14142a]",style:{top:v},children:e.jsx("div",{ref:T,className:"overflow-x-auto",style:{scrollbarWidth:"none"},onScroll:Y,children:e.jsxs("table",{className:"w-full text-sm border-collapse",style:{minWidth:_.total,tableLayout:"fixed"},children:[Q,e.jsx("thead",{children:e.jsxs("tr",{className:"bg-[#14142a]",children:[B.map((t,a)=>{const o=q[t],s=a<ee,f=a===ee-1;return e.jsx("th",{style:s?{left:_.stickyOffsets[a]}:void 0,className:K("px-2.5 py-2.5 text-[11px] uppercase tracking-wider text-admin-text/70 font-semibold border-r border-admin-border/50 last:border-r-0 group/th",s&&"sticky z-40 bg-[#14142a]",f&&"shadow-[3px_0_8px_rgba(0,0,0,0.35)] border-r-admin-border",o?.align==="center"&&"text-center",o?.align==="right"&&"text-right"),children:e.jsxs("button",{onClick:()=>E(t),className:"flex items-center gap-1 w-full hover:text-white transition-colors",children:[e.jsx("span",{className:"whitespace-nowrap",children:o?.label||t}),e.jsx(S,{column:t})]})},t)}),e.jsx("th",{className:"px-2 py-2.5 text-[11px] text-admin-text/70 text-center w-12"})]})})]})})}),e.jsx("div",{className:"border border-admin-border border-t-0 rounded-b-lg overflow-hidden",children:e.jsx("div",{ref:V,className:"overflow-x-auto",onScroll:ie,children:e.jsxs("table",{className:"w-full text-sm border-collapse",style:{minWidth:_.total,tableLayout:"fixed"},children:[Q,e.jsx("tbody",{children:j.map((t,a)=>e.jsxs("tr",{className:K("border-b border-admin-border/40 transition-colors hover:bg-white/[0.02]",a%2===0?"bg-[#11111f]":"bg-[#151528]"),children:[B.map((o,s)=>{const f=q[o],L=s<ee,y=s===ee-1,N=a%2===0?"#11111f":"#151528";return e.jsx("td",{style:L?{left:_.stickyOffsets[s],backgroundColor:N}:void 0,className:K("px-2.5 py-2 text-white border-r border-admin-border/30 last:border-r-0 align-top",L&&"sticky z-30",y&&"shadow-[3px_0_8px_rgba(0,0,0,0.35)] border-r-admin-border/60",f?.align==="center"&&"text-center",f?.align==="right"&&"text-right"),children:l(t,o,t._rowIndex)},o)}),e.jsx("td",{className:"px-1 py-2 text-center align-top",children:e.jsxs("div",{className:"flex items-center justify-center gap-0.5",children:[e.jsx("button",{onClick:()=>p(t._rowIndex,String(t.제품명||"")),className:"p-1 text-admin-text/40 hover:text-admin-accent transition-colors",title:"제안서 만들기",children:e.jsx(ue,{className:"h-3.5 w-3.5"})}),e.jsx("button",{onClick:()=>x(t._rowIndex,String(t.제품명||"")),className:"p-1 text-admin-text/40 hover:text-red-400 transition-colors",children:e.jsx(pe,{className:"h-3.5 w-3.5"})})]})})]},t._rowIndex))})]})})})]})]})}function at({isOpen:r,onClose:d,onSubmit:u,headers:k,isPending:w}){const[c,x]=i.useState({제품명:"",업체명:"",상태:"진행 전","제품 카테고리":"",공식몰:"",샘플피드:"",담당자:"","담당자 전화":"","담당자 이메일":"","핏한 인플루언서":"",제안서:"",소싱메모:"",제품메모:""}),p=(n,C)=>{x(P=>({...P,[n]:C}))},v=()=>{if(!c.제품명.trim())return;const n=k.map(C=>C==="No."?"":c[C]||"");u(n),x({제품명:"",업체명:"",상태:"진행 전","제품 카테고리":"",공식몰:"",샘플피드:"",담당자:"","담당자 전화":"","담당자 이메일":"","핏한 인플루언서":"",제안서:"",소싱메모:"",제품메모:""}),d()};return e.jsx(je,{open:r,onOpenChange:d,children:e.jsxs(we,{className:"bg-admin-card border-admin-border text-white max-w-lg max-h-[85vh] overflow-y-auto",children:[e.jsx(Ne,{children:e.jsx(ve,{className:"text-white",children:"제품 등록"})}),e.jsxs("div",{className:"space-y-3 py-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-admin-text mb-1 block",children:"제품명 *"}),e.jsx(H,{value:c.제품명,onChange:n=>p("제품명",n.target.value),placeholder:"제품명을 입력하세요",className:"bg-admin-bg border-admin-border text-white placeholder:text-admin-text"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-admin-text mb-1 block",children:"업체명"}),e.jsx(H,{value:c.업체명,onChange:n=>p("업체명",n.target.value),placeholder:"업체명",className:"bg-admin-bg border-admin-border text-white placeholder:text-admin-text"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-admin-text mb-1 block",children:"상태"}),e.jsx("select",{value:c.상태,onChange:n=>p("상태",n.target.value),className:"w-full h-9 px-3 rounded-md bg-admin-bg border border-admin-border text-white text-sm focus:outline-none focus:ring-2 focus:ring-admin-accent",children:re.map(n=>e.jsx("option",{value:n,children:n},n))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-admin-text mb-1 block",children:"제품 카테고리"}),e.jsx(H,{value:c["제품 카테고리"],onChange:n=>p("제품 카테고리",n.target.value),placeholder:"콤마로 구분 (예: 식품, 간식)",className:"bg-admin-bg border-admin-border text-white placeholder:text-admin-text"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-admin-text mb-1 block",children:"공식몰 URL"}),e.jsx(H,{value:c.공식몰,onChange:n=>p("공식몰",n.target.value),placeholder:"https://...",className:"bg-admin-bg border-admin-border text-white placeholder:text-admin-text"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-admin-text mb-1 block",children:"샘플피드 URL"}),e.jsx(H,{value:c.샘플피드,onChange:n=>p("샘플피드",n.target.value),placeholder:"https://...",className:"bg-admin-bg border-admin-border text-white placeholder:text-admin-text"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-admin-text mb-1 block",children:"제안서 URL"}),e.jsx(H,{value:c.제안서,onChange:n=>p("제안서",n.target.value),placeholder:"https://...",className:"bg-admin-bg border-admin-border text-white placeholder:text-admin-text"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-admin-text mb-1 block",children:"담당자"}),e.jsx(H,{value:c.담당자,onChange:n=>p("담당자",n.target.value),placeholder:"담당자명",className:"bg-admin-bg border-admin-border text-white placeholder:text-admin-text"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-admin-text mb-1 block",children:"담당자 전화"}),e.jsx(H,{value:c["담당자 전화"],onChange:n=>p("담당자 전화",n.target.value),placeholder:"010-0000-0000",className:"bg-admin-bg border-admin-border text-white placeholder:text-admin-text"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-admin-text mb-1 block",children:"담당자 이메일"}),e.jsx(H,{value:c["담당자 이메일"],onChange:n=>p("담당자 이메일",n.target.value),placeholder:"email@example.com",className:"bg-admin-bg border-admin-border text-white placeholder:text-admin-text"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-admin-text mb-1 block",children:"소싱메모"}),e.jsx("textarea",{value:c.소싱메모,onChange:n=>p("소싱메모",n.target.value),placeholder:"소싱 관련 메모...",className:"w-full h-20 px-3 py-2 bg-admin-bg border border-admin-border rounded-md text-white placeholder:text-admin-text focus:outline-none focus:ring-2 focus:ring-admin-accent resize-none text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-admin-text mb-1 block",children:"제품메모"}),e.jsx("textarea",{value:c.제품메모,onChange:n=>p("제품메모",n.target.value),placeholder:"제품 관련 메모...",className:"w-full h-20 px-3 py-2 bg-admin-bg border border-admin-border rounded-md text-white placeholder:text-admin-text focus:outline-none focus:ring-2 focus:ring-admin-accent resize-none text-sm"})]})]}),e.jsxs(ye,{children:[e.jsx(U,{variant:"outline",onClick:d,className:"bg-transparent border-admin-border text-white hover:bg-admin-bg",children:"취소"}),e.jsx(U,{onClick:v,disabled:!c.제품명.trim()||w,className:"bg-admin-accent text-admin-bg hover:bg-admin-accent/90",children:w?"등록 중...":"등록"})]})]})})}function dt(){const r=Ce(),{data:d,isLoading:u,error:k}=Ue(),{data:w}=_e(),c=Be(),x=ze(),p=$e(),v=He(),n=i.useRef(null),[C,P]=i.useState(0);i.useEffect(()=>{const m=n.current;if(!m)return;const g=new ResizeObserver(()=>{P(m.offsetHeight)});return g.observe(m),()=>g.disconnect()},[]);const[b,I]=i.useState(""),[h,B]=i.useState([]),[_,j]=i.useState([]),[E,R]=i.useState(!1),[F,W]=i.useState({isOpen:!1,rowIndex:-1,value:"",name:"",column:""}),[l,S]=i.useState({isOpen:!1,rowIndex:-1,value:"",name:""}),[T,V]=i.useState({isOpen:!1,rowIndex:-1,name:""}),z=d?.data||[],Y=d?.headers||[],ie=i.useMemo(()=>ke.filter(m=>!Se.includes(m)),[]),Q=i.useMemo(()=>z.filter(m=>{if(b){const g=b.toLowerCase(),O=String(m.제품명||"").toLowerCase(),$=String(m.업체명||"").toLowerCase();if(!O.includes(g)&&!$.includes(g))return!1}if(h.length>0&&!h.includes(String(m.상태||"")))return!1;if(_.length>0){const g=String(m["제품 카테고리"]||"").split(",").map(O=>O.trim());if(!_.some(O=>g.includes(O)))return!1}return!0}),[z,b,h,_]),X=()=>c.mutate(),t=m=>{x.mutate({values:m})},a=(m,g,O)=>{p.mutate({rowIndex:m,columnIndex:g,value:O})},o=(m,g,O,$)=>{const te={소싱메모:`[소싱메모]
- `,제품메모:`[제품메모]
- `},J=g.trim()?g:te[$]||"";W({isOpen:!0,rowIndex:m,value:J,name:O,column:$})},s=m=>{const g=Y.indexOf(F.column);g!==-1&&p.mutate({rowIndex:F.rowIndex,columnIndex:g,value:m}),W({isOpen:!1,rowIndex:-1,value:"",name:"",column:""})},f=(m,g,O)=>{S({isOpen:!0,rowIndex:m,value:g,name:O})},L=m=>{const g=m.map($=>$.인스타ID||$["인스타 이름"]).join(", "),O=Y.indexOf("핏한 인플루언서");O!==-1&&p.mutate({rowIndex:l.rowIndex,columnIndex:O,value:g}),S({isOpen:!1,rowIndex:-1,value:"",name:""})},y=(m,g)=>{V({isOpen:!0,rowIndex:m,name:g})},N=()=>{v.mutate(T.rowIndex),V({isOpen:!1,rowIndex:-1,name:""})},M=(m,g)=>{const O=z.find(D=>D._rowIndex===m);if(!O)return;const $=String(O.업체명||""),J=String(O["핏한 인플루언서"]||"").split(",").map(D=>D.trim()).filter(Boolean),ne=w?.data||[],G=J.map(D=>{const A=ne.find(se=>String(se.인스타ID||"")===D);return A?{id:crypto.randomUUID(),name:String(A["인스타 이름"]||D),followers:ce(String(A.팔로워||"")),category:String(A["카테고리(대)"]||""),profileUrl:String(A["프로필 링크"]||`https://instagram.com/${D}`),avgViews:ce(String(A["최근 10 평균 릴스 조회수"]||"")),engagementRate:"",maxComments:ce(String(A["공구 최대댓글수"]||"")),commentActivity:(()=>{const se=String(A.댓글활동여부||"").trim().toUpperCase();return se==="Y"||se==="O"?"Y":"N"})()}:{id:crypto.randomUUID(),name:D,followers:"",category:"",profileUrl:`https://instagram.com/${D}`,avgViews:"",engagementRate:"",maxComments:"",commentActivity:""}});r("/admin/proposal",{state:{productName:g,brandName:$,influencers:G}})};return k?e.jsx("div",{className:"max-w-[1800px] mx-auto mt-8",children:e.jsxs("div",{className:"bg-red-500/20 border border-red-500/40 rounded-lg p-6 text-center",children:[e.jsx("p",{className:"text-red-400 font-semibold",children:"데이터를 불러오는데 실패했습니다"}),e.jsx("p",{className:"text-admin-text text-sm mt-2",children:String(k)}),e.jsx(U,{onClick:X,className:"mt-4",children:"다시 시도"})]})}):e.jsxs("div",{className:"max-w-[1800px] mx-auto mt-4 md:mt-8",children:[e.jsxs("div",{className:"hidden md:flex md:items-center md:justify-between mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"제품소싱 관리"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(U,{onClick:()=>R(!0),className:"bg-admin-accent text-admin-bg hover:bg-admin-accent/90",children:[e.jsx(he,{className:"h-4 w-4 mr-2"}),"제품 추가"]}),e.jsxs(U,{onClick:X,disabled:c.isPending,variant:"outline",className:"bg-transparent border-admin-border text-white hover:bg-admin-bg",children:[e.jsx(me,{className:`h-4 w-4 mr-2 ${c.isPending?"animate-spin":""}`}),"새로고침"]})]})]}),e.jsxs("div",{ref:n,className:"sticky top-0 z-50 bg-admin-bg py-2 md:pt-2 md:pb-4 -mx-3 px-3 md:-mx-6 md:px-6 shadow-[0_4px_12px_rgba(0,0,0,0.3)]",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2 md:hidden",children:[e.jsx("h1",{className:"text-lg font-bold text-white",children:"제품소싱 관리"}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(U,{size:"sm",onClick:()=>R(!0),className:"bg-admin-accent text-admin-bg hover:bg-admin-accent/90 h-8 px-2",children:e.jsx(he,{className:"h-4 w-4"})}),e.jsx(U,{size:"sm",onClick:X,disabled:c.isPending,variant:"outline",className:"bg-transparent border-admin-border text-white hover:bg-admin-bg h-8 px-2",children:e.jsx(me,{className:`h-4 w-4 ${c.isPending?"animate-spin":""}`})})]})]}),e.jsx(Xe,{searchQuery:b,onSearchChange:I,selectedStatuses:h,onStatusesChange:B,selectedCategories:_,onCategoriesChange:j,resultCount:Q.length,totalCount:z.length})]}),u?e.jsx("div",{className:"flex items-center justify-center h-64 bg-admin-card rounded-lg border border-admin-border",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-admin-accent mx-auto mb-4"}),e.jsx("p",{className:"text-admin-text",children:"데이터를 불러오는 중..."})]})}):e.jsx(st,{data:Q,headers:Y,visibleColumns:ie,onCellEdit:a,onMemoEdit:o,onInfluencerEdit:f,onDelete:y,onCreateProposal:M,stickyTopOffset:C}),e.jsx(at,{isOpen:E,onClose:()=>R(!1),onSubmit:t,headers:Y,isPending:x.isPending}),e.jsx(Te,{isOpen:F.isOpen,onClose:()=>W({isOpen:!1,rowIndex:-1,value:"",name:"",column:""}),initialValue:F.value,onSave:s,influencerName:`${F.name} — ${F.column}`}),e.jsx(Ve,{open:l.isOpen,onClose:()=>S({isOpen:!1,rowIndex:-1,value:"",name:""}),onConfirm:L,initialSelectedIds:l.value?l.value.split(",").map(m=>m.trim()).filter(Boolean):void 0}),e.jsx(je,{open:T.isOpen,onOpenChange:()=>V({isOpen:!1,rowIndex:-1,name:""}),children:e.jsxs(we,{className:"bg-admin-card border-admin-border text-white max-w-sm",children:[e.jsx(Ne,{children:e.jsx(ve,{className:"text-white",children:"제품 삭제"})}),e.jsxs("p",{className:"text-sm text-admin-text py-4",children:[e.jsx("span",{className:"text-white font-medium",children:T.name||"이 제품"}),"을(를) 삭제하시겠습니까?",e.jsx("br",{}),"이 작업은 되돌릴 수 없습니다."]}),e.jsxs(ye,{children:[e.jsx(U,{variant:"outline",onClick:()=>V({isOpen:!1,rowIndex:-1,name:""}),className:"bg-transparent border-admin-border text-white hover:bg-admin-bg",children:"취소"}),e.jsx(U,{onClick:N,disabled:v.isPending,className:"bg-red-500 text-white hover:bg-red-600",children:v.isPending?"삭제 중...":"삭제"})]})]})}),e.jsx(Ae,{position:"top-right",theme:"dark"})]})}export{dt as default};
