const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/jspdf.es.min-CrzAAzCm.js","assets/index-Ds24EXiS.js","assets/index-BvadrPl0.css"])))=>i.map(i=>d[i]);
import{r as d,j as e,_ as pe}from"./index-Ds24EXiS.js";import{c as fe,B as O,X as ae,I as $,S as te,o as ve,u as we,D as re,d as le,f as ne,a as ye,C as me,p as Se,t as j,q as M,N as F,e as he}from"./useInfluencerData-BI9_1P6-.js";import{P as xe,M as Ce}from"./plus-DOy6A3sH.js";import{c as De,M as Z,G as ue,U as be,a as ee,f as R,b as ke}from"./constants-DxFdrC6p.js";import"./useQuery-CrHp14tJ.js";const Pe=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]],se=fe("file-down",Pe);const Oe=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],_e=fe("file-text",Oe);function Ee(){const a=()=>{const n=new Date,u=n.getFullYear(),c=String(n.getMonth()+1).padStart(2,"0");return`${u}.${c}`},[t,o]=d.useState({brandName:"",brandDescription:"",productName:"",productDescription:"",campaignGoal:"",campaignPeriod:"",budget:"",influencers:[],notes:""}),[r,v]=d.useState(a());return{formData:t,proposalDate:r,setProposalDate:v,updateField:(n,u)=>{o(c=>({...c,[n]:u}))},addInfluencer:()=>{const n={id:crypto.randomUUID(),name:"",followers:"",category:"",profileUrl:"",avgViews:"",engagementRate:""};o(u=>({...u,influencers:[...u.influencers,n]}))},removeInfluencer:n=>{o(u=>({...u,influencers:u.influencers.filter(c=>c.id!==n)}))},updateInfluencer:(n,u)=>{o(c=>({...c,influencers:c.influencers.map(x=>x.id===n?{...x,...u}:x)}))},loadProposalData:n=>{o(u=>({...u,...n}))},resetForm:()=>{o({brandName:"",brandDescription:"",productName:"",productDescription:"",campaignGoal:"",campaignPeriod:"",budget:"",influencers:[],notes:""}),v(a())}}}function Ie({influencer:a,onUpdate:t,onRemove:o}){return e.jsxs("div",{className:"bg-admin-card border border-admin-border rounded p-4 relative",children:[e.jsx(O,{variant:"ghost",size:"sm",onClick:o,className:"absolute top-2 right-2 h-6 w-6 p-0 hover:bg-admin-error/20",children:e.jsx(ae,{className:"h-4 w-4 text-admin-error"})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-admin-text mb-1 block",children:"이름"}),e.jsx($,{value:a.name,onChange:r=>t({name:r.target.value}),placeholder:"인플루언서 이름",className:"bg-admin-bg border-admin-border text-sm h-8"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-admin-text mb-1 block",children:"팔로워"}),e.jsx($,{value:a.followers,onChange:r=>t({followers:r.target.value}),placeholder:"예: 50만",className:"bg-admin-bg border-admin-border text-sm h-8"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-admin-text mb-1 block",children:"카테고리"}),e.jsx($,{value:a.category,onChange:r=>t({category:r.target.value}),placeholder:"예: 뷰티",className:"bg-admin-bg border-admin-border text-sm h-8"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-admin-text mb-1 block",children:"평균 조회수"}),e.jsx($,{value:a.avgViews,onChange:r=>t({avgViews:r.target.value}),placeholder:"예: 10만",className:"bg-admin-bg border-admin-border text-sm h-8"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-admin-text mb-1 block",children:"참여율"}),e.jsx($,{value:a.engagementRate,onChange:r=>t({engagementRate:r.target.value}),placeholder:"예: 8.5%",className:"bg-admin-bg border-admin-border text-sm h-8"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-admin-text mb-1 block",children:"프로필 URL"}),e.jsx($,{value:a.profileUrl,onChange:r=>t({profileUrl:r.target.value}),placeholder:"https://...",className:"bg-admin-bg border-admin-border text-sm h-8"})]})]})]})}function Te({formData:a,proposalDate:t,onDateChange:o,onFieldUpdate:r,onAddInfluencer:v,onRemoveInfluencer:D,onUpdateInfluencer:f,onOpenInfluencerBrowser:g,onOpenProductBrowser:N,onOpenProposalBrowser:l,onSavePDF:m,onDownloadHTML:n,onGenerateEmail:u,onSaveToNotion:c}){return e.jsx("div",{className:"w-full lg:w-[400px] bg-admin-card border-r border-admin-border overflow-y-auto h-screen",children:e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-white mb-2",children:"제안서 작성"}),e.jsx("p",{className:"text-xs text-admin-text",children:"제품 정보와 인플루언서를 선택하세요"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs(O,{variant:"outline",size:"sm",onClick:N,className:"border-admin-border hover:bg-admin-bg text-xs",children:[e.jsx(se,{className:"h-3 w-3 mr-1"}),"제품 불러오기"]}),e.jsxs(O,{variant:"outline",size:"sm",onClick:l,className:"border-admin-border hover:bg-admin-bg text-xs",children:[e.jsx(se,{className:"h-3 w-3 mr-1"}),"제안서 불러오기"]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-sm font-semibold text-white",children:"제품 정보"}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-xs text-admin-text mb-1 block",children:["제품명 ",e.jsx("span",{className:"text-admin-error",children:"*"})]}),e.jsx($,{value:a.productName,onChange:x=>r("productName",x.target.value),placeholder:"제품명을 입력하세요",className:"bg-admin-bg border-admin-border text-sm",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-admin-text mb-1 block",children:"제품 상세"}),e.jsx("textarea",{value:a.productDescription,onChange:x=>r("productDescription",x.target.value),placeholder:"제품 설명을 입력하세요",className:"w-full bg-admin-bg border border-admin-border rounded px-3 py-2 text-sm text-white resize-none focus:outline-none focus:ring-1 focus:ring-admin-accent",rows:3})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-admin-text mb-1 block",children:"회사명"}),e.jsx($,{value:a.brandName,onChange:x=>r("brandName",x.target.value),placeholder:"브랜드명을 입력하세요",className:"bg-admin-bg border-admin-border text-sm"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-sm font-semibold text-white",children:"인플루언서"}),e.jsxs(O,{variant:"outline",size:"sm",onClick:g,className:"border-admin-border hover:bg-admin-bg text-xs",children:[e.jsx(te,{className:"h-3 w-3 mr-1"}),"찾기"]})]}),e.jsx("div",{className:"space-y-2",children:a.influencers.map(x=>e.jsx(Ie,{influencer:x,onUpdate:C=>f(x.id,C),onRemove:()=>D(x.id)},x.id))}),e.jsxs(O,{variant:"outline",size:"sm",onClick:v,className:"w-full border-admin-border hover:bg-admin-bg text-xs",children:[e.jsx(xe,{className:"h-3 w-3 mr-1"}),"인플루언서 추가"]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-sm font-semibold text-white",children:"기타 정보"}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-admin-text mb-1 block",children:"제안일"}),e.jsx($,{value:t,onChange:x=>o(x.target.value),placeholder:"YYYY.MM",className:"bg-admin-bg border-admin-border text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-admin-text mb-1 block",children:"메모"}),e.jsx("textarea",{value:a.notes,onChange:x=>r("notes",x.target.value),placeholder:"추가 메모",className:"w-full bg-admin-bg border border-admin-border rounded px-3 py-2 text-sm text-white resize-none focus:outline-none focus:ring-1 focus:ring-admin-accent",rows:3})]})]}),e.jsxs("div",{className:"space-y-2 pt-4 border-t border-admin-border",children:[e.jsxs(O,{onClick:m,className:"w-full bg-admin-accent hover:bg-admin-accent/90 text-admin-bg text-sm",disabled:!a.productName,children:[e.jsx(se,{className:"h-4 w-4 mr-2"}),"PDF 저장"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs(O,{variant:"outline",size:"sm",onClick:n,className:"border-admin-border hover:bg-admin-bg text-xs",disabled:!a.productName,children:[e.jsx(se,{className:"h-3 w-3 mr-1"}),"HTML"]}),e.jsxs(O,{variant:"outline",size:"sm",onClick:u,className:"border-admin-border hover:bg-admin-bg text-xs",disabled:!a.productName,children:[e.jsx(Ce,{className:"h-3 w-3 mr-1"}),"이메일"]})]}),e.jsxs(O,{variant:"outline",size:"sm",onClick:c,className:"w-full border-admin-border hover:bg-admin-bg text-xs",disabled:!a.productName,children:[e.jsx(De,{className:"h-3 w-3 mr-1"}),"Notion에 저장"]})]})]})})}function Re({children:a,maxSize:t=13}){const o=d.useRef(null);return d.useEffect(()=>{const r=o.current;if(r)for(r.style.fontSize=`${t}px`;r.scrollWidth>r.clientWidth&&parseFloat(r.style.fontSize)>7;)r.style.fontSize=`${parseFloat(r.style.fontSize)-.5}px`},[a,t]),e.jsx("h5",{ref:o,style:{whiteSpace:"nowrap",fontSize:`${t}px`},children:a})}function $e(a){if(!a)return"";const t=a.match(/instagram\.com\/([^/?]+)/);if(t)return t[1];if(!a.includes("/"))return a;const o=a.replace(/\/+$/,"").split("/");return o[o.length-1]||a}const Ae=d.memo(function({data:t,proposalDate:o}){const r=d.useRef(null),v=d.useRef(null),[D,f]=d.useState(1),g=d.useCallback(()=>{const l=r.current,m=v.current;if(!l||!m)return;m.style.transform="none";const n=m.scrollWidth,u=m.scrollHeight,c=l.clientWidth-40,x=l.clientHeight-40,C=c/n,_=x/u,k=Math.min(C,_,1);f(k),m.style.transform=`scale(${k})`},[]);d.useEffect(()=>{g();const l=r.current;if(!l)return;const m=new ResizeObserver(g);return m.observe(l),()=>m.disconnect()},[g]);const N=d.useMemo(()=>`${t.influencers.length}-${!!t.productName}-${!!t.productDescription}-${!!t.brandName}`,[t.influencers.length,t.productName,t.productDescription,t.brandName]);return d.useEffect(()=>{g()},[N,g]),e.jsx("div",{className:"proposal-preview-container",ref:r,children:e.jsxs("div",{className:"proposal-document",id:"proposal-preview",ref:v,style:{transformOrigin:"top center",transform:`scale(${D})`},children:[e.jsx("div",{className:"top-bar"}),e.jsx("div",{className:"corner-bracket top-left"}),e.jsx("div",{className:"corner-bracket top-right"}),e.jsx("div",{className:"corner-bracket bottom-right"}),e.jsxs("div",{className:"proposal-content",children:[e.jsxs("div",{className:"proposal-header",children:[e.jsx("span",{children:"DEARDAYS AGENCY"}),e.jsx("span",{children:o})]}),e.jsxs("div",{className:"title-section",children:[e.jsx("div",{className:"accent-line"}),e.jsx("h1",{children:"인플루언서 공동구매"}),e.jsx("h2",{children:"협업 제안서"}),e.jsx("p",{className:"subtitle",children:"INFLUENCER COLLABORATION PROPOSAL"}),e.jsx("div",{className:"divider"})]}),t.productName&&e.jsx("div",{className:"product-card",children:e.jsxs("div",{className:"product-info",children:[e.jsx("p",{className:"label",children:"PRODUCT"}),e.jsx("h3",{children:t.productName}),t.productDescription&&e.jsx("p",{className:"detail",children:t.productDescription}),t.brandName&&e.jsx("p",{className:"company",children:t.brandName})]})}),t.influencers.length>0&&e.jsxs("div",{className:"influencer-section",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("div",{className:"line"}),e.jsx("p",{className:"eng",children:"RECOMMENDED INFLUENCERS"}),e.jsx("h4",{children:"추천 인플루언서"})]}),e.jsx("div",{className:"influencer-cards",children:t.influencers.map(l=>{const m=l.profileUrl?$e(l.profileUrl):"";return e.jsxs("div",{className:"influencer-card",children:[m&&e.jsx("img",{className:"avatar",src:`${ve}/instagram-avatar/${m}`,alt:l.name||"",onError:n=>{n.target.style.display="none"}}),e.jsx(Re,{children:l.name||"이름 없음"}),e.jsxs("p",{className:"handle",children:[m&&e.jsxs(e.Fragment,{children:["@",m]}),m&&l.followers&&" · ",l.followers&&e.jsx("span",{className:"followers",children:l.followers})]}),l.category&&e.jsx("p",{className:"category",children:l.category})]},l.id)})}),e.jsx("p",{className:"influencer-note",children:"* 비슷한 규모의 다른 인플루언서와의 협업도 가능합니다"})]}),e.jsxs("div",{className:"promise-section",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("div",{className:"line"}),e.jsx("p",{className:"eng",children:"OUR PROMISE"}),e.jsx("h4",{children:"협업 약속"})]}),e.jsxs("div",{className:"promise-list",children:[e.jsxs("div",{className:"promise-item",children:[e.jsx("span",{className:"number",children:"1."}),e.jsx("span",{className:"text",children:"구매자가 브랜드를 기억하게 만드는 기획"})]}),e.jsxs("div",{className:"promise-item",children:[e.jsx("span",{className:"number",children:"2."}),e.jsx("span",{className:"text",children:"브랜드 인지도 상승과 매출을 동시에 달성"})]}),e.jsxs("div",{className:"promise-item",children:[e.jsx("span",{className:"number",children:"3."}),e.jsx("span",{className:"text",children:"장기적 파트너십을 위한 투명한 커뮤니케이션"})]})]})]}),e.jsxs("div",{className:"agency-section",children:[e.jsxs("div",{className:"agency-header",children:[e.jsx("h4",{children:"DEARDAYS"}),e.jsx("span",{children:"공동구매 전문 에이전시"})]}),e.jsxs("div",{className:"stats",children:[e.jsxs("div",{className:"stat",children:[e.jsx("p",{className:"value",children:"300+"}),e.jsx("p",{className:"label",children:"공동구매 진행"})]}),e.jsxs("div",{className:"stat",children:[e.jsx("p",{className:"value",children:"ONE-STOP"}),e.jsx("p",{className:"label",children:"원스탑 서비스"})]}),e.jsxs("div",{className:"stat",children:[e.jsx("p",{className:"value",children:"CUSTOM"}),e.jsx("p",{className:"label",children:"맞춤 전략 설계"})]}),e.jsx("div",{className:"stat website",children:e.jsx("p",{className:"value",children:"deardays.kr"})})]})]}),e.jsxs("div",{className:"contact-card",children:[e.jsxs("div",{className:"contact-info",children:[e.jsx("p",{className:"label",children:"CONTACT"}),e.jsx("h5",{children:"정준기 이사"}),e.jsx("p",{className:"company",children:"디어데이즈 공동구매 에이전시"}),e.jsx("p",{className:"note",children:"010.4343.3685"})]}),e.jsx("div",{className:"contact-decoration"})]}),e.jsx("div",{className:"proposal-footer",children:e.jsx("p",{children:"© 2026 DEARDAYS AGENCY | INFLUENCER COLLABORATION PROPOSAL"})})]})]})})}),oe=[{label:"전체 팔로워",value:"all"},{label:"메가 (50만+)",value:"mega",min:5e5},{label:"매크로 (10~50만)",value:"macro",min:1e5,max:5e5},{label:"마이크로 (1~10만)",value:"micro",min:1e4,max:1e5},{label:"나노 (~1만)",value:"nano",max:1e4}],de=[{label:"평균댓글 전체",value:"all"},{label:"10+ 댓글",value:"10",min:10},{label:"50+ 댓글",value:"50",min:50},{label:"100+ 댓글",value:"100",min:100},{label:"500+ 댓글",value:"500",min:500}],ie=[{label:"멤버수 전체",value:"all"},{label:"100+",value:"100",min:100},{label:"1,000+",value:"1000",min:1e3},{label:"5,000+",value:"5000",min:5e3},{label:"1만+",value:"10000",min:1e4}],Ne=[{label:"등급순",value:"grade"},{label:"팔로워순",value:"followers"},{label:"평균조회순",value:"avgViews"},{label:"소통참여율순",value:"engagement"}],ge={S:0,A:1,B:2,C:3,D:4,검토대상:5};function I(a){if(!a||a==="-")return 0;const t=a.replace(/,/g,"").replace(/%/g,"").replace(/만/g,""),o=parseFloat(t);return isNaN(o)?0:a.includes("만")?o*1e4:o}function Le(a){return{id:crypto.randomUUID(),name:a["인스타 이름"]||a.인스타ID,followers:a.팔로워?R(a.팔로워):"",category:[a["카테고리(대)"],a["카테고리(중)"]].filter(Boolean).join(" · "),profileUrl:a["프로필 링크"]||"",avgViews:a["최근 10 평균 릴스 조회수"]?R(a["최근 10 평균 릴스 조회수"]):"",engagementRate:a["전체인원대비 소통참여율"]||""}}function Me({open:a,onClose:t,onAddInfluencers:o,existingProfileUrls:r}){const{data:v,isLoading:D}=we(),f=v?.data||[],[g,N]=d.useState(""),[l,m]=d.useState(""),[n,u]=d.useState([]),[c,x]=d.useState([]),[C,_]=d.useState("all"),[k,z]=d.useState("all"),[A,W]=d.useState("all"),[G,Y]=d.useState("grade"),[y,b]=d.useState(new Map),[E,S]=d.useState(!1),[P,B]=d.useState(!1);d.useEffect(()=>{const s=setTimeout(()=>m(g),250);return()=>clearTimeout(s)},[g]),d.useEffect(()=>{a||(b(new Map),N(""),m(""),u([]),x([]),_("all"),z("all"),W("all"),Y("grade"),S(!1),B(!1))},[a]);const T=d.useMemo(()=>{const s=new Set;return f.forEach(p=>{const i=p["카테고리(대)"];i&&i!=="-"&&s.add(i)}),Array.from(s).sort()},[f]),H=d.useMemo(()=>{let s=0;return n.length>0&&s++,c.length>0&&s++,C!=="all"&&s++,k!=="all"&&s++,A!=="all"&&s++,s},[n,c,C,k,A]),L=d.useMemo(()=>{const s=f.filter(p=>{if(l){const i=l.toLowerCase(),h=String(p.인스타ID||"").toLowerCase(),w=String(p["인스타 이름"]||"").toLowerCase();if(!h.includes(i)&&!w.includes(i))return!1}if(n.length>0&&!n.includes(p["카테고리(대)"])||c.length>0&&!c.includes(p["인플루언서 등급"]))return!1;if(C!=="all"){const i=I(p.팔로워),h=oe.find(w=>w.value===C);if(h&&"min"in h&&i<(h.min??0)||h&&"max"in h&&i>=(h.max??1/0))return!1}if(k!=="all"){const i=I(p["최근10개 평균 댓글수"]),h=de.find(w=>w.value===k);if(h&&"min"in h&&i<(h.min??0))return!1}if(A!=="all"){const i=I(p["공지채널 멤버수"]),h=ie.find(w=>w.value===A);if(h&&"min"in h&&i<(h.min??0))return!1}return!0});return s.sort((p,i)=>{switch(G){case"grade":{const h=ge[p["인플루언서 등급"]]??99,w=ge[i["인플루언서 등급"]]??99;return h!==w?h-w:I(i.팔로워)-I(p.팔로워)}case"followers":return I(i.팔로워)-I(p.팔로워);case"avgViews":return I(i["최근 10 평균 릴스 조회수"])-I(p["최근 10 평균 릴스 조회수"]);case"engagement":return I(i["전체인원대비 소통참여율"])-I(p["전체인원대비 소통참여율"]);default:return 0}}),s},[f,l,n,c,C,k,A,G]),J=d.useCallback(s=>{b(p=>{const i=s.인스타ID||s["인스타 이름"],h=new Map(p);return h.has(i)?h.delete(i):h.set(i,s),h})},[]),K=d.useCallback(s=>{b(p=>{const i=new Map(p);return i.delete(s),i})},[]),q=()=>{const s=Array.from(y.values()).map(Le);o(s),b(new Map),j.success(`${s.length}명의 인플루언서를 추가했습니다`),t()},U=s=>!r||!s["프로필 링크"]?!1:r.has(s["프로필 링크"]),Q=s=>s.인스타ID||s["인스타 이름"],X="h-8 bg-[#16162a] border border-[#333] rounded px-2 text-xs text-[#ccc] focus:outline-none focus:border-[#ffaf5f]";return e.jsx(re,{open:a,onOpenChange:t,children:e.jsxs(le,{showCloseButton:!1,className:"w-[100vw] max-w-[100vw] h-[100dvh] md:w-[95vw] md:max-w-[1300px] sm:max-w-[1300px] md:h-[90vh] md:rounded-lg bg-[#0e0e18] border-[#2a2a3a] md:border text-white p-0 gap-0 flex flex-col overflow-hidden rounded-none border-0",children:[e.jsxs("div",{className:"flex items-center gap-2 md:gap-3 px-3 md:px-5 h-12 md:h-14 border-b border-[#2a2a3a] shrink-0 bg-[#111120]",children:[e.jsx(ne,{className:"text-white text-sm md:text-[15px] font-bold whitespace-nowrap",children:"인플루언서 찾기"}),e.jsxs("span",{className:"text-[11px] text-[#777] whitespace-nowrap",children:[L.length,"/",f.length]}),e.jsxs("div",{className:"relative w-52 shrink-0 ml-2 hidden md:block",children:[e.jsx(te,{className:"absolute left-2.5 top-1/2 -translate-y-1/2 h-3.5 w-3.5 text-[#555]"}),e.jsx("input",{value:g,onChange:s=>N(s.target.value),placeholder:"ID / 이름 검색",className:"w-full h-8 pl-8 pr-3 bg-[#16162a] border border-[#333] rounded text-xs text-white placeholder:text-[#555] focus:outline-none focus:border-[#ffaf5f]"})]}),e.jsxs("div",{className:"hidden md:contents",children:[e.jsx(Z,{options:T,selected:n,onChange:u,placeholder:"카테고리",className:"w-28 shrink-0"}),e.jsx(Z,{options:ue,selected:c,onChange:x,placeholder:"등급",className:"w-24 shrink-0"}),e.jsx("select",{value:C,onChange:s=>_(s.target.value),className:X,children:oe.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))}),e.jsx("select",{value:k,onChange:s=>z(s.target.value),className:X,children:de.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))}),e.jsx("select",{value:A,onChange:s=>W(s.target.value),className:X,children:ie.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))})]}),e.jsxs("div",{className:"ml-auto flex items-center gap-1.5",children:[e.jsxs("button",{onClick:()=>B(!P),className:"md:hidden relative text-[#888] hover:text-white p-1.5 rounded hover:bg-white/5",children:[e.jsx(ye,{className:"h-4 w-4"}),H>0&&e.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-4 h-4 bg-amber-500 text-black text-[9px] font-bold rounded-full flex items-center justify-center",children:H})]}),e.jsx("select",{value:G,onChange:s=>Y(s.target.value),className:`${X} hidden md:block`,children:Ne.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))}),e.jsx("button",{onClick:()=>t(),className:"text-[#555] hover:text-white transition-colors p-1.5 rounded hover:bg-white/5",children:e.jsx(ae,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 border-b border-[#2a2a3a] bg-[#0e0e18] md:hidden shrink-0",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(te,{className:"absolute left-2.5 top-1/2 -translate-y-1/2 h-3.5 w-3.5 text-[#555]"}),e.jsx("input",{value:g,onChange:s=>N(s.target.value),placeholder:"ID / 이름 검색",className:"w-full h-9 pl-8 pr-3 bg-[#16162a] border border-[#333] rounded text-sm text-white placeholder:text-[#555] focus:outline-none focus:border-[#ffaf5f]"})]}),e.jsx("select",{value:G,onChange:s=>Y(s.target.value),className:"h-9 bg-[#16162a] border border-[#333] rounded px-2 text-xs text-[#ccc]",children:Ne.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))})]}),P&&e.jsxs("div",{className:"md:hidden px-3 py-3 border-b border-[#2a2a3a] bg-[#111120] space-y-2 shrink-0",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Z,{options:T,selected:n,onChange:u,placeholder:"카테고리",className:"flex-1"}),e.jsx(Z,{options:ue,selected:c,onChange:x,placeholder:"등급",className:"flex-1"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("select",{value:C,onChange:s=>_(s.target.value),className:"flex-1 h-9 bg-[#16162a] border border-[#333] rounded px-2 text-xs text-[#ccc]",children:oe.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))}),e.jsx("select",{value:k,onChange:s=>z(s.target.value),className:"flex-1 h-9 bg-[#16162a] border border-[#333] rounded px-2 text-xs text-[#ccc]",children:de.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))}),e.jsx("select",{value:A,onChange:s=>W(s.target.value),className:"flex-1 h-9 bg-[#16162a] border border-[#333] rounded px-2 text-xs text-[#ccc]",children:ie.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))})]})]}),e.jsxs("div",{className:"flex flex-1 min-h-0",children:[e.jsx("div",{className:"flex-1 overflow-y-auto",children:D?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-7 w-7 border-b-2 border-[#ffaf5f] mx-auto mb-3"}),e.jsx("p",{className:"text-[#666] text-sm",children:"불러오는 중..."})]})}):L.length===0?e.jsx("div",{className:"flex items-center justify-center h-full text-[#555]",children:e.jsxs("div",{className:"text-center",children:[e.jsx(be,{className:"h-10 w-10 mx-auto mb-3 opacity-30"}),e.jsx("p",{className:"text-sm",children:"결과가 없습니다"}),e.jsx("p",{className:"text-xs mt-1",children:"필터 조건을 변경해 보세요"})]})}):e.jsxs(e.Fragment,{children:[e.jsxs("table",{className:"w-full text-sm hidden md:table",children:[e.jsx("thead",{className:"sticky top-0 bg-[#111120] z-10",children:e.jsxs("tr",{className:"text-[11px] text-[#666] uppercase tracking-wider border-b border-[#2a2a3a]",children:[e.jsx("th",{className:"text-left py-2.5 pl-5 pr-2 font-medium w-8"}),e.jsx("th",{className:"text-left py-2.5 px-2 font-medium w-12",children:"등급"}),e.jsx("th",{className:"text-left py-2.5 px-2 font-medium",children:"이름"}),e.jsx("th",{className:"text-right py-2.5 px-2 font-medium w-20",children:"팔로워"}),e.jsx("th",{className:"text-right py-2.5 px-2 font-medium w-20",children:"평균조회"}),e.jsx("th",{className:"text-right py-2.5 px-2 font-medium w-16",children:"소통률"}),e.jsx("th",{className:"text-right py-2.5 px-2 font-medium w-16",children:"평균댓글"}),e.jsx("th",{className:"text-right py-2.5 px-2 font-medium w-16",children:"멤버수"}),e.jsx("th",{className:"text-left py-2.5 px-2 font-medium w-32",children:"카테고리"}),e.jsx("th",{className:"text-left py-2.5 px-2 font-medium",children:"메모"})]})}),e.jsx("tbody",{children:L.map(s=>{const p=Q(s),i=y.has(p),h=U(s),w=s["인플루언서 등급"],ce=ee[w]||"bg-gray-500/20 text-gray-400 border-gray-500/40";return e.jsxs("tr",{onClick:()=>!h&&J(s),className:`border-b border-[#1e1e2e] transition-colors ${h?"opacity-30 cursor-not-allowed":i?"bg-amber-500/[0.07] cursor-pointer":"hover:bg-[#16162a] cursor-pointer"}`,children:[e.jsx("td",{className:"py-2.5 pl-5 pr-2",children:e.jsx("div",{className:`w-5 h-5 rounded border flex items-center justify-center transition-colors ${i?"bg-amber-500 border-amber-500":"border-[#3a3a4a] bg-transparent"}`,children:i&&e.jsx(me,{className:"h-3 w-3 text-black",strokeWidth:3})})}),e.jsx("td",{className:"py-2.5 px-2",children:w&&e.jsx("span",{className:`inline-block text-[11px] font-bold leading-none px-2 py-1 rounded border ${ce}`,children:w})}),e.jsxs("td",{className:"py-2.5 px-2",children:[e.jsx("div",{className:"font-medium text-[13px] text-white leading-tight",children:s["인스타 이름"]||s.인스타ID}),s["인스타 이름"]&&s.인스타ID&&e.jsxs("div",{className:"text-[11px] text-[#666] mt-0.5",children:["@",s.인스타ID]}),h&&e.jsx("span",{className:"text-[10px] text-[#ffaf5f]/60 mt-0.5 inline-block",children:"추가됨"})]}),e.jsx("td",{className:"py-2.5 px-2 text-right text-[13px] text-[#ddd] tabular-nums",children:s.팔로워?R(s.팔로워):"-"}),e.jsx("td",{className:"py-2.5 px-2 text-right text-[13px] text-[#ddd] tabular-nums",children:s["최근 10 평균 릴스 조회수"]?R(s["최근 10 평균 릴스 조회수"]):"-"}),e.jsx("td",{className:"py-2.5 px-2 text-right text-[13px] text-[#ddd] tabular-nums",children:s["전체인원대비 소통참여율"]||"-"}),e.jsx("td",{className:"py-2.5 px-2 text-right text-[13px] text-[#ddd] tabular-nums",children:s["최근10개 평균 댓글수"]?R(s["최근10개 평균 댓글수"]):"-"}),e.jsx("td",{className:"py-2.5 px-2 text-right text-[13px] text-[#ddd] tabular-nums",children:s["공지채널 멤버수"]?R(s["공지채널 멤버수"]):"-"}),e.jsx("td",{className:"py-2.5 px-2",children:e.jsxs("div",{className:"flex gap-1 flex-wrap",children:[s["카테고리(대)"]&&s["카테고리(대)"]!=="-"&&e.jsx("span",{className:"text-[11px] bg-[#1e1e34] text-[#999] rounded px-2 py-0.5",children:s["카테고리(대)"]}),s["카테고리(중)"]&&s["카테고리(중)"]!=="-"&&e.jsx("span",{className:"text-[11px] bg-[#1e1e34] text-[#888] rounded px-2 py-0.5",children:s["카테고리(중)"]})]})}),e.jsx("td",{className:"py-2.5 px-2",children:s.메모&&s.메모!=="-"&&e.jsx("p",{className:"text-[12px] text-[#999] leading-tight line-clamp-2 max-w-[200px]",title:s.메모,children:s.메모})})]},p)})})]}),e.jsx("div",{className:"md:hidden divide-y divide-[#1e1e2e]",children:L.map(s=>{const p=Q(s),i=y.has(p),h=U(s),w=s["인플루언서 등급"],ce=ee[w]||"bg-gray-500/20 text-gray-400 border-gray-500/40";return e.jsx("button",{type:"button",disabled:h,onClick:()=>J(s),className:`w-full text-left px-4 py-3 transition-colors ${h?"opacity-30":i?"bg-amber-500/[0.07]":"active:bg-[#16162a]"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`w-5 h-5 rounded border flex items-center justify-center mt-0.5 shrink-0 ${i?"bg-amber-500 border-amber-500":"border-[#3a3a4a]"}`,children:i&&e.jsx(me,{className:"h-3 w-3 text-black",strokeWidth:3})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[w&&e.jsx("span",{className:`text-[11px] font-bold px-1.5 py-0.5 rounded border leading-none shrink-0 ${ce}`,children:w}),e.jsx("span",{className:"font-semibold text-[14px] text-white truncate",children:s["인스타 이름"]||s.인스타ID}),s["인스타 이름"]&&s.인스타ID&&e.jsxs("span",{className:"text-[12px] text-[#666] shrink-0",children:["@",s.인스타ID]})]}),e.jsxs("div",{className:"flex items-center gap-3 text-[12px]",children:[e.jsxs("span",{className:"text-[#999]",children:[e.jsx("span",{className:"text-[#666]",children:"팔 "}),e.jsx("span",{className:"text-[#ccc] font-medium",children:s.팔로워?R(s.팔로워):"-"})]}),e.jsxs("span",{className:"text-[#999]",children:[e.jsx("span",{className:"text-[#666]",children:"조회 "}),e.jsx("span",{className:"text-[#ccc] font-medium",children:s["최근 10 평균 릴스 조회수"]?R(s["최근 10 평균 릴스 조회수"]):"-"})]}),e.jsxs("span",{className:"text-[#999]",children:[e.jsx("span",{className:"text-[#666]",children:"소통 "}),e.jsx("span",{className:"text-[#ccc] font-medium",children:s["전체인원대비 소통참여율"]||"-"})]}),s["최근10개 평균 댓글수"]&&s["최근10개 평균 댓글수"]!=="-"&&e.jsxs("span",{className:"text-[#999]",children:[e.jsx("span",{className:"text-[#666]",children:"댓글 "}),e.jsx("span",{className:"text-[#ccc] font-medium",children:R(s["최근10개 평균 댓글수"])})]})]}),e.jsxs("div",{className:"flex gap-1.5 mt-1.5",children:[s["카테고리(대)"]&&s["카테고리(대)"]!=="-"&&e.jsx("span",{className:"text-[11px] bg-[#1e1e34] text-[#888] rounded px-2 py-0.5",children:s["카테고리(대)"]}),s["카테고리(중)"]&&s["카테고리(중)"]!=="-"&&e.jsx("span",{className:"text-[11px] bg-[#1e1e34] text-[#777] rounded px-2 py-0.5",children:s["카테고리(중)"]}),h&&e.jsx("span",{className:"text-[10px] text-[#ffaf5f]/60",children:"추가됨"})]}),s.메모&&s.메모!=="-"&&e.jsx("p",{className:"text-[11px] text-[#777] mt-1 line-clamp-1",children:s.메모})]})]})},p)})})]})}),e.jsxs("div",{className:"w-[260px] border-l border-[#2a2a3a] hidden md:flex flex-col shrink-0 bg-[#0d0d16]",children:[e.jsxs("div",{className:"px-4 py-3 border-b border-[#2a2a3a] flex items-center justify-between",children:[e.jsx("span",{className:"text-[13px] font-semibold text-[#ccc]",children:"선택됨"}),y.size>0&&e.jsx("span",{className:"text-xs font-bold text-amber-400 bg-amber-400/10 rounded-full px-2 py-0.5",children:y.size})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-2.5 space-y-1.5",children:y.size===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-[#444] text-center px-3",children:[e.jsx(be,{className:"h-7 w-7 mb-2 opacity-25"}),e.jsxs("p",{className:"text-xs leading-relaxed",children:["좌측 목록에서",e.jsx("br",{}),"인플루언서를 클릭하세요"]})]}):Array.from(y.entries()).map(([s,p])=>{const i=p["인플루언서 등급"],h=ee[i]||"";return e.jsxs("div",{className:"bg-[#16162a] border border-[#252540] rounded-lg px-3 py-2 flex items-center gap-2 group hover:border-[#333]",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[i&&e.jsx("span",{className:`text-[10px] font-bold px-1.5 py-0.5 rounded border leading-none shrink-0 ${h}`,children:i}),e.jsx("span",{className:"text-[13px] font-medium text-white truncate",children:p["인스타 이름"]||p.인스타ID})]}),e.jsx("p",{className:"text-[11px] text-[#666] mt-0.5",children:p.팔로워?R(p.팔로워)+" 팔로워":""})]}),e.jsx("button",{onClick:w=>{w.stopPropagation(),K(s)},className:"text-[#444] hover:text-red-400 transition-colors p-0.5 rounded hover:bg-red-400/10 opacity-0 group-hover:opacity-100",children:e.jsx(ae,{className:"h-3.5 w-3.5"})})]},s)})}),e.jsx("div",{className:"p-3 border-t border-[#2a2a3a]",children:e.jsxs(O,{onClick:q,disabled:y.size===0,className:"w-full h-9 bg-[#ffaf5f] hover:bg-[#ffaf5f]/90 text-[#0e0e18] font-bold text-sm disabled:opacity-25 disabled:cursor-not-allowed",children:[e.jsx(xe,{className:"h-4 w-4 mr-1.5"}),"제안서에 추가",y.size>0?` (${y.size})`:""]})})]})]}),e.jsxs("div",{className:"md:hidden shrink-0 border-t border-[#2a2a3a] bg-[#111120]",children:[E&&y.size>0&&e.jsx("div",{className:"max-h-[200px] overflow-y-auto p-2.5 space-y-1.5 border-b border-[#2a2a3a]",children:Array.from(y.entries()).map(([s,p])=>{const i=p["인플루언서 등급"],h=ee[i]||"";return e.jsxs("div",{className:"bg-[#16162a] border border-[#252540] rounded-lg px-3 py-2 flex items-center gap-2",children:[e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"flex items-center gap-1.5",children:[i&&e.jsx("span",{className:`text-[10px] font-bold px-1.5 py-0.5 rounded border leading-none shrink-0 ${h}`,children:i}),e.jsx("span",{className:"text-[13px] font-medium text-white truncate",children:p["인스타 이름"]||p.인스타ID})]})}),e.jsx("button",{onClick:()=>K(s),className:"text-[#666] hover:text-red-400 p-1",children:e.jsx(ae,{className:"h-3.5 w-3.5"})})]},s)})}),e.jsxs("div",{className:"flex items-center gap-2 px-3 py-2.5",children:[y.size>0&&e.jsxs("button",{onClick:()=>S(!E),className:"flex items-center gap-1 text-[13px] text-amber-400 font-medium",children:[e.jsxs("span",{children:[y.size,"명 선택"]}),e.jsx(Se,{className:`h-3.5 w-3.5 transition-transform ${E?"rotate-180":""}`})]}),e.jsxs(O,{onClick:q,disabled:y.size===0,className:"ml-auto h-9 px-5 bg-[#ffaf5f] hover:bg-[#ffaf5f]/90 text-[#0e0e18] font-bold text-sm disabled:opacity-25",children:[e.jsx(xe,{className:"h-4 w-4 mr-1"}),"추가",y.size>0?` (${y.size})`:""]})]})]})]})})}const V={searchInfluencers:a=>M(`${F}/search`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:a})}),saveProposal:a=>M(`${F}/save-proposal`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),queryInfluencer:(a,t)=>M(`${F}/query`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({influencerId:a,databaseId:t})}),loadProduct:a=>M(`${F}/product`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({pageId:a})}),searchProducts:(a,t,o=50)=>M(`${F}/search-products`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({databaseId:a,query:t,limit:o})}),loadProposals:(a,t=20)=>M(`${F}/load-proposals`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({proposalDatabaseId:a,limit:t})}),fetchPage:a=>M(`${F}/fetch`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({pageId:a})}),listInfluencers:(a,t,o,r,v=100)=>M(`${F}/list`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({databaseId:a,filters:t,sort:o,cursor:r,limit:v})})},je="2fb3d45b094580aab89bee0cdc950b3a";function Fe({open:a,onClose:t,onLoadProduct:o}){const[r,v]=d.useState(""),[D,f]=d.useState([]),[g,N]=d.useState(!1);d.useEffect(()=>{a&&l()},[a]);const l=async()=>{N(!0);try{const c=await V.searchProducts(je,"",50);f(c.results||[])}catch(c){console.error("Failed to load products:",c),j.error("제품 목록을 불러오는데 실패했습니다")}finally{N(!1)}},m=async()=>{if(!r.trim()){l();return}N(!0);try{const c=await V.searchProducts(je,r,50);f(c.results||[])}catch(c){console.error("Failed to search products:",c),j.error("제품 검색에 실패했습니다")}finally{N(!1)}},n=async c=>{try{const x=await V.loadProduct(c.id);o(x),j.success("제품을 불러왔습니다"),t()}catch(x){console.error("Failed to load product:",x),j.error("제품을 불러오는데 실패했습니다")}},u=r?D.filter(c=>(c.properties?.이름?.title?.[0]?.plain_text||"").toLowerCase().includes(r.toLowerCase())):D;return e.jsx(re,{open:a,onOpenChange:t,children:e.jsxs(le,{className:"max-w-2xl max-h-[80vh] bg-admin-card border-admin-border text-white",children:[e.jsx(he,{children:e.jsx(ne,{className:"text-white",children:"제품 불러오기"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(te,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-admin-text"}),e.jsx($,{value:r,onChange:c=>v(c.target.value),onKeyDown:c=>c.key==="Enter"&&m(),placeholder:"제품명으로 검색...",className:"pl-10 bg-admin-bg border-admin-border"})]}),e.jsx(O,{onClick:m,className:"bg-admin-accent hover:bg-admin-accent/90 text-admin-bg",children:"검색"})]}),e.jsx("div",{className:"max-h-[50vh] overflow-y-auto space-y-2",children:g?e.jsx("div",{className:"text-center text-admin-text py-8",children:"불러오는 중..."}):u.length===0?e.jsx("div",{className:"text-center text-admin-text py-8",children:"결과가 없습니다"}):u.map(c=>{const x=c.properties?.이름?.title?.[0]?.plain_text||"이름 없음",C=c.properties?.브랜드?.rich_text?.[0]?.plain_text||"",_=c.properties?.설명?.rich_text?.[0]?.plain_text||"";return e.jsxs("div",{onClick:()=>n(c),className:"bg-admin-bg border border-admin-border hover:border-admin-accent rounded p-4 cursor-pointer transition-colors",children:[e.jsx("div",{className:"font-semibold mb-1",children:x}),C&&e.jsx("div",{className:"text-xs text-admin-accent mb-2",children:C}),_&&e.jsx("div",{className:"text-xs text-admin-text line-clamp-2",children:_})]},c.id)})})]})]})})}const ze="17029bd4e5ca4339a67f84e63d99b266";function Be({open:a,onClose:t,onLoadProposal:o}){const[r,v]=d.useState([]),[D,f]=d.useState(!1);d.useEffect(()=>{a&&g()},[a]);const g=async()=>{f(!0);try{const l=await V.loadProposals(ze,20);v(l.results||[])}catch(l){console.error("Failed to load proposals:",l),j.error("제안서 목록을 불러오는데 실패했습니다")}finally{f(!1)}},N=async l=>{try{const m=await V.fetchPage(l.id);o(m),j.success("제안서를 불러왔습니다"),t()}catch(m){console.error("Failed to load proposal:",m),j.error("제안서를 불러오는데 실패했습니다")}};return e.jsx(re,{open:a,onOpenChange:t,children:e.jsxs(le,{className:"max-w-2xl max-h-[80vh] bg-admin-card border-admin-border text-white",children:[e.jsx(he,{children:e.jsx(ne,{className:"text-white",children:"제안서 불러오기"})}),e.jsx("div",{className:"max-h-[60vh] overflow-y-auto space-y-2",children:D?e.jsx("div",{className:"text-center text-admin-text py-8",children:"불러오는 중..."}):r.length===0?e.jsx("div",{className:"text-center text-admin-text py-8",children:"저장된 제안서가 없습니다"}):r.map(l=>{const m=l.properties?.제품명?.title?.[0]?.plain_text||"제품명 없음",n=l.properties?.브랜드명?.rich_text?.[0]?.plain_text||"",u=new Date(l.created_time).toLocaleDateString("ko-KR");return e.jsxs("div",{onClick:()=>N(l),className:"bg-admin-bg border border-admin-border hover:border-admin-accent rounded p-4 cursor-pointer transition-colors flex items-start gap-3",children:[e.jsx(_e,{className:"h-5 w-5 text-admin-accent flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-semibold mb-1",children:m}),n&&e.jsx("div",{className:"text-xs text-admin-accent mb-1",children:n}),e.jsxs("div",{className:"text-xs text-admin-text",children:["생성일: ",u]})]})]},l.id)})})]})})}function He(a){if(!a)return"";const t=a.match(/instagram\.com\/([^/?]+)/);if(t)return t[1];if(!a.includes("/"))return a;const o=a.replace(/\/+$/,"").split("/");return o[o.length-1]||a}function Ge({open:a,onClose:t,data:o}){const[r,v]=d.useState(!1),D=()=>{const N=o.brandName||"[회사명]",l=o.productName||"[제품명]";return`[${N} x 디어데이즈] 공동구매 제안 ${l}`},f=()=>{const N=o.productName||"[제품명]",l=o.brandName||"[회사명]";let m="";return o.influencers.forEach((n,u)=>{if(n.name||n.profileUrl){const c=n.name||"[이름]",x=n.profileUrl?He(n.profileUrl):"handle",C=n.followers||"-",_=n.avgViews||"-",k=n.profileUrl?n.profileUrl:`https://www.instagram.com/${x}/`,z=n.category||"살림";m+=`
${u+1}. ${x} | ${c} ${C} ${k}
• ${z} 카테고리
• 공구제품 활용한 콘텐츠의 릴스 조회수(평균 ${_})

`}}),`안녕하세요, ${l} 담당자님.

공동구매 전문 에이전시 디어데이즈의 정준기 이사입니다.

${l}의 「${N}」 제품을 보고 연락드립니다.
좋은 제품을 판매하고 계셔서 공동구매 프로모션을 함께 진행하고 싶습니다.

저희가 협업 중인 인플루언서 분들 중 ${N} 제품과 핏이 맞는 분들이 계셔 공동구매를 제안드립니다.
공구 판매실적, 릴스 조회수, 팔로워 소통, 참여율 외 내부 검토 프로세스를 거쳐 매칭하였습니다.

${m}
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

■ 디어데이즈 소개

저희는 400건 이상의 공동구매를 진행하며 98% 고객 만족도를 달성한
50개 브랜드의 신뢰받는 파트너입니다.

• 300명 이상의 검증된 인플루언서와 직접 협업
• 콘텐츠 기획부터 판매 운영까지 원스톱 진행
• 데이터 기반 매칭으로 최적의 인플루언서 연계
• 브랜드별 맞춤 전략으로 목표 매출과 장기 고객 확보

▸ 성공 사례
  - 키친 브랜드: 인지도 제로에서 5차 공구 연속 완판
  - 식품 브랜드: 론칭 6시간 만에 전량 소진
  - 라이프스타일 브랜드: 신규 고객 유입 300% 증가

▸ 고객 만족도 피드백
  "공구로 바이럴이 잘 되어서 저희쪽 브랜드 인지도가 많이 올라갔어요."
  "저희쪽 브랜드와 잘 맞는 셀러분을 매칭해주셨어요."
  "앞으로 자주 거래하고 싶어요. 특히 담당 이사님이 너무 잘해주셨어요."

저희의 목표는 단순 매출 상승이 아니라,
공동구매를 통해 브랜드가 고객에게 기억되도록 돕는 것입니다.

긍정적인 검토 부탁드리며,
편하신 시간대에 연락주시면 바로 답변드릴 수 있도록 하겠습니다.

감사합니다.
정준기 드림`},g=async()=>{const N=D(),l=f(),m=`제목: ${N}

${l}`;try{await navigator.clipboard.writeText(m),v(!0),j.success("이메일 내용이 복사되었습니다"),setTimeout(()=>v(!1),2e3)}catch(n){console.error("Failed to copy:",n),j.error("복사에 실패했습니다")}};return e.jsx(re,{open:a,onOpenChange:t,children:e.jsxs(le,{className:"max-w-3xl max-h-[80vh] bg-admin-card border-admin-border text-white",children:[e.jsx(he,{children:e.jsx(ne,{className:"text-white",children:"이메일 생성"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-admin-text mb-2 block",children:"제목"}),e.jsx("div",{className:"bg-admin-bg border border-admin-border rounded px-4 py-3 text-sm",children:D()})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-admin-text mb-2 block",children:"본문"}),e.jsx("div",{className:"bg-admin-bg border border-admin-border rounded p-4 max-h-[40vh] overflow-y-auto",children:e.jsx("pre",{className:"text-sm whitespace-pre-wrap font-sans",children:f()})})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[e.jsx(O,{variant:"outline",onClick:t,className:"border-admin-border hover:bg-admin-bg",children:"닫기"}),e.jsx(O,{onClick:g,className:"bg-admin-accent hover:bg-admin-accent/90 text-admin-bg",children:r?e.jsxs(e.Fragment,{children:[e.jsx(me,{className:"h-4 w-4 mr-2"}),"복사됨"]}):e.jsxs(e.Fragment,{children:[e.jsx(ke,{className:"h-4 w-4 mr-2"}),"클립보드에 복사"]})})]})]})]})})}function Ke(){const{formData:a,proposalDate:t,setProposalDate:o,updateField:r,addInfluencer:v,removeInfluencer:D,updateInfluencer:f,loadProposalData:g}=Ee(),N=d.useDeferredValue(a),[l,m]=d.useState(!1),[n,u]=d.useState(!1),[c,x]=d.useState(!1),[C,_]=d.useState(!1),k=b=>{const E=new Set(a.influencers.map(P=>P.id)),S=b.filter(P=>!E.has(P.id));g({influencers:[...a.influencers,...S]})},z=b=>{const E=b.properties?.이름?.title?.[0]?.plain_text||"",S=b.properties?.브랜드?.rich_text?.[0]?.plain_text||"",P=b.properties?.설명?.rich_text?.[0]?.plain_text||"";g({productName:E,brandName:S,productDescription:P})},A=b=>{const E=b.properties?.제품명?.title?.[0]?.plain_text||"",S=b.properties?.브랜드명?.rich_text?.[0]?.plain_text||"",P=b.properties?.제품설명?.rich_text?.[0]?.plain_text||"";g({productName:E,brandName:S,productDescription:P})},W=async()=>{if(!a.productName){j.error("제품명을 입력해주세요");return}try{const b=(await pe(async()=>{const{default:U}=await import("./html2canvas.esm-DXEQVQnt.js");return{default:U}},[])).default,E=(await pe(async()=>{const{default:U}=await import("./jspdf.es.min-CrzAAzCm.js").then(Q=>Q.j);return{default:U}},__vite__mapDeps([0,1,2]))).default,S=document.getElementById("proposal-preview");if(!S)throw new Error("Preview element not found");j.info("PDF 생성 중...");const P=S.style.transform,B=S.style.transformOrigin;S.style.transform="none",S.style.transformOrigin="";const T=await b(S,{scale:2,useCORS:!0,allowTaint:!0,backgroundColor:"#16161c"});S.style.transform=P,S.style.transformOrigin=B;const H=210,L=T.height*H/T.width,J=new E("p","mm","a4"),K=T.toDataURL("image/png");J.addImage(K,"PNG",0,0,H,L);const q=`제안서_${a.brandName||a.productName}_${t.replace(/\./g,"")}.pdf`;J.save(q),j.success("PDF가 저장되었습니다")}catch(b){console.error("Failed to save PDF:",b),j.error("PDF 저장에 실패했습니다")}},G=()=>{if(!a.productName){j.error("제품명을 입력해주세요");return}try{const b=document.getElementById("proposal-preview");if(!b)throw new Error("Preview element not found");const E=Array.from(document.styleSheets).map(H=>{try{return Array.from(H.cssRules).map(L=>L.cssText).join(`
`)}catch{return""}}).join(`
`),S=`<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>제안서 - ${a.brandName||a.productName}</title>
  <style>
    ${E}
    body { margin: 0; padding: 0; }
  </style>
</head>
<body>
  ${b.outerHTML}
</body>
</html>`,P=new Blob([S],{type:"text/html"}),B=URL.createObjectURL(P),T=document.createElement("a");T.href=B,T.download=`제안서_${a.brandName||a.productName}_${t.replace(/\./g,"")}.html`,T.click(),URL.revokeObjectURL(B),j.success("HTML이 저장되었습니다")}catch(b){console.error("Failed to download HTML:",b),j.error("HTML 저장에 실패했습니다")}},Y=()=>{if(!a.productName){j.error("제품명을 입력해주세요");return}_(!0)},y=async()=>{if(!a.productName){j.error("제품명을 입력해주세요");return}try{j.info("Notion에 저장 중..."),await V.saveProposal({productName:a.productName,brandName:a.brandName,productDescription:a.productDescription,campaignGoal:a.campaignGoal,campaignPeriod:a.campaignPeriod,budget:a.budget,influencers:a.influencers,notes:a.notes,proposalDate:t}),j.success("Notion에 저장되었습니다")}catch(b){console.error("Failed to save to Notion:",b),j.error("Notion 저장에 실패했습니다")}};return e.jsxs("div",{className:"flex flex-col lg:flex-row h-screen bg-admin-bg",children:[e.jsx(Te,{formData:a,proposalDate:t,onDateChange:o,onFieldUpdate:r,onAddInfluencer:v,onRemoveInfluencer:D,onUpdateInfluencer:f,onOpenInfluencerBrowser:()=>m(!0),onOpenProductBrowser:()=>u(!0),onOpenProposalBrowser:()=>x(!0),onSavePDF:W,onDownloadHTML:G,onGenerateEmail:Y,onSaveToNotion:y}),e.jsx("div",{className:"flex-1 overflow-hidden",children:e.jsx(Ae,{data:N,proposalDate:t})}),e.jsx(Me,{open:l,onClose:()=>m(!1),onAddInfluencers:k,existingProfileUrls:new Set(a.influencers.map(b=>b.profileUrl).filter(Boolean))}),e.jsx(Fe,{open:n,onClose:()=>u(!1),onLoadProduct:z}),e.jsx(Be,{open:c,onClose:()=>x(!1),onLoadProposal:A}),e.jsx(Ge,{open:C,onClose:()=>_(!1),data:a})]})}export{Ke as default};
