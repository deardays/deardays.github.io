import{r as i,j as e,a as De}from"./index-DV0hRhEn.js";import{c as ee,S as ke,I as ce,a as Ie,X as Ne,b as O,B as I,D as _e,d as Le,e as ze,f as Te,g as Fe,t as Pe,u as Re,h as Ae,i as He,j as Ue,k as Ve,l as Ge,m as $e,n as qe}from"./useInfluencerData-BcJuusmJ.js";import{P as Ce,E as Be,B as Se,A as We,a as Ke,b as Ye,M as Me,R as Qe,c as Xe,T as Je}from"./MemoEditModal-RxeDWHUT.js";import{M as q,G as Oe,D as ge,H as je,C as Z,f as U,a as he,U as Ze,S as le,b as et,c as tt}from"./constants-pCNOUk1U.js";import{u as st,a as at,b as nt,f as Y,c as rt}from"./useAnalyzerData-hiM9DYL-.js";import"./useQuery-CjFb_EaA.js";const it=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],lt=ee("clipboard-list",it);const ct=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],dt=ee("clock",ct);const ot=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],mt=ee("settings",ot);const xt=[["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M12 21v-9",key:"17s77i"}],["path",{d:"M12 8V3",key:"13r4qs"}],["path",{d:"M17 16h4",key:"h1uq16"}],["path",{d:"M19 12V3",key:"o1uvq1"}],["path",{d:"M19 21v-5",key:"qua636"}],["path",{d:"M3 14h4",key:"bcjad9"}],["path",{d:"M5 10V3",key:"cb8scm"}],["path",{d:"M5 21v-7",key:"1w1uti"}]],ht=ee("sliders-vertical",xt);const ut=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],bt=ee("sparkles",ut);const pt=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],pe=ee("star",pt);function ft({searchQuery:s,onSearchChange:l,categoryOptions:b,selectedCategories:f,onCategoriesChange:h,selectedGrades:x,onGradesChange:g,activityOptions:p,selectedActivity:E,onActivityChange:d,updateStatusOptions:N,selectedUpdateStatus:j,onUpdateStatusChange:k,resultCount:_,totalCount:C,showFavoritesOnly:y,onFavoritesToggle:V}){const[z,A]=i.useState(s),[L,B]=i.useState(!1);i.useEffect(()=>{const w=setTimeout(()=>{l(z)},250);return()=>clearTimeout(w)},[z,l]);const T=f.length+x.length+E.length+j.length,W=()=>{h([]),g([]),d([]),k([])};return e.jsxs("div",{children:[e.jsxs("div",{className:"md:hidden",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(ke,{className:"absolute left-2.5 top-1/2 -translate-y-1/2 h-3.5 w-3.5 text-admin-text"}),e.jsx(ce,{type:"text",placeholder:"ID ÎòêÎäî Ïù¥Î¶Ñ Í≤ÄÏÉâ...",value:z,onChange:w=>A(w.target.value),className:"pl-8 h-8 text-[13px] bg-admin-card border-admin-border text-white placeholder:text-admin-text"})]}),e.jsx("button",{onClick:V,className:`flex items-center justify-center h-8 w-8 rounded-md border shrink-0 transition-colors ${y?"bg-amber-500/20 border-amber-500/40 text-amber-400":"bg-admin-card border-admin-border text-admin-text/40"}`,children:e.jsx(pe,{className:`h-3.5 w-3.5 ${y?"fill-amber-400":""}`})}),e.jsxs("button",{onClick:()=>B(!L),className:`relative flex items-center justify-center h-8 w-8 rounded-md border shrink-0 transition-colors ${L||T>0?"bg-admin-accent/15 border-admin-accent/40 text-admin-accent":"bg-admin-card border-admin-border text-admin-text"}`,children:[e.jsx(Ie,{className:"h-3.5 w-3.5"}),T>0&&e.jsx("span",{className:"absolute -top-1.5 -right-1.5 min-w-[16px] h-4 flex items-center justify-center rounded-full bg-admin-accent text-[10px] font-bold text-admin-bg px-1",children:T})]}),e.jsxs("span",{className:"text-[11px] text-admin-text tabular-nums shrink-0",children:[e.jsx("span",{className:"text-white font-semibold",children:_}),"/",C]})]}),L&&e.jsxs("div",{className:"mt-2 flex flex-col gap-2",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(q,{options:b,selected:f,onChange:h,placeholder:"Ïπ¥ÌÖåÍ≥†Î¶¨"}),e.jsx(q,{options:Oe,selected:x,onChange:g,placeholder:"Îì±Í∏â"}),e.jsx(q,{options:p,selected:E,onChange:d,placeholder:"ÌôúÎèô"}),e.jsx(q,{options:N,selected:j,onChange:k,placeholder:"ÏóÖÎç∞Ïù¥Ìä∏"})]}),T>0&&e.jsxs("button",{onClick:W,className:"flex items-center gap-1 text-[11px] text-admin-text hover:text-admin-accent transition-colors self-end",children:[e.jsx(Ne,{className:"h-3 w-3"}),"ÌïÑÌÑ∞ Ï¥àÍ∏∞Ìôî"]})]})]}),e.jsxs("div",{className:"hidden md:block space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-5 gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ke,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-admin-text"}),e.jsx(ce,{type:"text",placeholder:"ID ÎòêÎäî Ïù¥Î¶Ñ Í≤ÄÏÉâ...",value:z,onChange:w=>A(w.target.value),className:"pl-10 bg-admin-card border-admin-border text-white placeholder:text-admin-text"})]}),e.jsx(q,{options:b,selected:f,onChange:h,placeholder:"Ïπ¥ÌÖåÍ≥†Î¶¨ ÏÑ†ÌÉù"}),e.jsx(q,{options:Oe,selected:x,onChange:g,placeholder:"Îì±Í∏â ÏÑ†ÌÉù"}),e.jsx(q,{options:p,selected:E,onChange:d,placeholder:"ÌôúÎèô ÌïÑÌÑ∞"}),e.jsx(q,{options:N,selected:j,onChange:k,placeholder:"ÏóÖÎç∞Ïù¥Ìä∏ ÏÉÅÌÉú"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-admin-text",children:[e.jsx("span",{className:"text-white font-semibold",children:_})," /"," ",C," Í±¥"]}),e.jsxs("button",{onClick:V,className:`flex items-center gap-1.5 px-3 py-1 rounded-full text-[12px] font-medium border transition-colors ${y?"bg-amber-500/20 border-amber-500/40 text-amber-400":"bg-admin-card border-admin-border text-admin-text hover:text-white"}`,children:[e.jsx(pe,{className:`h-3.5 w-3.5 ${y?"fill-amber-400":""}`}),"Ï¶êÍ≤®Ï∞æÍ∏∞Îßå"]})]})]})]})}function gt(s){const l=s.reduce((x,g)=>x+(Z[g]?.width||120),0),b={},f=[];let h=0;for(let x=0;x<s.length;x++){const g=Z[s[x]]?.width||120,p=g/l*100;b[s[x]]=`${p}%`,x<le&&(f.push(`${h/l*100}%`),h+=g)}return{total:l,pctWidths:b,stickyOffsets:f}}function jt({data:s,headers:l,visibleColumns:b,onCellEdit:f,onMemoEdit:h,highlightId:x,stickyTopOffset:g=0}){const[p,E]=i.useState({column:null,direction:null});i.useEffect(()=>{if(!x)return;const t=setTimeout(()=>{const r=document.querySelector(`[data-insta-id="${CSS.escape(x)}"]`);r&&r.scrollIntoView({behavior:"smooth",block:"center"})},100);return()=>clearTimeout(t)},[x]);const[d,N]=i.useState(null),[j,k]=i.useState(""),_=i.useMemo(()=>ge.filter(t=>b.includes(t)&&!je.includes(t)),[b]),C=i.useMemo(()=>gt(_),[_]),y=i.useMemo(()=>!p.column||!p.direction?s:[...s].sort((t,r)=>{const c=String(t[p.column]||""),a=String(r[p.column]||""),o=parseFloat(c.replace(/,/g,"")),M=parseFloat(a.replace(/,/g,""));return!isNaN(o)&&!isNaN(M)?p.direction==="asc"?o-M:M-o:p.direction==="asc"?c.localeCompare(a,"ko"):a.localeCompare(c,"ko")}),[s,p]),V=t=>{E(r=>r.column!==t?{column:t,direction:"asc"}:r.direction==="asc"?{column:t,direction:"desc"}:{column:null,direction:null})},z=(t,r,c,a)=>{const o=Z[r];o&&(o.type==="editable-memo"?h(t,c,a):(o.type==="editable-number"||o.type==="editable-boolean")&&(N({rowIndex:t,column:r}),k(c)))},A=(t,r)=>{if(d?.rowIndex===t&&d?.column===r){const c=l.indexOf(r);c!==-1&&f(t,c,j),N(null),k("")}},L=(t,r,c)=>{t.key==="Enter"?A(r,c):t.key==="Escape"&&(N(null),k(""))},B=(t,r,c)=>{const a=String(t[r]||""),o=Z[r];if(!o)return a;const M=l.indexOf(r),P=d?.rowIndex===c&&d?.column===r;if(o.type==="editable-memo")return e.jsxs("button",{onClick:()=>z(c,r,a,t["Ïù∏Ïä§ÌÉÄ Ïù¥Î¶Ñ"]),className:"w-full text-left group/memo relative",children:[e.jsx("span",{className:"whitespace-pre-wrap break-words text-[13px] leading-relaxed text-white/90",children:a||"-"}),e.jsx("span",{className:"absolute top-0 right-0 opacity-0 group-hover/memo:opacity-100 transition-opacity",children:e.jsx(Ce,{className:"h-3 w-3 text-admin-accent"})})]});if(o.type==="editable-number"){const u=a&&a!=="-"?a:"0";return P?e.jsx("input",{type:"text",value:j,onChange:D=>k(D.target.value),onBlur:()=>A(c,r),onKeyDown:D=>L(D,c,r),autoFocus:!0,className:"w-full px-1.5 py-0.5 bg-admin-bg border border-admin-accent rounded text-white text-right text-[13px] focus:outline-none"}):e.jsx("button",{onClick:()=>z(c,r,a,""),className:"w-full text-right tabular-nums text-[13px] text-admin-accent/80 hover:text-admin-accent border-b border-dashed border-admin-border hover:border-admin-accent/50 transition-colors",children:U(u)})}if(o.type==="editable-boolean"){const u=a.trim().toUpperCase()==="ON";return e.jsx(I,{size:"sm",variant:"outline",onClick:()=>{f(c,M,u?"OFF":"ON")},className:O("h-6 px-2 text-[11px] font-semibold rounded-full",u?"bg-admin-success/15 text-admin-success border-admin-success/30 hover:bg-admin-success/25":"bg-gray-500/15 text-gray-500 border-gray-500/30 hover:bg-gray-500/25"),children:u?"ON":"OFF"})}if(o.type==="favorite"){const u=a.trim().toUpperCase()==="TRUE";return e.jsx("button",{onClick:()=>{const D=l.indexOf(r);D!==-1&&f(c,D,u?"FALSE":"TRUE")},className:"flex items-center justify-center w-full",children:e.jsx(pe,{className:O("h-4 w-4 transition-colors",u?"fill-amber-400 text-amber-400":"text-admin-text/30 hover:text-amber-400/60")})})}if(o.type==="id"){const u=t["ÌîÑÎ°úÌïÑ ÎßÅÌÅ¨"];return u&&r==="Ïù∏Ïä§ÌÉÄID"?e.jsx("a",{href:u,target:"_blank",rel:"noopener noreferrer",className:"text-admin-accent hover:underline text-[13px] font-medium",children:a}):e.jsx("span",{className:"text-[13px] text-admin-text",children:a})}if(o.type==="name")return e.jsx("span",{className:"text-[13px] text-white whitespace-normal break-words leading-snug",children:a});if(o.type==="link")return!a||a==="-"?e.jsx("span",{className:"text-admin-text/40",children:"-"}):e.jsx("a",{href:a,target:"_blank",rel:"noopener noreferrer",className:"text-admin-accent/70 hover:text-admin-accent transition-colors",children:e.jsx(Be,{className:"h-3.5 w-3.5 mx-auto"})});if(o.type==="number")return e.jsx("span",{className:"tabular-nums text-[13px]",children:U(a)});if(o.type==="tag")return!a||a==="-"?e.jsx("span",{className:"text-admin-text/40",children:"-"}):e.jsx("span",{className:"text-[12px] text-admin-purple whitespace-normal break-words",children:a});if(o.type==="boolean"){const u=a.trim().toUpperCase()==="Y"||a.trim()==="O";return e.jsx("span",{className:O("text-[11px] font-bold",u?"text-admin-success":"text-admin-text/40"),children:u?"Y":"N"})}if(o.type==="grade"){if(!a||a==="-")return e.jsx("span",{className:"text-admin-text/40",children:"-"});const u=he[a]||he.C;return e.jsx(Se,{variant:"outline",className:O("font-bold text-[11px] px-2 py-0",u),children:a})}return o.type==="text-wrap"?!a||a==="-"?e.jsx("span",{className:"text-admin-text/40",children:"-"}):e.jsx("span",{className:"whitespace-normal break-words text-[13px] leading-snug text-white/80",children:a}):o.type==="desc"?e.jsx("span",{className:"text-[13px] text-admin-text",children:a||"-"}):e.jsx("span",{className:"text-[13px]",children:a})},T=({column:t})=>p.column===t?p.direction==="asc"?e.jsx(Ke,{className:"h-3 w-3 shrink-0 text-admin-accent"}):e.jsx(Ye,{className:"h-3 w-3 shrink-0 text-admin-accent"}):e.jsx(We,{className:"h-3 w-3 shrink-0 opacity-0 group-hover/th:opacity-40 transition-opacity"}),W=(t,r,c)=>{N({rowIndex:t,column:r}),k(c&&c!=="-"?c:"0")},w=()=>e.jsx("div",{className:"md:hidden space-y-3",children:y.map(t=>{const r=String(t.Ïù∏Ïä§ÌÉÄID||""),c=String(t["Ïù∏Ïä§ÌÉÄ Ïù¥Î¶Ñ"]||""),a=String(t["Ïù∏ÌîåÎ£®Ïñ∏ÏÑú Îì±Í∏â"]||""),o=String(t["Ïπ¥ÌÖåÍ≥†Î¶¨(ÎåÄ)"]||""),M=String(t["Ïπ¥ÌÖåÍ≥†Î¶¨(Ï§ë)"]||""),P=String(t.ÌåîÎ°úÏõå||""),u=String(t["ÏµúÍ∑º 10 ÌèâÍ∑† Î¶¥Ïä§ Ï°∞ÌöåÏàò"]||""),D=String(t["ÏµúÎåÄ Î¶¥Ïä§ Ï°∞ÌöåÏàò"]||""),K=String(t["ÏµúÍ∑º10Í∞ú ÌèâÍ∑† ÎåìÍ∏ÄÏàò"]||""),se=String(t["Í≥µÍµ¨ ÌèâÍ∑†ÎåìÍ∏ÄÏàò"]||""),ae=String(t["Í≥µÍµ¨ ÏµúÎåÄÎåìÍ∏ÄÏàò"]||""),ne=String(t.ÎßàÏßÄÎßâÍ≤åÏãúÎ¨º||""),re=String(t.ÏóÖÎç∞Ïù¥Ìä∏ÏùºÏûê||""),G=String(t["Í≥µÏßÄÏ±ÑÎÑê Î©§Î≤ÑÏàò"]||""),oe=String(t.Ïä§ÌÜ†Î¶¨ÌôúÎèô||"").trim().toUpperCase(),me=String(t.ÏÜåÌÜµÏ±ÑÎÑêÏó¨Î∂Ä||"").trim(),xe=String(t.ÎåìÍ∏ÄÌôúÎèôÏó¨Î∂Ä||"").trim(),ie=String(t["ÎßàÏßÄÎßâ ÌîºÎìú Í≤åÏãúÏùº"]||""),Q=String(t.Î©îÎ™®||""),n=String(t.Ï¶êÍ≤®Ï∞æÍ∏∞||"").trim().toUpperCase()==="TRUE",m=t["ÌîÑÎ°úÌïÑ ÎßÅÌÅ¨"],v=he[a]||he.C,$=d?.rowIndex===t._rowIndex&&d?.column==="Í≥µÏßÄÏ±ÑÎÑê Î©§Î≤ÑÏàò",X=x===r;return e.jsxs("div",{"data-insta-id":r,className:O("rounded-lg p-3 transition-colors duration-500",X?"bg-admin-accent/10 border-2 border-admin-accent/40":"bg-admin-card border border-admin-border"),children:[e.jsxs("div",{className:"flex items-center justify-between gap-2 mb-1",children:[e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[m?e.jsxs("a",{href:m,target:"_blank",rel:"noopener noreferrer",className:"text-admin-accent hover:underline text-sm font-medium truncate",children:["@",r]}):e.jsxs("span",{className:"text-admin-text text-sm truncate",children:["@",r]}),a&&a!=="-"&&e.jsx(Se,{variant:"outline",className:O("font-bold text-[11px] px-2 py-0 shrink-0",v),children:a})]}),e.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[e.jsx("button",{onClick:()=>{const H=l.indexOf("Ï¶êÍ≤®Ï∞æÍ∏∞");H!==-1&&f(t._rowIndex,H,n?"FALSE":"TRUE")},children:e.jsx(pe,{className:O("h-4 w-4 transition-colors",n?"fill-amber-400 text-amber-400":"text-admin-text/30 hover:text-amber-400/60")})}),ie&&ie!=="-"&&e.jsxs("span",{className:"text-[11px] text-admin-text/60 flex items-center gap-1",children:[e.jsx(dt,{className:"h-3 w-3"}),ie]})]})]}),e.jsxs("div",{className:"flex items-baseline gap-2 mb-2",children:[e.jsx("span",{className:"text-white text-[13px] font-medium truncate",children:c}),o&&o!=="-"&&e.jsx("span",{className:"text-[11px] text-admin-purple shrink-0",children:o}),M&&M!=="-"&&M!==o&&e.jsx("span",{className:"text-[11px] text-admin-text/50 shrink-0",children:M})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-1 mb-1",children:[e.jsxs("div",{className:"bg-admin-bg/40 rounded px-2 py-1.5 text-center",children:[e.jsx("p",{className:"text-[10px] text-admin-text/60 mb-0.5",children:"ÌåîÎ°úÏõå"}),e.jsx("p",{className:"text-[13px] text-white tabular-nums font-medium",children:P&&P!=="-"?U(P):"-"})]}),e.jsxs("div",{className:"bg-admin-bg/40 rounded px-2 py-1.5 text-center",children:[e.jsx("p",{className:"text-[10px] text-admin-text/60 mb-0.5",children:"ÌèâÍ∑†Ï°∞Ìöå"}),e.jsx("p",{className:"text-[13px] text-white tabular-nums font-medium",children:u&&u!=="-"?U(u):"-"})]}),e.jsxs("div",{className:"bg-admin-bg/40 rounded px-2 py-1.5 text-center",children:[e.jsx("p",{className:"text-[10px] text-admin-text/60 mb-0.5",children:"ÏµúÎåÄÏ°∞Ìöå"}),e.jsx("p",{className:"text-[13px] text-white tabular-nums font-medium",children:D&&D!=="-"?U(D):"-"})]}),e.jsxs("div",{className:"bg-admin-bg/40 rounded px-2 py-1.5 text-center",children:[e.jsx("p",{className:"text-[10px] text-admin-text/60 mb-0.5",children:"ÌèâÍ∑†ÎåìÍ∏Ä"}),e.jsx("p",{className:"text-[13px] text-white tabular-nums font-medium",children:K&&K!=="-"?U(K):"-"})]})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-1 mb-2",children:[e.jsxs("div",{className:"bg-admin-bg/40 rounded px-2 py-1.5 text-center",children:[e.jsx("p",{className:"text-[10px] text-admin-text/60 mb-0.5",children:"Í≥µÍµ¨ÌèâÍ∑†üí¨"}),e.jsx("p",{className:"text-[13px] text-white tabular-nums font-medium",children:se&&se!=="-"?U(se):"-"})]}),e.jsxs("div",{className:"bg-admin-bg/40 rounded px-2 py-1.5 text-center",children:[e.jsx("p",{className:"text-[10px] text-admin-text/60 mb-0.5",children:"Í≥µÍµ¨ÏµúÎåÄüí¨"}),e.jsx("p",{className:"text-[13px] text-white tabular-nums font-medium",children:ae&&ae!=="-"?U(ae):"-"})]}),ne&&ne!=="-"&&e.jsxs("div",{className:"bg-admin-bg/40 rounded px-2 py-1.5 text-center",children:[e.jsx("p",{className:"text-[10px] text-admin-text/60 mb-0.5",children:"ÎßàÏßÄÎßâÍ≤åÏãúÎ¨º"}),e.jsx("p",{className:"text-[11px] text-white/80",children:ne})]}),re&&re!=="-"&&e.jsxs("div",{className:"bg-admin-bg/40 rounded px-2 py-1.5 text-center",children:[e.jsx("p",{className:"text-[10px] text-admin-text/60 mb-0.5",children:"ÏóÖÎç∞Ïù¥Ìä∏"}),e.jsx("p",{className:"text-[11px] text-white/80",children:re})]})]}),e.jsxs("div",{className:"flex items-center justify-between gap-2 mb-2",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(Ze,{className:"h-3 w-3 text-admin-text/60"}),e.jsx("span",{className:"text-[11px] text-admin-text/60",children:"Î©§Î≤ÑÏàò"}),$?e.jsx("input",{type:"text",value:j,onChange:H=>k(H.target.value),onBlur:()=>A(t._rowIndex,"Í≥µÏßÄÏ±ÑÎÑê Î©§Î≤ÑÏàò"),onKeyDown:H=>L(H,t._rowIndex,"Í≥µÏßÄÏ±ÑÎÑê Î©§Î≤ÑÏàò"),autoFocus:!0,className:"w-16 px-1.5 py-0.5 bg-admin-bg border border-admin-accent rounded text-white text-right text-[12px] focus:outline-none"}):e.jsx("button",{onClick:()=>W(t._rowIndex,"Í≥µÏßÄÏ±ÑÎÑê Î©§Î≤ÑÏàò",G),className:"text-[12px] text-admin-accent/80 hover:text-admin-accent tabular-nums border-b border-dashed border-admin-border hover:border-admin-accent/50 transition-colors",children:G&&G!=="-"?U(G):"0"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[oe==="ON"&&e.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded-full bg-admin-success/15 text-admin-success border border-admin-success/30",children:"Ïä§ÌÜ†Î¶¨"}),(me==="Y"||me==="O")&&e.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded-full bg-teal-500/15 text-teal-400 border border-teal-500/30",children:"ÏÜåÌÜµ"}),(xe==="Y"||xe==="O")&&e.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded-full bg-purple-500/15 text-purple-400 border border-purple-500/30",children:"ÎåìÍ∏Ä"})]})]}),Q&&Q!=="-"?e.jsx("button",{onClick:()=>h(t._rowIndex,Q,c),className:"w-full text-left group/memo",children:e.jsxs("div",{className:"bg-admin-bg/50 rounded px-2.5 py-1.5 flex items-start gap-2",children:[e.jsx(Me,{className:"h-3 w-3 text-admin-text mt-0.5 shrink-0"}),e.jsx("p",{className:"text-[12px] text-white/70 whitespace-pre-wrap break-words line-clamp-2 flex-1",children:Q}),e.jsx(Ce,{className:"h-3 w-3 text-admin-accent opacity-0 group-hover/memo:opacity-100 transition-opacity shrink-0 mt-0.5"})]})}):e.jsx("button",{onClick:()=>h(t._rowIndex,"",c),className:"w-full text-left",children:e.jsxs("div",{className:"bg-admin-bg/50 rounded px-2.5 py-1.5 flex items-center gap-2 text-admin-text/40 hover:text-admin-text/60 transition-colors",children:[e.jsx(Me,{className:"h-3 w-3 shrink-0"}),e.jsx("span",{className:"text-[12px]",children:"Î©îÎ™® Ï∂îÍ∞Ä..."})]})})]},t._rowIndex)})}),F=i.useRef(null),R=i.useRef(null),S=i.useRef(!1),fe=()=>{S.current||(S.current=!0,F.current&&R.current&&(R.current.scrollLeft=F.current.scrollLeft),requestAnimationFrame(()=>{S.current=!1}))},te=()=>{S.current||(S.current=!0,F.current&&R.current&&(F.current.scrollLeft=R.current.scrollLeft),requestAnimationFrame(()=>{S.current=!1}))},de=e.jsx("colgroup",{children:_.map(t=>e.jsx("col",{style:{width:C.pctWidths[t]}},t))});return e.jsxs(e.Fragment,{children:[w(),e.jsxs("div",{className:"hidden md:block",children:[e.jsx("div",{className:"sticky z-40 border border-admin-border border-b-0 rounded-t-lg bg-[#14142a]",style:{top:g},children:e.jsx("div",{ref:F,className:"overflow-x-auto",style:{scrollbarWidth:"none"},onScroll:fe,children:e.jsxs("table",{className:"w-full text-sm border-collapse",style:{minWidth:C.total,tableLayout:"fixed"},children:[de,e.jsx("thead",{children:e.jsx("tr",{className:"bg-[#14142a]",children:_.map((t,r)=>{const c=Z[t],a=r<le,o=r===le-1;return e.jsx("th",{style:a?{left:C.stickyOffsets[r]}:void 0,className:O("px-2.5 py-2.5 text-[11px] uppercase tracking-wider text-admin-text/70 font-semibold border-r border-admin-border/50 last:border-r-0 group/th",a&&"sticky z-40 bg-[#14142a]",o&&"shadow-[3px_0_8px_rgba(0,0,0,0.35)] border-r-admin-border",c?.align==="center"&&"text-center",c?.align==="right"&&"text-right"),children:e.jsxs("button",{onClick:()=>V(t),className:"flex items-center gap-1 w-full hover:text-white transition-colors",children:[e.jsx("span",{className:"whitespace-nowrap",children:c?.label||t}),e.jsx(T,{column:t})]})},t)})})})]})})}),e.jsx("div",{className:"border border-admin-border border-t-0 rounded-b-lg overflow-hidden",children:e.jsx("div",{ref:R,className:"overflow-x-auto",onScroll:te,children:e.jsxs("table",{className:"w-full text-sm border-collapse",style:{minWidth:C.total,tableLayout:"fixed"},children:[de,e.jsx("tbody",{children:y.map((t,r)=>{const c=String(t.Ïù∏Ïä§ÌÉÄID||""),a=x===c;return e.jsx("tr",{"data-insta-id":c,className:O("border-b border-admin-border/40 transition-colors duration-500","hover:bg-white/[0.02]",a?"bg-admin-accent/10 ring-1 ring-admin-accent/40":r%2===0?"bg-[#11111f]":"bg-[#151528]"),children:_.map((o,M)=>{const P=Z[o],u=M<le,D=M===le-1,K=r%2===0?"#11111f":"#151528";return e.jsx("td",{style:u?{left:C.stickyOffsets[M],backgroundColor:K}:void 0,className:O("px-2.5 py-2 text-white border-r border-admin-border/30 last:border-r-0 align-top",u&&"sticky z-30",D&&"shadow-[3px_0_8px_rgba(0,0,0,0.35)] border-r-admin-border/60",P?.align==="center"&&"text-center",P?.align==="right"&&"text-right",P?.highlight&&"font-semibold"),children:B(t,o,t._rowIndex)},o)})},t._rowIndex)})})]})})})]})]})}function Nt({className:s,...l}){return e.jsx("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:e.jsx("table",{"data-slot":"table",className:O("w-full caption-bottom text-sm",s),...l})})}function vt({className:s,...l}){return e.jsx("thead",{"data-slot":"table-header",className:O("[&_tr]:border-b",s),...l})}function yt({className:s,...l}){return e.jsx("tbody",{"data-slot":"table-body",className:O("[&_tr:last-child]:border-0",s),...l})}function Ee({className:s,...l}){return e.jsx("tr",{"data-slot":"table-row",className:O("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",s),...l})}function ue({className:s,...l}){return e.jsx("th",{"data-slot":"table-head",className:O("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",s),...l})}function be({className:s,...l}){return e.jsx("td",{"data-slot":"table-cell",className:O("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",s),...l})}function wt({isOpen:s,onClose:l,grades:b,onSave:f,isSaving:h=!1}){const[x,g]=i.useState(b);i.useEffect(()=>{g(b)},[b]);const p=(d,N,j)=>{const k=[...x];k[d]={...k[d],[N]:j},g(k)},E=d=>{f(x,d)};return e.jsx(_e,{open:s,onOpenChange:l,children:e.jsxs(Le,{className:"bg-admin-card border-admin-border text-white max-w-4xl max-h-[80vh] overflow-y-auto",children:[e.jsx(ze,{children:e.jsx(Te,{className:"text-white",children:"Îì±Í∏â Í∏∞Ï§Ä ÏÑ§Ï†ï"})}),e.jsxs("div",{className:"py-4",children:[e.jsxs(Nt,{children:[e.jsx(vt,{children:e.jsxs(Ee,{className:"border-admin-border hover:bg-transparent",children:[e.jsx(ue,{className:"text-admin-text",children:"Îì±Í∏â"}),e.jsx(ue,{className:"text-admin-text",children:"ÏµúÏÜå ÌåîÎ°úÏõå"}),e.jsx(ue,{className:"text-admin-text",children:"ÏµúÏÜå Ï°∞ÌöåÏàò"}),e.jsx(ue,{className:"text-admin-text",children:"ÏµúÏÜå ÏÜåÌÜµÎ•†"})]})}),e.jsx(yt,{children:x.map((d,N)=>e.jsxs(Ee,{className:"border-admin-border hover:bg-admin-bg/50",children:[e.jsx(be,{className:"font-medium text-white",children:d.grade}),e.jsx(be,{children:e.jsx(ce,{type:"text",value:d.minFollowers,onChange:j=>p(N,"minFollowers",j.target.value),className:"bg-admin-bg border-admin-border text-white"})}),e.jsx(be,{children:e.jsx(ce,{type:"text",value:d.minViews,onChange:j=>p(N,"minViews",j.target.value),className:"bg-admin-bg border-admin-border text-white"})}),e.jsx(be,{children:e.jsx(ce,{type:"text",value:d.minEngagement,onChange:j=>p(N,"minEngagement",j.target.value),className:"bg-admin-bg border-admin-border text-white"})})]},N))})]}),e.jsxs("div",{className:"mt-4 text-xs text-admin-text",children:[e.jsx("p",{children:"‚Ä¢ Îì±Í∏â Í∏∞Ï§ÄÏùÑ ÏÑ§Ï†ïÌïòÍ≥† Ï†ÄÏû•Ìï† Ïàò ÏûàÏäµÎãàÎã§."}),e.jsx("p",{children:'‚Ä¢ "Ï†ÄÏû• + ÏàòÏãù Ï†ÅÏö©"ÏùÑ ÌÅ¥Î¶≠ÌïòÎ©¥ Îì±Í∏â Ïª¨ÎüºÏóê ÏûêÎèô Í≥ÑÏÇ∞ ÏàòÏãùÏù¥ Ï†ÅÏö©Îê©ÎãàÎã§.'})]})]}),e.jsxs(Fe,{className:"gap-2",children:[e.jsx(I,{variant:"outline",onClick:l,disabled:h,className:"bg-transparent border-admin-border text-white hover:bg-admin-bg",children:"Ï∑®ÏÜå"}),e.jsx(I,{onClick:()=>E(!1),disabled:h,className:"bg-admin-purple text-white hover:bg-admin-purple/90",children:"Ï†ÄÏû•Îßå"}),e.jsx(I,{onClick:()=>E(!0),disabled:h,className:"bg-admin-accent text-admin-bg hover:bg-admin-accent/90",children:h?"Ï≤òÎ¶¨ Ï§ë...":"Ï†ÄÏû• + ÏàòÏãù Ï†ÅÏö©"})]})]})})}function kt({isOpen:s,onClose:l,columns:b,onSave:f,isSaving:h=!1}){const[x,g]=i.useState(b);i.useEffect(()=>{g(b)},[b]);const p=d=>{g(N=>N.map(j=>j.name===d?{...j,visible:!j.visible}:j))},E=()=>{f(x)};return s?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-black/50 z-40",onClick:l}),e.jsxs("div",{className:"fixed right-0 top-0 h-full w-80 bg-admin-card border-l border-admin-border z-50 shadow-xl overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-admin-card border-b border-admin-border p-4 flex items-center justify-between",children:[e.jsx("h3",{className:"text-white font-semibold",children:"Ïª¨Îüº ÌëúÏãú ÏÑ§Ï†ï"}),e.jsx("button",{onClick:l,className:"text-admin-text hover:text-white transition-colors",children:e.jsx(Ne,{className:"h-5 w-5"})})]}),e.jsx("div",{className:"p-4 space-y-2",children:x.map(d=>e.jsxs("label",{className:"flex items-center gap-3 p-2 rounded hover:bg-admin-bg cursor-pointer transition-colors",children:[e.jsx("input",{type:"checkbox",checked:d.visible,onChange:()=>p(d.name),className:"w-4 h-4 rounded border-admin-border bg-admin-bg text-admin-accent focus:ring-admin-accent focus:ring-offset-0"}),e.jsx("span",{className:O("text-sm",d.visible?"text-white":"text-admin-text"),children:d.name})]},d.name))}),e.jsx("div",{className:"sticky bottom-0 bg-admin-card border-t border-admin-border p-4",children:e.jsx(I,{onClick:E,disabled:h,className:"w-full bg-admin-accent text-admin-bg hover:bg-admin-accent/90",children:h?"Ï†ÄÏû• Ï§ë...":"Ï†ÄÏû•"})})]})]}):null}function Ct({payload:s,isOpen:l,onClose:b}){const f=De(),{category:h,isClassifying:x,error:g,classify:p}=st(),{isSaving:E,saved:d,error:N,save:j}=at(),{copied:k,copy:_}=nt();if(i.useEffect(()=>{if(!l)return;const w=F=>{F.key==="Escape"&&b()};return document.addEventListener("keydown",w),document.body.style.overflow="hidden",()=>{document.removeEventListener("keydown",w),document.body.style.overflow=""}},[l,b]),i.useEffect(()=>{if(d&&s){const w=new Date().toISOString().slice(0,10),F=h;f.setQueryData(["influencers"],R=>R&&{...R,data:R.data.map(S=>String(S.Ïù∏Ïä§ÌÉÄID)!==s.username?S:{...S,"Ïù∏Ïä§ÌÉÄ Ïù¥Î¶Ñ":s.profile.displayName||S["Ïù∏Ïä§ÌÉÄ Ïù¥Î¶Ñ"],ÌåîÎ°úÏõå:String(s.profile.followers),"ÏµúÍ∑º 10 ÌèâÍ∑† Î¶¥Ïä§ Ï°∞ÌöåÏàò":String(s.stats.avgViews),"ÏµúÎåÄ Î¶¥Ïä§ Ï°∞ÌöåÏàò":String(s.stats.maxViews),"Í≥µÍµ¨ ÌèâÍ∑†Ï¢ãÏïÑÏöîÏàò":String(s.stats.avgLikes),"Í≥µÍµ¨ ÏµúÎåÄÏ¢ãÏïÑÏöîÏàò":String(s.stats.maxLikes),"Í≥µÍµ¨ ÌèâÍ∑†ÎåìÍ∏ÄÏàò":String(s.stats.avgComments),"Í≥µÍµ¨ ÏµúÎåÄÎåìÍ∏ÄÏàò":String(s.stats.maxComments),"ÎßàÏßÄÎßâ ÌîºÎìú Í≤åÏãúÏùº":s.stats.lastPostDate||S["ÎßàÏßÄÎßâ ÌîºÎìú Í≤åÏãúÏùº"],ÏóÖÎç∞Ïù¥Ìä∏ÏùºÏûê:w,ÏÑ§Î™ÖÎûÄ:s.profile.bio||S.ÏÑ§Î™ÖÎûÄ,Ïô∏Î∂ÄÎßÅÌÅ¨:s.profile.externalLink||S.Ïô∏Î∂ÄÎßÅÌÅ¨,"ÌîÑÎ°úÌïÑ ÎßÅÌÅ¨":s.profile.profileLink||S["ÌîÑÎ°úÌïÑ ÎßÅÌÅ¨"],...F?{"Ïπ¥ÌÖåÍ≥†Î¶¨(ÎåÄ)":F.ÎåÄ,"Ïπ¥ÌÖåÍ≥†Î¶¨(Ï§ë)":F.Ï§ë.join(", ")}:{}})}),Pe.success("ÏãúÌä∏Ïóê Ï†ÄÏû•ÎêòÏóàÏäµÎãàÎã§")}},[d,s,h,f]),!l||!s)return null;const{profile:C,stats:y,feedPosts:V,reels:z}=s,A=V.filter(w=>!w.isPinned&&w.isDeal),L=z.filter(w=>!w.isPinned),B=()=>{p(C.bio,s.username)},T=()=>{_(rt(s,h))},W=()=>{j(s,h)};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-[9998] bg-black/50",onClick:b}),e.jsxs("div",{className:"fixed inset-0 sm:inset-y-0 sm:left-auto sm:right-0 z-[9999] w-full sm:w-[400px] bg-admin-bg border-l border-admin-border flex flex-col",children:[e.jsxs("div",{className:"sticky top-0 z-10 flex items-center justify-between px-4 py-3 border-b border-admin-border bg-admin-bg",children:[e.jsx("h2",{className:"text-white font-semibold text-sm",children:"IG Î∂ÑÏÑù Í≤∞Í≥º"}),e.jsx(I,{variant:"ghost",size:"icon-sm",onClick:b,className:"text-admin-text hover:text-white hover:bg-admin-card",children:e.jsx(Ne,{className:"size-4"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[e.jsxs("div",{className:"bg-admin-card border border-admin-border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-admin-border flex items-center justify-center text-sm text-white",children:"@"}),e.jsxs("div",{className:"min-w-0",children:[e.jsxs("h3",{className:"text-white font-semibold text-sm truncate",children:["@",C.username]}),C.displayName&&e.jsx("p",{className:"text-admin-text text-xs truncate",children:C.displayName})]}),e.jsxs("span",{className:"ml-auto text-admin-accent text-xs font-semibold whitespace-nowrap",children:[Y(C.followers)," ÌåîÎ°úÏõå"]})]}),C.bio&&e.jsx("p",{className:"text-admin-text text-xs leading-relaxed line-clamp-3 whitespace-pre-wrap",children:C.bio})]}),e.jsxs("div",{className:"bg-admin-card border border-admin-border rounded-lg p-4",children:[e.jsxs("h3",{className:"text-white font-semibold text-sm mb-3",children:["Î¶¥Ïä§ ÌÜµÍ≥Ñ (",L.length,"Í∞ú)"]}),L.length>0?e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[e.jsx(J,{label:"ÌèâÍ∑† Ï°∞ÌöåÏàò",value:Y(y.avgViews)}),e.jsx(J,{label:"ÏµúÎåÄ Ï°∞ÌöåÏàò",value:Y(y.maxViews)})]}):e.jsx("p",{className:"text-admin-text text-sm",children:"Î¶¥Ïä§ ÏóÜÏùå"})]}),e.jsxs("div",{className:"bg-admin-card border border-admin-border rounded-lg p-4",children:[e.jsxs("h3",{className:"text-white font-semibold text-sm mb-3",children:["Í≥µÍµ¨ ÌîºÎìú ÌÜµÍ≥Ñ (",A.length,"Í∞ú)"]}),A.length>0?e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[e.jsx(J,{label:"ÌèâÍ∑† Ï¢ãÏïÑÏöî",value:Y(y.avgLikes)}),e.jsx(J,{label:"ÏµúÎåÄ Ï¢ãÏïÑÏöî",value:Y(y.maxLikes)}),e.jsx(J,{label:"ÌèâÍ∑† ÎåìÍ∏Ä",value:Y(y.avgComments)}),e.jsx(J,{label:"ÏµúÎåÄ ÎåìÍ∏Ä",value:Y(y.maxComments)})]}):e.jsx("p",{className:"text-admin-text text-sm",children:"Í≥µÍµ¨ Í≤åÏãúÎ¨º ÏóÜÏùå"}),y.lastPostDate&&e.jsxs("p",{className:"text-admin-text text-xs mt-2",children:["ÏµúÍ∑º Í≤åÏãúÎ¨º: ",y.lastPostDate]})]}),e.jsxs("div",{className:"bg-admin-card border border-admin-border rounded-lg p-4",children:[e.jsx("h3",{className:"text-white font-semibold text-sm mb-3",children:"AI Î∂ÑÎ•ò"}),h?e.jsxs("p",{className:"text-sm",children:[e.jsx("span",{className:"text-admin-accent font-semibold",children:h.ÎåÄ}),h.Ï§ë.length>0&&e.jsx("span",{className:"text-admin-text ml-2",children:h.Ï§ë.join(", ")})]}):e.jsx("p",{className:"text-admin-text text-sm",children:"Î∂ÑÎ•ò Î≤ÑÌäºÏùÑ ÎàåÎü¨Ï£ºÏÑ∏Ïöî"})]}),g&&e.jsx("p",{className:"text-red-400 text-xs",children:g}),N&&e.jsx("p",{className:"text-red-400 text-xs",children:N})]}),e.jsxs("div",{className:"sticky bottom-0 flex gap-2 px-4 py-3 border-t border-admin-border bg-admin-bg",children:[e.jsxs(I,{variant:"outline",size:"sm",onClick:B,disabled:x,className:"flex-1 bg-transparent border-admin-border text-white hover:bg-admin-card",children:[e.jsx(bt,{className:"size-3.5"}),x?"Î∂ÑÎ•ò Ï§ë...":"Î∂ÑÎ•ò"]}),e.jsxs(I,{variant:"outline",size:"sm",onClick:T,className:"flex-1 bg-transparent border-admin-border text-white hover:bg-admin-card",children:[e.jsx(et,{className:"size-3.5"}),k?"Î≥µÏÇ¨Îê®!":"Î≥µÏÇ¨"]}),e.jsxs(I,{size:"sm",onClick:W,disabled:E,className:"flex-1 bg-admin-accent text-admin-bg hover:bg-admin-accent/90",children:[e.jsx(tt,{className:"size-3.5"}),E?"Ï†ÄÏû• Ï§ë...":d?"Ï†ÄÏû•Îê®":"Ï†ÄÏû•"]})]})]})]})}function J({label:s,value:l}){return e.jsxs("div",{children:[e.jsx("p",{className:"text-admin-text text-xs",children:s}),e.jsx("p",{className:"text-white font-semibold",children:l})]})}function Lt(){const{data:s,isLoading:l,error:b}=Re(),f=Ae(),h=He(),{data:x}=Ue(),g=Ve(),{data:p}=Ge(),E=$e(),{data:d}=qe(),N=i.useRef(null),[j,k]=i.useState(0);i.useEffect(()=>{const n=N.current;if(!n)return;const m=new ResizeObserver(()=>{k(n.offsetHeight)});return m.observe(n),()=>m.disconnect()},[]);const[_,C]=i.useState(""),[y,V]=i.useState([]),[z,A]=i.useState([]),[L,B]=i.useState([]),[T,W]=i.useState([]),[w,F]=i.useState(!1),[R,S]=i.useState(!1),[fe,te]=i.useState(!1),[de,t]=i.useState(!1),[r,c]=i.useState({isOpen:!1,rowIndex:-1,value:"",name:""}),[a,o]=i.useState(null),[M,P]=i.useState(!1);i.useEffect(()=>{const n=m=>{m.data?.type==="ig-analyzer-result"&&m.data.payload&&(o(m.data.payload),P(!0))};return window.addEventListener("message",n),()=>window.removeEventListener("message",n)},[]),i.useEffect(()=>{const n=window.location.hash;if(n.startsWith("#analyzer="))try{const m=n.slice(10),v=JSON.parse(decodeURIComponent(m));v.username&&v.profile&&(o(v),P(!0),history.replaceState(null,"",window.location.pathname))}catch{}},[]);const u=s?.data||[],D=s?.headers||[],K=s?.fromCache??!1,se=i.useMemo(()=>x?.columns?x.columns.filter(n=>n.visible).map(n=>n.name):ge.filter(n=>!je.includes(n)),[x]),ae=i.useMemo(()=>{const n=new Set;return u.forEach(m=>{const v=m["Ïπ¥ÌÖåÍ≥†Î¶¨(ÎåÄ)"];v&&v!=="-"&&n.add(v)}),Array.from(n).sort()},[u]),ne=i.useMemo(()=>["ÌôúÎèôÏÑ±24H O","ÌôúÎèôÏÑ±24H X"],[]),re=i.useMemo(()=>["2Ï£º Ï¥àÍ≥º","ÏóÜÏùå"],[]),G=i.useMemo(()=>u.filter(n=>{if(w&&String(n.Ï¶êÍ≤®Ï∞æÍ∏∞||"").trim().toUpperCase()!=="TRUE")return!1;if(_){const m=_.toLowerCase(),v=String(n.Ïù∏Ïä§ÌÉÄID||"").toLowerCase(),$=String(n["Ïù∏Ïä§ÌÉÄ Ïù¥Î¶Ñ"]||"").toLowerCase();if(!v.includes(m)&&!$.includes(m))return!1}if(y.length>0){const m=n["Ïπ¥ÌÖåÍ≥†Î¶¨(ÎåÄ)"];if(!y.includes(m))return!1}if(z.length>0){const m=n["Ïù∏ÌîåÎ£®Ïñ∏ÏÑú Îì±Í∏â"];if(!z.includes(m))return!1}if(L.length>0){const m=n["ÎßàÏßÄÎßâ ÌîºÎìú Í≤åÏãúÏùº"],v=m&&m.includes("ÏãúÍ∞Ñ")&&!m.includes("Ïùº"),$=L.includes("ÌôúÎèôÏÑ±24H O"),X=L.includes("ÌôúÎèôÏÑ±24H X");if(!($&&X)){if($&&!v)return!1;if(X&&v)return!1}}if(T.length>0){const m=String(n.ÏóÖÎç∞Ïù¥Ìä∏ÏùºÏûê||"").trim(),v=!m||m==="-",$=Date.now(),X=336*60*60*1e3,H=!v&&$-new Date(m).getTime()>X,ye=T.includes("2Ï£º Ï¥àÍ≥º"),we=T.includes("ÏóÜÏùå");if(ye&&we){if(!H&&!v)return!1}else if(ye){if(!H)return!1}else if(we&&!v)return!1}return!0}),[u,_,y,z,L,T,w]),oe=()=>{f.mutate()},me=(n,m,v)=>{h.mutate({rowIndex:n,columnIndex:m,value:v})},xe=(n,m,v)=>{c({isOpen:!0,rowIndex:n,value:m,name:v})},ie=n=>{const m=D.indexOf("Î©îÎ™®");m!==-1&&h.mutate({rowIndex:r.rowIndex,columnIndex:m,value:n}),c({isOpen:!1,rowIndex:-1,value:"",name:""})},Q=n=>{g.mutate(n),t(!1)},ve=(n,m)=>{E.mutate({grades:n,applyFormula:m}),te(!1)};return b?e.jsx("div",{className:"max-w-[1800px] mx-auto mt-8",children:e.jsxs("div",{className:"bg-admin-error/20 border border-admin-error/40 rounded-lg p-6 text-center",children:[e.jsx("p",{className:"text-admin-error font-semibold",children:"Îç∞Ïù¥ÌÑ∞Î•º Î∂àÎü¨Ïò§ÎäîÎç∞ Ïã§Ìå®ÌñàÏäµÎãàÎã§"}),e.jsx("p",{className:"text-admin-text text-sm mt-2",children:String(b)}),e.jsx(I,{onClick:oe,className:"mt-4",children:"Îã§Ïãú ÏãúÎèÑ"})]})}):e.jsxs("div",{className:"max-w-[1800px] mx-auto mt-4 md:mt-8",children:[e.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl md:text-2xl font-bold text-white mb-1 md:mb-2",children:"Ïù∏ÌîåÎ£®Ïñ∏ÏÑú Í¥ÄÎ¶¨"}),d&&e.jsxs("div",{className:"flex items-center gap-4 text-xs text-admin-text",children:[e.jsxs("span",{children:["Cache: ",K?"KV":"API"]}),e.jsxs("span",{children:["Quota: ",d.quotaUsed," / 100"]}),e.jsxs("span",{children:["Hits: ",d.cacheHits," / Misses: ",d.cacheMisses]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(I,{onClick:()=>te(!0),variant:"outline",className:"bg-transparent border-admin-border text-white hover:bg-admin-bg",children:[e.jsx(ht,{className:"h-4 w-4 md:mr-2"}),e.jsx("span",{className:"hidden md:inline",children:"Îì±Í∏â ÏÑ§Ï†ï"})]}),e.jsxs(I,{onClick:()=>t(!0),variant:"outline",className:"bg-transparent border-admin-border text-white hover:bg-admin-bg",children:[e.jsx(mt,{className:"h-4 w-4 md:mr-2"}),e.jsx("span",{className:"hidden md:inline",children:"Ïª¨Îüº ÏÑ§Ï†ï"})]})]})]}),e.jsx("div",{ref:N,className:"sticky top-0 z-50 bg-admin-bg py-2 md:pt-2 md:pb-4 -mx-3 px-3 md:-mx-6 md:px-6 shadow-[0_4px_12px_rgba(0,0,0,0.3)]",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx(ft,{searchQuery:_,onSearchChange:C,categoryOptions:ae,selectedCategories:y,onCategoriesChange:V,selectedGrades:z,onGradesChange:A,activityOptions:ne,selectedActivity:L,onActivityChange:B,updateStatusOptions:re,selectedUpdateStatus:T,onUpdateStatusChange:W,resultCount:G.length,totalCount:u.length,showFavoritesOnly:w,onFavoritesToggle:()=>F(n=>!n)})}),e.jsx(I,{onClick:()=>S(!0),variant:"outline",size:"sm",className:"hidden md:flex bg-transparent border-admin-border text-white hover:bg-admin-bg shrink-0",children:e.jsx(lt,{className:"h-4 w-4"})}),e.jsx(I,{onClick:oe,disabled:f.isPending,variant:"outline",size:"sm",className:"bg-transparent border-admin-border text-white hover:bg-admin-bg shrink-0",children:e.jsx(Qe,{className:`h-4 w-4 ${f.isPending?"animate-spin":""}`})})]})}),l?e.jsx("div",{className:"flex items-center justify-center h-64 bg-admin-card rounded-lg border border-admin-border",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-admin-accent mx-auto mb-4"}),e.jsx("p",{className:"text-admin-text",children:"Îç∞Ïù¥ÌÑ∞Î•º Î∂àÎü¨Ïò§Îäî Ï§ë..."})]})}):e.jsx(jt,{data:G,headers:D,visibleColumns:se,onCellEdit:me,onMemoEdit:xe,highlightId:M?a?.username??null:null,stickyTopOffset:j}),e.jsx(wt,{isOpen:fe,onClose:()=>te(!1),grades:p?.grades||[],onSave:ve,isSaving:E.isPending}),e.jsx(kt,{isOpen:de,onClose:()=>t(!1),columns:x?.columns||ge.filter(n=>!je.includes(n)).map(n=>({name:n,visible:!0})),onSave:Q,isSaving:g.isPending}),e.jsx(Xe,{isOpen:r.isOpen,onClose:()=>c({isOpen:!1,rowIndex:-1,value:"",name:""}),initialValue:r.value,onSave:ie,influencerName:r.name}),e.jsx(Ct,{payload:a,isOpen:M,onClose:()=>P(!1)}),R&&e.jsx(St,{ids:G.map(n=>String(n.Ïù∏Ïä§ÌÉÄID||"")).filter(Boolean),onClose:()=>S(!1)}),e.jsx(Je,{position:"top-right",theme:"dark"})]})}function St({ids:s,onClose:l}){const[b,f]=i.useState(!1),h=s.join(`
`);i.useEffect(()=>{const g=p=>{p.key==="Escape"&&l()};return document.addEventListener("keydown",g),()=>document.removeEventListener("keydown",g)},[l]);const x=()=>{navigator.clipboard.writeText(h).then(()=>{f(!0),setTimeout(()=>f(!1),2e3)})};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-[9998] bg-black/50",onClick:l}),e.jsxs("div",{className:"fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-[9999] w-[400px] max-h-[70vh] bg-admin-bg border border-admin-border rounded-lg flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-admin-border",children:[e.jsxs("h2",{className:"text-white font-semibold text-sm",children:["ID Ï∂îÏ∂ú (",s.length,"Í∞ú)"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(I,{size:"sm",variant:"outline",onClick:x,className:"bg-transparent border-admin-border text-white hover:bg-admin-card text-xs",children:b?"Î≥µÏÇ¨Îê®!":"Î≥µÏÇ¨"}),e.jsx(I,{size:"icon-sm",variant:"ghost",onClick:l,className:"text-admin-text hover:text-white hover:bg-admin-card",children:e.jsx("span",{className:"text-lg leading-none",children:"√ó"})})]})]}),e.jsx("textarea",{readOnly:!0,value:h,className:"flex-1 min-h-[200px] max-h-[50vh] p-4 bg-transparent text-white text-[13px] font-mono leading-relaxed resize-none focus:outline-none"})]})]})}export{Lt as default};
