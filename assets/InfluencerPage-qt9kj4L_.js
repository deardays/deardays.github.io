import{r as d,j as e}from"./index-DLp2cFJ3.js";import{c as le,S as ue,I as te,a as we,X as Ne,b as y,B as U,D as Ce,d as ke,e as Se,f as Me,g as Oe,u as _e,h as Ie,i as Ee,j as De,k as Le,l as Fe,m as Re,n as Te}from"./useInfluencerData-CS9uv0qD.js";import{P as pe,E as Ue,B as be,A as Ae,a as He,b as Pe,M as fe,R as Ge,c as Ve,T as ze}from"./MemoEditModal-hevt7Uha.js";import{M as B,G as ge,D as oe,H as xe,C as q,f as T,a as ae,U as $e,S as ee}from"./constants-BV90I0fS.js";import"./useQuery-Cgcp_KUV.js";const Be=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],qe=le("clock",Be);const Ye=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Ke=le("settings",Ye);const We=[["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M12 21v-9",key:"17s77i"}],["path",{d:"M12 8V3",key:"13r4qs"}],["path",{d:"M17 16h4",key:"h1uq16"}],["path",{d:"M19 12V3",key:"o1uvq1"}],["path",{d:"M19 21v-5",key:"qua636"}],["path",{d:"M3 14h4",key:"bcjad9"}],["path",{d:"M5 10V3",key:"cb8scm"}],["path",{d:"M5 21v-7",key:"1w1uti"}]],Xe=le("sliders-vertical",We);const Qe=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],ie=le("star",Qe);function Je({searchQuery:o,onSearchChange:l,categoryOptions:f,selectedCategories:g,onCategoriesChange:b,selectedGrades:h,onGradesChange:m,activityOptions:C,selectedActivity:j,onActivityChange:c,resultCount:N,totalCount:p,showFavoritesOnly:v,onFavoritesToggle:S}){const[I,E]=d.useState(o),[A,O]=d.useState(!1);d.useEffect(()=>{const F=setTimeout(()=>{l(I)},250);return()=>clearTimeout(F)},[I,l]);const D=g.length+h.length+j.length,L=()=>{b([]),m([]),c([])};return e.jsxs("div",{children:[e.jsxs("div",{className:"md:hidden",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(ue,{className:"absolute left-2.5 top-1/2 -translate-y-1/2 h-3.5 w-3.5 text-admin-text"}),e.jsx(te,{type:"text",placeholder:"ID ë˜ëŠ” ì´ë¦„ ê²€ìƒ‰...",value:I,onChange:F=>E(F.target.value),className:"pl-8 h-8 text-[13px] bg-admin-card border-admin-border text-white placeholder:text-admin-text"})]}),e.jsx("button",{onClick:S,className:`flex items-center justify-center h-8 w-8 rounded-md border shrink-0 transition-colors ${v?"bg-amber-500/20 border-amber-500/40 text-amber-400":"bg-admin-card border-admin-border text-admin-text/40"}`,children:e.jsx(ie,{className:`h-3.5 w-3.5 ${v?"fill-amber-400":""}`})}),e.jsxs("button",{onClick:()=>O(!A),className:`relative flex items-center justify-center h-8 w-8 rounded-md border shrink-0 transition-colors ${A||D>0?"bg-admin-accent/15 border-admin-accent/40 text-admin-accent":"bg-admin-card border-admin-border text-admin-text"}`,children:[e.jsx(we,{className:"h-3.5 w-3.5"}),D>0&&e.jsx("span",{className:"absolute -top-1.5 -right-1.5 min-w-[16px] h-4 flex items-center justify-center rounded-full bg-admin-accent text-[10px] font-bold text-admin-bg px-1",children:D})]}),e.jsxs("span",{className:"text-[11px] text-admin-text tabular-nums shrink-0",children:[e.jsx("span",{className:"text-white font-semibold",children:N}),"/",p]})]}),A&&e.jsxs("div",{className:"mt-2 flex flex-col gap-2",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsx(B,{options:f,selected:g,onChange:b,placeholder:"ì¹´í…Œê³ ë¦¬"}),e.jsx(B,{options:ge,selected:h,onChange:m,placeholder:"ë“±ê¸‰"}),e.jsx(B,{options:C,selected:j,onChange:c,placeholder:"í™œë™"})]}),D>0&&e.jsxs("button",{onClick:L,className:"flex items-center gap-1 text-[11px] text-admin-text hover:text-admin-accent transition-colors self-end",children:[e.jsx(Ne,{className:"h-3 w-3"}),"í•„í„° ì´ˆê¸°í™”"]})]})]}),e.jsxs("div",{className:"hidden md:block space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ue,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-admin-text"}),e.jsx(te,{type:"text",placeholder:"ì¸ìŠ¤íƒ€ID ë˜ëŠ” ì´ë¦„ ê²€ìƒ‰...",value:I,onChange:F=>E(F.target.value),className:"pl-10 bg-admin-card border-admin-border text-white placeholder:text-admin-text"})]}),e.jsx(B,{options:f,selected:g,onChange:b,placeholder:"ì¹´í…Œê³ ë¦¬ ì„ íƒ"}),e.jsx(B,{options:ge,selected:h,onChange:m,placeholder:"ë“±ê¸‰ ì„ íƒ"}),e.jsx(B,{options:C,selected:j,onChange:c,placeholder:"í™œë™ í•„í„°"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-admin-text",children:[e.jsx("span",{className:"text-white font-semibold",children:N})," /"," ",p," ê±´"]}),e.jsxs("button",{onClick:S,className:`flex items-center gap-1.5 px-3 py-1 rounded-full text-[12px] font-medium border transition-colors ${v?"bg-amber-500/20 border-amber-500/40 text-amber-400":"bg-admin-card border-admin-border text-admin-text hover:text-white"}`,children:[e.jsx(ie,{className:`h-3.5 w-3.5 ${v?"fill-amber-400":""}`}),"ì¦ê²¨ì°¾ê¸°ë§Œ"]})]})]})]})}function Ze(o){const l=o.reduce((h,m)=>h+(q[m]?.width||120),0),f={},g=[];let b=0;for(let h=0;h<o.length;h++){const m=q[o[h]]?.width||120,C=m/l*100;f[o[h]]=`${C}%`,h<ee&&(g.push(`${b/l*100}%`),b+=m)}return{total:l,pctWidths:f,stickyOffsets:g}}function et({data:o,headers:l,visibleColumns:f,onCellEdit:g,onMemoEdit:b,stickyTopOffset:h=0}){const[m,C]=d.useState({column:null,direction:null}),[j,c]=d.useState(null),[N,p]=d.useState(""),v=d.useMemo(()=>oe.filter(t=>f.includes(t)&&!xe.includes(t)),[f]),S=d.useMemo(()=>Ze(v),[v]),I=d.useMemo(()=>!m.column||!m.direction?o:[...o].sort((t,a)=>{const r=String(t[m.column]||""),s=String(a[m.column]||""),i=parseFloat(r.replace(/,/g,"")),w=parseFloat(s.replace(/,/g,""));return!isNaN(i)&&!isNaN(w)?m.direction==="asc"?i-w:w-i:m.direction==="asc"?r.localeCompare(s,"ko"):s.localeCompare(r,"ko")}),[o,m]),E=t=>{C(a=>a.column!==t?{column:t,direction:"asc"}:a.direction==="asc"?{column:t,direction:"desc"}:{column:null,direction:null})},A=(t,a,r,s)=>{const i=q[a];i&&(i.type==="editable-memo"?b(t,r,s):(i.type==="editable-number"||i.type==="editable-boolean")&&(c({rowIndex:t,column:a}),p(r)))},O=(t,a)=>{if(j?.rowIndex===t&&j?.column===a){const r=l.indexOf(a);r!==-1&&g(t,r,N),c(null),p("")}},D=(t,a,r)=>{t.key==="Enter"?O(a,r):t.key==="Escape"&&(c(null),p(""))},L=(t,a,r)=>{const s=String(t[a]||""),i=q[a];if(!i)return s;const w=l.indexOf(a),_=j?.rowIndex===r&&j?.column===a;if(i.type==="editable-memo")return e.jsxs("button",{onClick:()=>A(r,a,s,t["ì¸ìŠ¤íƒ€ ì´ë¦„"]),className:"w-full text-left group/memo relative",children:[e.jsx("span",{className:"whitespace-pre-wrap break-words text-[13px] leading-relaxed text-white/90",children:s||"-"}),e.jsx("span",{className:"absolute top-0 right-0 opacity-0 group-hover/memo:opacity-100 transition-opacity",children:e.jsx(pe,{className:"h-3 w-3 text-admin-accent"})})]});if(i.type==="editable-number"){const u=s&&s!=="-"?s:"0";return _?e.jsx("input",{type:"text",value:N,onChange:M=>p(M.target.value),onBlur:()=>O(r,a),onKeyDown:M=>D(M,r,a),autoFocus:!0,className:"w-full px-1.5 py-0.5 bg-admin-bg border border-admin-accent rounded text-white text-right text-[13px] focus:outline-none"}):e.jsx("button",{onClick:()=>A(r,a,s,""),className:"w-full text-right tabular-nums text-[13px] text-admin-accent/80 hover:text-admin-accent border-b border-dashed border-admin-border hover:border-admin-accent/50 transition-colors",children:T(u)})}if(i.type==="editable-boolean"){const u=s.trim().toUpperCase()==="ON";return e.jsx(U,{size:"sm",variant:"outline",onClick:()=>{g(r,w,u?"OFF":"ON")},className:y("h-6 px-2 text-[11px] font-semibold rounded-full",u?"bg-admin-success/15 text-admin-success border-admin-success/30 hover:bg-admin-success/25":"bg-gray-500/15 text-gray-500 border-gray-500/30 hover:bg-gray-500/25"),children:u?"ON":"OFF"})}if(i.type==="favorite"){const u=s.trim().toUpperCase()==="TRUE";return e.jsx("button",{onClick:()=>{const M=l.indexOf(a);M!==-1&&g(r,M,u?"FALSE":"TRUE")},className:"flex items-center justify-center w-full",children:e.jsx(ie,{className:y("h-4 w-4 transition-colors",u?"fill-amber-400 text-amber-400":"text-admin-text/30 hover:text-amber-400/60")})})}if(i.type==="id"){const u=t["í”„ë¡œí•„ ë§í¬"];return u&&a==="ì¸ìŠ¤íƒ€ID"?e.jsx("a",{href:u,target:"_blank",rel:"noopener noreferrer",className:"text-admin-accent hover:underline text-[13px] font-medium",children:s}):e.jsx("span",{className:"text-[13px] text-admin-text",children:s})}if(i.type==="name")return e.jsx("span",{className:"text-[13px] text-white whitespace-normal break-words leading-snug",children:s});if(i.type==="link")return!s||s==="-"?e.jsx("span",{className:"text-admin-text/40",children:"-"}):e.jsx("a",{href:s,target:"_blank",rel:"noopener noreferrer",className:"text-admin-accent/70 hover:text-admin-accent transition-colors",children:e.jsx(Ue,{className:"h-3.5 w-3.5 mx-auto"})});if(i.type==="number")return e.jsx("span",{className:"tabular-nums text-[13px]",children:T(s)});if(i.type==="tag")return!s||s==="-"?e.jsx("span",{className:"text-admin-text/40",children:"-"}):e.jsx("span",{className:"text-[12px] text-admin-purple whitespace-normal break-words",children:s});if(i.type==="boolean"){const u=s.trim().toUpperCase()==="Y"||s.trim()==="O";return e.jsx("span",{className:y("text-[11px] font-bold",u?"text-admin-success":"text-admin-text/40"),children:u?"Y":"N"})}if(i.type==="grade"){if(!s||s==="-")return e.jsx("span",{className:"text-admin-text/40",children:"-"});const u=ae[s]||ae.C;return e.jsx(be,{variant:"outline",className:y("font-bold text-[11px] px-2 py-0",u),children:s})}return i.type==="text-wrap"?!s||s==="-"?e.jsx("span",{className:"text-admin-text/40",children:"-"}):e.jsx("span",{className:"whitespace-normal break-words text-[13px] leading-snug text-white/80",children:s}):i.type==="desc"?e.jsx("span",{className:"text-[13px] text-admin-text",children:s||"-"}):e.jsx("span",{className:"text-[13px]",children:s})},F=({column:t})=>m.column===t?m.direction==="asc"?e.jsx(He,{className:"h-3 w-3 shrink-0 text-admin-accent"}):e.jsx(Pe,{className:"h-3 w-3 shrink-0 text-admin-accent"}):e.jsx(Ae,{className:"h-3 w-3 shrink-0 opacity-0 group-hover/th:opacity-40 transition-opacity"}),Y=(t,a,r)=>{c({rowIndex:t,column:a}),p(r&&r!=="-"?r:"0")},ce=()=>e.jsx("div",{className:"md:hidden space-y-3",children:I.map(t=>{const a=String(t.ì¸ìŠ¤íƒ€ID||""),r=String(t["ì¸ìŠ¤íƒ€ ì´ë¦„"]||""),s=String(t["ì¸í”Œë£¨ì–¸ì„œ ë“±ê¸‰"]||""),i=String(t["ì¹´í…Œê³ ë¦¬(ëŒ€)"]||""),w=String(t["ì¹´í…Œê³ ë¦¬(ì¤‘)"]||""),_=String(t.íŒ”ë¡œì›Œ||""),u=String(t["ìµœê·¼ 10 í‰ê·  ë¦´ìŠ¤ ì¡°íšŒìˆ˜"]||""),M=String(t["ìµœëŒ€ ë¦´ìŠ¤ ì¡°íšŒìˆ˜"]||""),W=String(t["ìµœê·¼10ê°œ í‰ê·  ëŒ“ê¸€ìˆ˜"]||""),X=String(t["ê³µêµ¬ í‰ê· ëŒ“ê¸€ìˆ˜"]||""),Q=String(t["ê³µêµ¬ ìµœëŒ€ëŒ“ê¸€ìˆ˜"]||""),J=String(t.ë§ˆì§€ë§‰ê²Œì‹œë¬¼||""),n=String(t.ì—…ë°ì´íŠ¸ì¼ìž||""),x=String(t["ê³µì§€ì±„ë„ ë©¤ë²„ìˆ˜"]||""),k=String(t.ìŠ¤í† ë¦¬í™œë™||"").trim().toUpperCase(),G=String(t.ì†Œí†µì±„ë„ì—¬ë¶€||"").trim(),Z=String(t.ëŒ“ê¸€í™œë™ì—¬ë¶€||"").trim(),de=String(t["ë§ˆì§€ë§‰ í”¼ë“œ ê²Œì‹œì¼"]||""),se=String(t.ë©”ëª¨||""),me=String(t.ì¦ê²¨ì°¾ê¸°||"").trim().toUpperCase()==="TRUE",he=t["í”„ë¡œí•„ ë§í¬"],ve=ae[s]||ae.C,ye=j?.rowIndex===t._rowIndex&&j?.column==="ê³µì§€ì±„ë„ ë©¤ë²„ìˆ˜";return e.jsxs("div",{className:"bg-admin-card border border-admin-border rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2 mb-1",children:[e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[he?e.jsxs("a",{href:he,target:"_blank",rel:"noopener noreferrer",className:"text-admin-accent hover:underline text-sm font-medium truncate",children:["@",a]}):e.jsxs("span",{className:"text-admin-text text-sm truncate",children:["@",a]}),s&&s!=="-"&&e.jsx(be,{variant:"outline",className:y("font-bold text-[11px] px-2 py-0 shrink-0",ve),children:s})]}),e.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[e.jsx("button",{onClick:()=>{const $=l.indexOf("ì¦ê²¨ì°¾ê¸°");$!==-1&&g(t._rowIndex,$,me?"FALSE":"TRUE")},children:e.jsx(ie,{className:y("h-4 w-4 transition-colors",me?"fill-amber-400 text-amber-400":"text-admin-text/30 hover:text-amber-400/60")})}),de&&de!=="-"&&e.jsxs("span",{className:"text-[11px] text-admin-text/60 flex items-center gap-1",children:[e.jsx(qe,{className:"h-3 w-3"}),de]})]})]}),e.jsxs("div",{className:"flex items-baseline gap-2 mb-2",children:[e.jsx("span",{className:"text-white text-[13px] font-medium truncate",children:r}),i&&i!=="-"&&e.jsx("span",{className:"text-[11px] text-admin-purple shrink-0",children:i}),w&&w!=="-"&&w!==i&&e.jsx("span",{className:"text-[11px] text-admin-text/50 shrink-0",children:w})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-1 mb-1",children:[e.jsxs("div",{className:"bg-admin-bg/40 rounded px-2 py-1.5 text-center",children:[e.jsx("p",{className:"text-[10px] text-admin-text/60 mb-0.5",children:"íŒ”ë¡œì›Œ"}),e.jsx("p",{className:"text-[13px] text-white tabular-nums font-medium",children:_&&_!=="-"?T(_):"-"})]}),e.jsxs("div",{className:"bg-admin-bg/40 rounded px-2 py-1.5 text-center",children:[e.jsx("p",{className:"text-[10px] text-admin-text/60 mb-0.5",children:"í‰ê· ì¡°íšŒ"}),e.jsx("p",{className:"text-[13px] text-white tabular-nums font-medium",children:u&&u!=="-"?T(u):"-"})]}),e.jsxs("div",{className:"bg-admin-bg/40 rounded px-2 py-1.5 text-center",children:[e.jsx("p",{className:"text-[10px] text-admin-text/60 mb-0.5",children:"ìµœëŒ€ì¡°íšŒ"}),e.jsx("p",{className:"text-[13px] text-white tabular-nums font-medium",children:M&&M!=="-"?T(M):"-"})]}),e.jsxs("div",{className:"bg-admin-bg/40 rounded px-2 py-1.5 text-center",children:[e.jsx("p",{className:"text-[10px] text-admin-text/60 mb-0.5",children:"í‰ê· ëŒ“ê¸€"}),e.jsx("p",{className:"text-[13px] text-white tabular-nums font-medium",children:W&&W!=="-"?T(W):"-"})]})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-1 mb-2",children:[e.jsxs("div",{className:"bg-admin-bg/40 rounded px-2 py-1.5 text-center",children:[e.jsx("p",{className:"text-[10px] text-admin-text/60 mb-0.5",children:"ê³µêµ¬í‰ê· ðŸ’¬"}),e.jsx("p",{className:"text-[13px] text-white tabular-nums font-medium",children:X&&X!=="-"?T(X):"-"})]}),e.jsxs("div",{className:"bg-admin-bg/40 rounded px-2 py-1.5 text-center",children:[e.jsx("p",{className:"text-[10px] text-admin-text/60 mb-0.5",children:"ê³µêµ¬ìµœëŒ€ðŸ’¬"}),e.jsx("p",{className:"text-[13px] text-white tabular-nums font-medium",children:Q&&Q!=="-"?T(Q):"-"})]}),J&&J!=="-"&&e.jsxs("div",{className:"bg-admin-bg/40 rounded px-2 py-1.5 text-center",children:[e.jsx("p",{className:"text-[10px] text-admin-text/60 mb-0.5",children:"ë§ˆì§€ë§‰ê²Œì‹œë¬¼"}),e.jsx("p",{className:"text-[11px] text-white/80",children:J})]}),n&&n!=="-"&&e.jsxs("div",{className:"bg-admin-bg/40 rounded px-2 py-1.5 text-center",children:[e.jsx("p",{className:"text-[10px] text-admin-text/60 mb-0.5",children:"ì—…ë°ì´íŠ¸"}),e.jsx("p",{className:"text-[11px] text-white/80",children:n})]})]}),e.jsxs("div",{className:"flex items-center justify-between gap-2 mb-2",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx($e,{className:"h-3 w-3 text-admin-text/60"}),e.jsx("span",{className:"text-[11px] text-admin-text/60",children:"ë©¤ë²„ìˆ˜"}),ye?e.jsx("input",{type:"text",value:N,onChange:$=>p($.target.value),onBlur:()=>O(t._rowIndex,"ê³µì§€ì±„ë„ ë©¤ë²„ìˆ˜"),onKeyDown:$=>D($,t._rowIndex,"ê³µì§€ì±„ë„ ë©¤ë²„ìˆ˜"),autoFocus:!0,className:"w-16 px-1.5 py-0.5 bg-admin-bg border border-admin-accent rounded text-white text-right text-[12px] focus:outline-none"}):e.jsx("button",{onClick:()=>Y(t._rowIndex,"ê³µì§€ì±„ë„ ë©¤ë²„ìˆ˜",x),className:"text-[12px] text-admin-accent/80 hover:text-admin-accent tabular-nums border-b border-dashed border-admin-border hover:border-admin-accent/50 transition-colors",children:x&&x!=="-"?T(x):"0"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[k==="ON"&&e.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded-full bg-admin-success/15 text-admin-success border border-admin-success/30",children:"ìŠ¤í† ë¦¬"}),(G==="Y"||G==="O")&&e.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded-full bg-teal-500/15 text-teal-400 border border-teal-500/30",children:"ì†Œí†µ"}),(Z==="Y"||Z==="O")&&e.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded-full bg-purple-500/15 text-purple-400 border border-purple-500/30",children:"ëŒ“ê¸€"})]})]}),se&&se!=="-"?e.jsx("button",{onClick:()=>b(t._rowIndex,se,r),className:"w-full text-left group/memo",children:e.jsxs("div",{className:"bg-admin-bg/50 rounded px-2.5 py-1.5 flex items-start gap-2",children:[e.jsx(fe,{className:"h-3 w-3 text-admin-text mt-0.5 shrink-0"}),e.jsx("p",{className:"text-[12px] text-white/70 whitespace-pre-wrap break-words line-clamp-2 flex-1",children:se}),e.jsx(pe,{className:"h-3 w-3 text-admin-accent opacity-0 group-hover/memo:opacity-100 transition-opacity shrink-0 mt-0.5"})]})}):e.jsx("button",{onClick:()=>b(t._rowIndex,"",r),className:"w-full text-left",children:e.jsxs("div",{className:"bg-admin-bg/50 rounded px-2.5 py-1.5 flex items-center gap-2 text-admin-text/40 hover:text-admin-text/60 transition-colors",children:[e.jsx(fe,{className:"h-3 w-3 shrink-0"}),e.jsx("span",{className:"text-[12px]",children:"ë©”ëª¨ ì¶”ê°€..."})]})})]},t._rowIndex)})}),P=d.useRef(null),R=d.useRef(null),H=d.useRef(!1),K=()=>{H.current||(H.current=!0,P.current&&R.current&&(R.current.scrollLeft=P.current.scrollLeft),requestAnimationFrame(()=>{H.current=!1}))},V=()=>{H.current||(H.current=!0,P.current&&R.current&&(P.current.scrollLeft=R.current.scrollLeft),requestAnimationFrame(()=>{H.current=!1}))},z=e.jsx("colgroup",{children:v.map(t=>e.jsx("col",{style:{width:S.pctWidths[t]}},t))});return e.jsxs(e.Fragment,{children:[ce(),e.jsxs("div",{className:"hidden md:block",children:[e.jsx("div",{className:"sticky z-40 border border-admin-border border-b-0 rounded-t-lg bg-[#14142a]",style:{top:h},children:e.jsx("div",{ref:P,className:"overflow-x-auto",style:{scrollbarWidth:"none"},onScroll:K,children:e.jsxs("table",{className:"w-full text-sm border-collapse",style:{minWidth:S.total,tableLayout:"fixed"},children:[z,e.jsx("thead",{children:e.jsx("tr",{className:"bg-[#14142a]",children:v.map((t,a)=>{const r=q[t],s=a<ee,i=a===ee-1;return e.jsx("th",{style:s?{left:S.stickyOffsets[a]}:void 0,className:y("px-2.5 py-2.5 text-[11px] uppercase tracking-wider text-admin-text/70 font-semibold border-r border-admin-border/50 last:border-r-0 group/th",s&&"sticky z-40 bg-[#14142a]",i&&"shadow-[3px_0_8px_rgba(0,0,0,0.35)] border-r-admin-border",r?.align==="center"&&"text-center",r?.align==="right"&&"text-right"),children:e.jsxs("button",{onClick:()=>E(t),className:"flex items-center gap-1 w-full hover:text-white transition-colors",children:[e.jsx("span",{className:"whitespace-nowrap",children:r?.label||t}),e.jsx(F,{column:t})]})},t)})})})]})})}),e.jsx("div",{className:"border border-admin-border border-t-0 rounded-b-lg overflow-hidden",children:e.jsx("div",{ref:R,className:"overflow-x-auto",onScroll:V,children:e.jsxs("table",{className:"w-full text-sm border-collapse",style:{minWidth:S.total,tableLayout:"fixed"},children:[z,e.jsx("tbody",{children:I.map((t,a)=>e.jsx("tr",{className:y("border-b border-admin-border/40 transition-colors","hover:bg-white/[0.02]",a%2===0?"bg-[#11111f]":"bg-[#151528]"),children:v.map((r,s)=>{const i=q[r],w=s<ee,_=s===ee-1,u=a%2===0?"#11111f":"#151528";return e.jsx("td",{style:w?{left:S.stickyOffsets[s],backgroundColor:u}:void 0,className:y("px-2.5 py-2 text-white border-r border-admin-border/30 last:border-r-0 align-top",w&&"sticky z-30",_&&"shadow-[3px_0_8px_rgba(0,0,0,0.35)] border-r-admin-border/60",i?.align==="center"&&"text-center",i?.align==="right"&&"text-right",i?.highlight&&"font-semibold"),children:L(t,r,t._rowIndex)},r)})},t._rowIndex))})]})})})]})]})}function tt({className:o,...l}){return e.jsx("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:e.jsx("table",{"data-slot":"table",className:y("w-full caption-bottom text-sm",o),...l})})}function st({className:o,...l}){return e.jsx("thead",{"data-slot":"table-header",className:y("[&_tr]:border-b",o),...l})}function at({className:o,...l}){return e.jsx("tbody",{"data-slot":"table-body",className:y("[&_tr:last-child]:border-0",o),...l})}function je({className:o,...l}){return e.jsx("tr",{"data-slot":"table-row",className:y("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",o),...l})}function ne({className:o,...l}){return e.jsx("th",{"data-slot":"table-head",className:y("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",o),...l})}function re({className:o,...l}){return e.jsx("td",{"data-slot":"table-cell",className:y("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",o),...l})}function nt({isOpen:o,onClose:l,grades:f,onSave:g,isSaving:b=!1}){const[h,m]=d.useState(f);d.useEffect(()=>{m(f)},[f]);const C=(c,N,p)=>{const v=[...h];v[c]={...v[c],[N]:p},m(v)},j=c=>{g(h,c)};return e.jsx(Ce,{open:o,onOpenChange:l,children:e.jsxs(ke,{className:"bg-admin-card border-admin-border text-white max-w-4xl max-h-[80vh] overflow-y-auto",children:[e.jsx(Se,{children:e.jsx(Me,{className:"text-white",children:"ë“±ê¸‰ ê¸°ì¤€ ì„¤ì •"})}),e.jsxs("div",{className:"py-4",children:[e.jsxs(tt,{children:[e.jsx(st,{children:e.jsxs(je,{className:"border-admin-border hover:bg-transparent",children:[e.jsx(ne,{className:"text-admin-text",children:"ë“±ê¸‰"}),e.jsx(ne,{className:"text-admin-text",children:"ìµœì†Œ íŒ”ë¡œì›Œ"}),e.jsx(ne,{className:"text-admin-text",children:"ìµœì†Œ ì¡°íšŒìˆ˜"}),e.jsx(ne,{className:"text-admin-text",children:"ìµœì†Œ ì†Œí†µë¥ "})]})}),e.jsx(at,{children:h.map((c,N)=>e.jsxs(je,{className:"border-admin-border hover:bg-admin-bg/50",children:[e.jsx(re,{className:"font-medium text-white",children:c.grade}),e.jsx(re,{children:e.jsx(te,{type:"text",value:c.minFollowers,onChange:p=>C(N,"minFollowers",p.target.value),className:"bg-admin-bg border-admin-border text-white"})}),e.jsx(re,{children:e.jsx(te,{type:"text",value:c.minViews,onChange:p=>C(N,"minViews",p.target.value),className:"bg-admin-bg border-admin-border text-white"})}),e.jsx(re,{children:e.jsx(te,{type:"text",value:c.minEngagement,onChange:p=>C(N,"minEngagement",p.target.value),className:"bg-admin-bg border-admin-border text-white"})})]},N))})]}),e.jsxs("div",{className:"mt-4 text-xs text-admin-text",children:[e.jsx("p",{children:"â€¢ ë“±ê¸‰ ê¸°ì¤€ì„ ì„¤ì •í•˜ê³  ì €ìž¥í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤."}),e.jsx("p",{children:'â€¢ "ì €ìž¥ + ìˆ˜ì‹ ì ìš©"ì„ í´ë¦­í•˜ë©´ ë“±ê¸‰ ì»¬ëŸ¼ì— ìžë™ ê³„ì‚° ìˆ˜ì‹ì´ ì ìš©ë©ë‹ˆë‹¤.'})]})]}),e.jsxs(Oe,{className:"gap-2",children:[e.jsx(U,{variant:"outline",onClick:l,disabled:b,className:"bg-transparent border-admin-border text-white hover:bg-admin-bg",children:"ì·¨ì†Œ"}),e.jsx(U,{onClick:()=>j(!1),disabled:b,className:"bg-admin-purple text-white hover:bg-admin-purple/90",children:"ì €ìž¥ë§Œ"}),e.jsx(U,{onClick:()=>j(!0),disabled:b,className:"bg-admin-accent text-admin-bg hover:bg-admin-accent/90",children:b?"ì²˜ë¦¬ ì¤‘...":"ì €ìž¥ + ìˆ˜ì‹ ì ìš©"})]})]})})}function rt({isOpen:o,onClose:l,columns:f,onSave:g,isSaving:b=!1}){const[h,m]=d.useState(f);d.useEffect(()=>{m(f)},[f]);const C=c=>{m(N=>N.map(p=>p.name===c?{...p,visible:!p.visible}:p))},j=()=>{g(h)};return o?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-black/50 z-40",onClick:l}),e.jsxs("div",{className:"fixed right-0 top-0 h-full w-80 bg-admin-card border-l border-admin-border z-50 shadow-xl overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-admin-card border-b border-admin-border p-4 flex items-center justify-between",children:[e.jsx("h3",{className:"text-white font-semibold",children:"ì»¬ëŸ¼ í‘œì‹œ ì„¤ì •"}),e.jsx("button",{onClick:l,className:"text-admin-text hover:text-white transition-colors",children:e.jsx(Ne,{className:"h-5 w-5"})})]}),e.jsx("div",{className:"p-4 space-y-2",children:h.map(c=>e.jsxs("label",{className:"flex items-center gap-3 p-2 rounded hover:bg-admin-bg cursor-pointer transition-colors",children:[e.jsx("input",{type:"checkbox",checked:c.visible,onChange:()=>C(c.name),className:"w-4 h-4 rounded border-admin-border bg-admin-bg text-admin-accent focus:ring-admin-accent focus:ring-offset-0"}),e.jsx("span",{className:y("text-sm",c.visible?"text-white":"text-admin-text"),children:c.name})]},c.name))}),e.jsx("div",{className:"sticky bottom-0 bg-admin-card border-t border-admin-border p-4",children:e.jsx(U,{onClick:j,disabled:b,className:"w-full bg-admin-accent text-admin-bg hover:bg-admin-accent/90",children:b?"ì €ìž¥ ì¤‘...":"ì €ìž¥"})})]})]}):null}function mt(){const{data:o,isLoading:l,error:f}=_e(),g=Ie(),b=Ee(),{data:h}=De(),m=Le(),{data:C}=Fe(),j=Re(),{data:c}=Te(),N=d.useRef(null),[p,v]=d.useState(0);d.useEffect(()=>{const n=N.current;if(!n)return;const x=new ResizeObserver(()=>{v(n.offsetHeight)});return x.observe(n),()=>x.disconnect()},[]);const[S,I]=d.useState(""),[E,A]=d.useState([]),[O,D]=d.useState([]),[L,F]=d.useState([]),[Y,ce]=d.useState(!1),[P,R]=d.useState(!1),[H,K]=d.useState(!1),[V,z]=d.useState({isOpen:!1,rowIndex:-1,value:"",name:""}),t=o?.data||[],a=o?.headers||[],r=o?.fromCache??!1,s=d.useMemo(()=>h?.columns?h.columns.filter(n=>n.visible).map(n=>n.name):oe.filter(n=>!xe.includes(n)),[h]),i=d.useMemo(()=>{const n=new Set;return t.forEach(x=>{const k=x["ì¹´í…Œê³ ë¦¬(ëŒ€)"];k&&k!=="-"&&n.add(k)}),Array.from(n).sort()},[t]),w=d.useMemo(()=>["í™œë™ì„±24H O","í™œë™ì„±24H X"],[]),_=d.useMemo(()=>t.filter(n=>{if(Y&&String(n.ì¦ê²¨ì°¾ê¸°||"").trim().toUpperCase()!=="TRUE")return!1;if(S){const x=S.toLowerCase(),k=String(n.ì¸ìŠ¤íƒ€ID||"").toLowerCase(),G=String(n["ì¸ìŠ¤íƒ€ ì´ë¦„"]||"").toLowerCase();if(!k.includes(x)&&!G.includes(x))return!1}if(E.length>0){const x=n["ì¹´í…Œê³ ë¦¬(ëŒ€)"];if(!E.includes(x))return!1}if(O.length>0){const x=n["ì¸í”Œë£¨ì–¸ì„œ ë“±ê¸‰"];if(!O.includes(x))return!1}if(L.length>0){const x=n["ë§ˆì§€ë§‰ í”¼ë“œ ê²Œì‹œì¼"],k=x&&x.includes("ì‹œê°„")&&!x.includes("ì¼"),G=L.includes("í™œë™ì„±24H O"),Z=L.includes("í™œë™ì„±24H X");if(G&&Z)return!0;if(G&&!k)return!1;if(Z&&k)return!1}return!0}),[t,S,E,O,L,Y]),u=()=>{g.mutate()},M=(n,x,k)=>{b.mutate({rowIndex:n,columnIndex:x,value:k})},W=(n,x,k)=>{z({isOpen:!0,rowIndex:n,value:x,name:k})},X=n=>{const x=a.indexOf("ë©”ëª¨");x!==-1&&b.mutate({rowIndex:V.rowIndex,columnIndex:x,value:n}),z({isOpen:!1,rowIndex:-1,value:"",name:""})},Q=n=>{m.mutate(n),K(!1)},J=(n,x)=>{j.mutate({grades:n,applyFormula:x}),R(!1)};return f?e.jsx("div",{className:"max-w-[1800px] mx-auto mt-8",children:e.jsxs("div",{className:"bg-admin-error/20 border border-admin-error/40 rounded-lg p-6 text-center",children:[e.jsx("p",{className:"text-admin-error font-semibold",children:"ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤"}),e.jsx("p",{className:"text-admin-text text-sm mt-2",children:String(f)}),e.jsx(U,{onClick:u,className:"mt-4",children:"ë‹¤ì‹œ ì‹œë„"})]})}):e.jsxs("div",{className:"max-w-[1800px] mx-auto mt-4 md:mt-8",children:[e.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl md:text-2xl font-bold text-white mb-1 md:mb-2",children:"ì¸í”Œë£¨ì–¸ì„œ ê´€ë¦¬"}),c&&e.jsxs("div",{className:"flex items-center gap-4 text-xs text-admin-text",children:[e.jsxs("span",{children:["Cache: ",r?"KV":"API"]}),e.jsxs("span",{children:["Quota: ",c.quotaUsed," / 100"]}),e.jsxs("span",{children:["Hits: ",c.cacheHits," / Misses: ",c.cacheMisses]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(U,{onClick:u,disabled:g.isPending,variant:"outline",className:"bg-transparent border-admin-border text-white hover:bg-admin-bg",children:[e.jsx(Ge,{className:`h-4 w-4 md:mr-2 ${g.isPending?"animate-spin":""}`}),e.jsx("span",{className:"hidden md:inline",children:"ìƒˆë¡œê³ ì¹¨"})]}),e.jsxs(U,{onClick:()=>R(!0),variant:"outline",className:"bg-transparent border-admin-border text-white hover:bg-admin-bg",children:[e.jsx(Xe,{className:"h-4 w-4 md:mr-2"}),e.jsx("span",{className:"hidden md:inline",children:"ë“±ê¸‰ ì„¤ì •"})]}),e.jsxs(U,{onClick:()=>K(!0),variant:"outline",className:"bg-transparent border-admin-border text-white hover:bg-admin-bg",children:[e.jsx(Ke,{className:"h-4 w-4 md:mr-2"}),e.jsx("span",{className:"hidden md:inline",children:"ì»¬ëŸ¼ ì„¤ì •"})]})]})]}),e.jsx("div",{ref:N,className:"sticky top-0 z-50 bg-admin-bg py-2 md:pt-2 md:pb-4 -mx-3 px-3 md:-mx-6 md:px-6 shadow-[0_4px_12px_rgba(0,0,0,0.3)]",children:e.jsx(Je,{searchQuery:S,onSearchChange:I,categoryOptions:i,selectedCategories:E,onCategoriesChange:A,selectedGrades:O,onGradesChange:D,activityOptions:w,selectedActivity:L,onActivityChange:F,resultCount:_.length,totalCount:t.length,showFavoritesOnly:Y,onFavoritesToggle:()=>ce(n=>!n)})}),l?e.jsx("div",{className:"flex items-center justify-center h-64 bg-admin-card rounded-lg border border-admin-border",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-admin-accent mx-auto mb-4"}),e.jsx("p",{className:"text-admin-text",children:"ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘..."})]})}):e.jsx(et,{data:_,headers:a,visibleColumns:s,onCellEdit:M,onMemoEdit:W,stickyTopOffset:p}),e.jsx(nt,{isOpen:P,onClose:()=>R(!1),grades:C?.grades||[],onSave:J,isSaving:j.isPending}),e.jsx(rt,{isOpen:H,onClose:()=>K(!1),columns:h?.columns||oe.filter(n=>!xe.includes(n)).map(n=>({name:n,visible:!0})),onSave:Q,isSaving:m.isPending}),e.jsx(Ve,{isOpen:V.isOpen,onClose:()=>z({isOpen:!1,rowIndex:-1,value:"",name:""}),initialValue:V.value,onSave:X,influencerName:V.name}),e.jsx(ze,{position:"top-right",theme:"dark"})]})}export{mt as default};
