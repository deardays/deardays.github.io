import{j as e}from"./framer-motion-6E75tBg3.js";import{r as n,d as Me}from"./react-vendor-9l3RvKiN.js";import{B,r as De,b as Oe,c as q,S as xe,I as V,a as Ie,X as de,E as te,A as _e,t as Ee,v as Le,u as Re,P as me,f as oe}from"./SortPanel-CCg77oLu.js";import{D as je,a as we,b as Ne,c as ve,d as ye}from"./dialog-CRjbffcy.js";import{B as he,M as Pe,P as Ae,R as ue}from"./badge-D35L35S-.js";import{c as ce,r as ke}from"./index-kvcITcEx.js";import{M as Fe,I as Ue}from"./InfluencerSelectModal-C_Rar3JK.js";import Te from"./MemoEditModal-og1epeUC.js";import{u as Be,a as ze,b as $e,c as He,d as Ve}from"./useProductData-BSaB2ruT.js";import"./tanstack-query-BtejbdqV.js";const Ke=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],pe=ce("file-text",Ke);const We=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],Ye=ce("phone",We);const qe=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],be=ce("trash-2",qe);const Ge=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Qe=ce("user",Ge);function le({options:r,selected:c,onChange:h,placeholder:C="선택",className:f}){const[o,x]=n.useState(!1),m=n.useRef(null);n.useEffect(()=>{function s(S){m.current&&!m.current.contains(S.target)&&x(!1)}return document.addEventListener("mousedown",s),()=>document.removeEventListener("mousedown",s)},[]);const v=s=>{c.includes(s)?h(c.filter(S=>S!==s)):h([...c,s])};return e.jsxs("div",{ref:m,className:q("relative",f),children:[e.jsxs(B,{variant:"outline",onClick:()=>x(!o),className:"w-full justify-between bg-admin-card border-admin-border text-white hover:bg-admin-card/80 hover:text-white",children:[e.jsx("span",{className:"truncate",children:c.length>0?`${c.length}개 선택됨`:C}),e.jsx(De,{className:"ml-2 h-4 w-4 shrink-0"})]}),o&&e.jsxs("div",{className:"absolute z-50 mt-2 w-full rounded-md border border-admin-border bg-admin-card shadow-lg",children:[e.jsxs("div",{className:"flex gap-2 border-b border-admin-border p-2",children:[e.jsx(B,{size:"sm",variant:"ghost",onClick:()=>h(r),className:"flex-1 text-xs text-admin-text hover:text-white hover:bg-admin-bg",children:"전체 선택"}),e.jsx(B,{size:"sm",variant:"ghost",onClick:()=>h([]),className:"flex-1 text-xs text-admin-text hover:text-white hover:bg-admin-bg",children:"전체 해제"})]}),e.jsx("div",{className:"max-h-60 overflow-y-auto p-2",children:r.map(s=>e.jsxs("button",{onClick:()=>v(s),className:"flex w-full items-center gap-2 rounded px-2 py-1.5 text-sm text-white hover:bg-admin-bg transition-colors",children:[e.jsx("div",{className:q("flex h-4 w-4 items-center justify-center rounded border",c.includes(s)?"bg-admin-accent border-admin-accent":"border-admin-border"),children:c.includes(s)&&e.jsx(Oe,{className:"h-3 w-3 text-admin-bg"})}),e.jsx("span",{className:"truncate",children:s})]},s))})]})]})}const Ce=["No.","제품명","업체명","상태","제품 카테고리","공식몰","샘플피드","제안서","담당자","담당자 전화","담당자 이메일","핏한 인플루언서","소싱메모","제품메모"],Se=["_rowIndex"],ie=["진행 전","진행 중","답장없음","불가","컨텍"],fe={"진행 전":"bg-gray-500/20 text-gray-400 border-gray-500/40","진행 중":"bg-blue-500/20 text-blue-400 border-blue-500/40",답장없음:"bg-yellow-500/20 text-yellow-400 border-yellow-500/40",불가:"bg-red-500/20 text-red-400 border-red-500/40",컨텍:"bg-green-500/20 text-green-400 border-green-500/40"},ge=["식품","올리브유","유아","식기","간식","텀블러","요리","주방","청소기","두유제조기","청소","세정제","육수","에어프라이어","살림","인테리어","정리","육아","유아식기","육아템","예쁜육아템"],Z={"No.":{width:48,align:"center",type:"text",label:"No"},제품명:{width:180,align:"left",type:"editable-text",label:"제품명",editable:!0},업체명:{width:160,align:"left",type:"combobox",label:"업체명",editable:!0},상태:{width:80,align:"center",type:"status",label:"상태",editable:!0},"제품 카테고리":{width:140,align:"left",type:"tag-combobox",label:"카테고리",editable:!0},공식몰:{width:160,align:"left",type:"editable-link",label:"공식몰",editable:!0},샘플피드:{width:160,align:"left",type:"editable-link",label:"샘플",editable:!0},제안서:{width:160,align:"left",type:"editable-link",label:"제안서",editable:!0},담당자:{width:80,align:"left",type:"editable-text",label:"담당자",editable:!0},"담당자 전화":{width:120,align:"left",type:"editable-text",label:"전화",editable:!0},"담당자 이메일":{width:160,align:"left",type:"editable-text",label:"이메일",editable:!0},"핏한 인플루언서":{width:200,align:"left",type:"influencers",label:"인플루언서"},소싱메모:{width:200,align:"left",type:"editable-memo",label:"소싱메모",editable:!0},제품메모:{width:200,align:"left",type:"editable-memo",label:"제품메모",editable:!0}},ne=4;function Xe({searchQuery:r,onSearchChange:c,selectedStatuses:h,onStatusesChange:C,selectedCategories:f,onCategoriesChange:o,resultCount:x,totalCount:m}){const[v,s]=n.useState(r),[S,A]=n.useState(!1);n.useEffect(()=>{const j=setTimeout(()=>c(v),250);return()=>clearTimeout(j)},[v,c]);const g=h.length+f.length,D=()=>{C([]),o([])};return e.jsxs("div",{children:[e.jsxs("div",{className:"md:hidden",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(xe,{className:"absolute left-2.5 top-1/2 -translate-y-1/2 h-3.5 w-3.5 text-admin-text"}),e.jsx(V,{type:"text",placeholder:"제품명 또는 업체명 검색...",value:v,onChange:j=>s(j.target.value),className:"pl-8 h-8 text-[13px] bg-admin-card border-admin-border text-white placeholder:text-admin-text"})]}),e.jsxs("button",{onClick:()=>A(!S),className:`relative flex items-center justify-center h-8 w-8 rounded-md border shrink-0 transition-colors ${S||g>0?"bg-admin-accent/15 border-admin-accent/40 text-admin-accent":"bg-admin-card border-admin-border text-admin-text"}`,children:[e.jsx(Ie,{className:"h-3.5 w-3.5"}),g>0&&e.jsx("span",{className:"absolute -top-1.5 -right-1.5 min-w-[16px] h-4 flex items-center justify-center rounded-full bg-admin-accent text-[10px] font-bold text-admin-bg px-1",children:g})]}),e.jsxs("span",{className:"text-[11px] text-admin-text tabular-nums shrink-0",children:[e.jsx("span",{className:"text-white font-semibold",children:x}),"/",m]})]}),S&&e.jsxs("div",{className:"mt-2 flex flex-col gap-2",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(le,{options:[...ie],selected:h,onChange:C,placeholder:"상태"}),e.jsx(le,{options:[...ge],selected:f,onChange:o,placeholder:"카테고리"})]}),g>0&&e.jsxs("button",{onClick:D,className:"flex items-center gap-1 text-[11px] text-admin-text hover:text-admin-accent transition-colors self-end",children:[e.jsx(de,{className:"h-3 w-3"}),"필터 초기화"]})]})]}),e.jsxs("div",{className:"hidden md:block space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[e.jsxs("div",{className:"relative col-span-2",children:[e.jsx(xe,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-admin-text"}),e.jsx(V,{type:"text",placeholder:"제품명 또는 업체명 검색...",value:v,onChange:j=>s(j.target.value),className:"pl-10 bg-admin-card border-admin-border text-white placeholder:text-admin-text"})]}),e.jsx(le,{options:[...ie],selected:h,onChange:C,placeholder:"상태 선택"}),e.jsx(le,{options:[...ge],selected:f,onChange:o,placeholder:"카테고리 선택"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-admin-text",children:[e.jsx("span",{className:"text-white font-semibold",children:x})," / ",m," 건"]}),g>0&&e.jsxs("button",{onClick:D,className:"flex items-center gap-1 text-xs text-admin-text hover:text-admin-accent transition-colors",children:[e.jsx(de,{className:"h-3 w-3"})," 필터 초기화"]})]})]})]})}function Je({value:r,options:c,onChange:h,onCommit:C,onCancel:f,placeholder:o}){const[x,m]=n.useState(-1),[v,s]=n.useState(null),S=n.useRef(null),A=n.useRef(null),g=n.useRef(0),D=n.useMemo(()=>{if(!r.trim())return c.slice(0,8);const u=r.toLowerCase();return c.filter(N=>N.toLowerCase().includes(u)).slice(0,8)},[r,c]),j=D.some(u=>u===r);n.useEffect(()=>{m(-1)},[r]),n.useEffect(()=>{x>=0&&A.current&&A.current.children[x]?.scrollIntoView({block:"nearest"})},[x]);const I=n.useCallback(()=>{if(!S.current)return;const u=S.current.getBoundingClientRect();s({top:u.bottom+2,left:u.left,width:u.width})},[]),_=n.useCallback(()=>{cancelAnimationFrame(g.current),g.current=requestAnimationFrame(I)},[I]);n.useEffect(()=>(I(),window.addEventListener("scroll",_,!0),window.addEventListener("resize",_),()=>{cancelAnimationFrame(g.current),window.removeEventListener("scroll",_,!0),window.removeEventListener("resize",_)}),[I,_]);const z=u=>{u.key==="ArrowDown"?(u.preventDefault(),m(N=>Math.min(N+1,D.length-1))):u.key==="ArrowUp"?(u.preventDefault(),m(N=>Math.max(N-1,-1))):u.key==="Enter"?(u.preventDefault(),x>=0&&x<D.length?C(D[x]):C(r)):u.key==="Escape"&&f()},F=D.length>0&&v;return e.jsxs(e.Fragment,{children:[e.jsx("input",{ref:S,type:"text",value:r,onChange:u=>h(u.target.value),onKeyDown:z,onBlur:()=>{setTimeout(()=>C(r),150)},autoFocus:!0,placeholder:o,className:"w-full px-1.5 py-0.5 bg-admin-bg border border-admin-accent rounded text-white text-[13px] focus:outline-none"}),F&&ke.createPortal(e.jsxs("ul",{ref:A,"data-combobox-list":!0,style:{position:"fixed",top:v.top,left:v.left,width:v.width},className:"max-h-[180px] overflow-y-auto bg-[#1a1a2e] border border-admin-border rounded shadow-lg z-[9999]",children:[D.map((u,N)=>{const K=N===x;return e.jsx("li",{children:e.jsx("button",{type:"button",tabIndex:-1,onMouseDown:R=>{R.preventDefault(),C(u)},onMouseEnter:()=>m(N),className:q("w-full text-left px-2 py-1.5 text-[13px] transition-colors",K?"bg-admin-accent/20 text-white":"text-white/80 hover:bg-white/5"),children:Ze(u,r)})},u)}),r.trim()&&!j&&e.jsx("li",{className:"border-t border-admin-border/40",children:e.jsxs("button",{type:"button",tabIndex:-1,onMouseDown:u=>{u.preventDefault(),C(r)},className:"w-full text-left px-2 py-1.5 text-[13px] text-admin-accent/70 hover:bg-white/5",children:["“",e.jsx("span",{className:"text-white",children:r}),"” 새로 추가"]})})]}),document.body)]})}function Ze(r,c){if(!c.trim())return r;const h=r.toLowerCase().indexOf(c.toLowerCase());return h===-1?r:e.jsxs(e.Fragment,{children:[r.slice(0,h),e.jsx("span",{className:"text-admin-accent font-medium",children:r.slice(h,h+c.length)}),r.slice(h+c.length)]})}function et({value:r,options:c,onCommit:h,onCancel:C}){const[f,o]=n.useState(()=>r?r.split(",").map(i=>i.trim()).filter(Boolean):[]),[x,m]=n.useState(""),[v,s]=n.useState(-1),[S,A]=n.useState(null),g=n.useRef(null),D=n.useRef(null),j=n.useRef(0),I=n.useMemo(()=>{const i=x.toLowerCase();return c.filter(y=>!f.includes(y)).filter(y=>!i||y.toLowerCase().includes(i)).slice(0,8)},[x,c,f]),_=I.some(i=>i===x);n.useEffect(()=>{s(-1)},[x]),n.useEffect(()=>{v>=0&&D.current&&D.current.children[v]?.scrollIntoView({block:"nearest"})},[v]);const z=n.useCallback(()=>{if(!g.current)return;const i=g.current.getBoundingClientRect();A({top:i.bottom+2,left:i.left,width:Math.max(i.width,180)})},[]),F=n.useCallback(()=>{cancelAnimationFrame(j.current),j.current=requestAnimationFrame(z)},[z]);n.useEffect(()=>(z(),window.addEventListener("scroll",F,!0),window.addEventListener("resize",F),()=>{cancelAnimationFrame(j.current),window.removeEventListener("scroll",F,!0),window.removeEventListener("resize",F)}),[z,F,f]);const u=n.useCallback(i=>{h(i.join(", "))},[h]),N=i=>{const y=i.trim();if(!y||f.includes(y))return;const T=[...f,y];o(T),m(""),g.current?.focus()},K=i=>{o(y=>y.filter(T=>T!==i))},R=i=>{i.key==="ArrowDown"?(i.preventDefault(),s(y=>Math.min(y+1,I.length-1))):i.key==="ArrowUp"?(i.preventDefault(),s(y=>Math.max(y-1,-1))):i.key==="Enter"?(i.preventDefault(),v>=0&&v<I.length?N(I[v]):x.trim()?N(x):u(f)):i.key==="Escape"?C():i.key==="Backspace"&&!x&&f.length>0?o(y=>y.slice(0,-1)):(i.key===","||i.key==="Tab")&&x.trim()&&(i.preventDefault(),N(x))},W=I.length>0&&S;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-1 w-full px-1 py-0.5 bg-admin-bg border border-admin-accent rounded min-h-[26px] cursor-text",onClick:()=>g.current?.focus(),children:[f.map(i=>e.jsxs("span",{className:"inline-flex items-center gap-0.5 text-[11px] px-1.5 py-0 rounded bg-purple-500/15 text-purple-400 border border-purple-500/30",children:[i,e.jsx("button",{type:"button",onClick:y=>{y.stopPropagation(),K(i)},className:"hover:text-white",children:e.jsx(de,{className:"h-2.5 w-2.5"})})]},i)),e.jsx("input",{ref:g,type:"text",value:x,onChange:i=>m(i.target.value),onKeyDown:R,onBlur:()=>{setTimeout(()=>{const i=x.trim()?[...f,x.trim()]:f;u(i)},150)},autoFocus:!0,placeholder:f.length===0?"카테고리 입력...":"",className:"flex-1 min-w-[60px] bg-transparent text-white text-[13px] focus:outline-none"})]}),W&&ke.createPortal(e.jsxs("ul",{ref:D,style:{position:"fixed",top:S.top,left:S.left,width:S.width},className:"max-h-[180px] overflow-y-auto bg-[#1a1a2e] border border-admin-border rounded shadow-lg z-[9999]",children:[I.map((i,y)=>e.jsx("li",{children:e.jsx("button",{type:"button",tabIndex:-1,onMouseDown:T=>{T.preventDefault(),N(i)},onMouseEnter:()=>s(y),className:q("w-full text-left px-2 py-1.5 text-[13px] transition-colors",y===v?"bg-admin-accent/20 text-white":"text-white/80 hover:bg-white/5"),children:tt(i,x)})},i)),x.trim()&&!_&&e.jsx("li",{className:"border-t border-admin-border/40",children:e.jsxs("button",{type:"button",tabIndex:-1,onMouseDown:i=>{i.preventDefault(),N(x)},className:"w-full text-left px-2 py-1.5 text-[13px] text-admin-accent/70 hover:bg-white/5",children:["“",e.jsx("span",{className:"text-white",children:x}),"” 새로 추가"]})})]}),document.body)]})}function tt(r,c){if(!c.trim())return r;const h=r.toLowerCase().indexOf(c.toLowerCase());return h===-1?r:e.jsxs(e.Fragment,{children:[r.slice(0,h),e.jsx("span",{className:"text-admin-accent font-medium",children:r.slice(h,h+c.length)}),r.slice(h+c.length)]})}function nt(r){const c=r.reduce((o,x)=>o+(Z[x]?.width||120),0)+80,h={},C=[];let f=0;for(let o=0;o<r.length;o++){const x=Z[r[o]]?.width||120,m=x/c*100;h[r[o]]=`${m}%`,o<ne&&(C.push(`${f/c*100}%`),f+=x)}return h.__actions=`${80/c*100}%`,{total:c,pctWidths:h,stickyOffsets:C}}function st({column:r,sortConfig:c}){return c.column===r?c.direction==="asc"?e.jsx(Ee,{className:"h-3 w-3 shrink-0 text-admin-accent"}):e.jsx(Le,{className:"h-3 w-3 shrink-0 text-admin-accent"}):e.jsx(_e,{className:"h-3 w-3 shrink-0 opacity-0 group-hover/th:opacity-40 transition-opacity"})}function at({data:r,headers:c,visibleColumns:h,onCellEdit:C,onMemoEdit:f,onInfluencerEdit:o,onDelete:x,onCreateProposal:m,stickyTopOffset:v=0}){const[s,S]=n.useState({column:null,direction:null}),[A,g]=n.useState(null),[D,j]=n.useState(""),I=n.useMemo(()=>Ce.filter(t=>h.includes(t)&&!Se.includes(t)),[h]),_=n.useMemo(()=>nt(I),[I]),z=n.useMemo(()=>!s.column||!s.direction?r:[...r].sort((t,l)=>{const d=String(t[s.column]||""),a=String(l[s.column]||""),p=parseFloat(d.replace(/,/g,"")),L=parseFloat(a.replace(/,/g,""));return!isNaN(p)&&!isNaN(L)?s.direction==="asc"?p-L:L-p:s.direction==="asc"?d.localeCompare(a,"ko"):a.localeCompare(d,"ko")}),[r,s]),F=n.useRef(null),u=n.useRef(null),N=n.useRef(!1),K=t=>{S(l=>l.column!==t?{column:t,direction:"asc"}:l.direction==="asc"?{column:t,direction:"desc"}:{column:null,direction:null})},R=(t,l,d,a)=>{const p=Z[l];p&&(p.type==="editable-memo"?f(t,d,a,l):p.type==="influencers"?o(t,d,a):p.type==="tags"||p.type==="tag-combobox"?(g({rowIndex:t,column:l}),j(d)):(p.type==="editable-text"||p.type==="status"||p.type==="combobox"||p.type==="editable-link")&&(g({rowIndex:t,column:l}),j(d)))},W=(t,l)=>{if(A?.rowIndex===t&&A?.column===l){const d=String(r.find(a=>a._rowIndex===t)?.[l]||"");if(D!==d){const a=c.indexOf(l);a!==-1&&C(t,a,D)}g(null),j("")}},i=(t,l,d)=>{t.key==="Enter"?W(l,d):t.key==="Escape"&&(g(null),j(""))},y=(t,l,d)=>{const a=String(t[l]||""),p=Z[l];if(!p)return a;const L=A?.rowIndex===d&&A?.column===l;if(p.type==="combobox"){if(L){const k=[...new Set(r.map(w=>String(w[l]||"")).filter(Boolean))].sort((w,O)=>w.localeCompare(O,"ko"));return e.jsx(Je,{value:D,options:k,onChange:j,onCommit:w=>{const O=String(r.find(P=>P._rowIndex===d)?.[l]||"");if(w!==O){const P=c.indexOf(l);P!==-1&&C(d,P,w)}g(null),j("")},onCancel:()=>{g(null),j("")}})}return e.jsx("button",{onClick:()=>R(d,l,a,String(t.제품명||"")),className:"w-full text-left text-[13px] text-white/90 hover:text-white transition-colors cursor-text",children:a||e.jsx("span",{className:"text-admin-text/40",children:"-"})})}if(p.type==="editable-text")return L?e.jsx("input",{type:"text",value:D,onChange:k=>j(k.target.value),onBlur:()=>W(d,l),onKeyDown:k=>i(k,d,l),autoFocus:!0,className:"w-full px-1.5 py-0.5 bg-admin-bg border border-admin-accent rounded text-white text-[13px] focus:outline-none"}):e.jsx("button",{onClick:()=>R(d,l,a,String(t.제품명||"")),className:"w-full text-left text-[13px] text-white/90 hover:text-white transition-colors cursor-text",children:a||e.jsx("span",{className:"text-admin-text/40",children:"-"})});if(p.type==="status"){if(L)return e.jsxs("select",{value:D,onChange:w=>{j(w.target.value);const O=c.indexOf(l);O!==-1&&C(d,O,w.target.value),g(null),j("")},onBlur:()=>{g(null),j("")},autoFocus:!0,className:"w-full px-1 py-0.5 bg-admin-bg border border-admin-accent rounded text-white text-[13px] focus:outline-none text-center",children:[e.jsx("option",{value:"",children:"-"}),ie.map(w=>e.jsx("option",{value:w,children:w},w))]});if(!a||a==="-")return e.jsx("span",{className:"text-admin-text/40",children:"-"});const k=fe[a]||"bg-gray-500/20 text-gray-400 border-gray-500/40";return e.jsx("button",{onClick:()=>R(d,l,a,String(t.제품명||"")),children:e.jsx(he,{variant:"outline",className:q("font-medium text-[11px] px-2 py-0 cursor-pointer",k),children:a})})}if(p.type==="tag-combobox"||p.type==="tags"){if(L){const w=[...new Set(r.flatMap(O=>String(O[l]||"").split(",").map(P=>P.trim()).filter(Boolean)))].sort((O,P)=>O.localeCompare(P,"ko"));return e.jsx(et,{value:D,options:w,onCommit:O=>{const P=String(r.find($=>$._rowIndex===d)?.[l]||"");if(O!==P){const $=c.indexOf(l);$!==-1&&C(d,$,O)}g(null),j("")},onCancel:()=>{g(null),j("")}})}if(!a||a==="-")return e.jsx("button",{onClick:()=>R(d,l,a,String(t.제품명||"")),className:"text-[12px] text-admin-text/40 hover:text-purple-400 transition-colors",children:"+ 카테고리 추가"});const k=a.split(",").map(w=>w.trim()).filter(Boolean);return e.jsx("button",{onClick:()=>R(d,l,a,String(t.제품명||"")),className:"flex flex-wrap gap-1",children:k.map((w,O)=>e.jsx("span",{className:"text-[11px] px-1.5 py-0.5 rounded bg-purple-500/15 text-purple-400 border border-purple-500/30",children:w},O))})}if(p.type==="link")return!a||a==="-"?e.jsx("span",{className:"text-admin-text/40",children:"-"}):e.jsx("a",{href:a,target:"_blank",rel:"noopener noreferrer",className:"text-admin-accent/70 hover:text-admin-accent transition-colors",children:e.jsx(te,{className:"h-3.5 w-3.5 mx-auto"})});if(p.type==="editable-link")return L?e.jsx("input",{type:"text",value:D,onChange:k=>j(k.target.value),onBlur:()=>W(d,l),onKeyDown:k=>i(k,d,l),autoFocus:!0,placeholder:"https://...",className:"w-full px-1.5 py-0.5 bg-admin-bg border border-admin-accent rounded text-white text-[13px] focus:outline-none"}):!a||a==="-"?e.jsx("button",{onClick:()=>R(d,l,a,String(t.제품명||"")),className:"text-[12px] text-admin-text/40 hover:text-white transition-colors",children:"+ URL 추가"}):e.jsxs("div",{className:"flex items-center gap-1.5 min-w-0",children:[e.jsx("button",{onClick:()=>R(d,l,a,String(t.제품명||"")),className:"truncate text-[13px] text-white/70 hover:text-white transition-colors min-w-0",title:a,children:(()=>{try{return new URL(a).hostname.replace("www.","")}catch{return a}})()}),e.jsx("a",{href:a,target:"_blank",rel:"noopener noreferrer",onClick:k=>k.stopPropagation(),className:"shrink-0 text-admin-accent/60 hover:text-admin-accent transition-colors",children:e.jsx(te,{className:"h-3 w-3"})})]});if(p.type==="influencers"){if(!a||a==="-")return e.jsx("button",{onClick:()=>o(d,"",String(t.제품명||"")),className:"text-[12px] text-admin-text/40 hover:text-admin-accent transition-colors",children:"+ 인플루언서 추가"});const k=a.split(",").map(w=>w.trim()).filter(Boolean);return e.jsxs("button",{onClick:()=>o(d,a,String(t.제품명||"")),className:"flex flex-wrap gap-1 text-left",children:[k.slice(0,3).map((w,O)=>e.jsxs("span",{className:"text-[11px] px-1.5 py-0.5 rounded bg-teal-500/15 text-teal-400 border border-teal-500/30",children:["@",w]},O)),k.length>3&&e.jsxs("span",{className:"text-[11px] px-1.5 py-0.5 rounded bg-admin-bg text-admin-text",children:["+",k.length-3]})]})}return p.type==="editable-memo"?e.jsxs("button",{onClick:()=>f(d,a,String(t.제품명||""),l),className:"w-full text-left group/memo relative",children:[e.jsx("span",{className:"block truncate text-[13px] text-white/90 max-w-full",children:a||e.jsx("span",{className:"text-admin-text/40",children:"메모 추가..."})}),e.jsx("span",{className:"absolute top-0 right-0 opacity-0 group-hover/memo:opacity-100 transition-opacity",children:e.jsx(Ae,{className:"h-3 w-3 text-admin-accent"})})]}):e.jsx("span",{className:"text-[13px]",children:a||"-"})},T=()=>{N.current||(N.current=!0,F.current&&u.current&&(u.current.scrollLeft=F.current.scrollLeft),requestAnimationFrame(()=>{N.current=!1}))},G=()=>{N.current||(N.current=!0,F.current&&u.current&&(F.current.scrollLeft=u.current.scrollLeft),requestAnimationFrame(()=>{N.current=!1}))},se=n.useMemo(()=>e.jsxs("colgroup",{children:[I.map(t=>e.jsx("col",{style:{width:_.pctWidths[t]}},t)),e.jsx("col",{style:{width:_.pctWidths.__actions}})]}),[I,_.pctWidths]),ae=()=>e.jsx("div",{className:"md:hidden space-y-3",children:z.map(t=>{const l=String(t.제품명||""),d=String(t.업체명||""),a=String(t.상태||""),p=String(t["제품 카테고리"]||""),L=String(t.공식몰||""),k=String(t.샘플피드||""),w=String(t.제안서||""),O=String(t.담당자||""),P=String(t["담당자 전화"]||""),$=String(t["담당자 이메일"]||""),b=String(t["핏한 인플루언서"]||""),M=String(t.소싱메모||""),E=String(t.제품메모||""),H=fe[a]||"bg-gray-500/20 text-gray-400 border-gray-500/40",ee=p.split(",").map(U=>U.trim()).filter(Boolean),Q=b.split(",").map(U=>U.trim()).filter(Boolean);return e.jsxs("div",{className:"bg-admin-card border border-admin-border rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("span",{className:"text-sm font-medium text-white truncate block",children:l||"-"}),d&&e.jsx("span",{className:"text-[12px] text-admin-text",children:d})]}),e.jsxs("div",{className:"flex items-center gap-1.5 shrink-0",children:[a&&e.jsx(he,{variant:"outline",className:q("text-[10px] px-1.5 py-0",H),children:a}),e.jsx("button",{onClick:()=>m(t._rowIndex,l),className:"p-1 text-admin-text/40 hover:text-admin-accent transition-colors",title:"제안서 만들기",children:e.jsx(pe,{className:"h-3.5 w-3.5"})}),e.jsx("button",{onClick:()=>x(t._rowIndex,l),className:"p-1 text-admin-text/30 hover:text-red-400 transition-colors",children:e.jsx(be,{className:"h-3.5 w-3.5"})})]})]}),ee.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1 mb-2",children:ee.map((U,X)=>e.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-purple-500/15 text-purple-400 border border-purple-500/30",children:U},X))}),e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[L&&e.jsxs("a",{href:L,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-[11px] text-admin-accent/70 hover:text-admin-accent",children:[e.jsx(te,{className:"h-3 w-3"}),"공식몰"]}),k&&e.jsxs("a",{href:k,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-[11px] text-admin-accent/70 hover:text-admin-accent",children:[e.jsx(te,{className:"h-3 w-3"}),"샘플"]}),w&&e.jsxs("a",{href:w,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-[11px] text-admin-accent/70 hover:text-admin-accent",children:[e.jsx(te,{className:"h-3 w-3"}),"제안서"]}),!L&&!k&&!w&&e.jsx("span",{className:"text-[11px] text-admin-text/30",children:"링크 없음"})]}),(O||P||$)&&e.jsxs("div",{className:"flex flex-wrap items-center gap-x-3 gap-y-1 mb-2 text-[11px] text-admin-text",children:[O&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Qe,{className:"h-3 w-3"}),O]}),P&&e.jsxs("a",{href:`tel:${P}`,className:"flex items-center gap-1 hover:text-white",children:[e.jsx(Ye,{className:"h-3 w-3"}),P]}),$&&e.jsxs("a",{href:`mailto:${$}`,className:"flex items-center gap-1 hover:text-white truncate",children:[e.jsx(Fe,{className:"h-3 w-3"}),$]})]}),e.jsx("button",{onClick:()=>o(t._rowIndex,b,l),className:"flex flex-wrap items-center gap-1 mb-2 w-full text-left",children:Q.length>0?e.jsxs(e.Fragment,{children:[Q.slice(0,3).map((U,X)=>e.jsxs("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-teal-500/15 text-teal-400 border border-teal-500/30",children:["@",U]},X)),Q.length>3&&e.jsxs("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-admin-bg text-admin-text",children:["+",Q.length-3]})]}):e.jsx("span",{className:"text-[11px] text-admin-text/40",children:"+ 인플루언서 추가"})}),e.jsx("div",{className:"flex gap-2",children:["소싱메모","제품메모"].map(U=>{const X=U==="소싱메모"?M:E;return e.jsxs("button",{onClick:()=>f(t._rowIndex,X,l,U),className:"flex-1 flex items-start gap-1 bg-admin-bg/40 rounded px-2 py-1.5 text-left min-w-0",children:[e.jsx(Pe,{className:"h-3 w-3 text-admin-text/50 shrink-0 mt-0.5"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("span",{className:"text-[10px] text-admin-text/50 block",children:U==="소싱메모"?"소싱":"제품"}),e.jsx("span",{className:"text-[11px] text-white/70 line-clamp-1 block",children:X||e.jsx("span",{className:"text-admin-text/30",children:"메모 추가..."})})]})]},U)})})]},t._rowIndex)})});return e.jsxs("div",{children:[ae(),e.jsxs("div",{className:"hidden md:block",children:[e.jsx("div",{className:"sticky z-40 border border-admin-border border-b-0 rounded-t-lg bg-[#14142a]",style:{top:v},children:e.jsx("div",{ref:F,className:"overflow-x-auto",style:{scrollbarWidth:"none"},onScroll:T,children:e.jsxs("table",{className:"w-full text-sm border-collapse",style:{minWidth:_.total,tableLayout:"fixed"},children:[se,e.jsx("thead",{children:e.jsxs("tr",{className:"bg-[#14142a]",children:[I.map((t,l)=>{const d=Z[t],a=l<ne,p=l===ne-1;return e.jsx("th",{style:a?{left:_.stickyOffsets[l]}:void 0,className:q("px-2.5 py-2.5 text-[11px] uppercase tracking-wider text-admin-text/70 font-semibold border-r border-admin-border/50 last:border-r-0 group/th",a&&"sticky z-40 bg-[#14142a]",p&&"shadow-[3px_0_8px_rgba(0,0,0,0.35)] border-r-admin-border",d?.align==="center"&&"text-center",d?.align==="right"&&"text-right"),children:e.jsxs("button",{onClick:()=>K(t),className:"flex items-center gap-1 w-full hover:text-white transition-colors",children:[e.jsx("span",{className:"whitespace-nowrap",children:d?.label||t}),e.jsx(st,{column:t,sortConfig:s})]})},t)}),e.jsx("th",{className:"px-2 py-2.5 text-[11px] text-admin-text/70 text-center w-12"})]})})]})})}),e.jsx("div",{className:"border border-admin-border border-t-0 rounded-b-lg overflow-hidden",children:e.jsx("div",{ref:u,className:"overflow-auto",style:{maxHeight:"calc(100vh - 220px)"},onScroll:G,children:e.jsxs("table",{className:"w-full text-sm border-collapse",style:{minWidth:_.total,tableLayout:"fixed"},children:[se,e.jsx("tbody",{children:z.map((t,l)=>e.jsxs("tr",{className:q("border-b border-admin-border/40 transition-colors hover:bg-white/[0.02]",l%2===0?"bg-[#11111f]":"bg-[#151528]"),children:[I.map((d,a)=>{const p=Z[d],L=a<ne,k=a===ne-1,w=l%2===0?"#11111f":"#151528";return e.jsx("td",{style:L?{left:_.stickyOffsets[a],backgroundColor:w}:void 0,className:q("px-2.5 py-2 text-white border-r border-admin-border/30 last:border-r-0 align-top",L&&"sticky z-30",k&&"shadow-[3px_0_8px_rgba(0,0,0,0.35)] border-r-admin-border/60",p?.align==="center"&&"text-center",p?.align==="right"&&"text-right"),children:y(t,d,t._rowIndex)},d)}),e.jsx("td",{className:"px-1 py-2 text-center align-top",children:e.jsxs("div",{className:"flex items-center justify-center gap-0.5",children:[e.jsx("button",{onClick:()=>m(t._rowIndex,String(t.제품명||"")),className:"p-1 text-admin-text/40 hover:text-admin-accent transition-colors",title:"제안서 만들기",children:e.jsx(pe,{className:"h-3.5 w-3.5"})}),e.jsx("button",{onClick:()=>x(t._rowIndex,String(t.제품명||"")),className:"p-1 text-admin-text/40 hover:text-red-400 transition-colors",children:e.jsx(be,{className:"h-3.5 w-3.5"})})]})})]},t._rowIndex))})]})})})]})]})}const rt=n.memo(at);function lt({isOpen:r,onClose:c,onSubmit:h,headers:C,isPending:f}){const[o,x]=n.useState({제품명:"",업체명:"",상태:"진행 전","제품 카테고리":"",공식몰:"",샘플피드:"",담당자:"","담당자 전화":"","담당자 이메일":"","핏한 인플루언서":"",제안서:"",소싱메모:"",제품메모:""}),m=(s,S)=>{x(A=>({...A,[s]:S}))},v=()=>{if(!o.제품명.trim())return;const s=C.map(S=>S==="No."?"":o[S]||"");h(s),x({제품명:"",업체명:"",상태:"진행 전","제품 카테고리":"",공식몰:"",샘플피드:"",담당자:"","담당자 전화":"","담당자 이메일":"","핏한 인플루언서":"",제안서:"",소싱메모:"",제품메모:""}),c()};return e.jsx(je,{open:r,onOpenChange:c,children:e.jsxs(we,{className:"bg-admin-card border-admin-border text-white max-w-lg max-h-[85vh] overflow-y-auto",children:[e.jsx(Ne,{children:e.jsx(ve,{className:"text-white",children:"제품 등록"})}),e.jsxs("div",{className:"space-y-3 py-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-admin-text mb-1 block",children:"제품명 *"}),e.jsx(V,{value:o.제품명,onChange:s=>m("제품명",s.target.value),placeholder:"제품명을 입력하세요",className:"bg-admin-bg border-admin-border text-white placeholder:text-admin-text"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-admin-text mb-1 block",children:"업체명"}),e.jsx(V,{value:o.업체명,onChange:s=>m("업체명",s.target.value),placeholder:"업체명",className:"bg-admin-bg border-admin-border text-white placeholder:text-admin-text"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-admin-text mb-1 block",children:"상태"}),e.jsx("select",{value:o.상태,onChange:s=>m("상태",s.target.value),className:"w-full h-9 px-3 rounded-md bg-admin-bg border border-admin-border text-white text-sm focus:outline-none focus:ring-2 focus:ring-admin-accent",children:ie.map(s=>e.jsx("option",{value:s,children:s},s))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-admin-text mb-1 block",children:"제품 카테고리"}),e.jsx(V,{value:o["제품 카테고리"],onChange:s=>m("제품 카테고리",s.target.value),placeholder:"콤마로 구분 (예: 식품, 간식)",className:"bg-admin-bg border-admin-border text-white placeholder:text-admin-text"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-admin-text mb-1 block",children:"공식몰 URL"}),e.jsx(V,{value:o.공식몰,onChange:s=>m("공식몰",s.target.value),placeholder:"https://...",className:"bg-admin-bg border-admin-border text-white placeholder:text-admin-text"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-admin-text mb-1 block",children:"샘플피드 URL"}),e.jsx(V,{value:o.샘플피드,onChange:s=>m("샘플피드",s.target.value),placeholder:"https://...",className:"bg-admin-bg border-admin-border text-white placeholder:text-admin-text"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-admin-text mb-1 block",children:"제안서 URL"}),e.jsx(V,{value:o.제안서,onChange:s=>m("제안서",s.target.value),placeholder:"https://...",className:"bg-admin-bg border-admin-border text-white placeholder:text-admin-text"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-admin-text mb-1 block",children:"담당자"}),e.jsx(V,{value:o.담당자,onChange:s=>m("담당자",s.target.value),placeholder:"담당자명",className:"bg-admin-bg border-admin-border text-white placeholder:text-admin-text"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-admin-text mb-1 block",children:"담당자 전화"}),e.jsx(V,{value:o["담당자 전화"],onChange:s=>m("담당자 전화",s.target.value),placeholder:"010-0000-0000",className:"bg-admin-bg border-admin-border text-white placeholder:text-admin-text"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-admin-text mb-1 block",children:"담당자 이메일"}),e.jsx(V,{value:o["담당자 이메일"],onChange:s=>m("담당자 이메일",s.target.value),placeholder:"email@example.com",className:"bg-admin-bg border-admin-border text-white placeholder:text-admin-text"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-admin-text mb-1 block",children:"소싱메모"}),e.jsx("textarea",{value:o.소싱메모,onChange:s=>m("소싱메모",s.target.value),placeholder:"소싱 관련 메모...",className:"w-full h-20 px-3 py-2 bg-admin-bg border border-admin-border rounded-md text-white placeholder:text-admin-text focus:outline-none focus:ring-2 focus:ring-admin-accent resize-none text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-admin-text mb-1 block",children:"제품메모"}),e.jsx("textarea",{value:o.제품메모,onChange:s=>m("제품메모",s.target.value),placeholder:"제품 관련 메모...",className:"w-full h-20 px-3 py-2 bg-admin-bg border border-admin-border rounded-md text-white placeholder:text-admin-text focus:outline-none focus:ring-2 focus:ring-admin-accent resize-none text-sm"})]})]}),e.jsxs(ye,{children:[e.jsx(B,{variant:"outline",onClick:c,className:"bg-transparent border-admin-border text-white hover:bg-admin-bg",children:"취소"}),e.jsx(B,{onClick:v,disabled:!o.제품명.trim()||f,className:"bg-admin-accent text-admin-bg hover:bg-admin-accent/90",children:f?"등록 중...":"등록"})]})]})})}function ft(){const r=Me(),{data:c,isLoading:h,error:C}=Be(),{data:f}=Re(),o=ze(),x=$e(),m=He(),v=Ve(),s=n.useRef(null),[S,A]=n.useState(0);n.useEffect(()=>{const b=s.current;if(!b)return;const M=new ResizeObserver(()=>{A(b.offsetHeight)});return M.observe(b),()=>M.disconnect()},[]);const[g,D]=n.useState(""),[j,I]=n.useState([]),[_,z]=n.useState([]),[F,u]=n.useState(!1),[N,K]=n.useState({isOpen:!1,rowIndex:-1,value:"",name:"",column:""}),[R,W]=n.useState({isOpen:!1,rowIndex:-1,value:"",name:""}),[i,y]=n.useState({isOpen:!1,rowIndex:-1,name:""}),T=n.useMemo(()=>c?.data??[],[c?.data]),G=c?.headers||[],se=n.useMemo(()=>Ce.filter(b=>!Se.includes(b)),[]),ae=n.useMemo(()=>T.filter(b=>{if(g){const M=g.toLowerCase(),E=String(b.제품명||"").toLowerCase(),H=String(b.업체명||"").toLowerCase();if(!E.includes(M)&&!H.includes(M))return!1}if(j.length>0&&!j.includes(String(b.상태||"")))return!1;if(_.length>0){const M=String(b["제품 카테고리"]||"").split(",").map(E=>E.trim());if(!_.some(E=>M.includes(E)))return!1}return!0}),[T,g,j,_]),t=n.useCallback(()=>o.mutate(),[o]),l=n.useCallback(b=>{x.mutate({values:b})},[x]),d=n.useCallback((b,M,E)=>{m.mutate({rowIndex:b,columnIndex:M,value:E})},[m]),a=n.useCallback((b,M,E,H)=>{const ee={소싱메모:`[소싱메모]
- `,제품메모:`[제품메모]
- `},Q=M.trim()?M:ee[H]||"";K({isOpen:!0,rowIndex:b,value:Q,name:E,column:H})},[]),p=n.useCallback(b=>{const M=G.indexOf(N.column);M!==-1&&m.mutate({rowIndex:N.rowIndex,columnIndex:M,value:b}),K({isOpen:!1,rowIndex:-1,value:"",name:"",column:""})},[G,N.column,N.rowIndex,m]),L=n.useCallback((b,M,E)=>{W({isOpen:!0,rowIndex:b,value:M,name:E})},[]),k=n.useCallback(b=>{const M=b.map(H=>H.인스타ID||H["인스타 이름"]).join(", "),E=G.indexOf("핏한 인플루언서");E!==-1&&m.mutate({rowIndex:R.rowIndex,columnIndex:E,value:M}),W({isOpen:!1,rowIndex:-1,value:"",name:""})},[G,R.rowIndex,m]),w=n.useCallback((b,M)=>{y({isOpen:!0,rowIndex:b,name:M})},[]),O=n.useCallback(()=>{v.mutate(i.rowIndex),y({isOpen:!1,rowIndex:-1,name:""})},[v,i.rowIndex]),P=n.useCallback(b=>{n.startTransition(()=>{D(b)})},[]),$=(b,M)=>{const E=T.find(Y=>Y._rowIndex===b);if(!E)return;const H=String(E.업체명||""),Q=String(E["핏한 인플루언서"]||"").split(",").map(Y=>Y.trim()).filter(Boolean),U=f?.data||[],X=Q.map(Y=>{const J=U.find(re=>String(re.인스타ID||"")===Y);return J?{id:crypto.randomUUID(),name:String(J["인스타 이름"]||Y),followers:oe(String(J.팔로워||"")),category:String(J["카테고리(대)"]||""),profileUrl:String(J["프로필 링크"]||`https://instagram.com/${Y}`),avgViews:oe(String(J["최근 10 평균 릴스 조회수"]||"")),engagementRate:"",maxComments:oe(String(J["공구 최대댓글수"]||"")),commentActivity:(()=>{const re=String(J.댓글활동여부||"").trim().toUpperCase();return re==="Y"||re==="O"?"Y":"N"})()}:{id:crypto.randomUUID(),name:Y,followers:"",category:"",profileUrl:`https://instagram.com/${Y}`,avgViews:"",engagementRate:"",maxComments:"",commentActivity:""}});r("/admin/proposal",{state:{productName:M,brandName:H,influencers:X}})};return C?e.jsx("div",{className:"max-w-[1800px] mx-auto mt-8",children:e.jsxs("div",{className:"bg-red-500/20 border border-red-500/40 rounded-lg p-6 text-center",children:[e.jsx("p",{className:"text-red-400 font-semibold",children:"데이터를 불러오는데 실패했습니다"}),e.jsx("p",{className:"text-admin-text text-sm mt-2",children:String(C)}),e.jsx(B,{onClick:t,className:"mt-4",children:"다시 시도"})]})}):e.jsxs("div",{className:"max-w-[1800px] mx-auto mt-4 md:mt-8",children:[e.jsxs("div",{className:"hidden md:flex md:items-center md:justify-between mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"제품소싱 관리"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(B,{onClick:()=>u(!0),className:"bg-admin-accent text-admin-bg hover:bg-admin-accent/90",children:[e.jsx(me,{className:"h-4 w-4 mr-2"}),"제품 추가"]}),e.jsxs(B,{onClick:t,disabled:o.isPending,variant:"outline",className:"bg-transparent border-admin-border text-white hover:bg-admin-bg",children:[e.jsx(ue,{className:`h-4 w-4 mr-2 ${o.isPending?"animate-spin":""}`}),"새로고침"]})]})]}),e.jsxs("div",{ref:s,className:"sticky top-0 z-50 bg-admin-bg py-2 md:pt-2 md:pb-4 -mx-3 px-3 md:-mx-6 md:px-6 shadow-[0_4px_12px_rgba(0,0,0,0.3)]",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2 md:hidden",children:[e.jsx("h1",{className:"text-lg font-bold text-white",children:"제품소싱 관리"}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(B,{size:"sm",onClick:()=>u(!0),className:"bg-admin-accent text-admin-bg hover:bg-admin-accent/90 h-8 px-2",children:e.jsx(me,{className:"h-4 w-4"})}),e.jsx(B,{size:"sm",onClick:t,disabled:o.isPending,variant:"outline",className:"bg-transparent border-admin-border text-white hover:bg-admin-bg h-8 px-2",children:e.jsx(ue,{className:`h-4 w-4 ${o.isPending?"animate-spin":""}`})})]})]}),e.jsx(Xe,{searchQuery:g,onSearchChange:P,selectedStatuses:j,onStatusesChange:I,selectedCategories:_,onCategoriesChange:z,resultCount:ae.length,totalCount:T.length})]}),h?e.jsx("div",{className:"flex items-center justify-center h-64 bg-admin-card rounded-lg border border-admin-border",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-admin-accent mx-auto mb-4"}),e.jsx("p",{className:"text-admin-text",children:"데이터를 불러오는 중..."})]})}):e.jsx(rt,{data:ae,headers:G,visibleColumns:se,onCellEdit:d,onMemoEdit:a,onInfluencerEdit:L,onDelete:w,onCreateProposal:$,stickyTopOffset:S}),e.jsx(lt,{isOpen:F,onClose:()=>u(!1),onSubmit:l,headers:G,isPending:x.isPending}),e.jsx(Te,{isOpen:N.isOpen,onClose:()=>K({isOpen:!1,rowIndex:-1,value:"",name:"",column:""}),initialValue:N.value,onSave:p,influencerName:`${N.name} — ${N.column}`}),e.jsx(Ue,{open:R.isOpen,onClose:()=>W({isOpen:!1,rowIndex:-1,value:"",name:""}),onConfirm:k,initialSelectedIds:R.value?R.value.split(",").map(b=>b.trim()).filter(Boolean):void 0}),e.jsx(je,{open:i.isOpen,onOpenChange:()=>y({isOpen:!1,rowIndex:-1,name:""}),children:e.jsxs(we,{className:"bg-admin-card border-admin-border text-white max-w-sm",children:[e.jsx(Ne,{children:e.jsx(ve,{className:"text-white",children:"제품 삭제"})}),e.jsxs("p",{className:"text-sm text-admin-text py-4",children:[e.jsx("span",{className:"text-white font-medium",children:i.name||"이 제품"}),"을(를) 삭제하시겠습니까?",e.jsx("br",{}),"이 작업은 되돌릴 수 없습니다."]}),e.jsxs(ye,{children:[e.jsx(B,{variant:"outline",onClick:()=>y({isOpen:!1,rowIndex:-1,name:""}),className:"bg-transparent border-admin-border text-white hover:bg-admin-bg",children:"취소"}),e.jsx(B,{onClick:O,disabled:v.isPending,className:"bg-red-500 text-white hover:bg-red-600",children:v.isPending?"삭제 중...":"삭제"})]})]})})]})}export{ft as default};
