import{r as i,j as e,a as ze}from"./index-DS07Q32S.js";import{c as Z,S as Me,I as he,a as Te,G as Oe,X as Se,D as ke,H as Ce,C as re,b as C,d as Ee,f as $,B as D,e as fe,g as xe,h as Fe,i as Pe,j as Re,k as Ae,l as Ve,t as He,u as Ue,m as $e,n as Ge,o as qe,p as Be,q as We,r as Ke,s as Ye}from"./useInfluencerData-BUSAMa2M.js";import{P as De,E as Qe,B as _e,A as Xe,a as Je,b as Ze,M as Ie,R as et,c as tt,T as st}from"./MemoEditModal-BCnKbb26.js";import{M as q,U as at,C as nt}from"./MultiSelect-BffyFost.js";import{u as rt,a as it,b as lt,f as J,c as ct}from"./useAnalyzerData-C80MbCh2.js";import"./useQuery-CRDnl9p6.js";const dt=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],ot=Z("clipboard-list",dt);const mt=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],xt=Z("clock",mt);const ht=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],ut=Z("save",ht);const bt=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],pt=Z("settings",bt);const ft=[["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M12 21v-9",key:"17s77i"}],["path",{d:"M12 8V3",key:"13r4qs"}],["path",{d:"M17 16h4",key:"h1uq16"}],["path",{d:"M19 12V3",key:"o1uvq1"}],["path",{d:"M19 21v-5",key:"qua636"}],["path",{d:"M3 14h4",key:"bcjad9"}],["path",{d:"M5 10V3",key:"cb8scm"}],["path",{d:"M5 21v-7",key:"1w1uti"}]],gt=Z("sliders-vertical",ft);const jt=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Nt=Z("sparkles",jt);const vt=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Ne=Z("star",vt);function yt({searchQuery:s,onSearchChange:l,categoryOptions:p,selectedCategories:f,onCategoriesChange:h,selectedGrades:x,onGradesChange:g,activityOptions:u,selectedActivity:S,onActivityChange:m,updateStatusOptions:w,selectedUpdateStatus:b,onUpdateStatusChange:z,resultCount:E,totalCount:M,showFavoritesOnly:v,onFavoritesToggle:T}){const[O,F]=i.useState(s),[_,B]=i.useState(!1);i.useEffect(()=>{const y=setTimeout(()=>{l(O)},250);return()=>clearTimeout(y)},[O,l]);const I=f.length+x.length+S.length+b.length,V=()=>{h([]),g([]),m([]),z([])};return e.jsxs("div",{children:[e.jsxs("div",{className:"md:hidden",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Me,{className:"absolute left-2.5 top-1/2 -translate-y-1/2 h-3.5 w-3.5 text-admin-text"}),e.jsx(he,{type:"text",placeholder:"ID ÎòêÎäî Ïù¥Î¶Ñ Í≤ÄÏÉâ...",value:O,onChange:y=>F(y.target.value),className:"pl-8 h-8 text-[13px] bg-admin-card border-admin-border text-white placeholder:text-admin-text"})]}),e.jsx("button",{onClick:T,className:`flex items-center justify-center h-8 w-8 rounded-md border shrink-0 transition-colors ${v?"bg-amber-500/20 border-amber-500/40 text-amber-400":"bg-admin-card border-admin-border text-admin-text/40"}`,children:e.jsx(Ne,{className:`h-3.5 w-3.5 ${v?"fill-amber-400":""}`})}),e.jsxs("button",{onClick:()=>B(!_),className:`relative flex items-center justify-center h-8 w-8 rounded-md border shrink-0 transition-colors ${_||I>0?"bg-admin-accent/15 border-admin-accent/40 text-admin-accent":"bg-admin-card border-admin-border text-admin-text"}`,children:[e.jsx(Te,{className:"h-3.5 w-3.5"}),I>0&&e.jsx("span",{className:"absolute -top-1.5 -right-1.5 min-w-[16px] h-4 flex items-center justify-center rounded-full bg-admin-accent text-[10px] font-bold text-admin-bg px-1",children:I})]}),e.jsxs("span",{className:"text-[11px] text-admin-text tabular-nums shrink-0",children:[e.jsx("span",{className:"text-white font-semibold",children:E}),"/",M]})]}),_&&e.jsxs("div",{className:"mt-2 flex flex-col gap-2",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(q,{options:p,selected:f,onChange:h,placeholder:"Ïπ¥ÌÖåÍ≥†Î¶¨"}),e.jsx(q,{options:Oe,selected:x,onChange:g,placeholder:"Îì±Í∏â"}),e.jsx(q,{options:u,selected:S,onChange:m,placeholder:"ÌôúÎèô"}),e.jsx(q,{options:w,selected:b,onChange:z,placeholder:"ÏóÖÎç∞Ïù¥Ìä∏"})]}),I>0&&e.jsxs("button",{onClick:V,className:"flex items-center gap-1 text-[11px] text-admin-text hover:text-admin-accent transition-colors self-end",children:[e.jsx(Se,{className:"h-3 w-3"}),"ÌïÑÌÑ∞ Ï¥àÍ∏∞Ìôî"]})]})]}),e.jsxs("div",{className:"hidden md:block space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-5 gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Me,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-admin-text"}),e.jsx(he,{type:"text",placeholder:"ID ÎòêÎäî Ïù¥Î¶Ñ Í≤ÄÏÉâ...",value:O,onChange:y=>F(y.target.value),className:"pl-10 bg-admin-card border-admin-border text-white placeholder:text-admin-text"})]}),e.jsx(q,{options:p,selected:f,onChange:h,placeholder:"Ïπ¥ÌÖåÍ≥†Î¶¨ ÏÑ†ÌÉù"}),e.jsx(q,{options:Oe,selected:x,onChange:g,placeholder:"Îì±Í∏â ÏÑ†ÌÉù"}),e.jsx(q,{options:u,selected:S,onChange:m,placeholder:"ÌôúÎèô ÌïÑÌÑ∞"}),e.jsx(q,{options:w,selected:b,onChange:z,placeholder:"ÏóÖÎç∞Ïù¥Ìä∏ ÏÉÅÌÉú"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-admin-text",children:[e.jsx("span",{className:"text-white font-semibold",children:E})," /"," ",M," Í±¥"]}),e.jsxs("button",{onClick:T,className:`flex items-center gap-1.5 px-3 py-1 rounded-full text-[12px] font-medium border transition-colors ${v?"bg-amber-500/20 border-amber-500/40 text-amber-400":"bg-admin-card border-admin-border text-admin-text hover:text-white"}`,children:[e.jsx(Ne,{className:`h-3.5 w-3.5 ${v?"fill-amber-400":""}`}),"Ï¶êÍ≤®Ï∞æÍ∏∞Îßå"]})]})]})]})}function wt(s){const l=s.reduce((x,g)=>x+(re[g]?.width||120),0),p={},f=[];let h=0;for(let x=0;x<s.length;x++){const g=re[s[x]]?.width||120,u=g/l*100;p[s[x]]=`${u}%`,x<xe&&(f.push(`${h/l*100}%`),h+=g)}return{total:l,pctWidths:p,stickyOffsets:f}}function kt({data:s,headers:l,visibleColumns:p,onCellEdit:f,onMemoEdit:h,highlightId:x,stickyTopOffset:g=0,mode:u="manage",selectedIds:S,disabledIds:m,onToggleSelect:w}){const[b,z]=i.useState({column:null,direction:null});i.useEffect(()=>{if(!x)return;const t=setTimeout(()=>{const r=document.querySelector(`[data-insta-id="${CSS.escape(x)}"]`);r&&r.scrollIntoView({behavior:"smooth",block:"center"})},100);return()=>clearTimeout(t)},[x]);const[E,M]=i.useState(null),[v,T]=i.useState(""),O=i.useMemo(()=>ke.filter(t=>p.includes(t)&&!Ce.includes(t)),[p]),F=i.useMemo(()=>wt(O),[O]),_=i.useMemo(()=>!b.column||!b.direction?s:[...s].sort((t,r)=>{const c=String(t[b.column]||""),a=String(r[b.column]||""),d=parseFloat(c.replace(/,/g,"")),k=parseFloat(a.replace(/,/g,""));return!isNaN(d)&&!isNaN(k)?b.direction==="asc"?d-k:k-d:b.direction==="asc"?c.localeCompare(a,"ko"):a.localeCompare(c,"ko")}),[s,b]),B=t=>{z(r=>r.column!==t?{column:t,direction:"asc"}:r.direction==="asc"?{column:t,direction:"desc"}:{column:null,direction:null})},I=(t,r,c,a)=>{if(u==="select")return;const d=re[r];d&&(d.type==="editable-memo"?h(t,c,a):(d.type==="editable-number"||d.type==="editable-boolean")&&(M({rowIndex:t,column:r}),T(c)))},V=(t,r)=>{if(E?.rowIndex===t&&E?.column===r){const c=l.indexOf(r);c!==-1&&f(t,c,v),M(null),T("")}},y=(t,r,c)=>{t.key==="Enter"?V(r,c):t.key==="Escape"&&(M(null),T(""))},H=(t,r,c)=>{const a=String(t[r]||""),d=re[r];if(!d)return a;const k=l.indexOf(r),R=E?.rowIndex===c&&E?.column===r;if(d.type==="editable-memo")return e.jsxs("button",{onClick:()=>I(c,r,a,t["Ïù∏Ïä§ÌÉÄ Ïù¥Î¶Ñ"]),className:"w-full text-left group/memo relative",children:[e.jsx("span",{className:"whitespace-pre-wrap break-words text-[13px] leading-relaxed text-white/90",children:a||"-"}),e.jsx("span",{className:"absolute top-0 right-0 opacity-0 group-hover/memo:opacity-100 transition-opacity",children:e.jsx(De,{className:"h-3 w-3 text-admin-accent"})})]});if(d.type==="editable-number"){const j=a&&a!=="-"?a:"0";return R?e.jsx("input",{type:"text",value:v,onChange:L=>T(L.target.value),onBlur:()=>V(c,r),onKeyDown:L=>y(L,c,r),autoFocus:!0,className:"w-full px-1.5 py-0.5 bg-admin-bg border border-admin-accent rounded text-white text-right text-[13px] focus:outline-none"}):e.jsx("button",{onClick:()=>I(c,r,a,""),className:"w-full text-right tabular-nums text-[13px] text-admin-accent/80 hover:text-admin-accent border-b border-dashed border-admin-border hover:border-admin-accent/50 transition-colors",children:$(j)})}if(d.type==="editable-boolean"){const j=a.trim().toUpperCase()==="ON";return e.jsx(D,{size:"sm",variant:"outline",onClick:()=>{f(c,k,j?"OFF":"ON")},className:C("h-6 px-2 text-[11px] font-semibold rounded-full",j?"bg-admin-success/15 text-admin-success border-admin-success/30 hover:bg-admin-success/25":"bg-gray-500/15 text-gray-500 border-gray-500/30 hover:bg-gray-500/25"),children:j?"ON":"OFF"})}if(d.type==="favorite"){const j=a.trim().toUpperCase()==="TRUE";return e.jsx("button",{onClick:()=>{const L=l.indexOf(r);L!==-1&&f(c,L,j?"FALSE":"TRUE")},className:"flex items-center justify-center w-full",children:e.jsx(Ne,{className:C("h-4 w-4 transition-colors",j?"fill-amber-400 text-amber-400":"text-admin-text/30 hover:text-amber-400/60")})})}if(d.type==="id"){const j=t["ÌîÑÎ°úÌïÑ ÎßÅÌÅ¨"];return j&&r==="Ïù∏Ïä§ÌÉÄID"?e.jsx("a",{href:j,target:"_blank",rel:"noopener noreferrer",className:"text-admin-accent hover:underline text-[13px] font-medium",children:a}):e.jsx("span",{className:"text-[13px] text-admin-text",children:a})}if(d.type==="name")return e.jsx("span",{className:"text-[13px] text-white whitespace-normal break-words leading-snug",children:a});if(d.type==="link")return!a||a==="-"?e.jsx("span",{className:"text-admin-text/40",children:"-"}):e.jsx("a",{href:a,target:"_blank",rel:"noopener noreferrer",className:"text-admin-accent/70 hover:text-admin-accent transition-colors",children:e.jsx(Qe,{className:"h-3.5 w-3.5 mx-auto"})});if(d.type==="number")return e.jsx("span",{className:"tabular-nums text-[13px]",children:$(a)});if(d.type==="tag")return!a||a==="-"?e.jsx("span",{className:"text-admin-text/40",children:"-"}):e.jsx("span",{className:"text-[12px] text-admin-purple whitespace-normal break-words",children:a});if(d.type==="boolean"){const j=a.trim().toUpperCase()==="Y"||a.trim()==="O";return e.jsx("span",{className:C("text-[11px] font-bold",j?"text-admin-success":"text-admin-text/40"),children:j?"Y":"N"})}if(d.type==="grade"){if(!a||a==="-")return e.jsx("span",{className:"text-admin-text/40",children:"-"});const j=fe[a]||fe.C;return e.jsx(_e,{variant:"outline",className:C("font-bold text-[11px] px-2 py-0",j),children:a})}return d.type==="text-wrap"?!a||a==="-"?e.jsx("span",{className:"text-admin-text/40",children:"-"}):e.jsx("span",{className:"whitespace-normal break-words text-[13px] leading-snug text-white/80",children:a}):d.type==="desc"?e.jsx("span",{className:"text-[13px] text-admin-text",children:a||"-"}):e.jsx("span",{className:"text-[13px]",children:a})},G=({column:t})=>b.column===t?b.direction==="asc"?e.jsx(Je,{className:"h-3 w-3 shrink-0 text-admin-accent"}):e.jsx(Ze,{className:"h-3 w-3 shrink-0 text-admin-accent"}):e.jsx(Xe,{className:"h-3 w-3 shrink-0 opacity-0 group-hover/th:opacity-40 transition-opacity"}),P=(t,r,c)=>{M({rowIndex:t,column:r}),T(c&&c!=="-"?c:"0")},ve=()=>e.jsx("div",{className:"md:hidden space-y-3",children:_.map(t=>{const r=String(t.Ïù∏Ïä§ÌÉÄID||""),c=String(t["Ïù∏Ïä§ÌÉÄ Ïù¥Î¶Ñ"]||""),a=String(t["Ïù∏ÌîåÎ£®Ïñ∏ÏÑú Îì±Í∏â"]||""),d=String(t["Ïπ¥ÌÖåÍ≥†Î¶¨(ÎåÄ)"]||""),k=String(t["Ïπ¥ÌÖåÍ≥†Î¶¨(Ï§ë)"]||""),R=String(t.ÌåîÎ°úÏõå||""),j=String(t["ÏµúÍ∑º 10 ÌèâÍ∑† Î¶¥Ïä§ Ï°∞ÌöåÏàò"]||""),L=String(t["ÏµúÎåÄ Î¶¥Ïä§ Ï°∞ÌöåÏàò"]||""),K=String(t["ÏµúÍ∑º10Í∞ú ÌèâÍ∑† ÎåìÍ∏ÄÏàò"]||""),Y=String(t["Í≥µÍµ¨ ÌèâÍ∑†ÎåìÍ∏ÄÏàò"]||""),te=String(t["Í≥µÍµ¨ ÏµúÎåÄÎåìÍ∏ÄÏàò"]||""),ce=String(t.ÎßàÏßÄÎßâÍ≤åÏãúÎ¨º||""),de=String(t.ÏóÖÎç∞Ïù¥Ìä∏ÏùºÏûê||""),se=String(t["Í≥µÏßÄÏ±ÑÎÑê Î©§Î≤ÑÏàò"]||""),ye=String(t.Ïä§ÌÜ†Î¶¨ÌôúÎèô||"").trim().toUpperCase(),ue=String(t.ÏÜåÌÜµÏ±ÑÎÑêÏó¨Î∂Ä||"").trim(),n=String(t.ÎåìÍ∏ÄÌôúÎèôÏó¨Î∂Ä||"").trim(),o=String(t["ÎßàÏßÄÎßâ ÌîºÎìú Í≤åÏãúÏùº"]||""),N=String(t.Î©îÎ™®||""),X=String(t.Ï¶êÍ≤®Ï∞æÍ∏∞||"").trim().toUpperCase()==="TRUE",oe=t["ÌîÑÎ°úÌïÑ ÎßÅÌÅ¨"],be=fe[a]||fe.C,pe=E?.rowIndex===t._rowIndex&&E?.column==="Í≥µÏßÄÏ±ÑÎÑê Î©§Î≤ÑÏàò",we=u==="select"&&S?.has(r),me=u==="select"&&m?.has(r);return e.jsxs("div",{"data-insta-id":r,onClick:u==="select"&&!me?()=>w?.(t):void 0,className:C("rounded-lg p-3 transition-colors duration-500",u==="select"&&me&&"opacity-30 cursor-not-allowed",u==="select"&&!me&&"cursor-pointer",we||x===r?"bg-admin-accent/10 border-2 border-admin-accent/40":"bg-admin-card border border-admin-border"),children:[u==="select"&&e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:C("w-5 h-5 rounded border flex items-center justify-center shrink-0",me?"border-[#2a2a3a] bg-[#1a1a2a]":we?"bg-amber-500 border-amber-500":"border-[#3a3a4a]"),children:we&&e.jsx(Ee,{className:"h-3 w-3 text-black",strokeWidth:3})}),me&&e.jsx("span",{className:"text-[10px] text-admin-accent/60",children:"Ï∂îÍ∞ÄÎê®"})]}),e.jsxs("div",{className:"flex items-center justify-between gap-2 mb-1",children:[e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[oe?e.jsxs("a",{href:oe,target:"_blank",rel:"noopener noreferrer",className:"text-admin-accent hover:underline text-sm font-medium truncate",children:["@",r]}):e.jsxs("span",{className:"text-admin-text text-sm truncate",children:["@",r]}),a&&a!=="-"&&e.jsx(_e,{variant:"outline",className:C("font-bold text-[11px] px-2 py-0 shrink-0",be),children:a})]}),e.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[e.jsx("button",{onClick:()=>{const ae=l.indexOf("Ï¶êÍ≤®Ï∞æÍ∏∞");ae!==-1&&f(t._rowIndex,ae,X?"FALSE":"TRUE")},children:e.jsx(Ne,{className:C("h-4 w-4 transition-colors",X?"fill-amber-400 text-amber-400":"text-admin-text/30 hover:text-amber-400/60")})}),o&&o!=="-"&&e.jsxs("span",{className:"text-[11px] text-admin-text/60 flex items-center gap-1",children:[e.jsx(xt,{className:"h-3 w-3"}),o]})]})]}),e.jsxs("div",{className:"flex items-baseline gap-2 mb-2",children:[e.jsx("span",{className:"text-white text-[13px] font-medium truncate",children:c}),d&&d!=="-"&&e.jsx("span",{className:"text-[11px] text-admin-purple shrink-0",children:d}),k&&k!=="-"&&k!==d&&e.jsx("span",{className:"text-[11px] text-admin-text/50 shrink-0",children:k})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-1 mb-1",children:[e.jsxs("div",{className:"bg-admin-bg/40 rounded px-2 py-1.5 text-center",children:[e.jsx("p",{className:"text-[10px] text-admin-text/60 mb-0.5",children:"ÌåîÎ°úÏõå"}),e.jsx("p",{className:"text-[13px] text-white tabular-nums font-medium",children:R&&R!=="-"?$(R):"-"})]}),e.jsxs("div",{className:"bg-admin-bg/40 rounded px-2 py-1.5 text-center",children:[e.jsx("p",{className:"text-[10px] text-admin-text/60 mb-0.5",children:"ÌèâÍ∑†Ï°∞Ìöå"}),e.jsx("p",{className:"text-[13px] text-white tabular-nums font-medium",children:j&&j!=="-"?$(j):"-"})]}),e.jsxs("div",{className:"bg-admin-bg/40 rounded px-2 py-1.5 text-center",children:[e.jsx("p",{className:"text-[10px] text-admin-text/60 mb-0.5",children:"ÏµúÎåÄÏ°∞Ìöå"}),e.jsx("p",{className:"text-[13px] text-white tabular-nums font-medium",children:L&&L!=="-"?$(L):"-"})]}),e.jsxs("div",{className:"bg-admin-bg/40 rounded px-2 py-1.5 text-center",children:[e.jsx("p",{className:"text-[10px] text-admin-text/60 mb-0.5",children:"ÌèâÍ∑†ÎåìÍ∏Ä"}),e.jsx("p",{className:"text-[13px] text-white tabular-nums font-medium",children:K&&K!=="-"?$(K):"-"})]})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-1 mb-2",children:[e.jsxs("div",{className:"bg-admin-bg/40 rounded px-2 py-1.5 text-center",children:[e.jsx("p",{className:"text-[10px] text-admin-text/60 mb-0.5",children:"Í≥µÍµ¨ÌèâÍ∑†üí¨"}),e.jsx("p",{className:"text-[13px] text-white tabular-nums font-medium",children:Y&&Y!=="-"?$(Y):"-"})]}),e.jsxs("div",{className:"bg-admin-bg/40 rounded px-2 py-1.5 text-center",children:[e.jsx("p",{className:"text-[10px] text-admin-text/60 mb-0.5",children:"Í≥µÍµ¨ÏµúÎåÄüí¨"}),e.jsx("p",{className:"text-[13px] text-white tabular-nums font-medium",children:te&&te!=="-"?$(te):"-"})]}),ce&&ce!=="-"&&e.jsxs("div",{className:"bg-admin-bg/40 rounded px-2 py-1.5 text-center",children:[e.jsx("p",{className:"text-[10px] text-admin-text/60 mb-0.5",children:"ÎßàÏßÄÎßâÍ≤åÏãúÎ¨º"}),e.jsx("p",{className:"text-[11px] text-white/80",children:ce})]}),de&&de!=="-"&&e.jsxs("div",{className:"bg-admin-bg/40 rounded px-2 py-1.5 text-center",children:[e.jsx("p",{className:"text-[10px] text-admin-text/60 mb-0.5",children:"ÏóÖÎç∞Ïù¥Ìä∏"}),e.jsx("p",{className:"text-[11px] text-white/80",children:de})]})]}),e.jsxs("div",{className:"flex items-center justify-between gap-2 mb-2",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(at,{className:"h-3 w-3 text-admin-text/60"}),e.jsx("span",{className:"text-[11px] text-admin-text/60",children:"Î©§Î≤ÑÏàò"}),pe?e.jsx("input",{type:"text",value:v,onChange:ae=>T(ae.target.value),onBlur:()=>V(t._rowIndex,"Í≥µÏßÄÏ±ÑÎÑê Î©§Î≤ÑÏàò"),onKeyDown:ae=>y(ae,t._rowIndex,"Í≥µÏßÄÏ±ÑÎÑê Î©§Î≤ÑÏàò"),autoFocus:!0,className:"w-16 px-1.5 py-0.5 bg-admin-bg border border-admin-accent rounded text-white text-right text-[12px] focus:outline-none"}):e.jsx("button",{onClick:()=>P(t._rowIndex,"Í≥µÏßÄÏ±ÑÎÑê Î©§Î≤ÑÏàò",se),className:"text-[12px] text-admin-accent/80 hover:text-admin-accent tabular-nums border-b border-dashed border-admin-border hover:border-admin-accent/50 transition-colors",children:se&&se!=="-"?$(se):"0"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[ye==="ON"&&e.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded-full bg-admin-success/15 text-admin-success border border-admin-success/30",children:"Ïä§ÌÜ†Î¶¨"}),(ue==="Y"||ue==="O")&&e.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded-full bg-teal-500/15 text-teal-400 border border-teal-500/30",children:"ÏÜåÌÜµ"}),(n==="Y"||n==="O")&&e.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded-full bg-purple-500/15 text-purple-400 border border-purple-500/30",children:"ÎåìÍ∏Ä"})]})]}),N&&N!=="-"?e.jsx("button",{onClick:()=>h(t._rowIndex,N,c),className:"w-full text-left group/memo",children:e.jsxs("div",{className:"bg-admin-bg/50 rounded px-2.5 py-1.5 flex items-start gap-2",children:[e.jsx(Ie,{className:"h-3 w-3 text-admin-text mt-0.5 shrink-0"}),e.jsx("p",{className:"text-[12px] text-white/70 whitespace-pre-wrap break-words line-clamp-2 flex-1",children:N}),e.jsx(De,{className:"h-3 w-3 text-admin-accent opacity-0 group-hover/memo:opacity-100 transition-opacity shrink-0 mt-0.5"})]})}):e.jsx("button",{onClick:()=>h(t._rowIndex,"",c),className:"w-full text-left",children:e.jsxs("div",{className:"bg-admin-bg/50 rounded px-2.5 py-1.5 flex items-center gap-2 text-admin-text/40 hover:text-admin-text/60 transition-colors",children:[e.jsx(Ie,{className:"h-3 w-3 shrink-0"}),e.jsx("span",{className:"text-[12px]",children:"Î©îÎ™® Ï∂îÍ∞Ä..."})]})})]},t._rowIndex)})}),U=i.useRef(null),W=i.useRef(null),A=i.useRef(!1),ee=()=>{A.current||(A.current=!0,U.current&&W.current&&(W.current.scrollLeft=U.current.scrollLeft),requestAnimationFrame(()=>{A.current=!1}))},ie=()=>{A.current||(A.current=!0,U.current&&W.current&&(U.current.scrollLeft=W.current.scrollLeft),requestAnimationFrame(()=>{A.current=!1}))},le=e.jsxs("colgroup",{children:[u==="select"&&e.jsx("col",{style:{width:40}}),O.map(t=>e.jsx("col",{style:{width:F.pctWidths[t]}},t))]});return e.jsxs(e.Fragment,{children:[ve(),e.jsxs("div",{className:"hidden md:block",children:[e.jsx("div",{className:"sticky z-40 border border-admin-border border-b-0 rounded-t-lg bg-[#14142a]",style:{top:g},children:e.jsx("div",{ref:U,className:"overflow-x-auto",style:{scrollbarWidth:"none"},onScroll:ee,children:e.jsxs("table",{className:"w-full text-sm border-collapse",style:{minWidth:F.total,tableLayout:"fixed"},children:[le,e.jsx("thead",{children:e.jsxs("tr",{className:"bg-[#14142a]",children:[u==="select"&&e.jsx("th",{className:"px-2 py-2.5 text-center w-10"}),O.map((t,r)=>{const c=re[t],a=r<xe,d=r===xe-1;return e.jsx("th",{style:a?{left:F.stickyOffsets[r]}:void 0,className:C("px-2.5 py-2.5 text-[11px] uppercase tracking-wider text-admin-text/70 font-semibold border-r border-admin-border/50 last:border-r-0 group/th",a&&"sticky z-40 bg-[#14142a]",d&&"shadow-[3px_0_8px_rgba(0,0,0,0.35)] border-r-admin-border",c?.align==="center"&&"text-center",c?.align==="right"&&"text-right"),children:e.jsxs("button",{onClick:()=>B(t),className:"flex items-center gap-1 w-full hover:text-white transition-colors",children:[e.jsx("span",{className:"whitespace-nowrap",children:c?.label||t}),e.jsx(G,{column:t})]})},t)})]})})]})})}),e.jsx("div",{className:"border border-admin-border border-t-0 rounded-b-lg overflow-hidden",children:e.jsx("div",{ref:W,className:"overflow-x-auto",onScroll:ie,children:e.jsxs("table",{className:"w-full text-sm border-collapse",style:{minWidth:F.total,tableLayout:"fixed"},children:[le,e.jsx("tbody",{children:_.map((t,r)=>{const c=String(t.Ïù∏Ïä§ÌÉÄID||""),a=x===c;return e.jsxs("tr",{"data-insta-id":c,onClick:u==="select"&&!m?.has(c)?()=>w?.(t):void 0,className:C("border-b border-admin-border/40 transition-colors duration-500",u==="select"&&m?.has(c)&&"opacity-30 cursor-not-allowed",u==="select"&&!m?.has(c)&&"cursor-pointer",u==="select"&&S?.has(c)?"bg-amber-500/[0.07]":a?"bg-admin-accent/10 ring-1 ring-admin-accent/40":r%2===0?"bg-[#11111f]":"bg-[#151528]","hover:bg-white/[0.02]"),children:[u==="select"&&(()=>{const d=String(t.Ïù∏Ïä§ÌÉÄID||""),k=S?.has(d),R=m?.has(d);return e.jsx("td",{className:"px-2 py-2 text-center align-top",children:e.jsx("div",{className:C("w-5 h-5 rounded border flex items-center justify-center mx-auto",R?"border-[#2a2a3a] bg-[#1a1a2a] opacity-30":k?"bg-amber-500 border-amber-500":"border-[#3a3a4a] bg-transparent"),children:k&&e.jsx(Ee,{className:"h-3 w-3 text-black",strokeWidth:3})})})})(),O.map((d,k)=>{const R=re[d],j=k<xe,L=k===xe-1,K=r%2===0?"#11111f":"#151528";return e.jsx("td",{style:j?{left:F.stickyOffsets[k],backgroundColor:K}:void 0,className:C("px-2.5 py-2 text-white border-r border-admin-border/30 last:border-r-0 align-top",j&&"sticky z-30",L&&"shadow-[3px_0_8px_rgba(0,0,0,0.35)] border-r-admin-border/60",R?.align==="center"&&"text-center",R?.align==="right"&&"text-right",R?.highlight&&"font-semibold"),children:H(t,d,t._rowIndex)},d)})]},t._rowIndex)})})]})})})]})]})}function Ct({className:s,...l}){return e.jsx("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:e.jsx("table",{"data-slot":"table",className:C("w-full caption-bottom text-sm",s),...l})})}function St({className:s,...l}){return e.jsx("thead",{"data-slot":"table-header",className:C("[&_tr]:border-b",s),...l})}function Mt({className:s,...l}){return e.jsx("tbody",{"data-slot":"table-body",className:C("[&_tr:last-child]:border-0",s),...l})}function Le({className:s,...l}){return e.jsx("tr",{"data-slot":"table-row",className:C("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",s),...l})}function ge({className:s,...l}){return e.jsx("th",{"data-slot":"table-head",className:C("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",s),...l})}function je({className:s,...l}){return e.jsx("td",{"data-slot":"table-cell",className:C("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",s),...l})}function Ot({isOpen:s,onClose:l,grades:p,onSave:f,isSaving:h=!1}){const[x,g]=i.useState(p);i.useEffect(()=>{g(p)},[p]);const u=(m,w,b)=>{const z=[...x];z[m]={...z[m],[w]:b},g(z)},S=m=>{f(x,m)};return e.jsx(Fe,{open:s,onOpenChange:l,children:e.jsxs(Pe,{className:"bg-admin-card border-admin-border text-white max-w-4xl max-h-[80vh] overflow-y-auto",children:[e.jsx(Re,{children:e.jsx(Ae,{className:"text-white",children:"Îì±Í∏â Í∏∞Ï§Ä ÏÑ§Ï†ï"})}),e.jsxs("div",{className:"py-4",children:[e.jsxs(Ct,{children:[e.jsx(St,{children:e.jsxs(Le,{className:"border-admin-border hover:bg-transparent",children:[e.jsx(ge,{className:"text-admin-text",children:"Îì±Í∏â"}),e.jsx(ge,{className:"text-admin-text",children:"ÏµúÏÜå ÌåîÎ°úÏõå"}),e.jsx(ge,{className:"text-admin-text",children:"ÏµúÏÜå Ï°∞ÌöåÏàò"}),e.jsx(ge,{className:"text-admin-text",children:"ÏµúÏÜå ÏÜåÌÜµÎ•†"})]})}),e.jsx(Mt,{children:x.map((m,w)=>e.jsxs(Le,{className:"border-admin-border hover:bg-admin-bg/50",children:[e.jsx(je,{className:"font-medium text-white",children:m.grade}),e.jsx(je,{children:e.jsx(he,{type:"text",value:m.minFollowers,onChange:b=>u(w,"minFollowers",b.target.value),className:"bg-admin-bg border-admin-border text-white"})}),e.jsx(je,{children:e.jsx(he,{type:"text",value:m.minViews,onChange:b=>u(w,"minViews",b.target.value),className:"bg-admin-bg border-admin-border text-white"})}),e.jsx(je,{children:e.jsx(he,{type:"text",value:m.minEngagement,onChange:b=>u(w,"minEngagement",b.target.value),className:"bg-admin-bg border-admin-border text-white"})})]},w))})]}),e.jsxs("div",{className:"mt-4 text-xs text-admin-text",children:[e.jsx("p",{children:"‚Ä¢ Îì±Í∏â Í∏∞Ï§ÄÏùÑ ÏÑ§Ï†ïÌïòÍ≥† Ï†ÄÏû•Ìï† Ïàò ÏûàÏäµÎãàÎã§."}),e.jsx("p",{children:'‚Ä¢ "Ï†ÄÏû• + ÏàòÏãù Ï†ÅÏö©"ÏùÑ ÌÅ¥Î¶≠ÌïòÎ©¥ Îì±Í∏â Ïª¨ÎüºÏóê ÏûêÎèô Í≥ÑÏÇ∞ ÏàòÏãùÏù¥ Ï†ÅÏö©Îê©ÎãàÎã§.'})]})]}),e.jsxs(Ve,{className:"gap-2",children:[e.jsx(D,{variant:"outline",onClick:l,disabled:h,className:"bg-transparent border-admin-border text-white hover:bg-admin-bg",children:"Ï∑®ÏÜå"}),e.jsx(D,{onClick:()=>S(!1),disabled:h,className:"bg-admin-purple text-white hover:bg-admin-purple/90",children:"Ï†ÄÏû•Îßå"}),e.jsx(D,{onClick:()=>S(!0),disabled:h,className:"bg-admin-accent text-admin-bg hover:bg-admin-accent/90",children:h?"Ï≤òÎ¶¨ Ï§ë...":"Ï†ÄÏû• + ÏàòÏãù Ï†ÅÏö©"})]})]})})}function Et({isOpen:s,onClose:l,columns:p,onSave:f,isSaving:h=!1}){const[x,g]=i.useState(p);i.useEffect(()=>{g(p)},[p]);const u=m=>{g(w=>w.map(b=>b.name===m?{...b,visible:!b.visible}:b))},S=()=>{f(x)};return s?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-black/50 z-40",onClick:l}),e.jsxs("div",{className:"fixed right-0 top-0 h-full w-80 bg-admin-card border-l border-admin-border z-50 shadow-xl overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-admin-card border-b border-admin-border p-4 flex items-center justify-between",children:[e.jsx("h3",{className:"text-white font-semibold",children:"Ïª¨Îüº ÌëúÏãú ÏÑ§Ï†ï"}),e.jsx("button",{onClick:l,className:"text-admin-text hover:text-white transition-colors",children:e.jsx(Se,{className:"h-5 w-5"})})]}),e.jsx("div",{className:"p-4 space-y-2",children:x.map(m=>e.jsxs("label",{className:"flex items-center gap-3 p-2 rounded hover:bg-admin-bg cursor-pointer transition-colors",children:[e.jsx("input",{type:"checkbox",checked:m.visible,onChange:()=>u(m.name),className:"w-4 h-4 rounded border-admin-border bg-admin-bg text-admin-accent focus:ring-admin-accent focus:ring-offset-0"}),e.jsx("span",{className:C("text-sm",m.visible?"text-white":"text-admin-text"),children:m.name})]},m.name))}),e.jsx("div",{className:"sticky bottom-0 bg-admin-card border-t border-admin-border p-4",children:e.jsx(D,{onClick:S,disabled:h,className:"w-full bg-admin-accent text-admin-bg hover:bg-admin-accent/90",children:h?"Ï†ÄÏû• Ï§ë...":"Ï†ÄÏû•"})})]})]}):null}function Dt({payload:s,isOpen:l,onClose:p}){const f=ze(),{category:h,isClassifying:x,error:g,classify:u}=rt(),{isSaving:S,saved:m,error:w,save:b}=it(),{copied:z,copy:E}=lt();if(i.useEffect(()=>{if(!l)return;const y=H=>{H.key==="Escape"&&p()};return document.addEventListener("keydown",y),document.body.style.overflow="hidden",()=>{document.removeEventListener("keydown",y),document.body.style.overflow=""}},[l,p]),i.useEffect(()=>{if(m&&s){const y=new Date().toISOString().slice(0,10),H=h;f.setQueryData(["influencers"],G=>G&&{...G,data:G.data.map(P=>String(P.Ïù∏Ïä§ÌÉÄID)!==s.username?P:{...P,"Ïù∏Ïä§ÌÉÄ Ïù¥Î¶Ñ":s.profile.displayName||P["Ïù∏Ïä§ÌÉÄ Ïù¥Î¶Ñ"],ÌåîÎ°úÏõå:String(s.profile.followers),"ÏµúÍ∑º 10 ÌèâÍ∑† Î¶¥Ïä§ Ï°∞ÌöåÏàò":String(s.stats.avgViews),"ÏµúÎåÄ Î¶¥Ïä§ Ï°∞ÌöåÏàò":String(s.stats.maxViews),"Í≥µÍµ¨ ÌèâÍ∑†Ï¢ãÏïÑÏöîÏàò":String(s.stats.avgLikes),"Í≥µÍµ¨ ÏµúÎåÄÏ¢ãÏïÑÏöîÏàò":String(s.stats.maxLikes),"Í≥µÍµ¨ ÌèâÍ∑†ÎåìÍ∏ÄÏàò":String(s.stats.avgComments),"Í≥µÍµ¨ ÏµúÎåÄÎåìÍ∏ÄÏàò":String(s.stats.maxComments),"ÎßàÏßÄÎßâ ÌîºÎìú Í≤åÏãúÏùº":s.stats.lastPostDate||P["ÎßàÏßÄÎßâ ÌîºÎìú Í≤åÏãúÏùº"],ÏóÖÎç∞Ïù¥Ìä∏ÏùºÏûê:y,ÏÑ§Î™ÖÎûÄ:s.profile.bio||P.ÏÑ§Î™ÖÎûÄ,Ïô∏Î∂ÄÎßÅÌÅ¨:s.profile.externalLink||P.Ïô∏Î∂ÄÎßÅÌÅ¨,"ÌîÑÎ°úÌïÑ ÎßÅÌÅ¨":s.profile.profileLink||P["ÌîÑÎ°úÌïÑ ÎßÅÌÅ¨"],...H?{"Ïπ¥ÌÖåÍ≥†Î¶¨(ÎåÄ)":H.ÎåÄ,"Ïπ¥ÌÖåÍ≥†Î¶¨(Ï§ë)":H.Ï§ë.join(", ")}:{}})}),He.success("ÏãúÌä∏Ïóê Ï†ÄÏû•ÎêòÏóàÏäµÎãàÎã§")}},[m,s,h,f]),!l||!s)return null;const{profile:M,stats:v,feedPosts:T,reels:O}=s,F=T.filter(y=>!y.isPinned&&y.isDeal),_=O.filter(y=>!y.isPinned),B=()=>{u(M.bio,s.username)},I=()=>{E(ct(s,h))},V=()=>{b(s,h)};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-[9998] bg-black/50",onClick:p}),e.jsxs("div",{className:"fixed inset-0 sm:inset-y-0 sm:left-auto sm:right-0 z-[9999] w-full sm:w-[400px] bg-admin-bg border-l border-admin-border flex flex-col",children:[e.jsxs("div",{className:"sticky top-0 z-10 flex items-center justify-between px-4 py-3 border-b border-admin-border bg-admin-bg",children:[e.jsx("h2",{className:"text-white font-semibold text-sm",children:"IG Î∂ÑÏÑù Í≤∞Í≥º"}),e.jsx(D,{variant:"ghost",size:"icon-sm",onClick:p,className:"text-admin-text hover:text-white hover:bg-admin-card",children:e.jsx(Se,{className:"size-4"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[e.jsxs("div",{className:"bg-admin-card border border-admin-border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-admin-border flex items-center justify-center text-sm text-white",children:"@"}),e.jsxs("div",{className:"min-w-0",children:[e.jsxs("h3",{className:"text-white font-semibold text-sm truncate",children:["@",M.username]}),M.displayName&&e.jsx("p",{className:"text-admin-text text-xs truncate",children:M.displayName})]}),e.jsxs("span",{className:"ml-auto text-admin-accent text-xs font-semibold whitespace-nowrap",children:[J(M.followers)," ÌåîÎ°úÏõå"]})]}),M.bio&&e.jsx("p",{className:"text-admin-text text-xs leading-relaxed line-clamp-3 whitespace-pre-wrap",children:M.bio})]}),e.jsxs("div",{className:"bg-admin-card border border-admin-border rounded-lg p-4",children:[e.jsxs("h3",{className:"text-white font-semibold text-sm mb-3",children:["Î¶¥Ïä§ ÌÜµÍ≥Ñ (",_.length,"Í∞ú)"]}),_.length>0?e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[e.jsx(ne,{label:"ÌèâÍ∑† Ï°∞ÌöåÏàò",value:J(v.avgViews)}),e.jsx(ne,{label:"ÏµúÎåÄ Ï°∞ÌöåÏàò",value:J(v.maxViews)})]}):e.jsx("p",{className:"text-admin-text text-sm",children:"Î¶¥Ïä§ ÏóÜÏùå"})]}),e.jsxs("div",{className:"bg-admin-card border border-admin-border rounded-lg p-4",children:[e.jsxs("h3",{className:"text-white font-semibold text-sm mb-3",children:["Í≥µÍµ¨ ÌîºÎìú ÌÜµÍ≥Ñ (",F.length,"Í∞ú)"]}),F.length>0?e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[e.jsx(ne,{label:"ÌèâÍ∑† Ï¢ãÏïÑÏöî",value:J(v.avgLikes)}),e.jsx(ne,{label:"ÏµúÎåÄ Ï¢ãÏïÑÏöî",value:J(v.maxLikes)}),e.jsx(ne,{label:"ÌèâÍ∑† ÎåìÍ∏Ä",value:J(v.avgComments)}),e.jsx(ne,{label:"ÏµúÎåÄ ÎåìÍ∏Ä",value:J(v.maxComments)})]}):e.jsx("p",{className:"text-admin-text text-sm",children:"Í≥µÍµ¨ Í≤åÏãúÎ¨º ÏóÜÏùå"}),v.lastPostDate&&e.jsxs("p",{className:"text-admin-text text-xs mt-2",children:["ÏµúÍ∑º Í≤åÏãúÎ¨º: ",v.lastPostDate]})]}),e.jsxs("div",{className:"bg-admin-card border border-admin-border rounded-lg p-4",children:[e.jsx("h3",{className:"text-white font-semibold text-sm mb-3",children:"AI Î∂ÑÎ•ò"}),h?e.jsxs("p",{className:"text-sm",children:[e.jsx("span",{className:"text-admin-accent font-semibold",children:h.ÎåÄ}),h.Ï§ë.length>0&&e.jsx("span",{className:"text-admin-text ml-2",children:h.Ï§ë.join(", ")})]}):e.jsx("p",{className:"text-admin-text text-sm",children:"Î∂ÑÎ•ò Î≤ÑÌäºÏùÑ ÎàåÎü¨Ï£ºÏÑ∏Ïöî"})]}),g&&e.jsx("p",{className:"text-red-400 text-xs",children:g}),w&&e.jsx("p",{className:"text-red-400 text-xs",children:w})]}),e.jsxs("div",{className:"sticky bottom-0 flex gap-2 px-4 py-3 border-t border-admin-border bg-admin-bg",children:[e.jsxs(D,{variant:"outline",size:"sm",onClick:B,disabled:x,className:"flex-1 bg-transparent border-admin-border text-white hover:bg-admin-card",children:[e.jsx(Nt,{className:"size-3.5"}),x?"Î∂ÑÎ•ò Ï§ë...":"Î∂ÑÎ•ò"]}),e.jsxs(D,{variant:"outline",size:"sm",onClick:I,className:"flex-1 bg-transparent border-admin-border text-white hover:bg-admin-card",children:[e.jsx(nt,{className:"size-3.5"}),z?"Î≥µÏÇ¨Îê®!":"Î≥µÏÇ¨"]}),e.jsxs(D,{size:"sm",onClick:V,disabled:S,className:"flex-1 bg-admin-accent text-admin-bg hover:bg-admin-accent/90",children:[e.jsx(ut,{className:"size-3.5"}),S?"Ï†ÄÏû• Ï§ë...":m?"Ï†ÄÏû•Îê®":"Ï†ÄÏû•"]})]})]})]})}function ne({label:s,value:l}){return e.jsxs("div",{children:[e.jsx("p",{className:"text-admin-text text-xs",children:s}),e.jsx("p",{className:"text-white font-semibold",children:l})]})}function Rt(){const{data:s,isLoading:l,error:p}=Ue(),f=$e(),h=Ge(),{data:x}=qe(),g=Be(),{data:u}=We(),S=Ke(),{data:m}=Ye(),w=i.useRef(null),[b,z]=i.useState(0);i.useEffect(()=>{const n=w.current;if(!n)return;const o=new ResizeObserver(()=>{z(n.offsetHeight)});return o.observe(n),()=>o.disconnect()},[]);const[E,M]=i.useState(""),[v,T]=i.useState([]),[O,F]=i.useState([]),[_,B]=i.useState([]),[I,V]=i.useState([]),[y,H]=i.useState(!1),[G,P]=i.useState(!1),[ve,U]=i.useState(!1),[W,A]=i.useState(!1),[ee,ie]=i.useState({isOpen:!1,rowIndex:-1,value:"",name:""}),[le,t]=i.useState(null),[r,c]=i.useState(!1);i.useEffect(()=>{const n=o=>{o.data?.type==="ig-analyzer-result"&&o.data.payload&&(t(o.data.payload),c(!0))};return window.addEventListener("message",n),()=>window.removeEventListener("message",n)},[]),i.useEffect(()=>{const n=window.location.hash;if(n.startsWith("#analyzer="))try{const o=n.slice(10),N=JSON.parse(decodeURIComponent(o));N.username&&N.profile&&(t(N),c(!0),history.replaceState(null,"",window.location.pathname))}catch{}},[]);const a=s?.data||[],d=s?.headers||[],k=s?.fromCache??!1,R=i.useMemo(()=>x?.columns?x.columns.filter(n=>n.visible).map(n=>n.name):ke.filter(n=>!Ce.includes(n)),[x]),j=i.useMemo(()=>{const n=new Set;return a.forEach(o=>{const N=o["Ïπ¥ÌÖåÍ≥†Î¶¨(ÎåÄ)"];N&&N!=="-"&&n.add(N)}),Array.from(n).sort()},[a]),L=i.useMemo(()=>["ÌôúÎèôÏÑ±24H O","ÌôúÎèôÏÑ±24H X"],[]),K=i.useMemo(()=>["2Ï£º Ï¥àÍ≥º","ÏóÜÏùå"],[]),Y=i.useMemo(()=>a.filter(n=>{if(y&&String(n.Ï¶êÍ≤®Ï∞æÍ∏∞||"").trim().toUpperCase()!=="TRUE")return!1;if(E){const o=E.toLowerCase(),N=String(n.Ïù∏Ïä§ÌÉÄID||"").toLowerCase(),Q=String(n["Ïù∏Ïä§ÌÉÄ Ïù¥Î¶Ñ"]||"").toLowerCase();if(!N.includes(o)&&!Q.includes(o))return!1}if(v.length>0){const o=n["Ïπ¥ÌÖåÍ≥†Î¶¨(ÎåÄ)"];if(!v.includes(o))return!1}if(O.length>0){const o=n["Ïù∏ÌîåÎ£®Ïñ∏ÏÑú Îì±Í∏â"];if(!O.includes(o))return!1}if(_.length>0){const o=n["ÎßàÏßÄÎßâ ÌîºÎìú Í≤åÏãúÏùº"],N=o&&o.includes("ÏãúÍ∞Ñ")&&!o.includes("Ïùº"),Q=_.includes("ÌôúÎèôÏÑ±24H O"),X=_.includes("ÌôúÎèôÏÑ±24H X");if(!(Q&&X)){if(Q&&!N)return!1;if(X&&N)return!1}}if(I.length>0){const o=String(n.ÏóÖÎç∞Ïù¥Ìä∏ÏùºÏûê||"").trim(),N=!o||o==="-",Q=Date.now(),X=336*60*60*1e3,oe=!N&&Q-new Date(o).getTime()>X,be=I.includes("2Ï£º Ï¥àÍ≥º"),pe=I.includes("ÏóÜÏùå");if(be&&pe){if(!oe&&!N)return!1}else if(be){if(!oe)return!1}else if(pe&&!N)return!1}return!0}),[a,E,v,O,_,I,y]),te=()=>{f.mutate()},ce=(n,o,N)=>{h.mutate({rowIndex:n,columnIndex:o,value:N})},de=(n,o,N)=>{ie({isOpen:!0,rowIndex:n,value:o,name:N})},se=n=>{const o=d.indexOf("Î©îÎ™®");o!==-1&&h.mutate({rowIndex:ee.rowIndex,columnIndex:o,value:n}),ie({isOpen:!1,rowIndex:-1,value:"",name:""})},ye=n=>{g.mutate(n),A(!1)},ue=(n,o)=>{S.mutate({grades:n,applyFormula:o}),U(!1)};return p?e.jsx("div",{className:"max-w-[1800px] mx-auto mt-8",children:e.jsxs("div",{className:"bg-admin-error/20 border border-admin-error/40 rounded-lg p-6 text-center",children:[e.jsx("p",{className:"text-admin-error font-semibold",children:"Îç∞Ïù¥ÌÑ∞Î•º Î∂àÎü¨Ïò§ÎäîÎç∞ Ïã§Ìå®ÌñàÏäµÎãàÎã§"}),e.jsx("p",{className:"text-admin-text text-sm mt-2",children:String(p)}),e.jsx(D,{onClick:te,className:"mt-4",children:"Îã§Ïãú ÏãúÎèÑ"})]})}):e.jsxs("div",{className:"max-w-[1800px] mx-auto mt-4 md:mt-8",children:[e.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl md:text-2xl font-bold text-white mb-1 md:mb-2",children:"Ïù∏ÌîåÎ£®Ïñ∏ÏÑú Í¥ÄÎ¶¨"}),m&&e.jsxs("div",{className:"flex items-center gap-4 text-xs text-admin-text",children:[e.jsxs("span",{children:["Cache: ",k?"KV":"API"]}),e.jsxs("span",{children:["Quota: ",m.quotaUsed," / 100"]}),e.jsxs("span",{children:["Hits: ",m.cacheHits," / Misses: ",m.cacheMisses]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(D,{onClick:()=>U(!0),variant:"outline",className:"bg-transparent border-admin-border text-white hover:bg-admin-bg",children:[e.jsx(gt,{className:"h-4 w-4 md:mr-2"}),e.jsx("span",{className:"hidden md:inline",children:"Îì±Í∏â ÏÑ§Ï†ï"})]}),e.jsxs(D,{onClick:()=>A(!0),variant:"outline",className:"bg-transparent border-admin-border text-white hover:bg-admin-bg",children:[e.jsx(pt,{className:"h-4 w-4 md:mr-2"}),e.jsx("span",{className:"hidden md:inline",children:"Ïª¨Îüº ÏÑ§Ï†ï"})]})]})]}),e.jsx("div",{ref:w,className:"sticky top-0 z-50 bg-admin-bg py-2 md:pt-2 md:pb-4 -mx-3 px-3 md:-mx-6 md:px-6 shadow-[0_4px_12px_rgba(0,0,0,0.3)]",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx(yt,{searchQuery:E,onSearchChange:M,categoryOptions:j,selectedCategories:v,onCategoriesChange:T,selectedGrades:O,onGradesChange:F,activityOptions:L,selectedActivity:_,onActivityChange:B,updateStatusOptions:K,selectedUpdateStatus:I,onUpdateStatusChange:V,resultCount:Y.length,totalCount:a.length,showFavoritesOnly:y,onFavoritesToggle:()=>H(n=>!n)})}),e.jsx(D,{onClick:()=>P(!0),variant:"outline",size:"sm",className:"hidden md:flex bg-transparent border-admin-border text-white hover:bg-admin-bg shrink-0",children:e.jsx(ot,{className:"h-4 w-4"})}),e.jsx(D,{onClick:te,disabled:f.isPending,variant:"outline",size:"sm",className:"bg-transparent border-admin-border text-white hover:bg-admin-bg shrink-0",children:e.jsx(et,{className:`h-4 w-4 ${f.isPending?"animate-spin":""}`})})]})}),l?e.jsx("div",{className:"flex items-center justify-center h-64 bg-admin-card rounded-lg border border-admin-border",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-admin-accent mx-auto mb-4"}),e.jsx("p",{className:"text-admin-text",children:"Îç∞Ïù¥ÌÑ∞Î•º Î∂àÎü¨Ïò§Îäî Ï§ë..."})]})}):e.jsx(kt,{data:Y,headers:d,visibleColumns:R,onCellEdit:ce,onMemoEdit:de,highlightId:r?le?.username??null:null,stickyTopOffset:b}),e.jsx(Ot,{isOpen:ve,onClose:()=>U(!1),grades:u?.grades||[],onSave:ue,isSaving:S.isPending}),e.jsx(Et,{isOpen:W,onClose:()=>A(!1),columns:x?.columns||ke.filter(n=>!Ce.includes(n)).map(n=>({name:n,visible:!0})),onSave:ye,isSaving:g.isPending}),e.jsx(tt,{isOpen:ee.isOpen,onClose:()=>ie({isOpen:!1,rowIndex:-1,value:"",name:""}),initialValue:ee.value,onSave:se,influencerName:ee.name}),e.jsx(Dt,{payload:le,isOpen:r,onClose:()=>c(!1)}),G&&e.jsx(_t,{ids:Y.map(n=>String(n.Ïù∏Ïä§ÌÉÄID||"")).filter(Boolean),onClose:()=>P(!1)}),e.jsx(st,{position:"top-right",theme:"dark"})]})}function _t({ids:s,onClose:l}){const[p,f]=i.useState(!1),h=s.join(`
`);i.useEffect(()=>{const g=u=>{u.key==="Escape"&&l()};return document.addEventListener("keydown",g),()=>document.removeEventListener("keydown",g)},[l]);const x=()=>{navigator.clipboard.writeText(h).then(()=>{f(!0),setTimeout(()=>f(!1),2e3)})};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-[9998] bg-black/50",onClick:l}),e.jsxs("div",{className:"fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-[9999] w-[400px] max-h-[70vh] bg-admin-bg border border-admin-border rounded-lg flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-admin-border",children:[e.jsxs("h2",{className:"text-white font-semibold text-sm",children:["ID Ï∂îÏ∂ú (",s.length,"Í∞ú)"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(D,{size:"sm",variant:"outline",onClick:x,className:"bg-transparent border-admin-border text-white hover:bg-admin-card text-xs",children:p?"Î≥µÏÇ¨Îê®!":"Î≥µÏÇ¨"}),e.jsx(D,{size:"icon-sm",variant:"ghost",onClick:l,className:"text-admin-text hover:text-white hover:bg-admin-card",children:e.jsx("span",{className:"text-lg leading-none",children:"√ó"})})]})]}),e.jsx("textarea",{readOnly:!0,value:h,className:"flex-1 min-h-[200px] max-h-[50vh] p-4 bg-transparent text-white text-[13px] font-mono leading-relaxed resize-none focus:outline-none"})]})]})}export{Rt as default};
