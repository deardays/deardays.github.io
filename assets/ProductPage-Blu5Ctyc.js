import{r as l,j as e,b as Me}from"./index-DS07Q32S.js";import{c as ie,B,w as Oe,d as ye,b as H,S as de,I as z,a as Ie,X as re,x as ke,h as xe,i as me,j as he,k as ue,l as pe,u as Se,f as oe}from"./useInfluencerData-BUSAMa2M.js";import{B as be,E as Z,P as _e,A as Le,a as Ee,b as Pe,M as Re,R as ge,c as Te,T as Ae}from"./MemoEditModal-BCnKbb26.js";import{M as Fe,u as Ue,a as Be,b as ze,c as $e,d as He,P as fe}from"./useProductData-BZXteIC5.js";import"./useQuery-CRDnl9p6.js";const Ve=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],je=ie("file-text",Ve);const Ke=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],We=ie("phone",Ke);const Ye=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],we=ie("trash-2",Ye);const Qe=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],qe=ie("user",Qe);function ae({options:a,selected:d,onChange:u,placeholder:C="선택",className:w}){const[i,c]=l.useState(!1),b=l.useRef(null);l.useEffect(()=>{function s(S){b.current&&!b.current.contains(S.target)&&c(!1)}return document.addEventListener("mousedown",s),()=>document.removeEventListener("mousedown",s)},[]);const N=s=>{d.includes(s)?u(d.filter(S=>S!==s)):u([...d,s])};return e.jsxs("div",{ref:b,className:H("relative",w),children:[e.jsxs(B,{variant:"outline",onClick:()=>c(!i),className:"w-full justify-between bg-admin-card border-admin-border text-white hover:bg-admin-card/80 hover:text-white",children:[e.jsx("span",{className:"truncate",children:d.length>0?`${d.length}개 선택됨`:C}),e.jsx(Oe,{className:"ml-2 h-4 w-4 shrink-0"})]}),i&&e.jsxs("div",{className:"absolute z-50 mt-2 w-full rounded-md border border-admin-border bg-admin-card shadow-lg",children:[e.jsxs("div",{className:"flex gap-2 border-b border-admin-border p-2",children:[e.jsx(B,{size:"sm",variant:"ghost",onClick:()=>u(a),className:"flex-1 text-xs text-admin-text hover:text-white hover:bg-admin-bg",children:"전체 선택"}),e.jsx(B,{size:"sm",variant:"ghost",onClick:()=>u([]),className:"flex-1 text-xs text-admin-text hover:text-white hover:bg-admin-bg",children:"전체 해제"})]}),e.jsx("div",{className:"max-h-60 overflow-y-auto p-2",children:a.map(s=>e.jsxs("button",{onClick:()=>N(s),className:"flex w-full items-center gap-2 rounded px-2 py-1.5 text-sm text-white hover:bg-admin-bg transition-colors",children:[e.jsx("div",{className:H("flex h-4 w-4 items-center justify-center rounded border",d.includes(s)?"bg-admin-accent border-admin-accent":"border-admin-border"),children:d.includes(s)&&e.jsx(ye,{className:"h-3 w-3 text-admin-bg"})}),e.jsx("span",{className:"truncate",children:s})]},s))})]})]})}const Ce=["No.","제품명","업체명","상태","제품 카테고리","공식몰","샘플피드","제안서","담당자","담당자 전화","담당자 이메일","핏한 인플루언서","소싱메모","제품메모"],De=["_rowIndex"],le=["진행 전","진행 중","답장없음","불가","컨텍"],Ne={"진행 전":"bg-gray-500/20 text-gray-400 border-gray-500/40","진행 중":"bg-blue-500/20 text-blue-400 border-blue-500/40",답장없음:"bg-yellow-500/20 text-yellow-400 border-yellow-500/40",불가:"bg-red-500/20 text-red-400 border-red-500/40",컨텍:"bg-green-500/20 text-green-400 border-green-500/40"},ve=["식품","올리브유","유아","식기","간식","텀블러","요리","주방","청소기","두유제조기","청소","세정제","육수","에어프라이어","살림","인테리어","정리","육아","유아식기","육아템","예쁜육아템"],q={"No.":{width:48,align:"center",type:"text",label:"No"},제품명:{width:180,align:"left",type:"editable-text",label:"제품명",editable:!0},업체명:{width:160,align:"left",type:"combobox",label:"업체명",editable:!0},상태:{width:80,align:"center",type:"status",label:"상태",editable:!0},"제품 카테고리":{width:140,align:"left",type:"tag-combobox",label:"카테고리",editable:!0},공식몰:{width:160,align:"left",type:"editable-link",label:"공식몰",editable:!0},샘플피드:{width:160,align:"left",type:"editable-link",label:"샘플",editable:!0},제안서:{width:160,align:"left",type:"editable-link",label:"제안서",editable:!0},담당자:{width:80,align:"left",type:"editable-text",label:"담당자",editable:!0},"담당자 전화":{width:120,align:"left",type:"editable-text",label:"전화",editable:!0},"담당자 이메일":{width:160,align:"left",type:"editable-text",label:"이메일",editable:!0},"핏한 인플루언서":{width:200,align:"left",type:"influencers",label:"인플루언서"},소싱메모:{width:200,align:"left",type:"editable-memo",label:"소싱메모",editable:!0},제품메모:{width:200,align:"left",type:"editable-memo",label:"제품메모",editable:!0}},ee=4;function Ge({searchQuery:a,onSearchChange:d,selectedStatuses:u,onStatusesChange:C,selectedCategories:w,onCategoriesChange:i,resultCount:c,totalCount:b}){const[N,s]=l.useState(a),[S,E]=l.useState(!1);l.useEffect(()=>{const h=setTimeout(()=>d(N),250);return()=>clearTimeout(h)},[N,d]);const g=u.length+w.length,L=()=>{C([]),i([])};return e.jsxs("div",{children:[e.jsxs("div",{className:"md:hidden",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(de,{className:"absolute left-2.5 top-1/2 -translate-y-1/2 h-3.5 w-3.5 text-admin-text"}),e.jsx(z,{type:"text",placeholder:"제품명 또는 업체명 검색...",value:N,onChange:h=>s(h.target.value),className:"pl-8 h-8 text-[13px] bg-admin-card border-admin-border text-white placeholder:text-admin-text"})]}),e.jsxs("button",{onClick:()=>E(!S),className:`relative flex items-center justify-center h-8 w-8 rounded-md border shrink-0 transition-colors ${S||g>0?"bg-admin-accent/15 border-admin-accent/40 text-admin-accent":"bg-admin-card border-admin-border text-admin-text"}`,children:[e.jsx(Ie,{className:"h-3.5 w-3.5"}),g>0&&e.jsx("span",{className:"absolute -top-1.5 -right-1.5 min-w-[16px] h-4 flex items-center justify-center rounded-full bg-admin-accent text-[10px] font-bold text-admin-bg px-1",children:g})]}),e.jsxs("span",{className:"text-[11px] text-admin-text tabular-nums shrink-0",children:[e.jsx("span",{className:"text-white font-semibold",children:c}),"/",b]})]}),S&&e.jsxs("div",{className:"mt-2 flex flex-col gap-2",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(ae,{options:[...le],selected:u,onChange:C,placeholder:"상태"}),e.jsx(ae,{options:[...ve],selected:w,onChange:i,placeholder:"카테고리"})]}),g>0&&e.jsxs("button",{onClick:L,className:"flex items-center gap-1 text-[11px] text-admin-text hover:text-admin-accent transition-colors self-end",children:[e.jsx(re,{className:"h-3 w-3"}),"필터 초기화"]})]})]}),e.jsxs("div",{className:"hidden md:block space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[e.jsxs("div",{className:"relative col-span-2",children:[e.jsx(de,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-admin-text"}),e.jsx(z,{type:"text",placeholder:"제품명 또는 업체명 검색...",value:N,onChange:h=>s(h.target.value),className:"pl-10 bg-admin-card border-admin-border text-white placeholder:text-admin-text"})]}),e.jsx(ae,{options:[...le],selected:u,onChange:C,placeholder:"상태 선택"}),e.jsx(ae,{options:[...ve],selected:w,onChange:i,placeholder:"카테고리 선택"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-admin-text",children:[e.jsx("span",{className:"text-white font-semibold",children:c})," / ",b," 건"]}),g>0&&e.jsxs("button",{onClick:L,className:"flex items-center gap-1 text-xs text-admin-text hover:text-admin-accent transition-colors",children:[e.jsx(re,{className:"h-3 w-3"})," 필터 초기화"]})]})]})]})}function Xe({value:a,options:d,onChange:u,onCommit:C,onCancel:w,placeholder:i}){const[c,b]=l.useState(-1),[N,s]=l.useState(null),S=l.useRef(null),E=l.useRef(null),g=l.useMemo(()=>{if(!a.trim())return d.slice(0,8);const p=a.toLowerCase();return d.filter(O=>O.toLowerCase().includes(p)).slice(0,8)},[a,d]),L=g.some(p=>p===a);l.useEffect(()=>{b(-1)},[a]),l.useEffect(()=>{c>=0&&E.current&&E.current.children[c]?.scrollIntoView({block:"nearest"})},[c]);const h=l.useCallback(()=>{if(!S.current)return;const p=S.current.getBoundingClientRect();s({top:p.bottom+2,left:p.left,width:p.width})},[]);l.useEffect(()=>(h(),window.addEventListener("scroll",h,!0),window.addEventListener("resize",h),()=>{window.removeEventListener("scroll",h,!0),window.removeEventListener("resize",h)}),[h]);const f=p=>{p.key==="ArrowDown"?(p.preventDefault(),b(O=>Math.min(O+1,g.length-1))):p.key==="ArrowUp"?(p.preventDefault(),b(O=>Math.max(O-1,-1))):p.key==="Enter"?(p.preventDefault(),c>=0&&c<g.length?C(g[c]):C(a)):p.key==="Escape"&&w()},v=g.length>0&&N;return e.jsxs(e.Fragment,{children:[e.jsx("input",{ref:S,type:"text",value:a,onChange:p=>u(p.target.value),onKeyDown:f,onBlur:()=>{setTimeout(()=>C(a),150)},autoFocus:!0,placeholder:i,className:"w-full px-1.5 py-0.5 bg-admin-bg border border-admin-accent rounded text-white text-[13px] focus:outline-none"}),v&&ke.createPortal(e.jsxs("ul",{ref:E,"data-combobox-list":!0,style:{position:"fixed",top:N.top,left:N.left,width:N.width},className:"max-h-[180px] overflow-y-auto bg-[#1a1a2e] border border-admin-border rounded shadow-lg z-[9999]",children:[g.map((p,O)=>{const P=O===c;return e.jsx("li",{children:e.jsx("button",{type:"button",tabIndex:-1,onMouseDown:R=>{R.preventDefault(),C(p)},onMouseEnter:()=>b(O),className:H("w-full text-left px-2 py-1.5 text-[13px] transition-colors",P?"bg-admin-accent/20 text-white":"text-white/80 hover:bg-white/5"),children:Je(p,a)})},p)}),a.trim()&&!L&&e.jsx("li",{className:"border-t border-admin-border/40",children:e.jsxs("button",{type:"button",tabIndex:-1,onMouseDown:p=>{p.preventDefault(),C(a)},className:"w-full text-left px-2 py-1.5 text-[13px] text-admin-accent/70 hover:bg-white/5",children:["“",e.jsx("span",{className:"text-white",children:a}),"” 새로 추가"]})})]}),document.body)]})}function Je(a,d){if(!d.trim())return a;const u=a.toLowerCase().indexOf(d.toLowerCase());return u===-1?a:e.jsxs(e.Fragment,{children:[a.slice(0,u),e.jsx("span",{className:"text-admin-accent font-medium",children:a.slice(u,u+d.length)}),a.slice(u+d.length)]})}function Ze({value:a,options:d,onCommit:u,onCancel:C}){const[w,i]=l.useState(()=>a?a.split(",").map(o=>o.trim()).filter(Boolean):[]),[c,b]=l.useState(""),[N,s]=l.useState(-1),[S,E]=l.useState(null),g=l.useRef(null),L=l.useRef(null),h=l.useMemo(()=>{const o=c.toLowerCase();return d.filter(M=>!w.includes(M)).filter(M=>!o||M.toLowerCase().includes(o)).slice(0,8)},[c,d,w]),f=h.some(o=>o===c);l.useEffect(()=>{s(-1)},[c]),l.useEffect(()=>{N>=0&&L.current&&L.current.children[N]?.scrollIntoView({block:"nearest"})},[N]);const v=l.useCallback(()=>{if(!g.current)return;const o=g.current.getBoundingClientRect();E({top:o.bottom+2,left:o.left,width:Math.max(o.width,180)})},[]);l.useEffect(()=>(v(),window.addEventListener("scroll",v,!0),window.addEventListener("resize",v),()=>{window.removeEventListener("scroll",v,!0),window.removeEventListener("resize",v)}),[v,w]);const p=l.useCallback(o=>{u(o.join(", "))},[u]),O=o=>{const M=o.trim();if(!M||w.includes(M))return;const F=[...w,M];i(F),b(""),g.current?.focus()},P=o=>{i(M=>M.filter(F=>F!==o))},R=o=>{o.key==="ArrowDown"?(o.preventDefault(),s(M=>Math.min(M+1,h.length-1))):o.key==="ArrowUp"?(o.preventDefault(),s(M=>Math.max(M-1,-1))):o.key==="Enter"?(o.preventDefault(),N>=0&&N<h.length?O(h[N]):c.trim()?O(c):p(w)):o.key==="Escape"?C():o.key==="Backspace"&&!c&&w.length>0?i(M=>M.slice(0,-1)):(o.key===","||o.key==="Tab")&&c.trim()&&(o.preventDefault(),O(c))},K=h.length>0&&S;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-1 w-full px-1 py-0.5 bg-admin-bg border border-admin-accent rounded min-h-[26px] cursor-text",onClick:()=>g.current?.focus(),children:[w.map(o=>e.jsxs("span",{className:"inline-flex items-center gap-0.5 text-[11px] px-1.5 py-0 rounded bg-purple-500/15 text-purple-400 border border-purple-500/30",children:[o,e.jsx("button",{type:"button",onClick:M=>{M.stopPropagation(),P(o)},className:"hover:text-white",children:e.jsx(re,{className:"h-2.5 w-2.5"})})]},o)),e.jsx("input",{ref:g,type:"text",value:c,onChange:o=>b(o.target.value),onKeyDown:R,onBlur:()=>{setTimeout(()=>{const o=c.trim()?[...w,c.trim()]:w;p(o)},150)},autoFocus:!0,placeholder:w.length===0?"카테고리 입력...":"",className:"flex-1 min-w-[60px] bg-transparent text-white text-[13px] focus:outline-none"})]}),K&&ke.createPortal(e.jsxs("ul",{ref:L,style:{position:"fixed",top:S.top,left:S.left,width:S.width},className:"max-h-[180px] overflow-y-auto bg-[#1a1a2e] border border-admin-border rounded shadow-lg z-[9999]",children:[h.map((o,M)=>e.jsx("li",{children:e.jsx("button",{type:"button",tabIndex:-1,onMouseDown:F=>{F.preventDefault(),O(o)},onMouseEnter:()=>s(M),className:H("w-full text-left px-2 py-1.5 text-[13px] transition-colors",M===N?"bg-admin-accent/20 text-white":"text-white/80 hover:bg-white/5"),children:et(o,c)})},o)),c.trim()&&!f&&e.jsx("li",{className:"border-t border-admin-border/40",children:e.jsxs("button",{type:"button",tabIndex:-1,onMouseDown:o=>{o.preventDefault(),O(c)},className:"w-full text-left px-2 py-1.5 text-[13px] text-admin-accent/70 hover:bg-white/5",children:["“",e.jsx("span",{className:"text-white",children:c}),"” 새로 추가"]})})]}),document.body)]})}function et(a,d){if(!d.trim())return a;const u=a.toLowerCase().indexOf(d.toLowerCase());return u===-1?a:e.jsxs(e.Fragment,{children:[a.slice(0,u),e.jsx("span",{className:"text-admin-accent font-medium",children:a.slice(u,u+d.length)}),a.slice(u+d.length)]})}function tt(a){const d=a.reduce((i,c)=>i+(q[c]?.width||120),0)+80,u={},C=[];let w=0;for(let i=0;i<a.length;i++){const c=q[a[i]]?.width||120,b=c/d*100;u[a[i]]=`${b}%`,i<ee&&(C.push(`${w/d*100}%`),w+=c)}return u.__actions=`${80/d*100}%`,{total:d,pctWidths:u,stickyOffsets:C}}function st({data:a,headers:d,visibleColumns:u,onCellEdit:C,onMemoEdit:w,onInfluencerEdit:i,onDelete:c,onCreateProposal:b,stickyTopOffset:N=0}){const[s,S]=l.useState({column:null,direction:null}),[E,g]=l.useState(null),[L,h]=l.useState(""),f=l.useMemo(()=>Ce.filter(t=>u.includes(t)&&!De.includes(t)),[u]),v=l.useMemo(()=>tt(f),[f]),p=l.useMemo(()=>!s.column||!s.direction?a:[...a].sort((t,r)=>{const x=String(t[s.column]||""),n=String(r[s.column]||""),y=parseFloat(x.replace(/,/g,"")),T=parseFloat(n.replace(/,/g,""));return!isNaN(y)&&!isNaN(T)?s.direction==="asc"?y-T:T-y:s.direction==="asc"?x.localeCompare(n,"ko"):n.localeCompare(x,"ko")}),[a,s]),O=t=>{S(r=>r.column!==t?{column:t,direction:"asc"}:r.direction==="asc"?{column:t,direction:"desc"}:{column:null,direction:null})},P=(t,r,x,n)=>{const y=q[r];y&&(y.type==="editable-memo"?w(t,x,n,r):y.type==="influencers"?i(t,x,n):y.type==="tags"||y.type==="tag-combobox"?(g({rowIndex:t,column:r}),h(x)):(y.type==="editable-text"||y.type==="status"||y.type==="combobox"||y.type==="editable-link")&&(g({rowIndex:t,column:r}),h(x)))},R=(t,r)=>{if(E?.rowIndex===t&&E?.column===r){const x=String(a.find(n=>n._rowIndex===t)?.[r]||"");if(L!==x){const n=d.indexOf(r);n!==-1&&C(t,n,L)}g(null),h("")}},K=(t,r,x)=>{t.key==="Enter"?R(r,x):t.key==="Escape"&&(g(null),h(""))},o=(t,r,x)=>{const n=String(t[r]||""),y=q[r];if(!y)return n;const T=E?.rowIndex===x&&E?.column===r;if(y.type==="combobox"){if(T){const D=[...new Set(a.map(k=>String(k[r]||"")).filter(Boolean))].sort((k,I)=>k.localeCompare(I,"ko"));return e.jsx(Xe,{value:L,options:D,onChange:h,onCommit:k=>{const I=String(a.find(m=>m._rowIndex===x)?.[r]||"");if(k!==I){const m=d.indexOf(r);m!==-1&&C(x,m,k)}g(null),h("")},onCancel:()=>{g(null),h("")}})}return e.jsx("button",{onClick:()=>P(x,r,n,String(t.제품명||"")),className:"w-full text-left text-[13px] text-white/90 hover:text-white transition-colors cursor-text",children:n||e.jsx("span",{className:"text-admin-text/40",children:"-"})})}if(y.type==="editable-text")return T?e.jsx("input",{type:"text",value:L,onChange:D=>h(D.target.value),onBlur:()=>R(x,r),onKeyDown:D=>K(D,x,r),autoFocus:!0,className:"w-full px-1.5 py-0.5 bg-admin-bg border border-admin-accent rounded text-white text-[13px] focus:outline-none"}):e.jsx("button",{onClick:()=>P(x,r,n,String(t.제품명||"")),className:"w-full text-left text-[13px] text-white/90 hover:text-white transition-colors cursor-text",children:n||e.jsx("span",{className:"text-admin-text/40",children:"-"})});if(y.type==="status"){if(T)return e.jsxs("select",{value:L,onChange:k=>{h(k.target.value);const I=d.indexOf(r);I!==-1&&C(x,I,k.target.value),g(null),h("")},onBlur:()=>{g(null),h("")},autoFocus:!0,className:"w-full px-1 py-0.5 bg-admin-bg border border-admin-accent rounded text-white text-[13px] focus:outline-none text-center",children:[e.jsx("option",{value:"",children:"-"}),le.map(k=>e.jsx("option",{value:k,children:k},k))]});if(!n||n==="-")return e.jsx("span",{className:"text-admin-text/40",children:"-"});const D=Ne[n]||"bg-gray-500/20 text-gray-400 border-gray-500/40";return e.jsx("button",{onClick:()=>P(x,r,n,String(t.제품명||"")),children:e.jsx(be,{variant:"outline",className:H("font-medium text-[11px] px-2 py-0 cursor-pointer",D),children:n})})}if(y.type==="tag-combobox"||y.type==="tags"){if(T){const k=[...new Set(a.flatMap(I=>String(I[r]||"").split(",").map(m=>m.trim()).filter(Boolean)))].sort((I,m)=>I.localeCompare(m,"ko"));return e.jsx(Ze,{value:L,options:k,onCommit:I=>{const m=String(a.find(j=>j._rowIndex===x)?.[r]||"");if(I!==m){const j=d.indexOf(r);j!==-1&&C(x,j,I)}g(null),h("")},onCancel:()=>{g(null),h("")}})}if(!n||n==="-")return e.jsx("button",{onClick:()=>P(x,r,n,String(t.제품명||"")),className:"text-[12px] text-admin-text/40 hover:text-purple-400 transition-colors",children:"+ 카테고리 추가"});const D=n.split(",").map(k=>k.trim()).filter(Boolean);return e.jsx("button",{onClick:()=>P(x,r,n,String(t.제품명||"")),className:"flex flex-wrap gap-1",children:D.map((k,I)=>e.jsx("span",{className:"text-[11px] px-1.5 py-0.5 rounded bg-purple-500/15 text-purple-400 border border-purple-500/30",children:k},I))})}if(y.type==="link")return!n||n==="-"?e.jsx("span",{className:"text-admin-text/40",children:"-"}):e.jsx("a",{href:n,target:"_blank",rel:"noopener noreferrer",className:"text-admin-accent/70 hover:text-admin-accent transition-colors",children:e.jsx(Z,{className:"h-3.5 w-3.5 mx-auto"})});if(y.type==="editable-link")return T?e.jsx("input",{type:"text",value:L,onChange:D=>h(D.target.value),onBlur:()=>R(x,r),onKeyDown:D=>K(D,x,r),autoFocus:!0,placeholder:"https://...",className:"w-full px-1.5 py-0.5 bg-admin-bg border border-admin-accent rounded text-white text-[13px] focus:outline-none"}):!n||n==="-"?e.jsx("button",{onClick:()=>P(x,r,n,String(t.제품명||"")),className:"text-[12px] text-admin-text/40 hover:text-white transition-colors",children:"+ URL 추가"}):e.jsxs("div",{className:"flex items-center gap-1.5 min-w-0",children:[e.jsx("button",{onClick:()=>P(x,r,n,String(t.제품명||"")),className:"truncate text-[13px] text-white/70 hover:text-white transition-colors min-w-0",title:n,children:(()=>{try{return new URL(n).hostname.replace("www.","")}catch{return n}})()}),e.jsx("a",{href:n,target:"_blank",rel:"noopener noreferrer",onClick:D=>D.stopPropagation(),className:"shrink-0 text-admin-accent/60 hover:text-admin-accent transition-colors",children:e.jsx(Z,{className:"h-3 w-3"})})]});if(y.type==="influencers"){if(!n||n==="-")return e.jsx("button",{onClick:()=>i(x,"",String(t.제품명||"")),className:"text-[12px] text-admin-text/40 hover:text-admin-accent transition-colors",children:"+ 인플루언서 추가"});const D=n.split(",").map(k=>k.trim()).filter(Boolean);return e.jsxs("button",{onClick:()=>i(x,n,String(t.제품명||"")),className:"flex flex-wrap gap-1 text-left",children:[D.slice(0,3).map((k,I)=>e.jsxs("span",{className:"text-[11px] px-1.5 py-0.5 rounded bg-teal-500/15 text-teal-400 border border-teal-500/30",children:["@",k]},I)),D.length>3&&e.jsxs("span",{className:"text-[11px] px-1.5 py-0.5 rounded bg-admin-bg text-admin-text",children:["+",D.length-3]})]})}return y.type==="editable-memo"?e.jsxs("button",{onClick:()=>w(x,n,String(t.제품명||""),r),className:"w-full text-left group/memo relative",children:[e.jsx("span",{className:"block truncate text-[13px] text-white/90 max-w-full",children:n||e.jsx("span",{className:"text-admin-text/40",children:"메모 추가..."})}),e.jsx("span",{className:"absolute top-0 right-0 opacity-0 group-hover/memo:opacity-100 transition-opacity",children:e.jsx(_e,{className:"h-3 w-3 text-admin-accent"})})]}):e.jsx("span",{className:"text-[13px]",children:n||"-"})},M=({column:t})=>s.column===t?s.direction==="asc"?e.jsx(Ee,{className:"h-3 w-3 shrink-0 text-admin-accent"}):e.jsx(Pe,{className:"h-3 w-3 shrink-0 text-admin-accent"}):e.jsx(Le,{className:"h-3 w-3 shrink-0 opacity-0 group-hover/th:opacity-40 transition-opacity"}),F=l.useRef(null),V=l.useRef(null),$=l.useRef(!1),Y=()=>{$.current||($.current=!0,F.current&&V.current&&(V.current.scrollLeft=F.current.scrollLeft),requestAnimationFrame(()=>{$.current=!1}))},ce=()=>{$.current||($.current=!0,F.current&&V.current&&(F.current.scrollLeft=V.current.scrollLeft),requestAnimationFrame(()=>{$.current=!1}))},G=e.jsxs("colgroup",{children:[f.map(t=>e.jsx("col",{style:{width:v.pctWidths[t]}},t)),e.jsx("col",{style:{width:v.pctWidths.__actions}})]}),X=()=>e.jsx("div",{className:"md:hidden space-y-3",children:p.map(t=>{const r=String(t.제품명||""),x=String(t.업체명||""),n=String(t.상태||""),y=String(t["제품 카테고리"]||""),T=String(t.공식몰||""),D=String(t.샘플피드||""),k=String(t.제안서||""),I=String(t.담당자||""),m=String(t["담당자 전화"]||""),j=String(t["담당자 이메일"]||""),A=String(t["핏한 인플루언서"]||""),W=String(t.소싱메모||""),te=String(t.제품메모||""),J=Ne[n]||"bg-gray-500/20 text-gray-400 border-gray-500/40",se=y.split(",").map(_=>_.trim()).filter(Boolean),Q=A.split(",").map(_=>_.trim()).filter(Boolean);return e.jsxs("div",{className:"bg-admin-card border border-admin-border rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("span",{className:"text-sm font-medium text-white truncate block",children:r||"-"}),x&&e.jsx("span",{className:"text-[12px] text-admin-text",children:x})]}),e.jsxs("div",{className:"flex items-center gap-1.5 shrink-0",children:[n&&e.jsx(be,{variant:"outline",className:H("text-[10px] px-1.5 py-0",J),children:n}),e.jsx("button",{onClick:()=>b(t._rowIndex,r),className:"p-1 text-admin-text/40 hover:text-admin-accent transition-colors",title:"제안서 만들기",children:e.jsx(je,{className:"h-3.5 w-3.5"})}),e.jsx("button",{onClick:()=>c(t._rowIndex,r),className:"p-1 text-admin-text/30 hover:text-red-400 transition-colors",children:e.jsx(we,{className:"h-3.5 w-3.5"})})]})]}),se.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1 mb-2",children:se.map((_,U)=>e.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-purple-500/15 text-purple-400 border border-purple-500/30",children:_},U))}),e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[T&&e.jsxs("a",{href:T,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-[11px] text-admin-accent/70 hover:text-admin-accent",children:[e.jsx(Z,{className:"h-3 w-3"}),"공식몰"]}),D&&e.jsxs("a",{href:D,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-[11px] text-admin-accent/70 hover:text-admin-accent",children:[e.jsx(Z,{className:"h-3 w-3"}),"샘플"]}),k&&e.jsxs("a",{href:k,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-[11px] text-admin-accent/70 hover:text-admin-accent",children:[e.jsx(Z,{className:"h-3 w-3"}),"제안서"]}),!T&&!D&&!k&&e.jsx("span",{className:"text-[11px] text-admin-text/30",children:"링크 없음"})]}),(I||m||j)&&e.jsxs("div",{className:"flex flex-wrap items-center gap-x-3 gap-y-1 mb-2 text-[11px] text-admin-text",children:[I&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(qe,{className:"h-3 w-3"}),I]}),m&&e.jsxs("a",{href:`tel:${m}`,className:"flex items-center gap-1 hover:text-white",children:[e.jsx(We,{className:"h-3 w-3"}),m]}),j&&e.jsxs("a",{href:`mailto:${j}`,className:"flex items-center gap-1 hover:text-white truncate",children:[e.jsx(Fe,{className:"h-3 w-3"}),j]})]}),e.jsx("button",{onClick:()=>i(t._rowIndex,A,r),className:"flex flex-wrap items-center gap-1 mb-2 w-full text-left",children:Q.length>0?e.jsxs(e.Fragment,{children:[Q.slice(0,3).map((_,U)=>e.jsxs("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-teal-500/15 text-teal-400 border border-teal-500/30",children:["@",_]},U)),Q.length>3&&e.jsxs("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-admin-bg text-admin-text",children:["+",Q.length-3]})]}):e.jsx("span",{className:"text-[11px] text-admin-text/40",children:"+ 인플루언서 추가"})}),e.jsx("div",{className:"flex gap-2",children:["소싱메모","제품메모"].map(_=>{const U=_==="소싱메모"?W:te;return e.jsxs("button",{onClick:()=>w(t._rowIndex,U,r,_),className:"flex-1 flex items-start gap-1 bg-admin-bg/40 rounded px-2 py-1.5 text-left min-w-0",children:[e.jsx(Re,{className:"h-3 w-3 text-admin-text/50 shrink-0 mt-0.5"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("span",{className:"text-[10px] text-admin-text/50 block",children:_==="소싱메모"?"소싱":"제품"}),e.jsx("span",{className:"text-[11px] text-white/70 line-clamp-1 block",children:U||e.jsx("span",{className:"text-admin-text/30",children:"메모 추가..."})})]})]},_)})})]},t._rowIndex)})});return e.jsxs("div",{children:[X(),e.jsxs("div",{className:"hidden md:block",children:[e.jsx("div",{className:"sticky z-40 border border-admin-border border-b-0 rounded-t-lg bg-[#14142a]",style:{top:N},children:e.jsx("div",{ref:F,className:"overflow-x-auto",style:{scrollbarWidth:"none"},onScroll:Y,children:e.jsxs("table",{className:"w-full text-sm border-collapse",style:{minWidth:v.total,tableLayout:"fixed"},children:[G,e.jsx("thead",{children:e.jsxs("tr",{className:"bg-[#14142a]",children:[f.map((t,r)=>{const x=q[t],n=r<ee,y=r===ee-1;return e.jsx("th",{style:n?{left:v.stickyOffsets[r]}:void 0,className:H("px-2.5 py-2.5 text-[11px] uppercase tracking-wider text-admin-text/70 font-semibold border-r border-admin-border/50 last:border-r-0 group/th",n&&"sticky z-40 bg-[#14142a]",y&&"shadow-[3px_0_8px_rgba(0,0,0,0.35)] border-r-admin-border",x?.align==="center"&&"text-center",x?.align==="right"&&"text-right"),children:e.jsxs("button",{onClick:()=>O(t),className:"flex items-center gap-1 w-full hover:text-white transition-colors",children:[e.jsx("span",{className:"whitespace-nowrap",children:x?.label||t}),e.jsx(M,{column:t})]})},t)}),e.jsx("th",{className:"px-2 py-2.5 text-[11px] text-admin-text/70 text-center w-12"})]})})]})})}),e.jsx("div",{className:"border border-admin-border border-t-0 rounded-b-lg overflow-hidden",children:e.jsx("div",{ref:V,className:"overflow-x-auto",onScroll:ce,children:e.jsxs("table",{className:"w-full text-sm border-collapse",style:{minWidth:v.total,tableLayout:"fixed"},children:[G,e.jsx("tbody",{children:p.map((t,r)=>e.jsxs("tr",{className:H("border-b border-admin-border/40 transition-colors hover:bg-white/[0.02]",r%2===0?"bg-[#11111f]":"bg-[#151528]"),children:[f.map((x,n)=>{const y=q[x],T=n<ee,D=n===ee-1,k=r%2===0?"#11111f":"#151528";return e.jsx("td",{style:T?{left:v.stickyOffsets[n],backgroundColor:k}:void 0,className:H("px-2.5 py-2 text-white border-r border-admin-border/30 last:border-r-0 align-top",T&&"sticky z-30",D&&"shadow-[3px_0_8px_rgba(0,0,0,0.35)] border-r-admin-border/60",y?.align==="center"&&"text-center",y?.align==="right"&&"text-right"),children:o(t,x,t._rowIndex)},x)}),e.jsx("td",{className:"px-1 py-2 text-center align-top",children:e.jsxs("div",{className:"flex items-center justify-center gap-0.5",children:[e.jsx("button",{onClick:()=>b(t._rowIndex,String(t.제품명||"")),className:"p-1 text-admin-text/40 hover:text-admin-accent transition-colors",title:"제안서 만들기",children:e.jsx(je,{className:"h-3.5 w-3.5"})}),e.jsx("button",{onClick:()=>c(t._rowIndex,String(t.제품명||"")),className:"p-1 text-admin-text/40 hover:text-red-400 transition-colors",children:e.jsx(we,{className:"h-3.5 w-3.5"})})]})})]},t._rowIndex))})]})})})]})]})}function nt({isOpen:a,onClose:d,onSubmit:u,headers:C,isPending:w}){const[i,c]=l.useState({제품명:"",업체명:"",상태:"진행 전","제품 카테고리":"",공식몰:"",샘플피드:"",담당자:"","담당자 전화":"","담당자 이메일":"","핏한 인플루언서":"",제안서:"",소싱메모:"",제품메모:""}),b=(s,S)=>{c(E=>({...E,[s]:S}))},N=()=>{if(!i.제품명.trim())return;const s=C.map(S=>S==="No."?"":i[S]||"");u(s),c({제품명:"",업체명:"",상태:"진행 전","제품 카테고리":"",공식몰:"",샘플피드:"",담당자:"","담당자 전화":"","담당자 이메일":"","핏한 인플루언서":"",제안서:"",소싱메모:"",제품메모:""}),d()};return e.jsx(xe,{open:a,onOpenChange:d,children:e.jsxs(me,{className:"bg-admin-card border-admin-border text-white max-w-lg max-h-[85vh] overflow-y-auto",children:[e.jsx(he,{children:e.jsx(ue,{className:"text-white",children:"제품 등록"})}),e.jsxs("div",{className:"space-y-3 py-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-admin-text mb-1 block",children:"제품명 *"}),e.jsx(z,{value:i.제품명,onChange:s=>b("제품명",s.target.value),placeholder:"제품명을 입력하세요",className:"bg-admin-bg border-admin-border text-white placeholder:text-admin-text"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-admin-text mb-1 block",children:"업체명"}),e.jsx(z,{value:i.업체명,onChange:s=>b("업체명",s.target.value),placeholder:"업체명",className:"bg-admin-bg border-admin-border text-white placeholder:text-admin-text"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-admin-text mb-1 block",children:"상태"}),e.jsx("select",{value:i.상태,onChange:s=>b("상태",s.target.value),className:"w-full h-9 px-3 rounded-md bg-admin-bg border border-admin-border text-white text-sm focus:outline-none focus:ring-2 focus:ring-admin-accent",children:le.map(s=>e.jsx("option",{value:s,children:s},s))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-admin-text mb-1 block",children:"제품 카테고리"}),e.jsx(z,{value:i["제품 카테고리"],onChange:s=>b("제품 카테고리",s.target.value),placeholder:"콤마로 구분 (예: 식품, 간식)",className:"bg-admin-bg border-admin-border text-white placeholder:text-admin-text"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-admin-text mb-1 block",children:"공식몰 URL"}),e.jsx(z,{value:i.공식몰,onChange:s=>b("공식몰",s.target.value),placeholder:"https://...",className:"bg-admin-bg border-admin-border text-white placeholder:text-admin-text"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-admin-text mb-1 block",children:"샘플피드 URL"}),e.jsx(z,{value:i.샘플피드,onChange:s=>b("샘플피드",s.target.value),placeholder:"https://...",className:"bg-admin-bg border-admin-border text-white placeholder:text-admin-text"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-admin-text mb-1 block",children:"제안서 URL"}),e.jsx(z,{value:i.제안서,onChange:s=>b("제안서",s.target.value),placeholder:"https://...",className:"bg-admin-bg border-admin-border text-white placeholder:text-admin-text"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-admin-text mb-1 block",children:"담당자"}),e.jsx(z,{value:i.담당자,onChange:s=>b("담당자",s.target.value),placeholder:"담당자명",className:"bg-admin-bg border-admin-border text-white placeholder:text-admin-text"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-admin-text mb-1 block",children:"담당자 전화"}),e.jsx(z,{value:i["담당자 전화"],onChange:s=>b("담당자 전화",s.target.value),placeholder:"010-0000-0000",className:"bg-admin-bg border-admin-border text-white placeholder:text-admin-text"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-admin-text mb-1 block",children:"담당자 이메일"}),e.jsx(z,{value:i["담당자 이메일"],onChange:s=>b("담당자 이메일",s.target.value),placeholder:"email@example.com",className:"bg-admin-bg border-admin-border text-white placeholder:text-admin-text"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-admin-text mb-1 block",children:"소싱메모"}),e.jsx("textarea",{value:i.소싱메모,onChange:s=>b("소싱메모",s.target.value),placeholder:"소싱 관련 메모...",className:"w-full h-20 px-3 py-2 bg-admin-bg border border-admin-border rounded-md text-white placeholder:text-admin-text focus:outline-none focus:ring-2 focus:ring-admin-accent resize-none text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-admin-text mb-1 block",children:"제품메모"}),e.jsx("textarea",{value:i.제품메모,onChange:s=>b("제품메모",s.target.value),placeholder:"제품 관련 메모...",className:"w-full h-20 px-3 py-2 bg-admin-bg border border-admin-border rounded-md text-white placeholder:text-admin-text focus:outline-none focus:ring-2 focus:ring-admin-accent resize-none text-sm"})]})]}),e.jsxs(pe,{children:[e.jsx(B,{variant:"outline",onClick:d,className:"bg-transparent border-admin-border text-white hover:bg-admin-bg",children:"취소"}),e.jsx(B,{onClick:N,disabled:!i.제품명.trim()||w,className:"bg-admin-accent text-admin-bg hover:bg-admin-accent/90",children:w?"등록 중...":"등록"})]})]})})}function at({isOpen:a,onClose:d,currentValue:u,onSave:C}){const{data:w,isLoading:i}=Se(),[c,b]=l.useState(""),[N,s]=l.useState([]);l.useEffect(()=>{a&&(s(u?u.split(",").map(f=>f.trim()).filter(Boolean):[]),b(""))},[a,u]);const S=w?.data||[],E=l.useMemo(()=>{if(!c)return S.slice(0,50);const f=c.toLowerCase();return S.filter(v=>{const p=String(v.인스타ID||"").toLowerCase(),O=String(v["인스타 이름"]||"").toLowerCase();return p.includes(f)||O.includes(f)}).slice(0,50)},[S,c]),g=f=>{s(v=>v.includes(f)?v.filter(p=>p!==f):[...v,f])},L=f=>{s(v=>v.filter(p=>p!==f))},h=()=>{C(N.join(", ")),d()};return e.jsx(xe,{open:a,onOpenChange:d,children:e.jsxs(me,{className:"bg-admin-card border-admin-border text-white max-w-lg max-h-[85vh] flex flex-col",children:[e.jsx(he,{children:e.jsx(ue,{className:"text-white",children:"인플루언서 선택"})}),N.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1.5 pb-2 border-b border-admin-border",children:N.map(f=>e.jsxs("span",{className:"inline-flex items-center gap-1 text-[11px] px-2 py-0.5 rounded-full bg-teal-500/15 text-teal-400 border border-teal-500/30",children:["@",f,e.jsx("button",{onClick:()=>L(f),className:"hover:text-white",children:e.jsx(re,{className:"h-3 w-3"})})]},f))}),e.jsxs("div",{className:"relative",children:[e.jsx(de,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-admin-text"}),e.jsx(z,{type:"text",placeholder:"인스타ID 또는 이름 검색...",value:c,onChange:f=>b(f.target.value),className:"pl-10 bg-admin-bg border-admin-border text-white placeholder:text-admin-text"})]}),e.jsx("div",{className:"flex-1 overflow-y-auto min-h-0 max-h-[40vh] space-y-0.5",children:i?e.jsx("div",{className:"text-center py-8 text-admin-text",children:"로딩 중..."}):E.length===0?e.jsx("div",{className:"text-center py-8 text-admin-text",children:"검색 결과가 없습니다"}):E.map(f=>{const v=String(f.인스타ID||""),p=String(f["인스타 이름"]||""),O=String(f["인플루언서 등급"]||""),P=String(f.팔로워||""),R=N.includes(v);return e.jsxs("button",{onClick:()=>g(v),className:H("flex items-center gap-3 w-full px-3 py-2 rounded text-left transition-colors",R?"bg-teal-500/10":"hover:bg-admin-bg"),children:[e.jsx("div",{className:H("flex h-4 w-4 items-center justify-center rounded border shrink-0",R?"bg-teal-500 border-teal-500":"border-admin-border"),children:R&&e.jsx(ye,{className:"h-3 w-3 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("span",{className:"text-sm text-admin-accent",children:["@",v]}),e.jsx("span",{className:"text-sm text-white/70 ml-2",children:p})]}),e.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[O&&e.jsx("span",{className:"text-[11px] text-admin-text",children:O}),P&&e.jsx("span",{className:"text-[11px] text-admin-text tabular-nums",children:P})]})]},f._rowIndex)})}),e.jsxs(pe,{children:[e.jsx(B,{variant:"outline",onClick:d,className:"bg-transparent border-admin-border text-white hover:bg-admin-bg",children:"취소"}),e.jsxs(B,{onClick:h,className:"bg-admin-accent text-admin-bg hover:bg-admin-accent/90",children:["선택 완료 (",N.length,"명)"]})]})]})})}function dt(){const a=Me(),{data:d,isLoading:u,error:C}=Ue(),{data:w}=Se(),i=Be(),c=ze(),b=$e(),N=He(),s=l.useRef(null),[S,E]=l.useState(0);l.useEffect(()=>{const m=s.current;if(!m)return;const j=new ResizeObserver(()=>{E(m.offsetHeight)});return j.observe(m),()=>j.disconnect()},[]);const[g,L]=l.useState(""),[h,f]=l.useState([]),[v,p]=l.useState([]),[O,P]=l.useState(!1),[R,K]=l.useState({isOpen:!1,rowIndex:-1,value:"",name:"",column:""}),[o,M]=l.useState({isOpen:!1,rowIndex:-1,value:"",name:""}),[F,V]=l.useState({isOpen:!1,rowIndex:-1,name:""}),$=d?.data||[],Y=d?.headers||[],ce=l.useMemo(()=>Ce.filter(m=>!De.includes(m)),[]),G=l.useMemo(()=>$.filter(m=>{if(g){const j=g.toLowerCase(),A=String(m.제품명||"").toLowerCase(),W=String(m.업체명||"").toLowerCase();if(!A.includes(j)&&!W.includes(j))return!1}if(h.length>0&&!h.includes(String(m.상태||"")))return!1;if(v.length>0){const j=String(m["제품 카테고리"]||"").split(",").map(A=>A.trim());if(!v.some(A=>j.includes(A)))return!1}return!0}),[$,g,h,v]),X=()=>i.mutate(),t=m=>{c.mutate({values:m})},r=(m,j,A)=>{b.mutate({rowIndex:m,columnIndex:j,value:A})},x=(m,j,A,W)=>{const te={소싱메모:`[소싱메모]
- `,제품메모:`[제품메모]
- `},J=j.trim()?j:te[W]||"";K({isOpen:!0,rowIndex:m,value:J,name:A,column:W})},n=m=>{const j=Y.indexOf(R.column);j!==-1&&b.mutate({rowIndex:R.rowIndex,columnIndex:j,value:m}),K({isOpen:!1,rowIndex:-1,value:"",name:"",column:""})},y=(m,j,A)=>{M({isOpen:!0,rowIndex:m,value:j,name:A})},T=m=>{const j=Y.indexOf("핏한 인플루언서");j!==-1&&b.mutate({rowIndex:o.rowIndex,columnIndex:j,value:m}),M({isOpen:!1,rowIndex:-1,value:"",name:""})},D=(m,j)=>{V({isOpen:!0,rowIndex:m,name:j})},k=()=>{N.mutate(F.rowIndex),V({isOpen:!1,rowIndex:-1,name:""})},I=(m,j)=>{const A=$.find(_=>_._rowIndex===m);if(!A)return;const W=String(A.업체명||""),J=String(A["핏한 인플루언서"]||"").split(",").map(_=>_.trim()).filter(Boolean),se=w?.data||[],Q=J.map(_=>{const U=se.find(ne=>String(ne.인스타ID||"")===_);return U?{id:crypto.randomUUID(),name:String(U["인스타 이름"]||_),followers:oe(String(U.팔로워||"")),category:String(U["카테고리(대)"]||""),profileUrl:String(U["프로필 링크"]||`https://instagram.com/${_}`),avgViews:oe(String(U["최근 10 평균 릴스 조회수"]||"")),engagementRate:"",maxComments:oe(String(U["공구 최대댓글수"]||"")),commentActivity:(()=>{const ne=String(U.댓글활동여부||"").trim().toUpperCase();return ne==="Y"||ne==="O"?"Y":"N"})()}:{id:crypto.randomUUID(),name:_,followers:"",category:"",profileUrl:`https://instagram.com/${_}`,avgViews:"",engagementRate:"",maxComments:"",commentActivity:""}});a("/admin/proposal",{state:{productName:j,brandName:W,influencers:Q}})};return C?e.jsx("div",{className:"max-w-[1800px] mx-auto mt-8",children:e.jsxs("div",{className:"bg-red-500/20 border border-red-500/40 rounded-lg p-6 text-center",children:[e.jsx("p",{className:"text-red-400 font-semibold",children:"데이터를 불러오는데 실패했습니다"}),e.jsx("p",{className:"text-admin-text text-sm mt-2",children:String(C)}),e.jsx(B,{onClick:X,className:"mt-4",children:"다시 시도"})]})}):e.jsxs("div",{className:"max-w-[1800px] mx-auto mt-4 md:mt-8",children:[e.jsxs("div",{className:"hidden md:flex md:items-center md:justify-between mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"제품소싱 관리"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(B,{onClick:()=>P(!0),className:"bg-admin-accent text-admin-bg hover:bg-admin-accent/90",children:[e.jsx(fe,{className:"h-4 w-4 mr-2"}),"제품 추가"]}),e.jsxs(B,{onClick:X,disabled:i.isPending,variant:"outline",className:"bg-transparent border-admin-border text-white hover:bg-admin-bg",children:[e.jsx(ge,{className:`h-4 w-4 mr-2 ${i.isPending?"animate-spin":""}`}),"새로고침"]})]})]}),e.jsxs("div",{ref:s,className:"sticky top-0 z-50 bg-admin-bg py-2 md:pt-2 md:pb-4 -mx-3 px-3 md:-mx-6 md:px-6 shadow-[0_4px_12px_rgba(0,0,0,0.3)]",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2 md:hidden",children:[e.jsx("h1",{className:"text-lg font-bold text-white",children:"제품소싱 관리"}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(B,{size:"sm",onClick:()=>P(!0),className:"bg-admin-accent text-admin-bg hover:bg-admin-accent/90 h-8 px-2",children:e.jsx(fe,{className:"h-4 w-4"})}),e.jsx(B,{size:"sm",onClick:X,disabled:i.isPending,variant:"outline",className:"bg-transparent border-admin-border text-white hover:bg-admin-bg h-8 px-2",children:e.jsx(ge,{className:`h-4 w-4 ${i.isPending?"animate-spin":""}`})})]})]}),e.jsx(Ge,{searchQuery:g,onSearchChange:L,selectedStatuses:h,onStatusesChange:f,selectedCategories:v,onCategoriesChange:p,resultCount:G.length,totalCount:$.length})]}),u?e.jsx("div",{className:"flex items-center justify-center h-64 bg-admin-card rounded-lg border border-admin-border",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-admin-accent mx-auto mb-4"}),e.jsx("p",{className:"text-admin-text",children:"데이터를 불러오는 중..."})]})}):e.jsx(st,{data:G,headers:Y,visibleColumns:ce,onCellEdit:r,onMemoEdit:x,onInfluencerEdit:y,onDelete:D,onCreateProposal:I,stickyTopOffset:S}),e.jsx(nt,{isOpen:O,onClose:()=>P(!1),onSubmit:t,headers:Y,isPending:c.isPending}),e.jsx(Te,{isOpen:R.isOpen,onClose:()=>K({isOpen:!1,rowIndex:-1,value:"",name:"",column:""}),initialValue:R.value,onSave:n,influencerName:`${R.name} — ${R.column}`}),e.jsx(at,{isOpen:o.isOpen,onClose:()=>M({isOpen:!1,rowIndex:-1,value:"",name:""}),currentValue:o.value,onSave:T}),e.jsx(xe,{open:F.isOpen,onOpenChange:()=>V({isOpen:!1,rowIndex:-1,name:""}),children:e.jsxs(me,{className:"bg-admin-card border-admin-border text-white max-w-sm",children:[e.jsx(he,{children:e.jsx(ue,{className:"text-white",children:"제품 삭제"})}),e.jsxs("p",{className:"text-sm text-admin-text py-4",children:[e.jsx("span",{className:"text-white font-medium",children:F.name||"이 제품"}),"을(를) 삭제하시겠습니까?",e.jsx("br",{}),"이 작업은 되돌릴 수 없습니다."]}),e.jsxs(pe,{children:[e.jsx(B,{variant:"outline",onClick:()=>V({isOpen:!1,rowIndex:-1,name:""}),className:"bg-transparent border-admin-border text-white hover:bg-admin-bg",children:"취소"}),e.jsx(B,{onClick:k,disabled:N.isPending,className:"bg-red-500 text-white hover:bg-red-600",children:N.isPending?"삭제 중...":"삭제"})]})]})}),e.jsx(Ae,{position:"top-right",theme:"dark"})]})}export{dt as default};
