import{r as c,j as e,a as Le}from"./index-EaFqxTF_.js";import{c as te,S as ke,I as me,a as ze,M as X,G as Ce,X as we,D as ve,H as ye,C as ee,b as C,d as Se,f as G,B as O,e as ue,U as Te,g as oe,h as Fe,i as Re,j as Pe,k as Ae,l as Ve,t as Ue,u as He,m as Ge,n as $e,o as qe,p as Be,q as We,r as Ke,s as Ye}from"./useInfluencerData-C23T9Njw.js";import{P as Me,E as Qe,B as Ee,A as Je,a as Xe,b as Ze,M as Oe,R as et,c as tt,T as st}from"./MemoEditModal-4k_gCja-.js";import{u as at,a as nt,b as rt,f as K,c as it}from"./useAnalyzerData-DFjprKCG.js";import{C as lt}from"./copy-BxnVvsl-.js";import"./useQuery-CC7DIUQr.js";const ct=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],dt=te("clipboard-list",ct);const ot=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],mt=te("save",ot);const xt=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],ht=te("settings",xt);const ut=[["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M12 21v-9",key:"17s77i"}],["path",{d:"M12 8V3",key:"13r4qs"}],["path",{d:"M17 16h4",key:"h1uq16"}],["path",{d:"M19 12V3",key:"o1uvq1"}],["path",{d:"M19 21v-5",key:"qua636"}],["path",{d:"M3 14h4",key:"bcjad9"}],["path",{d:"M5 10V3",key:"cb8scm"}],["path",{d:"M5 21v-7",key:"1w1uti"}]],bt=te("sliders-vertical",ut);const pt=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],ft=te("sparkles",pt);const gt=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],fe=te("star",gt);function jt({searchQuery:s,onSearchChange:i,categoryOptions:f,selectedCategories:g,onCategoriesChange:x,selectedGrades:m,onGradesChange:j,updateStatusOptions:u,selectedUpdateStatus:S,onUpdateStatusChange:o,resultCount:N,totalCount:b,showFavoritesOnly:I,onFavoritesToggle:M}){const[w,v]=c.useState(s),[_,L]=c.useState(!1);c.useEffect(()=>{const P=setTimeout(()=>{i(w)},250);return()=>clearTimeout(P)},[w,i]);const D=g.length+m.length+S.length,F=()=>{x([]),j([]),o([])};return e.jsxs("div",{children:[e.jsxs("div",{className:"md:hidden",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(ke,{className:"absolute left-2.5 top-1/2 -translate-y-1/2 h-3.5 w-3.5 text-admin-text"}),e.jsx(me,{type:"text",placeholder:"ID ÎòêÎäî Ïù¥Î¶Ñ Í≤ÄÏÉâ...",value:w,onChange:P=>v(P.target.value),className:"pl-8 h-8 text-[13px] bg-admin-card border-admin-border text-white placeholder:text-admin-text"})]}),e.jsx("button",{onClick:M,className:`flex items-center justify-center h-8 w-8 rounded-md border shrink-0 transition-colors ${I?"bg-amber-500/20 border-amber-500/40 text-amber-400":"bg-admin-card border-admin-border text-admin-text/40"}`,children:e.jsx(fe,{className:`h-3.5 w-3.5 ${I?"fill-amber-400":""}`})}),e.jsxs("button",{onClick:()=>L(!_),className:`relative flex items-center justify-center h-8 w-8 rounded-md border shrink-0 transition-colors ${_||D>0?"bg-admin-accent/15 border-admin-accent/40 text-admin-accent":"bg-admin-card border-admin-border text-admin-text"}`,children:[e.jsx(ze,{className:"h-3.5 w-3.5"}),D>0&&e.jsx("span",{className:"absolute -top-1.5 -right-1.5 min-w-[16px] h-4 flex items-center justify-center rounded-full bg-admin-accent text-[10px] font-bold text-admin-bg px-1",children:D})]}),e.jsxs("span",{className:"text-[11px] text-admin-text tabular-nums shrink-0",children:[e.jsx("span",{className:"text-white font-semibold",children:N}),"/",b]})]}),_&&e.jsxs("div",{className:"mt-2 flex flex-col gap-2",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(X,{options:f,selected:g,onChange:x,placeholder:"Ïπ¥ÌÖåÍ≥†Î¶¨"}),e.jsx(X,{options:Ce,selected:m,onChange:j,placeholder:"Îì±Í∏â"}),e.jsx(X,{options:u,selected:S,onChange:o,placeholder:"ÏóÖÎç∞Ïù¥Ìä∏"})]}),D>0&&e.jsxs("button",{onClick:F,className:"flex items-center gap-1 text-[11px] text-admin-text hover:text-admin-accent transition-colors self-end",children:[e.jsx(we,{className:"h-3 w-3"}),"ÌïÑÌÑ∞ Ï¥àÍ∏∞Ìôî"]})]})]}),e.jsxs("div",{className:"hidden md:block space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ke,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-admin-text"}),e.jsx(me,{type:"text",placeholder:"ID ÎòêÎäî Ïù¥Î¶Ñ Í≤ÄÏÉâ...",value:w,onChange:P=>v(P.target.value),className:"pl-10 bg-admin-card border-admin-border text-white placeholder:text-admin-text"})]}),e.jsx(X,{options:f,selected:g,onChange:x,placeholder:"Ïπ¥ÌÖåÍ≥†Î¶¨ ÏÑ†ÌÉù"}),e.jsx(X,{options:Ce,selected:m,onChange:j,placeholder:"Îì±Í∏â ÏÑ†ÌÉù"}),e.jsx(X,{options:u,selected:S,onChange:o,placeholder:"ÏóÖÎç∞Ïù¥Ìä∏ ÏÉÅÌÉú"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-admin-text",children:[e.jsx("span",{className:"text-white font-semibold",children:N})," /"," ",b," Í±¥"]}),e.jsxs("button",{onClick:M,className:`flex items-center gap-1.5 px-3 py-1 rounded-full text-[12px] font-medium border transition-colors ${I?"bg-amber-500/20 border-amber-500/40 text-amber-400":"bg-admin-card border-admin-border text-admin-text hover:text-white"}`,children:[e.jsx(fe,{className:`h-3.5 w-3.5 ${I?"fill-amber-400":""}`}),"Ï¶êÍ≤®Ï∞æÍ∏∞Îßå"]})]})]})]})}function Nt(s){const i=s.reduce((m,j)=>m+(ee[j]?.width||120),0),f={},g=[];let x=0;for(let m=0;m<s.length;m++){const j=ee[s[m]]?.width||120,u=j/i*100;f[s[m]]=`${u}%`,m<oe&&(g.push(`${x/i*100}%`),x+=j)}return{total:i,pctWidths:f,stickyOffsets:g}}function vt({data:s,headers:i,visibleColumns:f,onCellEdit:g,onMemoEdit:x,highlightId:m,stickyTopOffset:j=0,mode:u="manage",selectedIds:S,disabledIds:o,onToggleSelect:N}){const[b,I]=c.useState({column:null,direction:null});c.useEffect(()=>{if(!m)return;const t=setTimeout(()=>{const a=document.querySelector(`[data-insta-id="${CSS.escape(m)}"]`);a&&a.scrollIntoView({behavior:"smooth",block:"center"})},100);return()=>clearTimeout(t)},[m]);const[M,w]=c.useState(null),[v,_]=c.useState(""),L=c.useMemo(()=>ve.filter(t=>f.includes(t)&&!ye.includes(t)),[f]),D=c.useMemo(()=>Nt(L),[L]),F=c.useMemo(()=>!b.column||!b.direction?s:[...s].sort((t,a)=>{const l=String(t[b.column]||""),n=String(a[b.column]||""),d=parseFloat(l.replace(/,/g,"")),k=parseFloat(n.replace(/,/g,""));return!isNaN(d)&&!isNaN(k)?b.direction==="asc"?d-k:k-d:b.direction==="asc"?l.localeCompare(n,"ko"):n.localeCompare(l,"ko")}),[s,b]),P=t=>{I(a=>a.column!==t?{column:t,direction:"asc"}:a.direction==="asc"?{column:t,direction:"desc"}:{column:null,direction:null})},$=(t,a,l,n)=>{if(u==="select")return;const d=ee[a];d&&(d.type==="editable-memo"?x(t,l,n):(d.type==="editable-number"||d.type==="editable-boolean")&&(w({rowIndex:t,column:a}),_(l)))},B=(t,a)=>{if(M?.rowIndex===t&&M?.column===a){const l=i.indexOf(a);l!==-1&&g(t,l,v),w(null),_("")}},z=(t,a,l)=>{t.key==="Enter"?B(a,l):t.key==="Escape"&&(w(null),_(""))},A=(t,a,l)=>{const n=String(t[a]||""),d=ee[a];if(!d)return n;const k=i.indexOf(a),R=M?.rowIndex===l&&M?.column===a;if(d.type==="editable-memo")return e.jsxs("button",{onClick:()=>$(l,a,n,t["Ïù∏Ïä§ÌÉÄ Ïù¥Î¶Ñ"]),className:"w-full text-left group/memo relative",children:[e.jsx("span",{className:"whitespace-pre-wrap break-words text-[13px] leading-relaxed text-white/90",children:n||"-"}),e.jsx("span",{className:"absolute top-0 right-0 opacity-0 group-hover/memo:opacity-100 transition-opacity",children:e.jsx(Me,{className:"h-3 w-3 text-admin-accent"})})]});if(d.type==="editable-number"){const p=n&&n!=="-"?n:"0";return R?e.jsx("input",{type:"text",value:v,onChange:E=>_(E.target.value),onBlur:()=>B(l,a),onKeyDown:E=>z(E,l,a),autoFocus:!0,className:"w-full px-1.5 py-0.5 bg-admin-bg border border-admin-accent rounded text-white text-right text-[13px] focus:outline-none"}):e.jsx("button",{onClick:()=>$(l,a,n,""),className:"w-full text-right tabular-nums text-[13px] text-admin-accent/80 hover:text-admin-accent border-b border-dashed border-admin-border hover:border-admin-accent/50 transition-colors",children:G(p)})}if(d.type==="editable-boolean"){const p=n.trim().toUpperCase()==="ON";return e.jsx(O,{size:"sm",variant:"outline",onClick:()=>{g(l,k,p?"OFF":"ON")},className:C("h-6 px-2 text-[11px] font-semibold rounded-full",p?"bg-admin-success/15 text-admin-success border-admin-success/30 hover:bg-admin-success/25":"bg-gray-500/15 text-gray-500 border-gray-500/30 hover:bg-gray-500/25"),children:p?"ON":"OFF"})}if(d.type==="favorite"){const p=n.trim().toUpperCase()==="TRUE";return e.jsx("button",{onClick:()=>{const E=i.indexOf(a);E!==-1&&g(l,E,p?"FALSE":"TRUE")},className:"flex items-center justify-center w-full",children:e.jsx(fe,{className:C("h-4 w-4 transition-colors",p?"fill-amber-400 text-amber-400":"text-admin-text/30 hover:text-amber-400/60")})})}if(d.type==="id"){const p=t["ÌîÑÎ°úÌïÑ ÎßÅÌÅ¨"];return p&&a==="Ïù∏Ïä§ÌÉÄID"?e.jsx("a",{href:p,target:"_blank",rel:"noopener noreferrer",className:"text-admin-accent hover:underline text-[13px] font-medium",children:n}):e.jsx("span",{className:"text-[13px] text-admin-text",children:n})}if(d.type==="name")return e.jsx("span",{className:"text-[13px] text-white whitespace-normal break-words leading-snug",children:n});if(d.type==="link")return!n||n==="-"?e.jsx("span",{className:"text-admin-text/40",children:"-"}):e.jsx("a",{href:n,target:"_blank",rel:"noopener noreferrer",className:"text-admin-accent/70 hover:text-admin-accent transition-colors",children:e.jsx(Qe,{className:"h-3.5 w-3.5 mx-auto"})});if(d.type==="number")return e.jsx("span",{className:"tabular-nums text-[13px]",children:G(n)});if(d.type==="tag")return!n||n==="-"?e.jsx("span",{className:"text-admin-text/40",children:"-"}):e.jsx("span",{className:"text-[12px] text-admin-purple whitespace-normal break-words",children:n});if(d.type==="boolean"){const p=n.trim().toUpperCase()==="Y"||n.trim()==="O";return e.jsx("span",{className:C("text-[11px] font-bold",p?"text-admin-success":"text-admin-text/40"),children:p?"Y":"N"})}if(d.type==="grade"){if(!n||n==="-")return e.jsx("span",{className:"text-admin-text/40",children:"-"});const p=ue[n]||ue.C;return e.jsx(Ee,{variant:"outline",className:C("font-bold text-[11px] px-2 py-0",p),children:n})}return d.type==="text-wrap"?!n||n==="-"?e.jsx("span",{className:"text-admin-text/40",children:"-"}):e.jsx("span",{className:"whitespace-normal break-words text-[13px] leading-snug text-white/80",children:n}):d.type==="desc"?e.jsx("span",{className:"text-[13px] text-admin-text",children:n||"-"}):e.jsx("span",{className:"text-[13px]",children:n})},q=({column:t})=>b.column===t?b.direction==="asc"?e.jsx(Xe,{className:"h-3 w-3 shrink-0 text-admin-accent"}):e.jsx(Ze,{className:"h-3 w-3 shrink-0 text-admin-accent"}):e.jsx(Je,{className:"h-3 w-3 shrink-0 opacity-0 group-hover/th:opacity-40 transition-opacity"}),T=(t,a,l)=>{w({rowIndex:t,column:a}),_(l&&l!=="-"?l:"0")},ge=()=>e.jsx("div",{className:"md:hidden space-y-3",children:F.map(t=>{const a=String(t.Ïù∏Ïä§ÌÉÄID||""),l=String(t["Ïù∏Ïä§ÌÉÄ Ïù¥Î¶Ñ"]||""),n=String(t["Ïù∏ÌîåÎ£®Ïñ∏ÏÑú Îì±Í∏â"]||""),d=String(t["Ïπ¥ÌÖåÍ≥†Î¶¨(ÎåÄ)"]||""),k=String(t["Ïπ¥ÌÖåÍ≥†Î¶¨(Ï§ë)"]||""),R=String(t.ÌåîÎ°úÏõå||""),p=String(t["ÏµúÍ∑º 10 ÌèâÍ∑† Î¶¥Ïä§ Ï°∞ÌöåÏàò"]||""),E=String(t["ÏµúÎåÄ Î¶¥Ïä§ Ï°∞ÌöåÏàò"]||""),W=String(t["ÏµúÍ∑º10Í∞ú ÌèâÍ∑† ÎåìÍ∏ÄÏàò"]||""),ae=String(t["Í≥µÍµ¨ ÌèâÍ∑†ÎåìÍ∏ÄÏàò"]||""),ne=String(t["Í≥µÍµ¨ ÏµúÎåÄÎåìÍ∏ÄÏàò"]||""),re=String(t.ÎßàÏßÄÎßâÍ≤åÏãúÎ¨º||""),ie=String(t.ÏóÖÎç∞Ïù¥Ìä∏ÏùºÏûê||""),r=String(t["Í≥µÏßÄÏ±ÑÎÑê Î©§Î≤ÑÏàò"]||""),h=String(t.Ïä§ÌÜ†Î¶¨ÌôúÎèô||"").trim().toUpperCase(),y=String(t.ÏÜåÌÜµÏ±ÑÎÑêÏó¨Î∂Ä||"").trim(),Y=String(t.ÎåìÍ∏ÄÌôúÎèôÏó¨Î∂Ä||"").trim(),Q=String(t.Î©îÎ™®||""),le=String(t.Ï¶êÍ≤®Ï∞æÍ∏∞||"").trim().toUpperCase()==="TRUE",ce=t["ÌîÑÎ°úÌïÑ ÎßÅÌÅ¨"],Ie=ue[n]||ue.C,_e=M?.rowIndex===t._rowIndex&&M?.column==="Í≥µÏßÄÏ±ÑÎÑê Î©§Î≤ÑÏàò",Ne=u==="select"&&S?.has(a),de=u==="select"&&o?.has(a);return e.jsxs("div",{"data-insta-id":a,onClick:u==="select"&&!de?()=>N?.(t):void 0,className:C("rounded-lg p-3 transition-colors duration-500",u==="select"&&de&&"opacity-30 cursor-not-allowed",u==="select"&&!de&&"cursor-pointer",Ne||m===a?"bg-admin-accent/10 border-2 border-admin-accent/40":"bg-admin-card border border-admin-border"),children:[u==="select"&&e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:C("w-5 h-5 rounded border flex items-center justify-center shrink-0",de?"border-[#2a2a3a] bg-[#1a1a2a]":Ne?"bg-amber-500 border-amber-500":"border-[#3a3a4a]"),children:Ne&&e.jsx(Se,{className:"h-3 w-3 text-black",strokeWidth:3})}),de&&e.jsx("span",{className:"text-[10px] text-admin-accent/60",children:"Ï∂îÍ∞ÄÎê®"})]}),e.jsxs("div",{className:"flex items-center justify-between gap-2 mb-1",children:[e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[ce?e.jsxs("a",{href:ce,target:"_blank",rel:"noopener noreferrer",className:"text-admin-accent hover:underline text-sm font-medium truncate",children:["@",a]}):e.jsxs("span",{className:"text-admin-text text-sm truncate",children:["@",a]}),n&&n!=="-"&&e.jsx(Ee,{variant:"outline",className:C("font-bold text-[11px] px-2 py-0 shrink-0",Ie),children:n})]}),e.jsx("div",{className:"flex items-center gap-2 shrink-0",children:e.jsx("button",{onClick:()=>{const J=i.indexOf("Ï¶êÍ≤®Ï∞æÍ∏∞");J!==-1&&g(t._rowIndex,J,le?"FALSE":"TRUE")},children:e.jsx(fe,{className:C("h-4 w-4 transition-colors",le?"fill-amber-400 text-amber-400":"text-admin-text/30 hover:text-amber-400/60")})})})]}),e.jsxs("div",{className:"flex items-baseline gap-2 mb-2",children:[e.jsx("span",{className:"text-white text-[13px] font-medium truncate",children:l}),d&&d!=="-"&&e.jsx("span",{className:"text-[11px] text-admin-purple shrink-0",children:d}),k&&k!=="-"&&k!==d&&e.jsx("span",{className:"text-[11px] text-admin-text/50 shrink-0",children:k})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-1 mb-1",children:[e.jsxs("div",{className:"bg-admin-bg/40 rounded px-2 py-1.5 text-center",children:[e.jsx("p",{className:"text-[10px] text-admin-text/60 mb-0.5",children:"ÌåîÎ°úÏõå"}),e.jsx("p",{className:"text-[13px] text-white tabular-nums font-medium",children:R&&R!=="-"?G(R):"-"})]}),e.jsxs("div",{className:"bg-admin-bg/40 rounded px-2 py-1.5 text-center",children:[e.jsx("p",{className:"text-[10px] text-admin-text/60 mb-0.5",children:"ÌèâÍ∑†Ï°∞Ìöå"}),e.jsx("p",{className:"text-[13px] text-white tabular-nums font-medium",children:p&&p!=="-"?G(p):"-"})]}),e.jsxs("div",{className:"bg-admin-bg/40 rounded px-2 py-1.5 text-center",children:[e.jsx("p",{className:"text-[10px] text-admin-text/60 mb-0.5",children:"ÏµúÎåÄÏ°∞Ìöå"}),e.jsx("p",{className:"text-[13px] text-white tabular-nums font-medium",children:E&&E!=="-"?G(E):"-"})]}),e.jsxs("div",{className:"bg-admin-bg/40 rounded px-2 py-1.5 text-center",children:[e.jsx("p",{className:"text-[10px] text-admin-text/60 mb-0.5",children:"ÌèâÍ∑†ÎåìÍ∏Ä"}),e.jsx("p",{className:"text-[13px] text-white tabular-nums font-medium",children:W&&W!=="-"?G(W):"-"})]})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-1 mb-2",children:[e.jsxs("div",{className:"bg-admin-bg/40 rounded px-2 py-1.5 text-center",children:[e.jsx("p",{className:"text-[10px] text-admin-text/60 mb-0.5",children:"Í≥µÍµ¨ÌèâÍ∑†üí¨"}),e.jsx("p",{className:"text-[13px] text-white tabular-nums font-medium",children:ae&&ae!=="-"?G(ae):"-"})]}),e.jsxs("div",{className:"bg-admin-bg/40 rounded px-2 py-1.5 text-center",children:[e.jsx("p",{className:"text-[10px] text-admin-text/60 mb-0.5",children:"Í≥µÍµ¨ÏµúÎåÄüí¨"}),e.jsx("p",{className:"text-[13px] text-white tabular-nums font-medium",children:ne&&ne!=="-"?G(ne):"-"})]}),re&&re!=="-"&&e.jsxs("div",{className:"bg-admin-bg/40 rounded px-2 py-1.5 text-center",children:[e.jsx("p",{className:"text-[10px] text-admin-text/60 mb-0.5",children:"ÎßàÏßÄÎßâÍ≤åÏãúÎ¨º"}),e.jsx("p",{className:"text-[11px] text-white/80",children:re})]}),ie&&ie!=="-"&&e.jsxs("div",{className:"bg-admin-bg/40 rounded px-2 py-1.5 text-center",children:[e.jsx("p",{className:"text-[10px] text-admin-text/60 mb-0.5",children:"ÏóÖÎç∞Ïù¥Ìä∏"}),e.jsx("p",{className:"text-[11px] text-white/80",children:ie})]})]}),e.jsxs("div",{className:"flex items-center justify-between gap-2 mb-2",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(Te,{className:"h-3 w-3 text-admin-text/60"}),e.jsx("span",{className:"text-[11px] text-admin-text/60",children:"Î©§Î≤ÑÏàò"}),_e?e.jsx("input",{type:"text",value:v,onChange:J=>_(J.target.value),onBlur:()=>B(t._rowIndex,"Í≥µÏßÄÏ±ÑÎÑê Î©§Î≤ÑÏàò"),onKeyDown:J=>z(J,t._rowIndex,"Í≥µÏßÄÏ±ÑÎÑê Î©§Î≤ÑÏàò"),autoFocus:!0,className:"w-16 px-1.5 py-0.5 bg-admin-bg border border-admin-accent rounded text-white text-right text-[12px] focus:outline-none"}):e.jsx("button",{onClick:()=>T(t._rowIndex,"Í≥µÏßÄÏ±ÑÎÑê Î©§Î≤ÑÏàò",r),className:"text-[12px] text-admin-accent/80 hover:text-admin-accent tabular-nums border-b border-dashed border-admin-border hover:border-admin-accent/50 transition-colors",children:r&&r!=="-"?G(r):"0"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[h==="ON"&&e.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded-full bg-admin-success/15 text-admin-success border border-admin-success/30",children:"Ïä§ÌÜ†Î¶¨"}),(y==="Y"||y==="O")&&e.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded-full bg-teal-500/15 text-teal-400 border border-teal-500/30",children:"ÏÜåÌÜµ"}),(Y==="Y"||Y==="O")&&e.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded-full bg-purple-500/15 text-purple-400 border border-purple-500/30",children:"ÎåìÍ∏Ä"})]})]}),Q&&Q!=="-"?e.jsx("button",{onClick:()=>x(t._rowIndex,Q,l),className:"w-full text-left group/memo",children:e.jsxs("div",{className:"bg-admin-bg/50 rounded px-2.5 py-1.5 flex items-start gap-2",children:[e.jsx(Oe,{className:"h-3 w-3 text-admin-text mt-0.5 shrink-0"}),e.jsx("p",{className:"text-[12px] text-white/70 whitespace-pre-wrap break-words line-clamp-2 flex-1",children:Q}),e.jsx(Me,{className:"h-3 w-3 text-admin-accent opacity-0 group-hover/memo:opacity-100 transition-opacity shrink-0 mt-0.5"})]})}):e.jsx("button",{onClick:()=>x(t._rowIndex,"",l),className:"w-full text-left",children:e.jsxs("div",{className:"bg-admin-bg/50 rounded px-2.5 py-1.5 flex items-center gap-2 text-admin-text/40 hover:text-admin-text/60 transition-colors",children:[e.jsx(Oe,{className:"h-3 w-3 shrink-0"}),e.jsx("span",{className:"text-[12px]",children:"Î©îÎ™® Ï∂îÍ∞Ä..."})]})})]},t._rowIndex)})}),H=c.useRef(null),V=c.useRef(null),U=c.useRef(!1),xe=()=>{U.current||(U.current=!0,H.current&&V.current&&(V.current.scrollLeft=H.current.scrollLeft),requestAnimationFrame(()=>{U.current=!1}))},he=()=>{U.current||(U.current=!0,H.current&&V.current&&(H.current.scrollLeft=V.current.scrollLeft),requestAnimationFrame(()=>{U.current=!1}))},se=e.jsxs("colgroup",{children:[u==="select"&&e.jsx("col",{style:{width:40}}),L.map(t=>e.jsx("col",{style:{width:D.pctWidths[t]}},t))]});return e.jsxs(e.Fragment,{children:[ge(),e.jsxs("div",{className:"hidden md:block",children:[e.jsx("div",{className:"sticky z-40 border border-admin-border border-b-0 rounded-t-lg bg-[#14142a]",style:{top:j},children:e.jsx("div",{ref:H,className:"overflow-x-auto",style:{scrollbarWidth:"none"},onScroll:xe,children:e.jsxs("table",{className:"w-full text-sm border-collapse",style:{minWidth:D.total,tableLayout:"fixed"},children:[se,e.jsx("thead",{children:e.jsxs("tr",{className:"bg-[#14142a]",children:[u==="select"&&e.jsx("th",{className:"px-2 py-2.5 text-center w-10"}),L.map((t,a)=>{const l=ee[t],n=a<oe,d=a===oe-1;return e.jsx("th",{style:n?{left:D.stickyOffsets[a]}:void 0,className:C("px-2.5 py-2.5 text-[11px] uppercase tracking-wider text-admin-text/70 font-semibold border-r border-admin-border/50 last:border-r-0 group/th",n&&"sticky z-40 bg-[#14142a]",d&&"shadow-[3px_0_8px_rgba(0,0,0,0.35)] border-r-admin-border",l?.align==="center"&&"text-center",l?.align==="right"&&"text-right"),children:e.jsxs("button",{onClick:()=>P(t),className:"flex items-center gap-1 w-full hover:text-white transition-colors",children:[e.jsx("span",{className:"whitespace-nowrap",children:l?.label||t}),e.jsx(q,{column:t})]})},t)})]})})]})})}),e.jsx("div",{className:"border border-admin-border border-t-0 rounded-b-lg overflow-hidden",children:e.jsx("div",{ref:V,className:"overflow-x-auto",onScroll:he,children:e.jsxs("table",{className:"w-full text-sm border-collapse",style:{minWidth:D.total,tableLayout:"fixed"},children:[se,e.jsx("tbody",{children:F.map((t,a)=>{const l=String(t.Ïù∏Ïä§ÌÉÄID||""),n=m===l;return e.jsxs("tr",{"data-insta-id":l,onClick:u==="select"&&!o?.has(l)?()=>N?.(t):void 0,className:C("border-b border-admin-border/40 transition-colors duration-500",u==="select"&&o?.has(l)&&"opacity-30 cursor-not-allowed",u==="select"&&!o?.has(l)&&"cursor-pointer",u==="select"&&S?.has(l)?"bg-amber-500/[0.07]":n?"bg-admin-accent/10 ring-1 ring-admin-accent/40":a%2===0?"bg-[#11111f]":"bg-[#151528]","hover:bg-white/[0.02]"),children:[u==="select"&&(()=>{const d=String(t.Ïù∏Ïä§ÌÉÄID||""),k=S?.has(d),R=o?.has(d);return e.jsx("td",{className:"px-2 py-2 text-center align-top",children:e.jsx("div",{className:C("w-5 h-5 rounded border flex items-center justify-center mx-auto",R?"border-[#2a2a3a] bg-[#1a1a2a] opacity-30":k?"bg-amber-500 border-amber-500":"border-[#3a3a4a] bg-transparent"),children:k&&e.jsx(Se,{className:"h-3 w-3 text-black",strokeWidth:3})})})})(),L.map((d,k)=>{const R=ee[d],p=k<oe,E=k===oe-1,W=a%2===0?"#11111f":"#151528";return e.jsx("td",{style:p?{left:D.stickyOffsets[k],backgroundColor:W}:void 0,className:C("px-2.5 py-2 text-white border-r border-admin-border/30 last:border-r-0 align-top",p&&"sticky z-30",E&&"shadow-[3px_0_8px_rgba(0,0,0,0.35)] border-r-admin-border/60",R?.align==="center"&&"text-center",R?.align==="right"&&"text-right",R?.highlight&&"font-semibold"),children:A(t,d,t._rowIndex)},d)})]},t._rowIndex)})})]})})})]})]})}function yt({className:s,...i}){return e.jsx("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:e.jsx("table",{"data-slot":"table",className:C("w-full caption-bottom text-sm",s),...i})})}function wt({className:s,...i}){return e.jsx("thead",{"data-slot":"table-header",className:C("[&_tr]:border-b",s),...i})}function kt({className:s,...i}){return e.jsx("tbody",{"data-slot":"table-body",className:C("[&_tr:last-child]:border-0",s),...i})}function De({className:s,...i}){return e.jsx("tr",{"data-slot":"table-row",className:C("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",s),...i})}function be({className:s,...i}){return e.jsx("th",{"data-slot":"table-head",className:C("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",s),...i})}function pe({className:s,...i}){return e.jsx("td",{"data-slot":"table-cell",className:C("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",s),...i})}function Ct({isOpen:s,onClose:i,grades:f,onSave:g,isSaving:x=!1}){const[m,j]=c.useState(f);c.useEffect(()=>{j(f)},[f]);const u=(o,N,b)=>{const I=[...m];I[o]={...I[o],[N]:b},j(I)},S=o=>{g(m,o)};return e.jsx(Fe,{open:s,onOpenChange:i,children:e.jsxs(Re,{className:"bg-admin-card border-admin-border text-white max-w-4xl max-h-[80vh] overflow-y-auto",children:[e.jsx(Pe,{children:e.jsx(Ae,{className:"text-white",children:"Îì±Í∏â Í∏∞Ï§Ä ÏÑ§Ï†ï"})}),e.jsxs("div",{className:"py-4",children:[e.jsxs(yt,{children:[e.jsx(wt,{children:e.jsxs(De,{className:"border-admin-border hover:bg-transparent",children:[e.jsx(be,{className:"text-admin-text",children:"Îì±Í∏â"}),e.jsx(be,{className:"text-admin-text",children:"ÏµúÏÜå ÌåîÎ°úÏõå"}),e.jsx(be,{className:"text-admin-text",children:"ÏµúÏÜå Ï°∞ÌöåÏàò"}),e.jsx(be,{className:"text-admin-text",children:"ÏµúÏÜå ÏÜåÌÜµÎ•†"})]})}),e.jsx(kt,{children:m.map((o,N)=>e.jsxs(De,{className:"border-admin-border hover:bg-admin-bg/50",children:[e.jsx(pe,{className:"font-medium text-white",children:o.grade}),e.jsx(pe,{children:e.jsx(me,{type:"text",value:o.minFollowers,onChange:b=>u(N,"minFollowers",b.target.value),className:"bg-admin-bg border-admin-border text-white"})}),e.jsx(pe,{children:e.jsx(me,{type:"text",value:o.minViews,onChange:b=>u(N,"minViews",b.target.value),className:"bg-admin-bg border-admin-border text-white"})}),e.jsx(pe,{children:e.jsx(me,{type:"text",value:o.minEngagement,onChange:b=>u(N,"minEngagement",b.target.value),className:"bg-admin-bg border-admin-border text-white"})})]},N))})]}),e.jsxs("div",{className:"mt-4 text-xs text-admin-text",children:[e.jsx("p",{children:"‚Ä¢ Îì±Í∏â Í∏∞Ï§ÄÏùÑ ÏÑ§Ï†ïÌïòÍ≥† Ï†ÄÏû•Ìï† Ïàò ÏûàÏäµÎãàÎã§."}),e.jsx("p",{children:'‚Ä¢ "Ï†ÄÏû• + ÏàòÏãù Ï†ÅÏö©"ÏùÑ ÌÅ¥Î¶≠ÌïòÎ©¥ Îì±Í∏â Ïª¨ÎüºÏóê ÏûêÎèô Í≥ÑÏÇ∞ ÏàòÏãùÏù¥ Ï†ÅÏö©Îê©ÎãàÎã§.'})]})]}),e.jsxs(Ve,{className:"gap-2",children:[e.jsx(O,{variant:"outline",onClick:i,disabled:x,className:"bg-transparent border-admin-border text-white hover:bg-admin-bg",children:"Ï∑®ÏÜå"}),e.jsx(O,{onClick:()=>S(!1),disabled:x,className:"bg-admin-purple text-white hover:bg-admin-purple/90",children:"Ï†ÄÏû•Îßå"}),e.jsx(O,{onClick:()=>S(!0),disabled:x,className:"bg-admin-accent text-admin-bg hover:bg-admin-accent/90",children:x?"Ï≤òÎ¶¨ Ï§ë...":"Ï†ÄÏû• + ÏàòÏãù Ï†ÅÏö©"})]})]})})}function St({isOpen:s,onClose:i,columns:f,onSave:g,isSaving:x=!1}){const[m,j]=c.useState(f);c.useEffect(()=>{j(f)},[f]);const u=o=>{j(N=>N.map(b=>b.name===o?{...b,visible:!b.visible}:b))},S=()=>{g(m)};return s?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-black/50 z-40",onClick:i}),e.jsxs("div",{className:"fixed right-0 top-0 h-full w-80 bg-admin-card border-l border-admin-border z-50 shadow-xl overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-admin-card border-b border-admin-border p-4 flex items-center justify-between",children:[e.jsx("h3",{className:"text-white font-semibold",children:"Ïª¨Îüº ÌëúÏãú ÏÑ§Ï†ï"}),e.jsx("button",{onClick:i,className:"text-admin-text hover:text-white transition-colors",children:e.jsx(we,{className:"h-5 w-5"})})]}),e.jsx("div",{className:"p-4 space-y-2",children:m.map(o=>e.jsxs("label",{className:"flex items-center gap-3 p-2 rounded hover:bg-admin-bg cursor-pointer transition-colors",children:[e.jsx("input",{type:"checkbox",checked:o.visible,onChange:()=>u(o.name),className:"w-4 h-4 rounded border-admin-border bg-admin-bg text-admin-accent focus:ring-admin-accent focus:ring-offset-0"}),e.jsx("span",{className:C("text-sm",o.visible?"text-white":"text-admin-text"),children:o.name})]},o.name))}),e.jsx("div",{className:"sticky bottom-0 bg-admin-card border-t border-admin-border p-4",children:e.jsx(O,{onClick:S,disabled:x,className:"w-full bg-admin-accent text-admin-bg hover:bg-admin-accent/90",children:x?"Ï†ÄÏû• Ï§ë...":"Ï†ÄÏû•"})})]})]}):null}function Mt({payload:s,isOpen:i,onClose:f}){const g=Le(),{category:x,isClassifying:m,error:j,classify:u}=at(),{isSaving:S,saved:o,error:N,save:b}=nt(),{copied:I,copy:M}=rt();if(c.useEffect(()=>{if(!i)return;const z=A=>{A.key==="Escape"&&f()};return document.addEventListener("keydown",z),document.body.style.overflow="hidden",()=>{document.removeEventListener("keydown",z),document.body.style.overflow=""}},[i,f]),c.useEffect(()=>{if(o&&s){const z=new Date().toISOString().slice(0,10),A=x;g.setQueryData(["influencers"],q=>q&&{...q,data:q.data.map(T=>String(T.Ïù∏Ïä§ÌÉÄID)!==s.username?T:{...T,"Ïù∏Ïä§ÌÉÄ Ïù¥Î¶Ñ":s.profile.displayName||T["Ïù∏Ïä§ÌÉÄ Ïù¥Î¶Ñ"],ÌåîÎ°úÏõå:String(s.profile.followers),"ÏµúÍ∑º 10 ÌèâÍ∑† Î¶¥Ïä§ Ï°∞ÌöåÏàò":String(s.stats.avgViews),"ÏµúÎåÄ Î¶¥Ïä§ Ï°∞ÌöåÏàò":String(s.stats.maxViews),"Í≥µÍµ¨ ÌèâÍ∑†Ï¢ãÏïÑÏöîÏàò":String(s.stats.avgLikes),"Í≥µÍµ¨ ÏµúÎåÄÏ¢ãÏïÑÏöîÏàò":String(s.stats.maxLikes),"Í≥µÍµ¨ ÌèâÍ∑†ÎåìÍ∏ÄÏàò":String(s.stats.avgComments),"Í≥µÍµ¨ ÏµúÎåÄÎåìÍ∏ÄÏàò":String(s.stats.maxComments),"ÎßàÏßÄÎßâ ÌîºÎìú Í≤åÏãúÏùº":s.stats.lastPostDate||T["ÎßàÏßÄÎßâ ÌîºÎìú Í≤åÏãúÏùº"],ÏóÖÎç∞Ïù¥Ìä∏ÏùºÏûê:z,ÏÑ§Î™ÖÎûÄ:s.profile.bio||T.ÏÑ§Î™ÖÎûÄ,Ïô∏Î∂ÄÎßÅÌÅ¨:s.profile.externalLink||T.Ïô∏Î∂ÄÎßÅÌÅ¨,"ÌîÑÎ°úÌïÑ ÎßÅÌÅ¨":s.profile.profileLink||T["ÌîÑÎ°úÌïÑ ÎßÅÌÅ¨"],...A?{"Ïπ¥ÌÖåÍ≥†Î¶¨(ÎåÄ)":A.ÎåÄ,"Ïπ¥ÌÖåÍ≥†Î¶¨(Ï§ë)":A.Ï§ë.join(", ")}:{}})}),Ue.success("ÏãúÌä∏Ïóê Ï†ÄÏû•ÎêòÏóàÏäµÎãàÎã§")}},[o,s,x,g]),!i||!s)return null;const{profile:w,stats:v,feedPosts:_,reels:L}=s,D=_.filter(z=>!z.isPinned&&z.isDeal),F=L.filter(z=>!z.isPinned),P=()=>{u(w.bio,s.username)},$=()=>{M(it(s,x))},B=()=>{b(s,x)};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-[9998] bg-black/50",onClick:f}),e.jsxs("div",{className:"fixed inset-0 sm:inset-y-0 sm:left-auto sm:right-0 z-[9999] w-full sm:w-[400px] bg-admin-bg border-l border-admin-border flex flex-col",children:[e.jsxs("div",{className:"sticky top-0 z-10 flex items-center justify-between px-4 py-3 border-b border-admin-border bg-admin-bg",children:[e.jsx("h2",{className:"text-white font-semibold text-sm",children:"IG Î∂ÑÏÑù Í≤∞Í≥º"}),e.jsx(O,{variant:"ghost",size:"icon-sm",onClick:f,className:"text-admin-text hover:text-white hover:bg-admin-card",children:e.jsx(we,{className:"size-4"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[e.jsxs("div",{className:"bg-admin-card border border-admin-border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-admin-border flex items-center justify-center text-sm text-white",children:"@"}),e.jsxs("div",{className:"min-w-0",children:[e.jsxs("h3",{className:"text-white font-semibold text-sm truncate",children:["@",w.username]}),w.displayName&&e.jsx("p",{className:"text-admin-text text-xs truncate",children:w.displayName})]}),e.jsxs("span",{className:"ml-auto text-admin-accent text-xs font-semibold whitespace-nowrap",children:[K(w.followers)," ÌåîÎ°úÏõå"]})]}),w.bio&&e.jsx("p",{className:"text-admin-text text-xs leading-relaxed line-clamp-3 whitespace-pre-wrap",children:w.bio})]}),e.jsxs("div",{className:"bg-admin-card border border-admin-border rounded-lg p-4",children:[e.jsxs("h3",{className:"text-white font-semibold text-sm mb-3",children:["Î¶¥Ïä§ ÌÜµÍ≥Ñ (",F.length,"Í∞ú)"]}),F.length>0?e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[e.jsx(Z,{label:"ÌèâÍ∑† Ï°∞ÌöåÏàò",value:K(v.avgViews)}),e.jsx(Z,{label:"ÏµúÎåÄ Ï°∞ÌöåÏàò",value:K(v.maxViews)})]}):e.jsx("p",{className:"text-admin-text text-sm",children:"Î¶¥Ïä§ ÏóÜÏùå"})]}),e.jsxs("div",{className:"bg-admin-card border border-admin-border rounded-lg p-4",children:[e.jsxs("h3",{className:"text-white font-semibold text-sm mb-3",children:["Í≥µÍµ¨ ÌîºÎìú ÌÜµÍ≥Ñ (",D.length,"Í∞ú)"]}),D.length>0?e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[e.jsx(Z,{label:"ÌèâÍ∑† Ï¢ãÏïÑÏöî",value:K(v.avgLikes)}),e.jsx(Z,{label:"ÏµúÎåÄ Ï¢ãÏïÑÏöî",value:K(v.maxLikes)}),e.jsx(Z,{label:"ÌèâÍ∑† ÎåìÍ∏Ä",value:K(v.avgComments)}),e.jsx(Z,{label:"ÏµúÎåÄ ÎåìÍ∏Ä",value:K(v.maxComments)})]}):e.jsx("p",{className:"text-admin-text text-sm",children:"Í≥µÍµ¨ Í≤åÏãúÎ¨º ÏóÜÏùå"}),v.lastPostDate&&e.jsxs("p",{className:"text-admin-text text-xs mt-2",children:["ÏµúÍ∑º Í≤åÏãúÎ¨º: ",v.lastPostDate]})]}),e.jsxs("div",{className:"bg-admin-card border border-admin-border rounded-lg p-4",children:[e.jsx("h3",{className:"text-white font-semibold text-sm mb-3",children:"AI Î∂ÑÎ•ò"}),x?e.jsxs("p",{className:"text-sm",children:[e.jsx("span",{className:"text-admin-accent font-semibold",children:x.ÎåÄ}),x.Ï§ë.length>0&&e.jsx("span",{className:"text-admin-text ml-2",children:x.Ï§ë.join(", ")})]}):e.jsx("p",{className:"text-admin-text text-sm",children:"Î∂ÑÎ•ò Î≤ÑÌäºÏùÑ ÎàåÎü¨Ï£ºÏÑ∏Ïöî"})]}),j&&e.jsx("p",{className:"text-red-400 text-xs",children:j}),N&&e.jsx("p",{className:"text-red-400 text-xs",children:N})]}),e.jsxs("div",{className:"sticky bottom-0 flex gap-2 px-4 py-3 border-t border-admin-border bg-admin-bg",children:[e.jsxs(O,{variant:"outline",size:"sm",onClick:P,disabled:m,className:"flex-1 bg-transparent border-admin-border text-white hover:bg-admin-card",children:[e.jsx(ft,{className:"size-3.5"}),m?"Î∂ÑÎ•ò Ï§ë...":"Î∂ÑÎ•ò"]}),e.jsxs(O,{variant:"outline",size:"sm",onClick:$,className:"flex-1 bg-transparent border-admin-border text-white hover:bg-admin-card",children:[e.jsx(lt,{className:"size-3.5"}),I?"Î≥µÏÇ¨Îê®!":"Î≥µÏÇ¨"]}),e.jsxs(O,{size:"sm",onClick:B,disabled:S,className:"flex-1 bg-admin-accent text-admin-bg hover:bg-admin-accent/90",children:[e.jsx(mt,{className:"size-3.5"}),S?"Ï†ÄÏû• Ï§ë...":o?"Ï†ÄÏû•Îê®":"Ï†ÄÏû•"]})]})]})]})}function Z({label:s,value:i}){return e.jsxs("div",{children:[e.jsx("p",{className:"text-admin-text text-xs",children:s}),e.jsx("p",{className:"text-white font-semibold",children:i})]})}function Tt(){const{data:s,isLoading:i,error:f}=He(),g=Ge(),x=$e(),{data:m}=qe(),j=Be(),{data:u}=We(),S=Ke(),{data:o}=Ye(),N=c.useRef(null),[b,I]=c.useState(0);c.useEffect(()=>{const r=N.current;if(!r)return;const h=new ResizeObserver(()=>{I(r.offsetHeight)});return h.observe(r),()=>h.disconnect()},[]);const[M,w]=c.useState(""),[v,_]=c.useState([]),[L,D]=c.useState([]),[F,P]=c.useState([]),[$,B]=c.useState(!1),[z,A]=c.useState(!1),[q,T]=c.useState(!1),[ge,H]=c.useState(!1),[V,U]=c.useState({isOpen:!1,rowIndex:-1,value:"",name:""}),[xe,he]=c.useState(null),[se,t]=c.useState(!1);c.useEffect(()=>{const r=h=>{h.data?.type==="ig-analyzer-result"&&h.data.payload&&(he(h.data.payload),t(!0))};return window.addEventListener("message",r),()=>window.removeEventListener("message",r)},[]),c.useEffect(()=>{const r=window.location.hash;if(r.startsWith("#analyzer="))try{const h=r.slice(10),y=JSON.parse(decodeURIComponent(h));y.username&&y.profile&&(he(y),t(!0),history.replaceState(null,"",window.location.pathname))}catch{}},[]);const a=s?.data||[],l=s?.headers||[],n=s?.fromCache??!1,d=c.useMemo(()=>m?.columns?m.columns.filter(r=>r.visible).map(r=>r.name):ve.filter(r=>!ye.includes(r)),[m]),k=c.useMemo(()=>{const r=new Set;return a.forEach(h=>{const y=h["Ïπ¥ÌÖåÍ≥†Î¶¨(ÎåÄ)"];y&&y!=="-"&&r.add(y)}),Array.from(r).sort()},[a]),R=c.useMemo(()=>["2Ï£º Ï¥àÍ≥º","ÏóÜÏùå"],[]),p=c.useMemo(()=>a.filter(r=>{if($&&String(r.Ï¶êÍ≤®Ï∞æÍ∏∞||"").trim().toUpperCase()!=="TRUE")return!1;if(M){const h=M.toLowerCase(),y=String(r.Ïù∏Ïä§ÌÉÄID||"").toLowerCase(),Y=String(r["Ïù∏Ïä§ÌÉÄ Ïù¥Î¶Ñ"]||"").toLowerCase();if(!y.includes(h)&&!Y.includes(h))return!1}if(v.length>0){const h=r["Ïπ¥ÌÖåÍ≥†Î¶¨(ÎåÄ)"];if(!v.includes(h))return!1}if(L.length>0){const h=r["Ïù∏ÌîåÎ£®Ïñ∏ÏÑú Îì±Í∏â"];if(!L.includes(h))return!1}if(F.length>0){const h=String(r.ÏóÖÎç∞Ïù¥Ìä∏ÏùºÏûê||"").trim(),y=!h||h==="-",Y=Date.now(),Q=336*60*60*1e3,je=!y&&Y-new Date(h).getTime()>Q,le=F.includes("2Ï£º Ï¥àÍ≥º"),ce=F.includes("ÏóÜÏùå");if(le&&ce){if(!je&&!y)return!1}else if(le){if(!je)return!1}else if(ce&&!y)return!1}return!0}),[a,M,v,L,F,$]),E=()=>{g.mutate()},W=(r,h,y)=>{x.mutate({rowIndex:r,columnIndex:h,value:y})},ae=(r,h,y)=>{U({isOpen:!0,rowIndex:r,value:h,name:y})},ne=r=>{const h=l.indexOf("Î©îÎ™®");h!==-1&&x.mutate({rowIndex:V.rowIndex,columnIndex:h,value:r}),U({isOpen:!1,rowIndex:-1,value:"",name:""})},re=r=>{j.mutate(r),H(!1)},ie=(r,h)=>{S.mutate({grades:r,applyFormula:h}),T(!1)};return f?e.jsx("div",{className:"max-w-[1800px] mx-auto mt-8",children:e.jsxs("div",{className:"bg-admin-error/20 border border-admin-error/40 rounded-lg p-6 text-center",children:[e.jsx("p",{className:"text-admin-error font-semibold",children:"Îç∞Ïù¥ÌÑ∞Î•º Î∂àÎü¨Ïò§ÎäîÎç∞ Ïã§Ìå®ÌñàÏäµÎãàÎã§"}),e.jsx("p",{className:"text-admin-text text-sm mt-2",children:String(f)}),e.jsx(O,{onClick:E,className:"mt-4",children:"Îã§Ïãú ÏãúÎèÑ"})]})}):e.jsxs("div",{className:"max-w-[1800px] mx-auto mt-4 md:mt-8",children:[e.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl md:text-2xl font-bold text-white mb-1 md:mb-2",children:"Ïù∏ÌîåÎ£®Ïñ∏ÏÑú Í¥ÄÎ¶¨"}),o&&e.jsxs("div",{className:"flex items-center gap-4 text-xs text-admin-text",children:[e.jsxs("span",{children:["Cache: ",n?"KV":"API"]}),e.jsxs("span",{children:["Quota: ",o.quotaUsed," / 100"]}),e.jsxs("span",{children:["Hits: ",o.cacheHits," / Misses: ",o.cacheMisses]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(O,{onClick:()=>T(!0),variant:"outline",className:"bg-transparent border-admin-border text-white hover:bg-admin-bg",children:[e.jsx(bt,{className:"h-4 w-4 md:mr-2"}),e.jsx("span",{className:"hidden md:inline",children:"Îì±Í∏â ÏÑ§Ï†ï"})]}),e.jsxs(O,{onClick:()=>H(!0),variant:"outline",className:"bg-transparent border-admin-border text-white hover:bg-admin-bg",children:[e.jsx(ht,{className:"h-4 w-4 md:mr-2"}),e.jsx("span",{className:"hidden md:inline",children:"Ïª¨Îüº ÏÑ§Ï†ï"})]})]})]}),e.jsx("div",{ref:N,className:"sticky top-0 z-50 bg-admin-bg py-2 md:pt-2 md:pb-4 -mx-3 px-3 md:-mx-6 md:px-6 shadow-[0_4px_12px_rgba(0,0,0,0.3)]",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx(jt,{searchQuery:M,onSearchChange:w,categoryOptions:k,selectedCategories:v,onCategoriesChange:_,selectedGrades:L,onGradesChange:D,updateStatusOptions:R,selectedUpdateStatus:F,onUpdateStatusChange:P,resultCount:p.length,totalCount:a.length,showFavoritesOnly:$,onFavoritesToggle:()=>B(r=>!r)})}),e.jsx(O,{onClick:()=>A(!0),variant:"outline",size:"sm",className:"hidden md:flex bg-transparent border-admin-border text-white hover:bg-admin-bg shrink-0",children:e.jsx(dt,{className:"h-4 w-4"})}),e.jsx(O,{onClick:E,disabled:g.isPending,variant:"outline",size:"sm",className:"bg-transparent border-admin-border text-white hover:bg-admin-bg shrink-0",children:e.jsx(et,{className:`h-4 w-4 ${g.isPending?"animate-spin":""}`})})]})}),i?e.jsx("div",{className:"flex items-center justify-center h-64 bg-admin-card rounded-lg border border-admin-border",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-admin-accent mx-auto mb-4"}),e.jsx("p",{className:"text-admin-text",children:"Îç∞Ïù¥ÌÑ∞Î•º Î∂àÎü¨Ïò§Îäî Ï§ë..."})]})}):e.jsx(vt,{data:p,headers:l,visibleColumns:d,onCellEdit:W,onMemoEdit:ae,highlightId:se?xe?.username??null:null,stickyTopOffset:b}),e.jsx(Ct,{isOpen:q,onClose:()=>T(!1),grades:u?.grades||[],onSave:ie,isSaving:S.isPending}),e.jsx(St,{isOpen:ge,onClose:()=>H(!1),columns:m?.columns||ve.filter(r=>!ye.includes(r)).map(r=>({name:r,visible:!0})),onSave:re,isSaving:j.isPending}),e.jsx(tt,{isOpen:V.isOpen,onClose:()=>U({isOpen:!1,rowIndex:-1,value:"",name:""}),initialValue:V.value,onSave:ne,influencerName:V.name}),e.jsx(Mt,{payload:xe,isOpen:se,onClose:()=>t(!1)}),z&&e.jsx(Et,{ids:p.map(r=>String(r.Ïù∏Ïä§ÌÉÄID||"")).filter(Boolean),onClose:()=>A(!1)}),e.jsx(st,{position:"top-right",theme:"dark"})]})}function Et({ids:s,onClose:i}){const[f,g]=c.useState(!1),x=s.join(`
`);c.useEffect(()=>{const j=u=>{u.key==="Escape"&&i()};return document.addEventListener("keydown",j),()=>document.removeEventListener("keydown",j)},[i]);const m=()=>{navigator.clipboard.writeText(x).then(()=>{g(!0),setTimeout(()=>g(!1),2e3)})};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-[9998] bg-black/50",onClick:i}),e.jsxs("div",{className:"fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-[9999] w-[400px] max-h-[70vh] bg-admin-bg border border-admin-border rounded-lg flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-admin-border",children:[e.jsxs("h2",{className:"text-white font-semibold text-sm",children:["ID Ï∂îÏ∂ú (",s.length,"Í∞ú)"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(O,{size:"sm",variant:"outline",onClick:m,className:"bg-transparent border-admin-border text-white hover:bg-admin-card text-xs",children:f?"Î≥µÏÇ¨Îê®!":"Î≥µÏÇ¨"}),e.jsx(O,{size:"icon-sm",variant:"ghost",onClick:i,className:"text-admin-text hover:text-white hover:bg-admin-card",children:e.jsx("span",{className:"text-lg leading-none",children:"√ó"})})]})]}),e.jsx("textarea",{readOnly:!0,value:x,className:"flex-1 min-h-[200px] max-h-[50vh] p-4 bg-transparent text-white text-[13px] font-mono leading-relaxed resize-none focus:outline-none"})]})]})}export{Tt as default};
