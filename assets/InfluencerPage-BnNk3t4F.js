const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/GradeConfigModal-CzW901_u.js","assets/framer-motion-6E75tBg3.js","assets/react-vendor-9l3RvKiN.js","assets/dialog-BsRQu4eJ.js","assets/useInfluencerData-DgYyWdtE.js","assets/index-kvcITcEx.js","assets/tanstack-query-BtejbdqV.js","assets/ColumnSettingsPanel-CEJ0QQs9.js","assets/MemoEditModal-owec7Bl4.js","assets/AnalyzerDrawer-CLXnoxUY.js","assets/useAnalyzerData-B2JgJSSy.js","assets/copy-Ck-R7ZBU.js"])))=>i.map(i=>d[i]);
import{_ as ue}from"./index-9cGHYTg9.js";import{j as e}from"./framer-motion-6E75tBg3.js";import{r as s}from"./react-vendor-9l3RvKiN.js";import{S as Ne,I as ye,a as _e,M as K,G as ve,X as Oe,D as ge,H as je,C as Q,c as O,b as we,d as ie,e as xe,f as T,U as Me,B as G,u as Ee,g as De,h as Ie,i as Le,j as ze,k as Ae,l as Re,m as Te}from"./useInfluencerData-DgYyWdtE.js";import{c as he}from"./index-kvcITcEx.js";import{B as ke,M as Se,P as Ce,A as Pe,a as Ue,b as Fe,E as Ve,R as Ge}from"./badge-DnlvhQ5D.js";import"./tanstack-query-BtejbdqV.js";const $e=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],He=he("clipboard-list",$e);const We=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],qe=he("settings",We);const Be=[["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M12 21v-9",key:"17s77i"}],["path",{d:"M12 8V3",key:"13r4qs"}],["path",{d:"M17 16h4",key:"h1uq16"}],["path",{d:"M19 12V3",key:"o1uvq1"}],["path",{d:"M19 21v-5",key:"qua636"}],["path",{d:"M3 14h4",key:"bcjad9"}],["path",{d:"M5 10V3",key:"cb8scm"}],["path",{d:"M5 21v-7",key:"1w1uti"}]],Ye=he("sliders-vertical",Be);const Ke=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],me=he("star",Ke);function Qe({searchQuery:u,onSearchChange:m,categoryOptions:w,selectedCategories:p,onCategoriesChange:f,selectedGrades:x,onGradesChange:N,updateStatusOptions:o,selectedUpdateStatus:L,onUpdateStatusChange:C,resultCount:E,totalCount:k,showFavoritesOnly:P,onFavoritesToggle:M}){const[S,U]=s.useState(u),[y,D]=s.useState(!1);s.useEffect(()=>{const g=setTimeout(()=>{m(S)},250);return()=>clearTimeout(g)},[S,m]);const j=p.length+x.length+L.length,$=()=>{f([]),N([]),C([])};return e.jsxs("div",{children:[e.jsxs("div",{className:"md:hidden",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Ne,{className:"absolute left-2.5 top-1/2 -translate-y-1/2 h-3.5 w-3.5 text-admin-text"}),e.jsx(ye,{type:"text",placeholder:"ID ÎòêÎäî Ïù¥Î¶Ñ Í≤ÄÏÉâ...",value:S,onChange:g=>U(g.target.value),className:"pl-8 h-8 text-[13px] bg-admin-card border-admin-border text-white placeholder:text-admin-text"})]}),e.jsx("button",{onClick:M,className:`flex items-center justify-center h-8 w-8 rounded-md border shrink-0 transition-colors ${P?"bg-amber-500/20 border-amber-500/40 text-amber-400":"bg-admin-card border-admin-border text-admin-text/40"}`,children:e.jsx(me,{className:`h-3.5 w-3.5 ${P?"fill-amber-400":""}`})}),e.jsxs("button",{onClick:()=>D(!y),className:`relative flex items-center justify-center h-8 w-8 rounded-md border shrink-0 transition-colors ${y||j>0?"bg-admin-accent/15 border-admin-accent/40 text-admin-accent":"bg-admin-card border-admin-border text-admin-text"}`,children:[e.jsx(_e,{className:"h-3.5 w-3.5"}),j>0&&e.jsx("span",{className:"absolute -top-1.5 -right-1.5 min-w-[16px] h-4 flex items-center justify-center rounded-full bg-admin-accent text-[10px] font-bold text-admin-bg px-1",children:j})]}),e.jsxs("span",{className:"text-[11px] text-admin-text tabular-nums shrink-0",children:[e.jsx("span",{className:"text-white font-semibold",children:E}),"/",k]})]}),y&&e.jsxs("div",{className:"mt-2 flex flex-col gap-2",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(K,{options:w,selected:p,onChange:f,placeholder:"Ïπ¥ÌÖåÍ≥†Î¶¨"}),e.jsx(K,{options:ve,selected:x,onChange:N,placeholder:"Îì±Í∏â"}),e.jsx(K,{options:o,selected:L,onChange:C,placeholder:"ÏóÖÎç∞Ïù¥Ìä∏"})]}),j>0&&e.jsxs("button",{onClick:$,className:"flex items-center gap-1 text-[11px] text-admin-text hover:text-admin-accent transition-colors self-end",children:[e.jsx(Oe,{className:"h-3 w-3"}),"ÌïÑÌÑ∞ Ï¥àÍ∏∞Ìôî"]})]})]}),e.jsxs("div",{className:"hidden md:block space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Ne,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-admin-text"}),e.jsx(ye,{type:"text",placeholder:"ID ÎòêÎäî Ïù¥Î¶Ñ Í≤ÄÏÉâ...",value:S,onChange:g=>U(g.target.value),className:"pl-10 bg-admin-card border-admin-border text-white placeholder:text-admin-text"})]}),e.jsx(K,{options:w,selected:p,onChange:f,placeholder:"Ïπ¥ÌÖåÍ≥†Î¶¨ ÏÑ†ÌÉù"}),e.jsx(K,{options:ve,selected:x,onChange:N,placeholder:"Îì±Í∏â ÏÑ†ÌÉù"}),e.jsx(K,{options:o,selected:L,onChange:C,placeholder:"ÏóÖÎç∞Ïù¥Ìä∏ ÏÉÅÌÉú"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-admin-text",children:[e.jsx("span",{className:"text-white font-semibold",children:E})," /"," ",k," Í±¥"]}),e.jsxs("button",{onClick:M,className:`flex items-center gap-1.5 px-3 py-1 rounded-full text-[12px] font-medium border transition-colors ${P?"bg-amber-500/20 border-amber-500/40 text-amber-400":"bg-admin-card border-admin-border text-admin-text hover:text-white"}`,children:[e.jsx(me,{className:`h-3.5 w-3.5 ${P?"fill-amber-400":""}`}),"Ï¶êÍ≤®Ï∞æÍ∏∞Îßå"]})]})]})]})}function Je(u){const m=u.reduce((x,N)=>x+(Q[N]?.width||120),0),w={},p=[];let f=0;for(let x=0;x<u.length;x++){const N=Q[u[x]]?.width||120,o=N/m*100;w[u[x]]=`${o}%`,x<ie&&(p.push(`${f/m*100}%`),f+=N)}return{total:m,pctWidths:w,stickyOffsets:p}}function Xe({column:u,sortConfig:m}){return m.column===u?m.direction==="asc"?e.jsx(Ue,{className:"h-3 w-3 shrink-0 text-admin-accent"}):e.jsx(Fe,{className:"h-3 w-3 shrink-0 text-admin-accent"}):e.jsx(Pe,{className:"h-3 w-3 shrink-0 opacity-0 group-hover/th:opacity-40 transition-opacity"})}function Ze({data:u,headers:m,visibleColumns:w,onCellEdit:p,onMemoEdit:f,highlightId:x,stickyTopOffset:N=0,mode:o="manage",selectedIds:L,disabledIds:C,onToggleSelect:E}){const[k,P]=s.useState({column:null,direction:null}),[M,S]=s.useState(null),[U,y]=s.useState(""),D=s.useMemo(()=>ge.filter(t=>w.includes(t)&&!je.includes(t)),[w]),j=s.useMemo(()=>Je(D),[D]),$=s.useMemo(()=>!k.column||!k.direction?u:[...u].sort((t,r)=>{const i=String(t[k.column]||""),a=String(r[k.column]||""),l=parseFloat(i.replace(/,/g,"")),b=parseFloat(a.replace(/,/g,""));return!isNaN(l)&&!isNaN(b)?k.direction==="asc"?l-b:b-l:k.direction==="asc"?i.localeCompare(a,"ko"):a.localeCompare(i,"ko")}),[u,k]),g=s.useRef(null),z=s.useRef(null),I=s.useRef(!1);s.useEffect(()=>{if(!x||!z.current)return;const t=z.current.querySelector(`[data-insta-id="${x}"]`);t&&t.scrollIntoView({block:"center",behavior:"smooth"})},[x,$]);const pe=t=>{P(r=>r.column!==t?{column:t,direction:"asc"}:r.direction==="asc"?{column:t,direction:"desc"}:{column:null,direction:null})},le=(t,r,i,a)=>{if(o==="select")return;const l=Q[r];l&&(l.type==="editable-memo"?f(t,i,a):(l.type==="editable-number"||l.type==="editable-boolean")&&(S({rowIndex:t,column:r}),y(i)))},H=(t,r)=>{if(M?.rowIndex===t&&M?.column===r){const i=m.indexOf(r);i!==-1&&p(t,i,U),S(null),y("")}},J=(t,r,i)=>{t.key==="Enter"?H(r,i):t.key==="Escape"&&(S(null),y(""))},X=(t,r,i)=>{const a=String(t[r]||""),l=Q[r];if(!l)return a;const b=m.indexOf(r),_=M?.rowIndex===i&&M?.column===r;if(l.type==="editable-memo")return e.jsxs("button",{onClick:()=>le(i,r,a,t["Ïù∏Ïä§ÌÉÄ Ïù¥Î¶Ñ"]),className:"w-full text-left group/memo relative",children:[e.jsx("span",{className:"whitespace-pre-wrap break-words text-[13px] leading-relaxed text-white/90",children:a||"-"}),e.jsx("span",{className:"absolute top-0 right-0 opacity-0 group-hover/memo:opacity-100 transition-opacity",children:e.jsx(Ce,{className:"h-3 w-3 text-admin-accent"})})]});if(l.type==="editable-number"){const d=a&&a!=="-"?a:"0";return _?e.jsx("input",{type:"text",value:U,onChange:v=>y(v.target.value),onBlur:()=>H(i,r),onKeyDown:v=>J(v,i,r),autoFocus:!0,className:"w-full px-1.5 py-0.5 bg-admin-bg border border-admin-accent rounded text-white text-right text-[13px] focus:outline-none"}):e.jsx("button",{onClick:()=>le(i,r,a,""),className:"w-full text-right tabular-nums text-[13px] text-admin-accent/80 hover:text-admin-accent border-b border-dashed border-admin-border hover:border-admin-accent/50 transition-colors",children:T(d)})}if(l.type==="editable-boolean"){const d=a.trim().toUpperCase()==="ON";return e.jsx(G,{size:"sm",variant:"outline",onClick:()=>{p(i,b,d?"OFF":"ON")},className:O("h-6 px-2 text-[11px] font-semibold rounded-full",d?"bg-admin-success/15 text-admin-success border-admin-success/30 hover:bg-admin-success/25":"bg-gray-500/15 text-gray-500 border-gray-500/30 hover:bg-gray-500/25"),children:d?"ON":"OFF"})}if(l.type==="favorite"){const d=a.trim().toUpperCase()==="TRUE";return e.jsx("button",{onClick:()=>{const v=m.indexOf(r);v!==-1&&p(i,v,d?"FALSE":"TRUE")},className:"flex items-center justify-center w-full",children:e.jsx(me,{className:O("h-4 w-4 transition-colors",d?"fill-amber-400 text-amber-400":"text-admin-text/30 hover:text-amber-400/60")})})}if(l.type==="id"){const d=t["ÌîÑÎ°úÌïÑ ÎßÅÌÅ¨"];return d&&r==="Ïù∏Ïä§ÌÉÄID"?e.jsx("a",{href:d,target:"_blank",rel:"noopener noreferrer",className:"text-admin-accent hover:underline text-[13px] font-medium",children:a}):e.jsx("span",{className:"text-[13px] text-admin-text",children:a})}if(l.type==="name")return e.jsx("span",{className:"text-[13px] text-white whitespace-normal break-words leading-snug",children:a});if(l.type==="link")return!a||a==="-"?e.jsx("span",{className:"text-admin-text/40",children:"-"}):e.jsx("a",{href:a,target:"_blank",rel:"noopener noreferrer",className:"text-admin-accent/70 hover:text-admin-accent transition-colors",children:e.jsx(Ve,{className:"h-3.5 w-3.5 mx-auto"})});if(l.type==="number")return e.jsx("span",{className:"tabular-nums text-[13px]",children:T(a)});if(l.type==="tag")return!a||a==="-"?e.jsx("span",{className:"text-admin-text/40",children:"-"}):e.jsx("span",{className:"text-[12px] text-admin-purple whitespace-normal break-words",children:a});if(l.type==="boolean"){const d=a.trim().toUpperCase()==="Y"||a.trim()==="O";return e.jsx("span",{className:O("text-[11px] font-bold",d?"text-admin-success":"text-admin-text/40"),children:d?"Y":"N"})}if(l.type==="grade"){if(!a||a==="-")return e.jsx("span",{className:"text-admin-text/40",children:"-"});const d=xe[a]||xe.C;return e.jsx(ke,{variant:"outline",className:O("font-bold text-[11px] px-2 py-0",d),children:a})}return l.type==="text-wrap"?!a||a==="-"?e.jsx("span",{className:"text-admin-text/40",children:"-"}):e.jsx("span",{className:"whitespace-normal break-words text-[13px] leading-snug text-white/80",children:a}):l.type==="desc"?e.jsx("span",{className:"text-[13px] text-admin-text",children:a||"-"}):e.jsx("span",{className:"text-[13px]",children:a})},ce=(t,r,i)=>{S({rowIndex:t,column:r}),y(i&&i!=="-"?i:"0")},Z=()=>e.jsx("div",{className:"md:hidden space-y-3",children:$.map(t=>{const r=String(t.Ïù∏Ïä§ÌÉÄID||""),i=String(t["Ïù∏Ïä§ÌÉÄ Ïù¥Î¶Ñ"]||""),a=String(t["Ïù∏ÌîåÎ£®Ïñ∏ÏÑú Îì±Í∏â"]||""),l=String(t["Ïπ¥ÌÖåÍ≥†Î¶¨(ÎåÄ)"]||""),b=String(t["Ïπ¥ÌÖåÍ≥†Î¶¨(Ï§ë)"]||""),_=String(t.ÌåîÎ°úÏõå||""),d=String(t["ÏµúÍ∑º 10 ÌèâÍ∑† Î¶¥Ïä§ Ï°∞ÌöåÏàò"]||""),v=String(t["ÏµúÎåÄ Î¶¥Ïä§ Ï°∞ÌöåÏàò"]||""),A=String(t["ÏµúÍ∑º10Í∞ú ÌèâÍ∑† ÎåìÍ∏ÄÏàò"]||""),W=String(t["Í≥µÍµ¨ ÌèâÍ∑†ÎåìÍ∏ÄÏàò"]||""),se=String(t["Í≥µÍµ¨ ÏµúÎåÄÎåìÍ∏ÄÏàò"]||""),ae=String(t.ÎßàÏßÄÎßâÍ≤åÏãúÎ¨º||""),ne=String(t.ÏóÖÎç∞Ïù¥Ìä∏ÏùºÏûê||""),q=String(t["Í≥µÏßÄÏ±ÑÎÑê Î©§Î≤ÑÏàò"]||""),be=String(t.Ïä§ÌÜ†Î¶¨ÌôúÎèô||"").trim().toUpperCase(),oe=String(t.ÏÜåÌÜµÏ±ÑÎÑêÏó¨Î∂Ä||"").trim(),de=String(t.ÎåìÍ∏ÄÌôúÎèôÏó¨Î∂Ä||"").trim(),B=String(t.Î©îÎ™®||""),c=String(t.Ï¶êÍ≤®Ï∞æÍ∏∞||"").trim().toUpperCase()==="TRUE",h=t["ÌîÑÎ°úÌïÑ ÎßÅÌÅ¨"],re=xe[a]||xe.C,fe=M?.rowIndex===t._rowIndex&&M?.column==="Í≥µÏßÄÏ±ÑÎÑê Î©§Î≤ÑÏàò",Y=o==="select"&&L?.has(r),V=o==="select"&&C?.has(r);return e.jsxs("div",{"data-insta-id":r,onClick:o==="select"&&!V?()=>E?.(t):void 0,className:O("rounded-lg p-3 transition-colors duration-500",o==="select"&&V&&"opacity-30 cursor-not-allowed",o==="select"&&!V&&"cursor-pointer",Y||x===r?"bg-admin-accent/10 border-2 border-admin-accent/40":"bg-admin-card border border-admin-border"),children:[o==="select"&&e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:O("w-5 h-5 rounded border flex items-center justify-center shrink-0",V?"border-[#2a2a3a] bg-[#1a1a2a]":Y?"bg-amber-500 border-amber-500":"border-[#3a3a4a]"),children:Y&&e.jsx(we,{className:"h-3 w-3 text-black",strokeWidth:3})}),V&&e.jsx("span",{className:"text-[10px] text-admin-accent/60",children:"Ï∂îÍ∞ÄÎê®"})]}),e.jsxs("div",{className:"flex items-center justify-between gap-2 mb-1",children:[e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[h?e.jsxs("a",{href:h,target:"_blank",rel:"noopener noreferrer",className:"text-admin-accent hover:underline text-sm font-medium truncate",children:["@",r]}):e.jsxs("span",{className:"text-admin-text text-sm truncate",children:["@",r]}),a&&a!=="-"&&e.jsx(ke,{variant:"outline",className:O("font-bold text-[11px] px-2 py-0 shrink-0",re),children:a})]}),e.jsx("div",{className:"flex items-center gap-2 shrink-0",children:e.jsx("button",{onClick:()=>{const R=m.indexOf("Ï¶êÍ≤®Ï∞æÍ∏∞");R!==-1&&p(t._rowIndex,R,c?"FALSE":"TRUE")},children:e.jsx(me,{className:O("h-4 w-4 transition-colors",c?"fill-amber-400 text-amber-400":"text-admin-text/30 hover:text-amber-400/60")})})})]}),e.jsxs("div",{className:"flex items-baseline gap-2 mb-2",children:[e.jsx("span",{className:"text-white text-[13px] font-medium truncate",children:i}),l&&l!=="-"&&e.jsx("span",{className:"text-[11px] text-admin-purple shrink-0",children:l}),b&&b!=="-"&&b!==l&&e.jsx("span",{className:"text-[11px] text-admin-text/50 shrink-0",children:b})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-1 mb-1",children:[e.jsxs("div",{className:"bg-admin-bg/40 rounded px-2 py-1.5 text-center",children:[e.jsx("p",{className:"text-[10px] text-admin-text/60 mb-0.5",children:"ÌåîÎ°úÏõå"}),e.jsx("p",{className:"text-[13px] text-white tabular-nums font-medium",children:_&&_!=="-"?T(_):"-"})]}),e.jsxs("div",{className:"bg-admin-bg/40 rounded px-2 py-1.5 text-center",children:[e.jsx("p",{className:"text-[10px] text-admin-text/60 mb-0.5",children:"ÌèâÍ∑†Ï°∞Ìöå"}),e.jsx("p",{className:"text-[13px] text-white tabular-nums font-medium",children:d&&d!=="-"?T(d):"-"})]}),e.jsxs("div",{className:"bg-admin-bg/40 rounded px-2 py-1.5 text-center",children:[e.jsx("p",{className:"text-[10px] text-admin-text/60 mb-0.5",children:"ÏµúÎåÄÏ°∞Ìöå"}),e.jsx("p",{className:"text-[13px] text-white tabular-nums font-medium",children:v&&v!=="-"?T(v):"-"})]}),e.jsxs("div",{className:"bg-admin-bg/40 rounded px-2 py-1.5 text-center",children:[e.jsx("p",{className:"text-[10px] text-admin-text/60 mb-0.5",children:"ÌèâÍ∑†ÎåìÍ∏Ä"}),e.jsx("p",{className:"text-[13px] text-white tabular-nums font-medium",children:A&&A!=="-"?T(A):"-"})]})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-1 mb-2",children:[e.jsxs("div",{className:"bg-admin-bg/40 rounded px-2 py-1.5 text-center",children:[e.jsx("p",{className:"text-[10px] text-admin-text/60 mb-0.5",children:"Í≥µÍµ¨ÌèâÍ∑†üí¨"}),e.jsx("p",{className:"text-[13px] text-white tabular-nums font-medium",children:W&&W!=="-"?T(W):"-"})]}),e.jsxs("div",{className:"bg-admin-bg/40 rounded px-2 py-1.5 text-center",children:[e.jsx("p",{className:"text-[10px] text-admin-text/60 mb-0.5",children:"Í≥µÍµ¨ÏµúÎåÄüí¨"}),e.jsx("p",{className:"text-[13px] text-white tabular-nums font-medium",children:se&&se!=="-"?T(se):"-"})]}),ae&&ae!=="-"&&e.jsxs("div",{className:"bg-admin-bg/40 rounded px-2 py-1.5 text-center",children:[e.jsx("p",{className:"text-[10px] text-admin-text/60 mb-0.5",children:"ÎßàÏßÄÎßâÍ≤åÏãúÎ¨º"}),e.jsx("p",{className:"text-[11px] text-white/80",children:ae})]}),ne&&ne!=="-"&&e.jsxs("div",{className:"bg-admin-bg/40 rounded px-2 py-1.5 text-center",children:[e.jsx("p",{className:"text-[10px] text-admin-text/60 mb-0.5",children:"ÏóÖÎç∞Ïù¥Ìä∏"}),e.jsx("p",{className:"text-[11px] text-white/80",children:ne})]})]}),e.jsxs("div",{className:"flex items-center justify-between gap-2 mb-2",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(Me,{className:"h-3 w-3 text-admin-text/60"}),e.jsx("span",{className:"text-[11px] text-admin-text/60",children:"Î©§Î≤ÑÏàò"}),fe?e.jsx("input",{type:"text",value:U,onChange:R=>y(R.target.value),onBlur:()=>H(t._rowIndex,"Í≥µÏßÄÏ±ÑÎÑê Î©§Î≤ÑÏàò"),onKeyDown:R=>J(R,t._rowIndex,"Í≥µÏßÄÏ±ÑÎÑê Î©§Î≤ÑÏàò"),autoFocus:!0,className:"w-16 px-1.5 py-0.5 bg-admin-bg border border-admin-accent rounded text-white text-right text-[12px] focus:outline-none"}):e.jsx("button",{onClick:()=>ce(t._rowIndex,"Í≥µÏßÄÏ±ÑÎÑê Î©§Î≤ÑÏàò",q),className:"text-[12px] text-admin-accent/80 hover:text-admin-accent tabular-nums border-b border-dashed border-admin-border hover:border-admin-accent/50 transition-colors",children:q&&q!=="-"?T(q):"0"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[be==="ON"&&e.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded-full bg-admin-success/15 text-admin-success border border-admin-success/30",children:"Ïä§ÌÜ†Î¶¨"}),(oe==="Y"||oe==="O")&&e.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded-full bg-teal-500/15 text-teal-400 border border-teal-500/30",children:"ÏÜåÌÜµ"}),(de==="Y"||de==="O")&&e.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded-full bg-purple-500/15 text-purple-400 border border-purple-500/30",children:"ÎåìÍ∏Ä"})]})]}),B&&B!=="-"?e.jsx("button",{onClick:()=>f(t._rowIndex,B,i),className:"w-full text-left group/memo",children:e.jsxs("div",{className:"bg-admin-bg/50 rounded px-2.5 py-1.5 flex items-start gap-2",children:[e.jsx(Se,{className:"h-3 w-3 text-admin-text mt-0.5 shrink-0"}),e.jsx("p",{className:"text-[12px] text-white/70 whitespace-pre-wrap break-words line-clamp-2 flex-1",children:B}),e.jsx(Ce,{className:"h-3 w-3 text-admin-accent opacity-0 group-hover/memo:opacity-100 transition-opacity shrink-0 mt-0.5"})]})}):e.jsx("button",{onClick:()=>f(t._rowIndex,"",i),className:"w-full text-left",children:e.jsxs("div",{className:"bg-admin-bg/50 rounded px-2.5 py-1.5 flex items-center gap-2 text-admin-text/40 hover:text-admin-text/60 transition-colors",children:[e.jsx(Se,{className:"h-3 w-3 shrink-0"}),e.jsx("span",{className:"text-[12px]",children:"Î©îÎ™® Ï∂îÍ∞Ä..."})]})})]},t._rowIndex)})}),F=()=>{I.current||(I.current=!0,g.current&&z.current&&(z.current.scrollLeft=g.current.scrollLeft),requestAnimationFrame(()=>{I.current=!1}))},ee=()=>{I.current||(I.current=!0,g.current&&z.current&&(g.current.scrollLeft=z.current.scrollLeft),requestAnimationFrame(()=>{I.current=!1}))},te=s.useMemo(()=>e.jsxs("colgroup",{children:[o==="select"&&e.jsx("col",{style:{width:40}}),D.map(t=>e.jsx("col",{style:{width:j.pctWidths[t]}},t))]}),[o,D,j.pctWidths]);return e.jsxs(e.Fragment,{children:[Z(),e.jsxs("div",{className:"hidden md:block",children:[e.jsx("div",{className:"sticky z-40 border border-admin-border border-b-0 rounded-t-lg bg-[#14142a]",style:{top:N},children:e.jsx("div",{ref:g,className:"overflow-x-auto",style:{scrollbarWidth:"none"},onScroll:F,children:e.jsxs("table",{className:"w-full text-sm border-collapse",style:{minWidth:j.total,tableLayout:"fixed"},children:[te,e.jsx("thead",{children:e.jsxs("tr",{className:"bg-[#14142a]",children:[o==="select"&&e.jsx("th",{className:"px-2 py-2.5 text-center w-10"}),D.map((t,r)=>{const i=Q[t],a=r<ie,l=r===ie-1;return e.jsx("th",{style:a?{left:j.stickyOffsets[r]}:void 0,className:O("px-2.5 py-2.5 text-[11px] uppercase tracking-wider text-admin-text/70 font-semibold border-r border-admin-border/50 last:border-r-0 group/th",a&&"sticky z-40 bg-[#14142a]",l&&"shadow-[3px_0_8px_rgba(0,0,0,0.35)] border-r-admin-border",i?.align==="center"&&"text-center",i?.align==="right"&&"text-right"),children:e.jsxs("button",{onClick:()=>pe(t),className:"flex items-center gap-1 w-full hover:text-white transition-colors",children:[e.jsx("span",{className:"whitespace-nowrap",children:i?.label||t}),e.jsx(Xe,{column:t,sortConfig:k})]})},t)})]})})]})})}),e.jsx("div",{className:"border border-admin-border border-t-0 rounded-b-lg overflow-hidden",children:e.jsx("div",{ref:z,className:"overflow-auto",style:{maxHeight:"calc(100vh - 220px)"},onScroll:ee,children:e.jsxs("table",{className:"w-full text-sm border-collapse",style:{minWidth:j.total,tableLayout:"fixed"},children:[te,e.jsx("tbody",{children:$.map((t,r)=>{const i=String(t.Ïù∏Ïä§ÌÉÄID||""),a=x===i;return e.jsxs("tr",{"data-insta-id":i,onClick:o==="select"&&!C?.has(i)?()=>E?.(t):void 0,className:O("border-b border-admin-border/40 transition-colors duration-500",o==="select"&&C?.has(i)&&"opacity-30 cursor-not-allowed",o==="select"&&!C?.has(i)&&"cursor-pointer",o==="select"&&L?.has(i)?"bg-amber-500/[0.07]":a?"bg-admin-accent/10 ring-1 ring-admin-accent/40":r%2===0?"bg-[#11111f]":"bg-[#151528]","hover:bg-white/[0.02]"),children:[o==="select"&&(()=>{const l=String(t.Ïù∏Ïä§ÌÉÄID||""),b=L?.has(l),_=C?.has(l);return e.jsx("td",{className:"px-2 py-2 text-center align-top",children:e.jsx("div",{className:O("w-5 h-5 rounded border flex items-center justify-center mx-auto",_?"border-[#2a2a3a] bg-[#1a1a2a] opacity-30":b?"bg-amber-500 border-amber-500":"border-[#3a3a4a] bg-transparent"),children:b&&e.jsx(we,{className:"h-3 w-3 text-black",strokeWidth:3})})})})(),D.map((l,b)=>{const _=Q[l],d=b<ie,v=b===ie-1,A=r%2===0?"#11111f":"#151528";return e.jsx("td",{style:d?{left:j.stickyOffsets[b],backgroundColor:A}:void 0,className:O("px-2.5 py-2 text-white border-r border-admin-border/30 last:border-r-0 align-top",d&&"sticky z-30",v&&"shadow-[3px_0_8px_rgba(0,0,0,0.35)] border-r-admin-border/60",_?.align==="center"&&"text-center",_?.align==="right"&&"text-right",_?.highlight&&"font-semibold"),children:X(t,l,t._rowIndex)},l)})]},t._rowIndex)})})]})})})]})]})}const et=s.memo(Ze),tt=s.lazy(()=>ue(()=>import("./GradeConfigModal-CzW901_u.js"),__vite__mapDeps([0,1,2,3,4,5,6]))),st=s.lazy(()=>ue(()=>import("./ColumnSettingsPanel-CEJ0QQs9.js"),__vite__mapDeps([7,1,2,4,5,6]))),at=s.lazy(()=>ue(()=>import("./MemoEditModal-owec7Bl4.js"),__vite__mapDeps([8,1,2,3,4,5,6]))),nt=s.lazy(()=>ue(()=>import("./AnalyzerDrawer-CLXnoxUY.js"),__vite__mapDeps([9,1,2,6,5,4,10,11]))),rt=["2Ï£º Ï¥àÍ≥º","ÏóÜÏùå"];function ht(){const{data:u,isLoading:m,error:w}=Ee(),p=De(),f=Ie(),{data:x,isLoading:N}=Le(),o=ze(),{data:L}=Ae(),C=Re(),{data:E}=Te(),k=s.useRef(null),[P,M]=s.useState(0);s.useEffect(()=>{const n=k.current;if(!n)return;const c=new ResizeObserver(()=>{M(n.offsetHeight)});return c.observe(n),()=>c.disconnect()},[]);const[S,U]=s.useState(""),[y,D]=s.useState([]),[j,$]=s.useState([]),[g,z]=s.useState([]),[I,pe]=s.useState(!1),[le,H]=s.useState(!1),[J,X]=s.useState(!1),[ce,Z]=s.useState(!1),[F,ee]=s.useState({isOpen:!1,rowIndex:-1,value:"",name:""}),[te,t]=s.useState(null),[r,i]=s.useState(!1);s.useEffect(()=>{const n=c=>{c.data?.type==="ig-analyzer-result"&&c.data.payload&&(t(c.data.payload),i(!0))};return window.addEventListener("message",n),()=>window.removeEventListener("message",n)},[]),s.useEffect(()=>{const n=window.location.hash;if(n.startsWith("#analyzer="))try{const c=n.slice(10),h=JSON.parse(decodeURIComponent(c));h.username&&h.profile&&(t(h),i(!0),history.replaceState(null,"",window.location.pathname))}catch{}},[]);const a=s.useMemo(()=>u?.data??[],[u?.data]),l=u?.headers||[],b=u?.fromCache??!1,_=s.useMemo(()=>x?.columns?x.columns.filter(n=>n.visible).map(n=>n.name):ge.filter(n=>!je.includes(n)),[x]),d=s.useMemo(()=>{const n=new Set;return a.forEach(c=>{const h=c["Ïπ¥ÌÖåÍ≥†Î¶¨(ÎåÄ)"];h&&h!=="-"&&n.add(h)}),Array.from(n).sort()},[a]),v=rt,A=s.useMemo(()=>a.filter(n=>{if(I&&String(n.Ï¶êÍ≤®Ï∞æÍ∏∞||"").trim().toUpperCase()!=="TRUE")return!1;if(S){const c=S.toLowerCase(),h=String(n.Ïù∏Ïä§ÌÉÄID||"").toLowerCase(),re=String(n["Ïù∏Ïä§ÌÉÄ Ïù¥Î¶Ñ"]||"").toLowerCase();if(!h.includes(c)&&!re.includes(c))return!1}if(y.length>0){const c=n["Ïπ¥ÌÖåÍ≥†Î¶¨(ÎåÄ)"];if(!y.includes(c))return!1}if(j.length>0){const c=n["Ïù∏ÌîåÎ£®Ïñ∏ÏÑú Îì±Í∏â"];if(!j.includes(c))return!1}if(g.length>0){const c=String(n.ÏóÖÎç∞Ïù¥Ìä∏ÏùºÏûê||"").trim(),h=!c||c==="-",re=Date.now(),fe=336*60*60*1e3,Y=!h&&re-new Date(c).getTime()>fe,V=g.includes("2Ï£º Ï¥àÍ≥º"),R=g.includes("ÏóÜÏùå");if(V&&R){if(!Y&&!h)return!1}else if(V){if(!Y)return!1}else if(R&&!h)return!1}return!0}),[a,S,y,j,g,I]),W=s.useCallback(()=>{p.mutate()},[p]),se=s.useCallback((n,c,h)=>{f.mutate({rowIndex:n,columnIndex:c,value:h})},[f]),ae=s.useCallback((n,c,h)=>{ee({isOpen:!0,rowIndex:n,value:c,name:h})},[]),ne=s.useCallback(n=>{const c=l.indexOf("Î©îÎ™®");c!==-1&&f.mutate({rowIndex:F.rowIndex,columnIndex:c,value:n}),ee({isOpen:!1,rowIndex:-1,value:"",name:""})},[l,F.rowIndex,f]),q=s.useCallback(n=>{o.mutate(n),Z(!1)},[o]),be=s.useCallback((n,c)=>{C.mutate({grades:n,applyFormula:c}),X(!1)},[C]),oe=s.useCallback(n=>{s.startTransition(()=>{U(n)})},[]),de=s.useCallback(()=>X(!0),[]),B=s.useCallback(()=>Z(!0),[]);return w?e.jsx("div",{className:"max-w-[1800px] mx-auto mt-8",children:e.jsxs("div",{className:"bg-admin-error/20 border border-admin-error/40 rounded-lg p-6 text-center",children:[e.jsx("p",{className:"text-admin-error font-semibold",children:"Îç∞Ïù¥ÌÑ∞Î•º Î∂àÎü¨Ïò§ÎäîÎç∞ Ïã§Ìå®ÌñàÏäµÎãàÎã§"}),e.jsx("p",{className:"text-admin-text text-sm mt-2",children:String(w)}),e.jsx(G,{onClick:W,className:"mt-4",children:"Îã§Ïãú ÏãúÎèÑ"})]})}):e.jsxs("div",{className:"max-w-[1800px] mx-auto mt-4 md:mt-8",children:[e.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl md:text-2xl font-bold text-white mb-1 md:mb-2",children:"Ïù∏ÌîåÎ£®Ïñ∏ÏÑú Í¥ÄÎ¶¨"}),E&&e.jsxs("div",{className:"flex items-center gap-4 text-xs text-admin-text",children:[e.jsxs("span",{children:["Cache: ",b?"KV":"API"]}),e.jsxs("span",{children:["Quota: ",E.quotaUsed," / 100"]}),e.jsxs("span",{children:["Hits: ",E.cacheHits," / Misses: ",E.cacheMisses]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(G,{onClick:de,variant:"outline",className:"bg-transparent border-admin-border text-white hover:bg-admin-bg",children:[e.jsx(Ye,{className:"h-4 w-4 md:mr-2"}),e.jsx("span",{className:"hidden md:inline",children:"Îì±Í∏â ÏÑ§Ï†ï"})]}),e.jsxs(G,{onClick:B,variant:"outline",className:"bg-transparent border-admin-border text-white hover:bg-admin-bg",children:[e.jsx(qe,{className:"h-4 w-4 md:mr-2"}),e.jsx("span",{className:"hidden md:inline",children:"Ïª¨Îüº ÏÑ§Ï†ï"})]})]})]}),e.jsx("div",{ref:k,className:"sticky top-0 z-50 bg-admin-bg py-2 md:pt-2 md:pb-4 -mx-3 px-3 md:-mx-6 md:px-6 shadow-[0_4px_12px_rgba(0,0,0,0.3)]",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx(Qe,{searchQuery:S,onSearchChange:oe,categoryOptions:d,selectedCategories:y,onCategoriesChange:D,selectedGrades:j,onGradesChange:$,updateStatusOptions:v,selectedUpdateStatus:g,onUpdateStatusChange:z,resultCount:A.length,totalCount:a.length,showFavoritesOnly:I,onFavoritesToggle:()=>pe(n=>!n)})}),e.jsx(G,{onClick:()=>H(!0),variant:"outline",size:"sm",className:"hidden md:flex bg-transparent border-admin-border text-white hover:bg-admin-bg shrink-0",children:e.jsx(He,{className:"h-4 w-4"})}),e.jsx(G,{onClick:W,disabled:p.isPending,variant:"outline",size:"sm",className:"bg-transparent border-admin-border text-white hover:bg-admin-bg shrink-0",children:e.jsx(Ge,{className:`h-4 w-4 ${p.isPending?"animate-spin":""}`})})]})}),m||N?e.jsx("div",{className:"flex items-center justify-center h-64 bg-admin-card rounded-lg border border-admin-border",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-admin-accent mx-auto mb-4"}),e.jsx("p",{className:"text-admin-text",children:"Îç∞Ïù¥ÌÑ∞Î•º Î∂àÎü¨Ïò§Îäî Ï§ë..."})]})}):e.jsx(et,{data:A,headers:l,visibleColumns:_,onCellEdit:se,onMemoEdit:ae,highlightId:r?te?.username??null:null,stickyTopOffset:P}),J&&e.jsx(s.Suspense,{fallback:null,children:e.jsx(tt,{isOpen:J,onClose:()=>X(!1),grades:L?.grades||[],onSave:be,isSaving:C.isPending})}),ce&&e.jsx(s.Suspense,{fallback:null,children:e.jsx(st,{isOpen:ce,onClose:()=>Z(!1),columns:x?.columns||ge.filter(n=>!je.includes(n)).map(n=>({name:n,visible:!0})),onSave:q,isSaving:o.isPending})}),F.isOpen&&e.jsx(s.Suspense,{fallback:null,children:e.jsx(at,{isOpen:F.isOpen,onClose:()=>ee({isOpen:!1,rowIndex:-1,value:"",name:""}),initialValue:F.value,onSave:ne,influencerName:F.name})}),r&&e.jsx(s.Suspense,{fallback:null,children:e.jsx(nt,{payload:te,isOpen:r,onClose:()=>i(!1)})}),le&&e.jsx(it,{ids:A.map(n=>String(n.Ïù∏Ïä§ÌÉÄID||"")).filter(Boolean),onClose:()=>H(!1)})]})}function it({ids:u,onClose:m}){const[w,p]=s.useState(!1),f=u.join(`
`);s.useEffect(()=>{const N=o=>{o.key==="Escape"&&m()};return document.addEventListener("keydown",N),()=>document.removeEventListener("keydown",N)},[m]);const x=()=>{navigator.clipboard.writeText(f).then(()=>{p(!0),setTimeout(()=>p(!1),2e3)})};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-[9998] bg-black/50",onClick:m}),e.jsxs("div",{className:"fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-[9999] w-[400px] max-h-[70vh] bg-admin-bg border border-admin-border rounded-lg flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-admin-border",children:[e.jsxs("h2",{className:"text-white font-semibold text-sm",children:["ID Ï∂îÏ∂ú (",u.length,"Í∞ú)"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(G,{size:"sm",variant:"outline",onClick:x,className:"bg-transparent border-admin-border text-white hover:bg-admin-card text-xs",children:w?"Î≥µÏÇ¨Îê®!":"Î≥µÏÇ¨"}),e.jsx(G,{size:"icon-sm",variant:"ghost",onClick:m,className:"text-admin-text hover:text-white hover:bg-admin-card",children:e.jsx("span",{className:"text-lg leading-none",children:"√ó"})})]})]}),e.jsx("textarea",{readOnly:!0,value:f,className:"flex-1 min-h-[200px] max-h-[50vh] p-4 bg-transparent text-white text-[13px] font-mono leading-relaxed resize-none focus:outline-none"})]})]})}export{ht as default};
