const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/GradeConfigModal-CzW901_u.js","assets/framer-motion-6E75tBg3.js","assets/react-vendor-9l3RvKiN.js","assets/dialog-BsRQu4eJ.js","assets/useInfluencerData-DgYyWdtE.js","assets/index-kvcITcEx.js","assets/tanstack-query-BtejbdqV.js","assets/ColumnSettingsPanel-CEJ0QQs9.js","assets/MemoEditModal-owec7Bl4.js","assets/AnalyzerDrawer-CLXnoxUY.js","assets/useAnalyzerData-B2JgJSSy.js","assets/copy-Ck-R7ZBU.js"])))=>i.map(i=>d[i]);
import{_ as ue}from"./index-B60IXxEM.js";import{j as e}from"./framer-motion-6E75tBg3.js";import{r as s}from"./react-vendor-9l3RvKiN.js";import{S as Ne,I as ye,a as _e,M as K,G as ve,X as Oe,D as ge,H as je,C as Q,c as M,b as we,d as re,e as xe,f as A,U as Me,B as G,u as Ee,g as De,h as Ie,i as Le,j as ze,k as Ae,l as Re,m as Te}from"./useInfluencerData-DgYyWdtE.js";import{c as he}from"./index-kvcITcEx.js";import{B as ke,M as Se,P as Ce,A as Pe,a as Ue,b as Fe,E as Ve,R as Ge}from"./badge-DnlvhQ5D.js";import"./tanstack-query-BtejbdqV.js";const $e=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],He=he("clipboard-list",$e);const We=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],qe=he("settings",We);const Be=[["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M12 21v-9",key:"17s77i"}],["path",{d:"M12 8V3",key:"13r4qs"}],["path",{d:"M17 16h4",key:"h1uq16"}],["path",{d:"M19 12V3",key:"o1uvq1"}],["path",{d:"M19 21v-5",key:"qua636"}],["path",{d:"M3 14h4",key:"bcjad9"}],["path",{d:"M5 10V3",key:"cb8scm"}],["path",{d:"M5 21v-7",key:"1w1uti"}]],Ye=he("sliders-vertical",Be);const Ke=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],me=he("star",Ke);function Qe({searchQuery:u,onSearchChange:m,categoryOptions:N,selectedCategories:p,onCategoriesChange:f,selectedGrades:d,onGradesChange:g,updateStatusOptions:x,selectedUpdateStatus:E,onUpdateStatusChange:y,resultCount:R,totalCount:w,showFavoritesOnly:T,onFavoritesToggle:v}){const[D,I]=s.useState(u),[O,k]=s.useState(!1);s.useEffect(()=>{const C=setTimeout(()=>{m(D)},250);return()=>clearTimeout(C)},[D,m]);const S=p.length+d.length+E.length,L=()=>{f([]),g([]),y([])};return e.jsxs("div",{children:[e.jsxs("div",{className:"md:hidden",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Ne,{className:"absolute left-2.5 top-1/2 -translate-y-1/2 h-3.5 w-3.5 text-admin-text"}),e.jsx(ye,{type:"text",placeholder:"ID ÎòêÎäî Ïù¥Î¶Ñ Í≤ÄÏÉâ...",value:D,onChange:C=>I(C.target.value),className:"pl-8 h-8 text-[13px] bg-admin-card border-admin-border text-white placeholder:text-admin-text"})]}),e.jsx("button",{onClick:v,className:`flex items-center justify-center h-8 w-8 rounded-md border shrink-0 transition-colors ${T?"bg-amber-500/20 border-amber-500/40 text-amber-400":"bg-admin-card border-admin-border text-admin-text/40"}`,children:e.jsx(me,{className:`h-3.5 w-3.5 ${T?"fill-amber-400":""}`})}),e.jsxs("button",{onClick:()=>k(!O),className:`relative flex items-center justify-center h-8 w-8 rounded-md border shrink-0 transition-colors ${O||S>0?"bg-admin-accent/15 border-admin-accent/40 text-admin-accent":"bg-admin-card border-admin-border text-admin-text"}`,children:[e.jsx(_e,{className:"h-3.5 w-3.5"}),S>0&&e.jsx("span",{className:"absolute -top-1.5 -right-1.5 min-w-[16px] h-4 flex items-center justify-center rounded-full bg-admin-accent text-[10px] font-bold text-admin-bg px-1",children:S})]}),e.jsxs("span",{className:"text-[11px] text-admin-text tabular-nums shrink-0",children:[e.jsx("span",{className:"text-white font-semibold",children:R}),"/",w]})]}),O&&e.jsxs("div",{className:"mt-2 flex flex-col gap-2",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(K,{options:N,selected:p,onChange:f,placeholder:"Ïπ¥ÌÖåÍ≥†Î¶¨"}),e.jsx(K,{options:ve,selected:d,onChange:g,placeholder:"Îì±Í∏â"}),e.jsx(K,{options:x,selected:E,onChange:y,placeholder:"ÏóÖÎç∞Ïù¥Ìä∏"})]}),S>0&&e.jsxs("button",{onClick:L,className:"flex items-center gap-1 text-[11px] text-admin-text hover:text-admin-accent transition-colors self-end",children:[e.jsx(Oe,{className:"h-3 w-3"}),"ÌïÑÌÑ∞ Ï¥àÍ∏∞Ìôî"]})]})]}),e.jsxs("div",{className:"hidden md:block space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Ne,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-admin-text"}),e.jsx(ye,{type:"text",placeholder:"ID ÎòêÎäî Ïù¥Î¶Ñ Í≤ÄÏÉâ...",value:D,onChange:C=>I(C.target.value),className:"pl-10 bg-admin-card border-admin-border text-white placeholder:text-admin-text"})]}),e.jsx(K,{options:N,selected:p,onChange:f,placeholder:"Ïπ¥ÌÖåÍ≥†Î¶¨ ÏÑ†ÌÉù"}),e.jsx(K,{options:ve,selected:d,onChange:g,placeholder:"Îì±Í∏â ÏÑ†ÌÉù"}),e.jsx(K,{options:x,selected:E,onChange:y,placeholder:"ÏóÖÎç∞Ïù¥Ìä∏ ÏÉÅÌÉú"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-admin-text",children:[e.jsx("span",{className:"text-white font-semibold",children:R})," /"," ",w," Í±¥"]}),e.jsxs("button",{onClick:v,className:`flex items-center gap-1.5 px-3 py-1 rounded-full text-[12px] font-medium border transition-colors ${T?"bg-amber-500/20 border-amber-500/40 text-amber-400":"bg-admin-card border-admin-border text-admin-text hover:text-white"}`,children:[e.jsx(me,{className:`h-3.5 w-3.5 ${T?"fill-amber-400":""}`}),"Ï¶êÍ≤®Ï∞æÍ∏∞Îßå"]})]})]})]})}function Je(u){const m=u.reduce((d,g)=>d+(Q[g]?.width||120),0),N={},p=[];let f=0;for(let d=0;d<u.length;d++){const g=Q[u[d]]?.width||120,x=g/m*100;N[u[d]]=`${x}%`,d<re&&(p.push(`${f/m*100}%`),f+=g)}return{total:m,pctWidths:N,stickyOffsets:p}}function Xe({column:u,sortConfig:m}){return m.column===u?m.direction==="asc"?e.jsx(Ue,{className:"h-3 w-3 shrink-0 text-admin-accent"}):e.jsx(Fe,{className:"h-3 w-3 shrink-0 text-admin-accent"}):e.jsx(Pe,{className:"h-3 w-3 shrink-0 opacity-0 group-hover/th:opacity-40 transition-opacity"})}function Ze({data:u,headers:m,visibleColumns:N,onCellEdit:p,onMemoEdit:f,highlightId:d,stickyTopOffset:g=0,mode:x="manage",selectedIds:E,disabledIds:y,onToggleSelect:R}){const[w,T]=s.useState({column:null,direction:null}),[v,D]=s.useState(null),[I,O]=s.useState(""),k=s.useMemo(()=>ge.filter(t=>N.includes(t)&&!je.includes(t)),[N]),S=s.useMemo(()=>Je(k),[k]),L=s.useMemo(()=>!w.column||!w.direction?u:[...u].sort((t,i)=>{const r=String(t[w.column]||""),a=String(i[w.column]||""),l=parseFloat(r.replace(/,/g,"")),b=parseFloat(a.replace(/,/g,""));return!isNaN(l)&&!isNaN(b)?w.direction==="asc"?l-b:b-l:w.direction==="asc"?r.localeCompare(a,"ko"):a.localeCompare(r,"ko")}),[u,w]),C=s.useRef(null),z=s.useRef(null),P=s.useRef(!1);s.useEffect(()=>{if(!d||!z.current)return;const t=z.current.querySelector(`[data-insta-id="${d}"]`);t&&t.scrollIntoView({block:"center",behavior:"smooth"})},[d,L]);const pe=t=>{T(i=>i.column!==t?{column:t,direction:"asc"}:i.direction==="asc"?{column:t,direction:"desc"}:{column:null,direction:null})},J=(t,i,r,a)=>{if(x==="select")return;const l=Q[i];l&&(l.type==="editable-memo"?f(t,r,a):(l.type==="editable-number"||l.type==="editable-boolean")&&(D({rowIndex:t,column:i}),O(r)))},$=(t,i)=>{if(v?.rowIndex===t&&v?.column===i){const r=m.indexOf(i);r!==-1&&p(t,r,I),D(null),O("")}},H=(t,i,r)=>{t.key==="Enter"?$(i,r):t.key==="Escape"&&(D(null),O(""))},ie=(t,i,r)=>{const a=String(t[i]||""),l=Q[i];if(!l)return a;const b=m.indexOf(i),_=v?.rowIndex===r&&v?.column===i;if(l.type==="editable-memo")return e.jsxs("button",{onClick:()=>J(r,i,a,t["Ïù∏Ïä§ÌÉÄ Ïù¥Î¶Ñ"]),className:"w-full text-left group/memo relative",children:[e.jsx("span",{className:"whitespace-pre-wrap break-words text-[13px] leading-relaxed text-white/90",children:a||"-"}),e.jsx("span",{className:"absolute top-0 right-0 opacity-0 group-hover/memo:opacity-100 transition-opacity",children:e.jsx(Ce,{className:"h-3 w-3 text-admin-accent"})})]});if(l.type==="editable-number"){const o=a&&a!=="-"?a:"0";return _?e.jsx("input",{type:"text",value:I,onChange:j=>O(j.target.value),onBlur:()=>$(r,i),onKeyDown:j=>H(j,r,i),autoFocus:!0,className:"w-full px-1.5 py-0.5 bg-admin-bg border border-admin-accent rounded text-white text-right text-[13px] focus:outline-none"}):e.jsx("button",{onClick:()=>J(r,i,a,""),className:"w-full text-right tabular-nums text-[13px] text-admin-accent/80 hover:text-admin-accent border-b border-dashed border-admin-border hover:border-admin-accent/50 transition-colors",children:A(o)})}if(l.type==="editable-boolean"){const o=a.trim().toUpperCase()==="ON";return e.jsx(G,{size:"sm",variant:"outline",onClick:()=>{p(r,b,o?"OFF":"ON")},className:M("h-6 px-2 text-[11px] font-semibold rounded-full",o?"bg-admin-success/15 text-admin-success border-admin-success/30 hover:bg-admin-success/25":"bg-gray-500/15 text-gray-500 border-gray-500/30 hover:bg-gray-500/25"),children:o?"ON":"OFF"})}if(l.type==="favorite"){const o=a.trim().toUpperCase()==="TRUE";return e.jsx("button",{onClick:()=>{const j=m.indexOf(i);j!==-1&&p(r,j,o?"FALSE":"TRUE")},className:"flex items-center justify-center w-full",children:e.jsx(me,{className:M("h-4 w-4 transition-colors",o?"fill-amber-400 text-amber-400":"text-admin-text/30 hover:text-amber-400/60")})})}if(l.type==="id"){const o=t["ÌîÑÎ°úÌïÑ ÎßÅÌÅ¨"];return o&&i==="Ïù∏Ïä§ÌÉÄID"?e.jsx("a",{href:o,target:"_blank",rel:"noopener noreferrer",className:"text-admin-accent hover:underline text-[13px] font-medium",children:a}):e.jsx("span",{className:"text-[13px] text-admin-text",children:a})}if(l.type==="name")return e.jsx("span",{className:"text-[13px] text-white whitespace-normal break-words leading-snug",children:a});if(l.type==="link")return!a||a==="-"?e.jsx("span",{className:"text-admin-text/40",children:"-"}):e.jsx("a",{href:a,target:"_blank",rel:"noopener noreferrer",className:"text-admin-accent/70 hover:text-admin-accent transition-colors",children:e.jsx(Ve,{className:"h-3.5 w-3.5 mx-auto"})});if(l.type==="number")return e.jsx("span",{className:"tabular-nums text-[13px]",children:A(a)});if(l.type==="tag")return!a||a==="-"?e.jsx("span",{className:"text-admin-text/40",children:"-"}):e.jsx("span",{className:"text-[12px] text-admin-purple whitespace-normal break-words",children:a});if(l.type==="boolean"){const o=a.trim().toUpperCase()==="Y"||a.trim()==="O";return e.jsx("span",{className:M("text-[11px] font-bold",o?"text-admin-success":"text-admin-text/40"),children:o?"Y":"N"})}if(l.type==="grade"){if(!a||a==="-")return e.jsx("span",{className:"text-admin-text/40",children:"-"});const o=xe[a]||xe.C;return e.jsx(ke,{variant:"outline",className:M("font-bold text-[11px] px-2 py-0",o),children:a})}return l.type==="text-wrap"?!a||a==="-"?e.jsx("span",{className:"text-admin-text/40",children:"-"}):e.jsx("span",{className:"whitespace-normal break-words text-[13px] leading-snug text-white/80",children:a}):l.type==="desc"?e.jsx("span",{className:"text-[13px] text-admin-text",children:a||"-"}):e.jsx("span",{className:"text-[13px]",children:a})},X=(t,i,r)=>{D({rowIndex:t,column:i}),O(r&&r!=="-"?r:"0")},U=()=>e.jsx("div",{className:"md:hidden space-y-3",children:L.map(t=>{const i=String(t.Ïù∏Ïä§ÌÉÄID||""),r=String(t["Ïù∏Ïä§ÌÉÄ Ïù¥Î¶Ñ"]||""),a=String(t["Ïù∏ÌîåÎ£®Ïñ∏ÏÑú Îì±Í∏â"]||""),l=String(t["Ïπ¥ÌÖåÍ≥†Î¶¨(ÎåÄ)"]||""),b=String(t["Ïπ¥ÌÖåÍ≥†Î¶¨(Ï§ë)"]||""),_=String(t.ÌåîÎ°úÏõå||""),o=String(t["ÏµúÍ∑º 10 ÌèâÍ∑† Î¶¥Ïä§ Ï°∞ÌöåÏàò"]||""),j=String(t["ÏµúÎåÄ Î¶¥Ïä§ Ï°∞ÌöåÏàò"]||""),F=String(t["ÏµúÍ∑º10Í∞ú ÌèâÍ∑† ÎåìÍ∏ÄÏàò"]||""),te=String(t["Í≥µÍµ¨ ÌèâÍ∑†ÎåìÍ∏ÄÏàò"]||""),se=String(t["Í≥µÍµ¨ ÏµúÎåÄÎåìÍ∏ÄÏàò"]||""),ae=String(t.ÎßàÏßÄÎßâÍ≤åÏãúÎ¨º||""),ne=String(t.ÏóÖÎç∞Ïù¥Ìä∏ÏùºÏûê||""),W=String(t["Í≥µÏßÄÏ±ÑÎÑê Î©§Î≤ÑÏàò"]||""),be=String(t.Ïä§ÌÜ†Î¶¨ÌôúÎèô||"").trim().toUpperCase(),ce=String(t.ÏÜåÌÜµÏ±ÑÎÑêÏó¨Î∂Ä||"").trim(),oe=String(t.ÎåìÍ∏ÄÌôúÎèôÏó¨Î∂Ä||"").trim(),n=String(t.Î©îÎ™®||""),h=String(t.Ï¶êÍ≤®Ï∞æÍ∏∞||"").trim().toUpperCase()==="TRUE",q=t["ÌîÑÎ°úÌïÑ ÎßÅÌÅ¨"],fe=xe[a]||xe.C,de=v?.rowIndex===t._rowIndex&&v?.column==="Í≥µÏßÄÏ±ÑÎÑê Î©§Î≤ÑÏàò",B=x==="select"&&E?.has(i),V=x==="select"&&y?.has(i);return e.jsxs("div",{"data-insta-id":i,onClick:x==="select"&&!V?()=>R?.(t):void 0,className:M("rounded-lg p-3 transition-colors duration-500",x==="select"&&V&&"opacity-30 cursor-not-allowed",x==="select"&&!V&&"cursor-pointer",B||d===i?"bg-admin-accent/10 border-2 border-admin-accent/40":"bg-admin-card border border-admin-border"),children:[x==="select"&&e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:M("w-5 h-5 rounded border flex items-center justify-center shrink-0",V?"border-[#2a2a3a] bg-[#1a1a2a]":B?"bg-amber-500 border-amber-500":"border-[#3a3a4a]"),children:B&&e.jsx(we,{className:"h-3 w-3 text-black",strokeWidth:3})}),V&&e.jsx("span",{className:"text-[10px] text-admin-accent/60",children:"Ï∂îÍ∞ÄÎê®"})]}),e.jsxs("div",{className:"flex items-center justify-between gap-2 mb-1",children:[e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[q?e.jsxs("a",{href:q,target:"_blank",rel:"noopener noreferrer",className:"text-admin-accent hover:underline text-sm font-medium truncate",children:["@",i]}):e.jsxs("span",{className:"text-admin-text text-sm truncate",children:["@",i]}),a&&a!=="-"&&e.jsx(ke,{variant:"outline",className:M("font-bold text-[11px] px-2 py-0 shrink-0",fe),children:a})]}),e.jsx("div",{className:"flex items-center gap-2 shrink-0",children:e.jsx("button",{onClick:()=>{const Y=m.indexOf("Ï¶êÍ≤®Ï∞æÍ∏∞");Y!==-1&&p(t._rowIndex,Y,h?"FALSE":"TRUE")},children:e.jsx(me,{className:M("h-4 w-4 transition-colors",h?"fill-amber-400 text-amber-400":"text-admin-text/30 hover:text-amber-400/60")})})})]}),e.jsxs("div",{className:"flex items-baseline gap-2 mb-2",children:[e.jsx("span",{className:"text-white text-[13px] font-medium truncate",children:r}),l&&l!=="-"&&e.jsx("span",{className:"text-[11px] text-admin-purple shrink-0",children:l}),b&&b!=="-"&&b!==l&&e.jsx("span",{className:"text-[11px] text-admin-text/50 shrink-0",children:b})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-1 mb-1",children:[e.jsxs("div",{className:"bg-admin-bg/40 rounded px-2 py-1.5 text-center",children:[e.jsx("p",{className:"text-[10px] text-admin-text/60 mb-0.5",children:"ÌåîÎ°úÏõå"}),e.jsx("p",{className:"text-[13px] text-white tabular-nums font-medium",children:_&&_!=="-"?A(_):"-"})]}),e.jsxs("div",{className:"bg-admin-bg/40 rounded px-2 py-1.5 text-center",children:[e.jsx("p",{className:"text-[10px] text-admin-text/60 mb-0.5",children:"ÌèâÍ∑†Ï°∞Ìöå"}),e.jsx("p",{className:"text-[13px] text-white tabular-nums font-medium",children:o&&o!=="-"?A(o):"-"})]}),e.jsxs("div",{className:"bg-admin-bg/40 rounded px-2 py-1.5 text-center",children:[e.jsx("p",{className:"text-[10px] text-admin-text/60 mb-0.5",children:"ÏµúÎåÄÏ°∞Ìöå"}),e.jsx("p",{className:"text-[13px] text-white tabular-nums font-medium",children:j&&j!=="-"?A(j):"-"})]}),e.jsxs("div",{className:"bg-admin-bg/40 rounded px-2 py-1.5 text-center",children:[e.jsx("p",{className:"text-[10px] text-admin-text/60 mb-0.5",children:"ÌèâÍ∑†ÎåìÍ∏Ä"}),e.jsx("p",{className:"text-[13px] text-white tabular-nums font-medium",children:F&&F!=="-"?A(F):"-"})]})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-1 mb-2",children:[e.jsxs("div",{className:"bg-admin-bg/40 rounded px-2 py-1.5 text-center",children:[e.jsx("p",{className:"text-[10px] text-admin-text/60 mb-0.5",children:"Í≥µÍµ¨ÌèâÍ∑†üí¨"}),e.jsx("p",{className:"text-[13px] text-white tabular-nums font-medium",children:te&&te!=="-"?A(te):"-"})]}),e.jsxs("div",{className:"bg-admin-bg/40 rounded px-2 py-1.5 text-center",children:[e.jsx("p",{className:"text-[10px] text-admin-text/60 mb-0.5",children:"Í≥µÍµ¨ÏµúÎåÄüí¨"}),e.jsx("p",{className:"text-[13px] text-white tabular-nums font-medium",children:se&&se!=="-"?A(se):"-"})]}),ae&&ae!=="-"&&e.jsxs("div",{className:"bg-admin-bg/40 rounded px-2 py-1.5 text-center",children:[e.jsx("p",{className:"text-[10px] text-admin-text/60 mb-0.5",children:"ÎßàÏßÄÎßâÍ≤åÏãúÎ¨º"}),e.jsx("p",{className:"text-[11px] text-white/80",children:ae})]}),ne&&ne!=="-"&&e.jsxs("div",{className:"bg-admin-bg/40 rounded px-2 py-1.5 text-center",children:[e.jsx("p",{className:"text-[10px] text-admin-text/60 mb-0.5",children:"ÏóÖÎç∞Ïù¥Ìä∏"}),e.jsx("p",{className:"text-[11px] text-white/80",children:ne})]})]}),e.jsxs("div",{className:"flex items-center justify-between gap-2 mb-2",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(Me,{className:"h-3 w-3 text-admin-text/60"}),e.jsx("span",{className:"text-[11px] text-admin-text/60",children:"Î©§Î≤ÑÏàò"}),de?e.jsx("input",{type:"text",value:I,onChange:Y=>O(Y.target.value),onBlur:()=>$(t._rowIndex,"Í≥µÏßÄÏ±ÑÎÑê Î©§Î≤ÑÏàò"),onKeyDown:Y=>H(Y,t._rowIndex,"Í≥µÏßÄÏ±ÑÎÑê Î©§Î≤ÑÏàò"),autoFocus:!0,className:"w-16 px-1.5 py-0.5 bg-admin-bg border border-admin-accent rounded text-white text-right text-[12px] focus:outline-none"}):e.jsx("button",{onClick:()=>X(t._rowIndex,"Í≥µÏßÄÏ±ÑÎÑê Î©§Î≤ÑÏàò",W),className:"text-[12px] text-admin-accent/80 hover:text-admin-accent tabular-nums border-b border-dashed border-admin-border hover:border-admin-accent/50 transition-colors",children:W&&W!=="-"?A(W):"0"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[be==="ON"&&e.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded-full bg-admin-success/15 text-admin-success border border-admin-success/30",children:"Ïä§ÌÜ†Î¶¨"}),(ce==="Y"||ce==="O")&&e.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded-full bg-teal-500/15 text-teal-400 border border-teal-500/30",children:"ÏÜåÌÜµ"}),(oe==="Y"||oe==="O")&&e.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded-full bg-purple-500/15 text-purple-400 border border-purple-500/30",children:"ÎåìÍ∏Ä"})]})]}),n&&n!=="-"?e.jsx("button",{onClick:()=>f(t._rowIndex,n,r),className:"w-full text-left group/memo",children:e.jsxs("div",{className:"bg-admin-bg/50 rounded px-2.5 py-1.5 flex items-start gap-2",children:[e.jsx(Se,{className:"h-3 w-3 text-admin-text mt-0.5 shrink-0"}),e.jsx("p",{className:"text-[12px] text-white/70 whitespace-pre-wrap break-words line-clamp-2 flex-1",children:n}),e.jsx(Ce,{className:"h-3 w-3 text-admin-accent opacity-0 group-hover/memo:opacity-100 transition-opacity shrink-0 mt-0.5"})]})}):e.jsx("button",{onClick:()=>f(t._rowIndex,"",r),className:"w-full text-left",children:e.jsxs("div",{className:"bg-admin-bg/50 rounded px-2.5 py-1.5 flex items-center gap-2 text-admin-text/40 hover:text-admin-text/60 transition-colors",children:[e.jsx(Se,{className:"h-3 w-3 shrink-0"}),e.jsx("span",{className:"text-[12px]",children:"Î©îÎ™® Ï∂îÍ∞Ä..."})]})})]},t._rowIndex)})}),Z=()=>{P.current||(P.current=!0,C.current&&z.current&&(z.current.scrollLeft=C.current.scrollLeft),requestAnimationFrame(()=>{P.current=!1}))},le=()=>{P.current||(P.current=!0,C.current&&z.current&&(C.current.scrollLeft=z.current.scrollLeft),requestAnimationFrame(()=>{P.current=!1}))},ee=s.useMemo(()=>e.jsxs("colgroup",{children:[x==="select"&&e.jsx("col",{style:{width:40}}),k.map(t=>e.jsx("col",{style:{width:S.pctWidths[t]}},t))]}),[x,k,S.pctWidths]);return e.jsxs(e.Fragment,{children:[U(),e.jsxs("div",{className:"hidden md:block",children:[e.jsx("div",{className:"sticky z-40 border border-admin-border border-b-0 rounded-t-lg bg-[#14142a]",style:{top:g},children:e.jsx("div",{ref:C,className:"overflow-x-auto",style:{scrollbarWidth:"none"},onScroll:Z,children:e.jsxs("table",{className:"w-full text-sm border-collapse",style:{minWidth:S.total,tableLayout:"fixed"},children:[ee,e.jsx("thead",{children:e.jsxs("tr",{className:"bg-[#14142a]",children:[x==="select"&&e.jsx("th",{className:"px-2 py-2.5 text-center w-10"}),k.map((t,i)=>{const r=Q[t],a=i<re,l=i===re-1;return e.jsx("th",{style:a?{left:S.stickyOffsets[i]}:void 0,className:M("px-2.5 py-2.5 text-[11px] uppercase tracking-wider text-admin-text/70 font-semibold border-r border-admin-border/50 last:border-r-0 group/th",a&&"sticky z-40 bg-[#14142a]",l&&"shadow-[3px_0_8px_rgba(0,0,0,0.35)] border-r-admin-border",r?.align==="center"&&"text-center",r?.align==="right"&&"text-right"),children:e.jsxs("button",{onClick:()=>pe(t),className:"flex items-center gap-1 w-full hover:text-white transition-colors",children:[e.jsx("span",{className:"whitespace-nowrap",children:r?.label||t}),e.jsx(Xe,{column:t,sortConfig:w})]})},t)})]})})]})})}),e.jsx("div",{className:"border border-admin-border border-t-0 rounded-b-lg overflow-hidden",children:e.jsx("div",{ref:z,className:"overflow-auto",style:{maxHeight:"calc(100vh - 220px)"},onScroll:le,children:e.jsxs("table",{className:"w-full text-sm border-collapse",style:{minWidth:S.total,tableLayout:"fixed"},children:[ee,e.jsx("tbody",{children:L.map((t,i)=>{const r=String(t.Ïù∏Ïä§ÌÉÄID||""),a=d===r;return e.jsxs("tr",{"data-insta-id":r,onClick:x==="select"&&!y?.has(r)?()=>R?.(t):void 0,className:M("border-b border-admin-border/40 transition-colors duration-500",x==="select"&&y?.has(r)&&"opacity-30 cursor-not-allowed",x==="select"&&!y?.has(r)&&"cursor-pointer",x==="select"&&E?.has(r)?"bg-amber-500/[0.07]":a?"bg-admin-accent/10 ring-1 ring-admin-accent/40":i%2===0?"bg-[#11111f]":"bg-[#151528]","hover:bg-white/[0.02]"),children:[x==="select"&&(()=>{const l=String(t.Ïù∏Ïä§ÌÉÄID||""),b=E?.has(l),_=y?.has(l);return e.jsx("td",{className:"px-2 py-2 text-center align-top",children:e.jsx("div",{className:M("w-5 h-5 rounded border flex items-center justify-center mx-auto",_?"border-[#2a2a3a] bg-[#1a1a2a] opacity-30":b?"bg-amber-500 border-amber-500":"border-[#3a3a4a] bg-transparent"),children:b&&e.jsx(we,{className:"h-3 w-3 text-black",strokeWidth:3})})})})(),k.map((l,b)=>{const _=Q[l],o=b<re,j=b===re-1,F=i%2===0?"#11111f":"#151528";return e.jsx("td",{style:o?{left:S.stickyOffsets[b],backgroundColor:F}:void 0,className:M("px-2.5 py-2 text-white border-r border-admin-border/30 last:border-r-0 align-top",o&&"sticky z-30",j&&"shadow-[3px_0_8px_rgba(0,0,0,0.35)] border-r-admin-border/60",_?.align==="center"&&"text-center",_?.align==="right"&&"text-right",_?.highlight&&"font-semibold"),children:ie(t,l,t._rowIndex)},l)})]},t._rowIndex)})})]})})})]})]})}const et=s.memo(Ze),tt=s.lazy(()=>ue(()=>import("./GradeConfigModal-CzW901_u.js"),__vite__mapDeps([0,1,2,3,4,5,6]))),st=s.lazy(()=>ue(()=>import("./ColumnSettingsPanel-CEJ0QQs9.js"),__vite__mapDeps([7,1,2,4,5,6]))),at=s.lazy(()=>ue(()=>import("./MemoEditModal-owec7Bl4.js"),__vite__mapDeps([8,1,2,3,4,5,6]))),nt=s.lazy(()=>ue(()=>import("./AnalyzerDrawer-CLXnoxUY.js"),__vite__mapDeps([9,1,2,6,5,4,10,11]))),rt=["2Ï£º Ï¥àÍ≥º","ÏóÜÏùå"];function ht(){const{data:u,isLoading:m,error:N}=Ee(),p=De(),f=Ie(),{data:d}=Le(),g=ze(),{data:x}=Ae(),E=Re(),{data:y}=Te(),R=s.useRef(null),[w,T]=s.useState(0);s.useEffect(()=>{const n=R.current;if(!n)return;const c=new ResizeObserver(()=>{T(n.offsetHeight)});return c.observe(n),()=>c.disconnect()},[]);const[v,D]=s.useState(""),[I,O]=s.useState([]),[k,S]=s.useState([]),[L,C]=s.useState([]),[z,P]=s.useState(!1),[pe,J]=s.useState(!1),[$,H]=s.useState(!1),[ie,X]=s.useState(!1),[U,Z]=s.useState({isOpen:!1,rowIndex:-1,value:"",name:""}),[le,ee]=s.useState(null),[t,i]=s.useState(!1);s.useEffect(()=>{const n=c=>{c.data?.type==="ig-analyzer-result"&&c.data.payload&&(ee(c.data.payload),i(!0))};return window.addEventListener("message",n),()=>window.removeEventListener("message",n)},[]),s.useEffect(()=>{const n=window.location.hash;if(n.startsWith("#analyzer="))try{const c=n.slice(10),h=JSON.parse(decodeURIComponent(c));h.username&&h.profile&&(ee(h),i(!0),history.replaceState(null,"",window.location.pathname))}catch{}},[]);const r=s.useMemo(()=>u?.data??[],[u?.data]),a=u?.headers||[],l=u?.fromCache??!1,b=s.useMemo(()=>d?.columns?d.columns.filter(n=>n.visible).map(n=>n.name):ge.filter(n=>!je.includes(n)),[d]),_=s.useMemo(()=>{const n=new Set;return r.forEach(c=>{const h=c["Ïπ¥ÌÖåÍ≥†Î¶¨(ÎåÄ)"];h&&h!=="-"&&n.add(h)}),Array.from(n).sort()},[r]),o=rt,j=s.useMemo(()=>r.filter(n=>{if(z&&String(n.Ï¶êÍ≤®Ï∞æÍ∏∞||"").trim().toUpperCase()!=="TRUE")return!1;if(v){const c=v.toLowerCase(),h=String(n.Ïù∏Ïä§ÌÉÄID||"").toLowerCase(),q=String(n["Ïù∏Ïä§ÌÉÄ Ïù¥Î¶Ñ"]||"").toLowerCase();if(!h.includes(c)&&!q.includes(c))return!1}if(I.length>0){const c=n["Ïπ¥ÌÖåÍ≥†Î¶¨(ÎåÄ)"];if(!I.includes(c))return!1}if(k.length>0){const c=n["Ïù∏ÌîåÎ£®Ïñ∏ÏÑú Îì±Í∏â"];if(!k.includes(c))return!1}if(L.length>0){const c=String(n.ÏóÖÎç∞Ïù¥Ìä∏ÏùºÏûê||"").trim(),h=!c||c==="-",q=Date.now(),fe=336*60*60*1e3,de=!h&&q-new Date(c).getTime()>fe,B=L.includes("2Ï£º Ï¥àÍ≥º"),V=L.includes("ÏóÜÏùå");if(B&&V){if(!de&&!h)return!1}else if(B){if(!de)return!1}else if(V&&!h)return!1}return!0}),[r,v,I,k,L,z]),F=s.useCallback(()=>{p.mutate()},[p]),te=s.useCallback((n,c,h)=>{f.mutate({rowIndex:n,columnIndex:c,value:h})},[f]),se=s.useCallback((n,c,h)=>{Z({isOpen:!0,rowIndex:n,value:c,name:h})},[]),ae=s.useCallback(n=>{const c=a.indexOf("Î©îÎ™®");c!==-1&&f.mutate({rowIndex:U.rowIndex,columnIndex:c,value:n}),Z({isOpen:!1,rowIndex:-1,value:"",name:""})},[a,U.rowIndex,f]),ne=s.useCallback(n=>{g.mutate(n),X(!1)},[g]),W=s.useCallback((n,c)=>{E.mutate({grades:n,applyFormula:c}),H(!1)},[E]),be=s.useCallback(n=>{s.startTransition(()=>{D(n)})},[]),ce=s.useCallback(()=>H(!0),[]),oe=s.useCallback(()=>X(!0),[]);return N?e.jsx("div",{className:"max-w-[1800px] mx-auto mt-8",children:e.jsxs("div",{className:"bg-admin-error/20 border border-admin-error/40 rounded-lg p-6 text-center",children:[e.jsx("p",{className:"text-admin-error font-semibold",children:"Îç∞Ïù¥ÌÑ∞Î•º Î∂àÎü¨Ïò§ÎäîÎç∞ Ïã§Ìå®ÌñàÏäµÎãàÎã§"}),e.jsx("p",{className:"text-admin-text text-sm mt-2",children:String(N)}),e.jsx(G,{onClick:F,className:"mt-4",children:"Îã§Ïãú ÏãúÎèÑ"})]})}):e.jsxs("div",{className:"max-w-[1800px] mx-auto mt-4 md:mt-8",children:[e.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl md:text-2xl font-bold text-white mb-1 md:mb-2",children:"Ïù∏ÌîåÎ£®Ïñ∏ÏÑú Í¥ÄÎ¶¨"}),y&&e.jsxs("div",{className:"flex items-center gap-4 text-xs text-admin-text",children:[e.jsxs("span",{children:["Cache: ",l?"KV":"API"]}),e.jsxs("span",{children:["Quota: ",y.quotaUsed," / 100"]}),e.jsxs("span",{children:["Hits: ",y.cacheHits," / Misses: ",y.cacheMisses]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(G,{onClick:ce,variant:"outline",className:"bg-transparent border-admin-border text-white hover:bg-admin-bg",children:[e.jsx(Ye,{className:"h-4 w-4 md:mr-2"}),e.jsx("span",{className:"hidden md:inline",children:"Îì±Í∏â ÏÑ§Ï†ï"})]}),e.jsxs(G,{onClick:oe,variant:"outline",className:"bg-transparent border-admin-border text-white hover:bg-admin-bg",children:[e.jsx(qe,{className:"h-4 w-4 md:mr-2"}),e.jsx("span",{className:"hidden md:inline",children:"Ïª¨Îüº ÏÑ§Ï†ï"})]})]})]}),e.jsx("div",{ref:R,className:"sticky top-0 z-50 bg-admin-bg py-2 md:pt-2 md:pb-4 -mx-3 px-3 md:-mx-6 md:px-6 shadow-[0_4px_12px_rgba(0,0,0,0.3)]",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx(Qe,{searchQuery:v,onSearchChange:be,categoryOptions:_,selectedCategories:I,onCategoriesChange:O,selectedGrades:k,onGradesChange:S,updateStatusOptions:o,selectedUpdateStatus:L,onUpdateStatusChange:C,resultCount:j.length,totalCount:r.length,showFavoritesOnly:z,onFavoritesToggle:()=>P(n=>!n)})}),e.jsx(G,{onClick:()=>J(!0),variant:"outline",size:"sm",className:"hidden md:flex bg-transparent border-admin-border text-white hover:bg-admin-bg shrink-0",children:e.jsx(He,{className:"h-4 w-4"})}),e.jsx(G,{onClick:F,disabled:p.isPending,variant:"outline",size:"sm",className:"bg-transparent border-admin-border text-white hover:bg-admin-bg shrink-0",children:e.jsx(Ge,{className:`h-4 w-4 ${p.isPending?"animate-spin":""}`})})]})}),m?e.jsx("div",{className:"flex items-center justify-center h-64 bg-admin-card rounded-lg border border-admin-border",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-admin-accent mx-auto mb-4"}),e.jsx("p",{className:"text-admin-text",children:"Îç∞Ïù¥ÌÑ∞Î•º Î∂àÎü¨Ïò§Îäî Ï§ë..."})]})}):e.jsx(et,{data:j,headers:a,visibleColumns:b,onCellEdit:te,onMemoEdit:se,highlightId:t?le?.username??null:null,stickyTopOffset:w}),$&&e.jsx(s.Suspense,{fallback:null,children:e.jsx(tt,{isOpen:$,onClose:()=>H(!1),grades:x?.grades||[],onSave:W,isSaving:E.isPending})}),ie&&e.jsx(s.Suspense,{fallback:null,children:e.jsx(st,{isOpen:ie,onClose:()=>X(!1),columns:d?.columns||ge.filter(n=>!je.includes(n)).map(n=>({name:n,visible:!0})),onSave:ne,isSaving:g.isPending})}),U.isOpen&&e.jsx(s.Suspense,{fallback:null,children:e.jsx(at,{isOpen:U.isOpen,onClose:()=>Z({isOpen:!1,rowIndex:-1,value:"",name:""}),initialValue:U.value,onSave:ae,influencerName:U.name})}),t&&e.jsx(s.Suspense,{fallback:null,children:e.jsx(nt,{payload:le,isOpen:t,onClose:()=>i(!1)})}),pe&&e.jsx(it,{ids:j.map(n=>String(n.Ïù∏Ïä§ÌÉÄID||"")).filter(Boolean),onClose:()=>J(!1)})]})}function it({ids:u,onClose:m}){const[N,p]=s.useState(!1),f=u.join(`
`);s.useEffect(()=>{const g=x=>{x.key==="Escape"&&m()};return document.addEventListener("keydown",g),()=>document.removeEventListener("keydown",g)},[m]);const d=()=>{navigator.clipboard.writeText(f).then(()=>{p(!0),setTimeout(()=>p(!1),2e3)})};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-[9998] bg-black/50",onClick:m}),e.jsxs("div",{className:"fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-[9999] w-[400px] max-h-[70vh] bg-admin-bg border border-admin-border rounded-lg flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-admin-border",children:[e.jsxs("h2",{className:"text-white font-semibold text-sm",children:["ID Ï∂îÏ∂ú (",u.length,"Í∞ú)"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(G,{size:"sm",variant:"outline",onClick:d,className:"bg-transparent border-admin-border text-white hover:bg-admin-card text-xs",children:N?"Î≥µÏÇ¨Îê®!":"Î≥µÏÇ¨"}),e.jsx(G,{size:"icon-sm",variant:"ghost",onClick:m,className:"text-admin-text hover:text-white hover:bg-admin-card",children:e.jsx("span",{className:"text-lg leading-none",children:"√ó"})})]})]}),e.jsx("textarea",{readOnly:!0,value:f,className:"flex-1 min-h-[200px] max-h-[50vh] p-4 bg-transparent text-white text-[13px] font-mono leading-relaxed resize-none focus:outline-none"})]})]})}export{ht as default};
